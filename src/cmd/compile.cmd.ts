"use strict";
// compile.cmd.civet

import {assert, croak, isArray} from 'datatypes'
import {pass} from 'llutils'
import {OL} from 'to-nice'
import {getCmdArgs} from 'cmd-args'
import {watchFiles, allFilesMatching} from 'fsys'
import {DBG, LOG, WARN, ERR} from 'logger'
import {compileFile, TCompileResult} from 'automate'

const [hArgs, lNonOptions] = getCmdArgs({
	_: `files to compile, as one of the following:
	'<stub>.lib'  - file <stub>.lib.<ext>
	'<stub>.cmd'  - file <stub>.cmd.<ext>
	'<stub>.lib.test'  - file <stub>.lib.test.<ext>
	'<stub>.cmd.test'  - file <stub>.cmd.test.<ext>
	- a full or relative file path
where <ext> is a valid extension to compile`,
	w:    "watch for and recompile files if they change"
	})

const {watch} = hArgs
let numCompiled = 0

// ---------------------------------------------------------------------------

const logResult = (hResult: TCompileResult): void => {

	const {path, status} = hResult
	switch(status) {
		case 'compiled': {
			LOG(`COMPILED: ${OL(path)}`)
			numCompiled += 1;break;
		}
		case 'exists': {
			pass();break;
		}
		default: {
			ERR(`NOT COMPILED: ${OL(path)}`)
		}
	}
	return
}

// ---------------------------------------------------------------------------

if (lNonOptions.length === 0) {
	DBG("=====  Compiling all files  =====")
	for (const {path} of allFilesMatching('**/*.{lib,cmd}.civet')) {
		const hResult = compileFile(path)
		logResult(hResult)
	}
}
else {
	// --- Files can be specified as:
	//        - <stub>.(lib|cmd)
	//        - <stub>.(lib|cmd).test
	//        - a full or relative path
	//     Multiple files can be comma-separated

	for (const str of lNonOptions) {
		DBG(`non-option: ${OL(str)}`)
		for (const item of str.split(',')) {const str: string = item;
			let ref;let ref1;if ((ref = str.match(/^([A-Za-z0-9_-]+)\.(lib|cmd)$/))) {const lMatches = ref;
				const [_, stub, purpose] = lMatches
				const pat = `**/${stub}.${purpose}.*`
				for (const {path} of allFilesMatching(pat)) {
					DBG(`compile file ${OL(path)}`)
					logResult(compileFile(path))
				}
			}
			else if ((ref1 = str.match(/^([A-Za-z0-9_-]+)\.(lib|cmd)\.test$/))) {const lMatches = ref1;
				const [_, stub, purpose] = lMatches
				const pat = `**/${stub}.${purpose}.test.*`
				for (const {path} of allFilesMatching(pat)) {
					DBG(`compile file ${OL(path)}`)
					logResult(compileFile(path))
				}
			}
			else {
				DBG(`compile file ${OL(str)}`)
				logResult(compileFile(str))
			}
		}
	}
}

LOG(`(${numCompiled} files compiled)`)

if (watch) {
	watchFiles(Deno.cwd(), (kind, path) => {
		console.log(`EVENT: ${kind} ${OL(path)}`)
		return false
	})
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQzpcXFVzZXJzXFxqb2huZFxcdXRpbHNcXHNyY1xcY21kXFxjb21waWxlLmNtZC5jaXZldC50c3giLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcam9obmRcXHV0aWxzXFxzcmNcXGNtZFxcY29tcGlsZS5jbWQuY2l2ZXQiXSwibWFwcGluZ3MiOiI7QUFBQSxvQkFBbUI7QUFDbkIsQUFBQTtBQUNBLEFBQUEsTUFBTSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLFdBQVc7QUFDaEQsQUFBQSxBQUFBLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTO0FBQzVCLEFBQUEsQUFBQSxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUztBQUMxQixBQUFBLEFBQUEsTUFBTSxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVU7QUFDbkMsQUFBQSxBQUFBLE1BQU0sQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLGdCQUFnQixDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU07QUFDakQsQUFBQSxBQUFBLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRO0FBQzFDLEFBQUEsQUFBQSxNQUFNLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVTtBQUNwRCxBQUFBO0FBQ0EsQUFBQSxBQUFvQixNQUFwQixDQUFDLEtBQUssQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUUsQ0FBQyxVQUFVLENBQUEsQUFBQyxDQUFDO0FBQ3BDLEFBQUEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFHO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUVFLENBQUcsQ0FBQTtBQUNMLEFBQUEs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aXZldFxyXG5cclxuaW1wb3J0IHthc3NlcnQsIGNyb2FrLCBpc0FycmF5fSBmcm9tICdkYXRhdHlwZXMnXHJcbmltcG9ydCB7cGFzc30gZnJvbSAnbGx1dGlscydcclxuaW1wb3J0IHtPTH0gZnJvbSAndG8tbmljZSdcclxuaW1wb3J0IHtnZXRDbWRBcmdzfSBmcm9tICdjbWQtYXJncydcclxuaW1wb3J0IHt3YXRjaEZpbGVzLCBhbGxGaWxlc01hdGNoaW5nfSBmcm9tICdmc3lzJ1xyXG5pbXBvcnQge0RCRywgTE9HLCBXQVJOLCBFUlJ9IGZyb20gJ2xvZ2dlcidcclxuaW1wb3J0IHtjb21waWxlRmlsZSwgVENvbXBpbGVSZXN1bHR9IGZyb20gJ2F1dG9tYXRlJ1xyXG5cclxuW2hBcmdzLCBsTm9uT3B0aW9uc10gOj0gZ2V0Q21kQXJncyB7XHJcblx0XzogXCJcIlwiXHJcblx0XHRmaWxlcyB0byBjb21waWxlLCBhcyBvbmUgb2YgdGhlIGZvbGxvd2luZzpcclxuXHRcdFx0JzxzdHViPi5saWInICAtIGZpbGUgPHN0dWI+LmxpYi48ZXh0PlxyXG5cdFx0XHQnPHN0dWI+LmNtZCcgIC0gZmlsZSA8c3R1Yj4uY21kLjxleHQ+XHJcblx0XHRcdCc8c3R1Yj4ubGliLnRlc3QnICAtIGZpbGUgPHN0dWI+LmxpYi50ZXN0LjxleHQ+XHJcblx0XHRcdCc8c3R1Yj4uY21kLnRlc3QnICAtIGZpbGUgPHN0dWI+LmNtZC50ZXN0LjxleHQ+XHJcblx0XHRcdC0gYSBmdWxsIG9yIHJlbGF0aXZlIGZpbGUgcGF0aFxyXG5cdFx0d2hlcmUgPGV4dD4gaXMgYSB2YWxpZCBleHRlbnNpb24gdG8gY29tcGlsZVxyXG5cdFx0XCJcIlwiXHJcblx0dzogICAgXCJ3YXRjaCBmb3IgYW5kIHJlY29tcGlsZSBmaWxlcyBpZiB0aGV5IGNoYW5nZVwiXHJcblx0fVxyXG5cclxue3dhdGNofSA6PSBoQXJnc1xyXG5sZXQgbnVtQ29tcGlsZWQgPSAwXHJcblxyXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxubG9nUmVzdWx0IDo9IChoUmVzdWx0OiBUQ29tcGlsZVJlc3VsdCk6IHZvaWQgPT5cclxuXHJcblx0e3BhdGgsIHN0YXR1c30gOj0gaFJlc3VsdFxyXG5cdHN3aXRjaCBzdGF0dXNcclxuXHRcdHdoZW4gJ2NvbXBpbGVkJ1xyXG5cdFx0XHRMT0cgXCJDT01QSUxFRDogI3tPTChwYXRoKX1cIlxyXG5cdFx0XHRudW1Db21waWxlZCArPSAxXHJcblx0XHR3aGVuICdleGlzdHMnXHJcblx0XHRcdHBhc3MoKVxyXG5cdFx0ZWxzZVxyXG5cdFx0XHRFUlIgXCJOT1QgQ09NUElMRUQ6ICN7T0wocGF0aCl9XCJcclxuXHRyZXR1cm5cclxuXHJcbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5pZiAobE5vbk9wdGlvbnMubGVuZ3RoID09IDApXHJcblx0REJHIFwiPT09PT0gIENvbXBpbGluZyBhbGwgZmlsZXMgID09PT09XCJcclxuXHRmb3Ige3BhdGh9IG9mIGFsbEZpbGVzTWF0Y2hpbmcoJyoqLyoue2xpYixjbWR9LmNpdmV0JylcclxuXHRcdGhSZXN1bHQgOj0gY29tcGlsZUZpbGUgcGF0aFxyXG5cdFx0bG9nUmVzdWx0IGhSZXN1bHRcclxuZWxzZVxyXG5cdCMgLS0tIEZpbGVzIGNhbiBiZSBzcGVjaWZpZWQgYXM6XHJcblx0IyAgICAgICAgLSA8c3R1Yj4uKGxpYnxjbWQpXHJcblx0IyAgICAgICAgLSA8c3R1Yj4uKGxpYnxjbWQpLnRlc3RcclxuXHQjICAgICAgICAtIGEgZnVsbCBvciByZWxhdGl2ZSBwYXRoXHJcblx0IyAgICAgTXVsdGlwbGUgZmlsZXMgY2FuIGJlIGNvbW1hLXNlcGFyYXRlZFxyXG5cclxuXHRmb3Igc3RyIG9mIGxOb25PcHRpb25zXHJcblx0XHREQkcgXCJub24tb3B0aW9uOiAje09MKHN0cil9XCJcclxuXHRcdGZvciBzdHI6IHN0cmluZyBvZiBzdHIuc3BsaXQoJywnKVxyXG5cdFx0XHRpZiBsTWF0Y2hlcyA6PSBzdHIubWF0Y2goLy8vXlxyXG5cdFx0XHRcdFx0KFtBLVphLXowLTlfLV0rKVxyXG5cdFx0XHRcdFx0XFwuXHJcblx0XHRcdFx0XHQobGlifGNtZClcclxuXHRcdFx0XHRcdCQvLy8pXHJcblx0XHRcdFx0W18sIHN0dWIsIHB1cnBvc2VdIDo9IGxNYXRjaGVzXHJcblx0XHRcdFx0cGF0IDo9IFwiKiovI3tzdHVifS4je3B1cnBvc2V9LipcIlxyXG5cdFx0XHRcdGZvciB7cGF0aH0gb2YgYWxsRmlsZXNNYXRjaGluZyhwYXQpXHJcblx0XHRcdFx0XHREQkcgXCJjb21waWxlIGZpbGUgI3tPTChwYXRoKX1cIlxyXG5cdFx0XHRcdFx0bG9nUmVzdWx0IGNvbXBpbGVGaWxlKHBhdGgpXHJcblx0XHRcdGVsc2UgaWYgbE1hdGNoZXMgOj0gc3RyLm1hdGNoKC8vL15cclxuXHRcdFx0XHRcdChbQS1aYS16MC05Xy1dKylcclxuXHRcdFx0XHRcdFxcLlxyXG5cdFx0XHRcdFx0KGxpYnxjbWQpXHJcblx0XHRcdFx0XHRcXC5cclxuXHRcdFx0XHRcdHRlc3RcclxuXHRcdFx0XHRcdCQvLy8pXHJcblx0XHRcdFx0W18sIHN0dWIsIHB1cnBvc2VdIDo9IGxNYXRjaGVzXHJcblx0XHRcdFx0cGF0IDo9IFwiKiovI3tzdHVifS4je3B1cnBvc2V9LnRlc3QuKlwiXHJcblx0XHRcdFx0Zm9yIHtwYXRofSBvZiBhbGxGaWxlc01hdGNoaW5nKHBhdClcclxuXHRcdFx0XHRcdERCRyBcImNvbXBpbGUgZmlsZSAje09MKHBhdGgpfVwiXHJcblx0XHRcdFx0XHRsb2dSZXN1bHQgY29tcGlsZUZpbGUocGF0aClcclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHRcdERCRyBcImNvbXBpbGUgZmlsZSAje09MKHN0cil9XCJcclxuXHRcdFx0XHRsb2dSZXN1bHQgY29tcGlsZUZpbGUoc3RyKVxyXG5cclxuTE9HIFwiKCN7bnVtQ29tcGlsZWR9IGZpbGVzIGNvbXBpbGVkKVwiXHJcblxyXG5pZiB3YXRjaFxyXG5cdHdhdGNoRmlsZXMgRGVuby5jd2QoKSwgKGtpbmQsIHBhdGgpID0+XHJcblx0XHRjb25zb2xlLmxvZyBcIkVWRU5UOiAje2tpbmR9ICN7T0wocGF0aCl9XCJcclxuXHRcdHJldHVybiBmYWxzZVxyXG4iXX0=