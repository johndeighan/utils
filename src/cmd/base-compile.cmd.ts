"use strict";
// base-compile.cmd.civet

type AutoPromise<T> = Promise<Awaited<T>>;
import {relative, parse} from 'node:path'
import {existsSync} from 'jsr:@std/fs'
import {statSync} from 'node:fs'

import {
	croak, assert, flag, checkSetup,
	parsePath, relpath, LOG, LLOG,
	undef, defined, notdefined, procFiles,
	cmdSucceeds, newerDestFileExists, execCmd,
	} from 'base-utils'

checkSetup()

// ---------------------------------------------------------------------------

const verbose = flag('v')
if (verbose) {
	LOG(`verbose = ${verbose}`)
}

const clearFirst = flag('c')
if (verbose) {
	LOG(`clearFirst = ${clearFirst}`)
}

// ---------------------------------------------------------------------------
//     CONFIGURATION
// ---------------------------------------------------------------------------

type TCmdDesc = [string, string[]]
type TConfig = {[ext: string]: TCmdDesc}
const hConfig: TConfig = {}

if (cmdSucceeds('civet', ['--version'])) {
	hConfig['.civet'] = [
		'deno',
		[
			'run',
			'-A',
			'npm:@danielx/civet',
			'--inline-map',
			'-o', '.ts',
			'-c', '%PATH'
			]
		]
}

if (cmdSucceeds('coffee', ['--version'])) {
	hConfig['.coffee'] = [
		'deno',
		[
			'run',
			'-A',
			'npm:@danielx/civet',
			'--inline-map',
			'-c', '%PATH'
			]
		]
}

const lExt = Object.keys(hConfig)
if (lExt.length === 0) {
	croak("No TypeScript generating functions installed")
}

LOG(`Handling ${lExt.length} TypeScript generating functions`)
const extPat = '{' + (lExt.map((x) => x.substring(1)).join(',')) + '}'
LOG(`extPat is '${extPat}'`)

// ---------------------------------------------------------------------------

const getHandler = (
		ext: string
		): TCmdDesc => {

	if (!hConfig.hasOwnProperty(ext)) {
		croak(`Can't handle ${ext}`)
	}
	return hConfig[ext]
}

// ---------------------------------------------------------------------------
// ---------------------------------------------------------------------------
//
// 1. If the '-c' flag is used, remove all:
//    - *.ts files except:
//         base-utils.lib.ts
//         base-compile.cmd.ts
//    - *.temp.* files
//    - log files
// 2. compile all *.civet or *.coffee files
//      unless a newer *.ts file exists
// 3. run all unit tests, i.e. *.test.ts files

// ---------------------------------------------------------------------------
// ASYNC
//
// --- Throws exception if compile fails
//     returns path if file actually compiled, else undef

const compileOneFile = async (
		path: string
		): Promise<(string | undefined)> => {

	const {ext} = parsePath(path)
	if ((ext === '.ts') || newerDestFileExists(path, '.ts')) {
		return Promise.resolve(undef)
	}  // --- compile not needed

	const [cmdName, lArgs] = getHandler(ext)
	LLOG('COMPILE', relpath(path))
	const {success} = await execCmd(cmdName, lArgs, {'%PATH': path})
	if (!success) {
		croak(`Compile of ${path} failed`)
	}
	return Promise.resolve(path)
}

// ---------------------------------------------------------------------------
// ASYNC

const compileFiles = async (
		lPatterns: string | string[]
		): AutoPromise<string[]> => {

	const [hCompiled, hFailed] = await procFiles(lPatterns, compileOneFile)
	if (defined(hFailed)) {
		// --- check if any compilations failed
		const lBadPaths = Object.keys(hFailed)
		if (lBadPaths.length > 0) {
			LOG("FAILED TO COMPILE:")
			for (const path of lBadPaths) {
				LOG(`   ${path}`)
			}
			Deno.exit(99)
		}
	}
	return Object.keys(hCompiled).filter((x) => defined(x))
}

// ---------------------------------------------------------------------------
// ASYNC
//
// --- Throws exception if test fails

const runOneTest = async (
		testPath: string       // --- always *.test.ts
		): Promise<void> => {

	// --- deno test -qA src/test/base-utils.lib.test.ts
	const {success} = await execCmd('deno', ['test', '-qA', '%PATH'],
			{'%PATH': testPath})
	assert(success, `Test of ${testPath} failed`)
	return
}

// ---------------------------------------------------------------------------
//               MAIN CODE
// ---------------------------------------------------------------------------

if (clearFirst) {
	LOG('=====  removing TypeScript/temp/log files  =====')

	const removeOneFile = async (path: string): Promise<(string | undefined)> => {
		try {
			await Deno.remove(path)
			return Promise.resolve(path)
		}
		catch (err) {
			if (!(err instanceof Deno.errors.NotFound)) {
				// --- Re-throw other types of errors
				throw err
			}
		}
	}

	const [hSucceeded, hFailed] = await procFiles([
		'**/*.ts',
		'**/*.temp.*',
		'../logs/**/*',
		'! **/base-compile.cmd.ts',
		'! **/base-utils.lib.ts'
		], removeOneFile)

	if (hFailed) {
		const lFailed = Object.keys(hFailed)
		if (verbose) {
			for (const path of lFailed) {
				LLOG("FAILED", path)
			}
		}
		else {
			LOG(`   ${lFailed.length} compile fails`)
		}
		Deno.exit(99)
	}

	const lRemoved = Object.keys(hSucceeded)
	if (verbose) {
		for (const path of lRemoved) {
			LLOG("REMOVE", relpath(path))
		}
	}
	else {
		LOG(`   ${lRemoved.length} files removed`)
	}
}

// --- Compile libs, tests and cmds
const lPaths: string[] = await compileFiles(['**/*.#{extPat}'])

// --- Show compiled files
if (verbose) {
	for (const path of lPaths) {
		LLOG('COMPILE', path)
	}
}
else {
	LOG(`COMPILE ${lPaths.length} files`)
}

await procFiles("**/*.test.ts", runOneTest)

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQzpcXFVzZXJzXFxqb2huZFxcdXRpbHNcXHNyY1xcY21kXFxiYXNlLWNvbXBpbGUuY21kLmNpdmV0LnRzeCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxqb2huZFxcdXRpbHNcXHNyY1xcY21kXFxiYXNlLWNvbXBpbGUuY21kLmNpdmV0Il0sIm1hcHBpbmdzIjoiO0FBQUEseUJBQXdCO0FBQ3hCLEFBQUE7QUFDQSxLLFcseUI7QUFBQSxNQUFNLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVztBQUN6QyxBQUFBLEFBQUEsTUFBTSxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsSUFBSSxDQUFDLGFBQWE7QUFDdEMsQUFBQSxBQUFBLE1BQU0sQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTO0FBQ2hDLEFBQUE7QUFDQSxBQUFBLEFBQUEsTUFBTSxDQUFDLENBQUM7QUFDUixDQUFDLEtBQUssQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLFVBQVUsQ0FBQztBQUNqQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQztBQUMvQixDQUFDLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLFNBQVMsQ0FBQztBQUN2QyxDQUFDLFdBQVcsQ0FBQyxDQUFDLG1CQUFtQixDQUFDLENBQUMsT0FBTyxDQUFDO0FBQzNDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxZQUFZO0FBQ3BCLEFBQUE7QUFDQSxBQUFBLEFBQUEsVUFBVSxDQUFDLENBQUM7QUFDWixBQUFBO0FBQ0EsQUFBQSw4RUFBNkU7QUFDN0UsQUFBQTtBQUNBLEFBQUEsQUFBTyxNQUFQLE9BQU8sQ0FBQyxDQUFFLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQztBQUNwQixBQUFBLEFBQUEsR0FBRyxDQUFBLE9BQU8sQ0FBQSxDQUFBLENB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O0FBQ3pCLEFBQUEsQUFBQSxHQUFHLENBQUEsT0FBTyxDQUFBLENBQUEsQ0FBQTtBQUNWLEFBQUEsQ0FBQyxHQUFHLENBQUMsQ0FBQSxNQUFBLElBQUksQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFBLENBQUEsQ0FBQTtBQUNuQixBQUFBLEVBQUUsSUFBSSxDQUFBLEFBQUMsU0FBUyxDQUFDLENBQUMsSUFBSSxDO0NBQUEsQztBQUFBLENBQUE7QUFDdEIsQUFBQSxBQUFBLElBQUksQ0FBQSxDQUFBO0FBQ0osQUFBQSxDQUFDLEdBQUcsQ0FBQSxBQUFDLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEM7QUFBQSxDQUFBO0FBQ3JDLEFBQUE7QUFDQSxBQUFBLEFBQUEsS0FBSyxDQUFDLFNBQVMsQ0FBQSxBQUFDLGNBQWMsQ0FBQyxDQUFDLFVBQVUsQ0FBQTtBQUMxQyIsIm5hbWVzIjpbXSwic291cmNlc0NvbnRlbnQiOlsiIyBiYXNlLWNvbXBpbGUuY21kLmNpdmV0XHJcblxyXG5pbXBvcnQge3JlbGF0aXZlLCBwYXJzZX0gZnJvbSAnbm9kZTpwYXRoJ1xyXG5pbXBvcnQge2V4aXN0c1N5bmN9IGZyb20gJ2pzcjpAc3RkL2ZzJ1xyXG5pbXBvcnQge3N0YXRTeW5jfSBmcm9tICdub2RlOmZzJ1xyXG5cclxuaW1wb3J0IHtcclxuXHRjcm9haywgYXNzZXJ0LCBmbGFnLCBjaGVja1NldHVwLFxyXG5cdHBhcnNlUGF0aCwgcmVscGF0aCwgTE9HLCBMTE9HLFxyXG5cdHVuZGVmLCBkZWZpbmVkLCBub3RkZWZpbmVkLCBwcm9jRmlsZXMsXHJcblx0Y21kU3VjY2VlZHMsIG5ld2VyRGVzdEZpbGVFeGlzdHMsIGV4ZWNDbWQsXHJcblx0fSBmcm9tICdiYXNlLXV0aWxzJ1xyXG5cclxuY2hlY2tTZXR1cCgpXHJcblxyXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxudmVyYm9zZSA6PSBmbGFnKCd2JylcclxuaWYgdmVyYm9zZVxyXG5cdExPRyBcInZlcmJvc2UgPSAje3ZlcmJvc2V9XCJcclxuXHJcbmNsZWFyRmlyc3QgOj0gZmxhZygnYycpXHJcbmlmIHZlcmJvc2VcclxuXHRMT0cgXCJjbGVhckZpcnN0ID0gI3tjbGVhckZpcnN0fVwiXHJcblxyXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4jICAgICBDT05GSUdVUkFUSU9OXHJcbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG50eXBlIFRDbWREZXNjID0gW3N0cmluZywgc3RyaW5nW11dXHJcbnR5cGUgVENvbmZpZyA9IHtbZXh0OiBzdHJpbmddOiBUQ21kRGVzY31cclxuaENvbmZpZzogVENvbmZpZyA6PSB7fVxyXG5cclxuaWYgY21kU3VjY2VlZHMoJ2NpdmV0JywgWyctLXZlcnNpb24nXSlcclxuXHRoQ29uZmlnWycuY2l2ZXQnXSA9IFtcclxuXHRcdCdkZW5vJyxcclxuXHRcdFtcclxuXHRcdFx0J3J1bidcclxuXHRcdFx0Jy1BJ1xyXG5cdFx0XHQnbnBtOkBkYW5pZWx4L2NpdmV0J1xyXG5cdFx0XHQnLS1pbmxpbmUtbWFwJyxcclxuXHRcdFx0Jy1vJywgJy50cycsXHJcblx0XHRcdCctYycsICclUEFUSCdcclxuXHRcdFx0XVxyXG5cdFx0XVxyXG5cclxuaWYgY21kU3VjY2VlZHMoJ2NvZmZlZScsIFsnLS12ZXJzaW9uJ10pXHJcblx0aENvbmZpZ1snLmNvZmZlZSddID0gW1xyXG5cdFx0J2Rlbm8nLFxyXG5cdFx0W1xyXG5cdFx0XHQncnVuJ1xyXG5cdFx0XHQnLUEnXHJcblx0XHRcdCducG06QGRhbmllbHgvY2l2ZXQnXHJcblx0XHRcdCctLWlubGluZS1tYXAnLFxyXG5cdFx0XHQnLWMnLCAnJVBBVEgnXHJcblx0XHRcdF1cclxuXHRcdF1cclxuXHJcbmxFeHQgOj0gT2JqZWN0LmtleXMoaENvbmZpZylcclxuaWYgKGxFeHQubGVuZ3RoID09IDApXHJcblx0Y3JvYWsgXCJObyBUeXBlU2NyaXB0IGdlbmVyYXRpbmcgZnVuY3Rpb25zIGluc3RhbGxlZFwiXHJcblxyXG5MT0cgXCJIYW5kbGluZyAje2xFeHQubGVuZ3RofSBUeXBlU2NyaXB0IGdlbmVyYXRpbmcgZnVuY3Rpb25zXCJcclxuZXh0UGF0IDo9ICd7JyArIChsRXh0Lm1hcCgoeCkgPT4geC5zdWJzdHJpbmcoMSkpLmpvaW4oJywnKSkgKyAnfSdcclxuTE9HIFwiZXh0UGF0IGlzICcje2V4dFBhdH0nXCJcclxuXHJcbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5nZXRIYW5kbGVyIDo9IChcclxuXHRcdGV4dDogc3RyaW5nXHJcblx0XHQpOiBUQ21kRGVzYyA9PlxyXG5cclxuXHRpZiBub3QgaENvbmZpZy5oYXNPd25Qcm9wZXJ0eShleHQpXHJcblx0XHRjcm9hayBcIkNhbid0IGhhbmRsZSAje2V4dH1cIlxyXG5cdHJldHVybiBoQ29uZmlnW2V4dF1cclxuXHJcbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiNcclxuIyAxLiBJZiB0aGUgJy1jJyBmbGFnIGlzIHVzZWQsIHJlbW92ZSBhbGw6XHJcbiMgICAgLSAqLnRzIGZpbGVzIGV4Y2VwdDpcclxuIyAgICAgICAgIGJhc2UtdXRpbHMubGliLnRzXHJcbiMgICAgICAgICBiYXNlLWNvbXBpbGUuY21kLnRzXHJcbiMgICAgLSAqLnRlbXAuKiBmaWxlc1xyXG4jICAgIC0gbG9nIGZpbGVzXHJcbiMgMi4gY29tcGlsZSBhbGwgKi5jaXZldCBvciAqLmNvZmZlZSBmaWxlc1xyXG4jICAgICAgdW5sZXNzIGEgbmV3ZXIgKi50cyBmaWxlIGV4aXN0c1xyXG4jIDMuIHJ1biBhbGwgdW5pdCB0ZXN0cywgaS5lLiAqLnRlc3QudHMgZmlsZXNcclxuXHJcbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiMgQVNZTkNcclxuI1xyXG4jIC0tLSBUaHJvd3MgZXhjZXB0aW9uIGlmIGNvbXBpbGUgZmFpbHNcclxuIyAgICAgcmV0dXJucyBwYXRoIGlmIGZpbGUgYWN0dWFsbHkgY29tcGlsZWQsIGVsc2UgdW5kZWZcclxuXHJcbmNvbXBpbGVPbmVGaWxlIDo9IChcclxuXHRcdHBhdGg6IHN0cmluZ1xyXG5cdFx0KTogUHJvbWlzZTxzdHJpbmc/PiA9PlxyXG5cclxuXHR7ZXh0fSA6PSBwYXJzZVBhdGggcGF0aFxyXG5cdGlmIChleHQgPT0gJy50cycpIHx8IG5ld2VyRGVzdEZpbGVFeGlzdHMocGF0aCwgJy50cycpXHJcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHVuZGVmKSAgIyAtLS0gY29tcGlsZSBub3QgbmVlZGVkXHJcblxyXG5cdFtjbWROYW1lLCBsQXJnc10gOj0gZ2V0SGFuZGxlciBleHRcclxuXHRMTE9HICdDT01QSUxFJywgcmVscGF0aChwYXRoKVxyXG5cdHtzdWNjZXNzfSA6PSBhd2FpdCBleGVjQ21kKGNtZE5hbWUsIGxBcmdzLCB7JyVQQVRIJzogcGF0aH0pXHJcblx0aWYgbm90IHN1Y2Nlc3NcclxuXHRcdGNyb2FrIFwiQ29tcGlsZSBvZiAje3BhdGh9IGZhaWxlZFwiXHJcblx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShwYXRoKVxyXG5cclxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuIyBBU1lOQ1xyXG5cclxuY29tcGlsZUZpbGVzIDo9IChcclxuXHRcdGxQYXR0ZXJuczogc3RyaW5nIHwgc3RyaW5nW11cclxuXHRcdCk6IHN0cmluZ1tdID0+XHJcblxyXG5cdFtoQ29tcGlsZWQsIGhGYWlsZWRdIDo9IGF3YWl0IHByb2NGaWxlcyhsUGF0dGVybnMsIGNvbXBpbGVPbmVGaWxlKVxyXG5cdGlmIGRlZmluZWQoaEZhaWxlZClcclxuXHRcdCMgLS0tIGNoZWNrIGlmIGFueSBjb21waWxhdGlvbnMgZmFpbGVkXHJcblx0XHRsQmFkUGF0aHMgOj0gT2JqZWN0LmtleXMoaEZhaWxlZClcclxuXHRcdGlmIChsQmFkUGF0aHMubGVuZ3RoID4gMClcclxuXHRcdFx0TE9HIFwiRkFJTEVEIFRPIENPTVBJTEU6XCJcclxuXHRcdFx0Zm9yIHBhdGggb2YgbEJhZFBhdGhzXHJcblx0XHRcdFx0TE9HIFwiICAgI3twYXRofVwiXHJcblx0XHRcdERlbm8uZXhpdCg5OSlcclxuXHRyZXR1cm4gT2JqZWN0LmtleXMoaENvbXBpbGVkKS5maWx0ZXIoKHgpID0+IGRlZmluZWQoeCkpXHJcblxyXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4jIEFTWU5DXHJcbiNcclxuIyAtLS0gVGhyb3dzIGV4Y2VwdGlvbiBpZiB0ZXN0IGZhaWxzXHJcblxyXG5ydW5PbmVUZXN0IDo9IChcclxuXHRcdHRlc3RQYXRoOiBzdHJpbmcgICAgICAgIyAtLS0gYWx3YXlzICoudGVzdC50c1xyXG5cdFx0KTogUHJvbWlzZTx2b2lkPiA9PlxyXG5cclxuXHQjIC0tLSBkZW5vIHRlc3QgLXFBIHNyYy90ZXN0L2Jhc2UtdXRpbHMubGliLnRlc3QudHNcclxuXHR7c3VjY2Vzc30gOj0gYXdhaXQgZXhlY0NtZCAnZGVubycsIFsndGVzdCcsICctcUEnLCAnJVBBVEgnXSxcclxuXHRcdFx0eyclUEFUSCc6IHRlc3RQYXRofVxyXG5cdGFzc2VydCBzdWNjZXNzLCBcIlRlc3Qgb2YgI3t0ZXN0UGF0aH0gZmFpbGVkXCJcclxuXHRyZXR1cm5cclxuXHJcbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiMgICAgICAgICAgICAgICBNQUlOIENPREVcclxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbmlmIGNsZWFyRmlyc3RcclxuXHRMT0cgJz09PT09ICByZW1vdmluZyBUeXBlU2NyaXB0L3RlbXAvbG9nIGZpbGVzICA9PT09PSdcclxuXHJcblx0cmVtb3ZlT25lRmlsZSA6PSAocGF0aDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc/PiA9PlxyXG5cdFx0dHJ5XHJcblx0XHRcdGF3YWl0IERlbm8ucmVtb3ZlIHBhdGhcclxuXHRcdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShwYXRoKVxyXG5cdFx0Y2F0Y2ggZXJyXHJcblx0XHRcdGlmIG5vdCAoZXJyIGluc3RhbmNlb2YgRGVuby5lcnJvcnMuTm90Rm91bmQpXHJcblx0XHRcdFx0IyAtLS0gUmUtdGhyb3cgb3RoZXIgdHlwZXMgb2YgZXJyb3JzXHJcblx0XHRcdFx0dGhyb3cgZXJyXHJcblxyXG5cdFtoU3VjY2VlZGVkLCBoRmFpbGVkXSA6PSBhd2FpdCBwcm9jRmlsZXMgW1xyXG5cdFx0JyoqLyoudHMnXHJcblx0XHQnKiovKi50ZW1wLionXHJcblx0XHQnLi4vbG9ncy8qKi8qJ1xyXG5cdFx0JyEgKiovYmFzZS1jb21waWxlLmNtZC50cydcclxuXHRcdCchICoqL2Jhc2UtdXRpbHMubGliLnRzJ1xyXG5cdFx0XSwgcmVtb3ZlT25lRmlsZVxyXG5cclxuXHRpZiBoRmFpbGVkXHJcblx0XHRsRmFpbGVkIDo9IE9iamVjdC5rZXlzKGhGYWlsZWQpXHJcblx0XHRpZiB2ZXJib3NlXHJcblx0XHRcdGZvciBwYXRoIG9mIGxGYWlsZWRcclxuXHRcdFx0XHRMTE9HIFwiRkFJTEVEXCIsIHBhdGhcclxuXHRcdGVsc2VcclxuXHRcdFx0TE9HIFwiICAgI3tsRmFpbGVkLmxlbmd0aH0gY29tcGlsZSBmYWlsc1wiXHJcblx0XHREZW5vLmV4aXQoOTkpXHJcblxyXG5cdGxSZW1vdmVkIDo9IE9iamVjdC5rZXlzKGhTdWNjZWVkZWQpXHJcblx0aWYgdmVyYm9zZVxyXG5cdFx0Zm9yIHBhdGggb2YgbFJlbW92ZWRcclxuXHRcdFx0TExPRyBcIlJFTU9WRVwiLCByZWxwYXRoKHBhdGgpXHJcblx0ZWxzZVxyXG5cdFx0TE9HIFwiICAgI3tsUmVtb3ZlZC5sZW5ndGh9IGZpbGVzIHJlbW92ZWRcIlxyXG5cclxuIyAtLS0gQ29tcGlsZSBsaWJzLCB0ZXN0cyBhbmQgY21kc1xyXG5sUGF0aHM6IHN0cmluZ1tdIDo9IGF3YWl0IGNvbXBpbGVGaWxlcyhbJyoqLyouI3tleHRQYXR9J10pXHJcblxyXG4jIC0tLSBTaG93IGNvbXBpbGVkIGZpbGVzXHJcbmlmIHZlcmJvc2VcclxuXHRmb3IgcGF0aCBvZiBsUGF0aHNcclxuXHRcdExMT0cgJ0NPTVBJTEUnLCBwYXRoXHJcbmVsc2VcclxuXHRMT0cgXCJDT01QSUxFICN7bFBhdGhzLmxlbmd0aH0gZmlsZXNcIlxyXG5cclxuYXdhaXQgcHJvY0ZpbGVzIFwiKiovKi50ZXN0LnRzXCIsIHJ1bk9uZVRlc3RcclxuIl19