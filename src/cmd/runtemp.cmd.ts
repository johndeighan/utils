"use strict";
// runtemp.cmd.civet

import {
	undef, defined, SUCCEED, FAIL, flag, LOG,
	buildFileName, sep, centered,
	findFile, tryCmd, civet2tsFile, doUnitTest, doRun,
	} from 'base-utils'

if (flag('h')) {
	// ---  -d invokes Chrome debugger
	//      -D causes debugging output
	SUCCEED("USAGE: runtemp [-d] [-D] { <stub> }")
}

// ---------------------------------------------------------------------------

const lFlags: string[] = []

let stub = 'temp'
for (const arg of Deno.args) {
	if (arg.startsWith('-')) {
		lFlags.push(arg)
	}
	else if (arg.match(/^\d+$/)) {
		stub = `temp${arg}`
	}
	else {
		await tryCmd(civet2tsFile, arg, 'lib')
		await tryCmd(doUnitTest, arg, 'lib')
	}
}

await tryCmd(civet2tsFile, stub, undef)
await tryCmd(doRun, stub, undef, lFlags, {debug: flag('d')})

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQzpcXFVzZXJzXFxqb2huZFxcdXRpbHNcXHNyY1xcY21kXFxydW50ZW1wLmNtZC5jaXZldC50c3giLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcam9obmRcXHV0aWxzXFxzcmNcXGNtZFxccnVudGVtcC5jbWQuY2l2ZXQiXSwibWFwcGluZ3MiOiI7QUFBQSxvQkFBbUI7QUFDbkIsQUFBQTtBQUNBLEFBQUEsTUFBTSxDQUFDLENBQUM7QUFDUixDQUFDLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQztBQUMxQyxDQUFDLGFBQWEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQztBQUM5QixDQUFDLFFBQVEsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLEtBQUssQ0FBQztBQUNuRCxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWTtBQUNwQixBQUFBO0FBQ0EsQUFBQSxBQUFBLEdBQUcsQ0FBQSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUEsQ0FBQSxDQUFBO0FBQ1osQUFBQSxDQUFDLGtDQUFpQztBQUNsQyxBQUFBLENBQUMsa0NBQWlDO0FBQ2xDLEFBQUEsQ0FBQyxPQUFPLENBQUEsQUFBQyxxQ0FBcUMsQztBQUFBLENBQUE7QUFDOUMsQUFBQTtBQUNBLEFBQUEsOEVBQTZFO0FBQzdFLEFBQUE7QUFDQSxBQUFBLEFBQWdCLE1BQWhCLE1BQU0sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBRSxDQUFDLENBQUMsQ0FBQztBQUN0QixBQUFBO0FBQ0EsQUFBQSxBQUFBLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLE1BQU07QUFDakIsQUFBQSxBQUFBLEdBQUcsQ0FBQyxDQUFBLE1BQUEsR0FBRyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFBLENBQUEsQ0FBQTtBQUNwQixBQUFBLENBQUMsR0FBRyxDQUFBLEdBQUcsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUEsQ0FBQSxDQUFBO0FBQ3ZCLEFBQUEsRUFBRSxNQUFNLENBQUMsSUFBSSxDQUFBLEFBQUMsR0FBRyxDO0NBQUEsQ0FBQTtBQUNqQixBQUFBLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQSxHQUFHLENBQUMsS0FBSyxDQUFBLEFBQUMsT0FBTyxDQUFBLENBQUEsQ0FBQSxDQUFBO0FBQzFCLEFBQUEsRUFBRSxJQUFJLEMsQ0FBRSxDQUFDLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDO0NBQUMsQ0FBQTtBQUNyQixBQUFBLENBQUMsSUFBSSxDQUFBLENBQUE7QUFDTCxBQUFBLEVBQUUsS0FBSyxDQUFDLE1BQU0sQ0FBQSxBQUFDLFlBQVksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQTtBQUN2QyxBQUFBLEVBQUUsS0FBSyxDQUFDLE1BQU0sQ0FBQSxBQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssQztDQUFBLEM7QUFBQSxDQUFBO0FBQ3JDLEFBQUE7QUFDQSxBQUFBLEFBQUEsS0FBSyxDQUFDLE1BQU0sQ0FBQSxBQUFDLFlBQVksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQTtBQUN0QyxBQUFBLEFBQUEsS0FBSyxDQUFDLE1BQU0sQ0FBQSxBQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUE7QUFDM0QiLCJuYW1lcyI6W10sInNvdXJjZXNDb250ZW50IjpbIiMgcnVudGVtcC5jbWQuY2l2ZXRcclxuXHJcbmltcG9ydCB7XHJcblx0dW5kZWYsIGRlZmluZWQsIFNVQ0NFRUQsIEZBSUwsIGZsYWcsIExPRyxcclxuXHRidWlsZEZpbGVOYW1lLCBzZXAsIGNlbnRlcmVkLFxyXG5cdGZpbmRGaWxlLCB0cnlDbWQsIGNpdmV0MnRzRmlsZSwgZG9Vbml0VGVzdCwgZG9SdW4sXHJcblx0fSBmcm9tICdiYXNlLXV0aWxzJ1xyXG5cclxuaWYgZmxhZygnaCcpXHJcblx0IyAtLS0gIC1kIGludm9rZXMgQ2hyb21lIGRlYnVnZ2VyXHJcblx0IyAgICAgIC1EIGNhdXNlcyBkZWJ1Z2dpbmcgb3V0cHV0XHJcblx0U1VDQ0VFRCBcIlVTQUdFOiBydW50ZW1wIFstZF0gWy1EXSB7IDxzdHViPiB9XCJcclxuXHJcbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5sRmxhZ3M6IHN0cmluZ1tdIDo9IFtdXHJcblxyXG5sZXQgc3R1YiA9ICd0ZW1wJ1xyXG5mb3IgYXJnIG9mIERlbm8uYXJnc1xyXG5cdGlmIGFyZy5zdGFydHNXaXRoKCctJylcclxuXHRcdGxGbGFncy5wdXNoIGFyZ1xyXG5cdGVsc2UgaWYgYXJnLm1hdGNoIC9eXFxkKyQvXHJcblx0XHRzdHViID0gXCJ0ZW1wI3thcmd9XCJcclxuXHRlbHNlXHJcblx0XHRhd2FpdCB0cnlDbWQgY2l2ZXQydHNGaWxlLCBhcmcsICdsaWInXHJcblx0XHRhd2FpdCB0cnlDbWQgZG9Vbml0VGVzdCwgYXJnLCAnbGliJ1xyXG5cclxuYXdhaXQgdHJ5Q21kIGNpdmV0MnRzRmlsZSwgc3R1YiwgdW5kZWZcclxuYXdhaXQgdHJ5Q21kIGRvUnVuLCBzdHViLCB1bmRlZiwgbEZsYWdzLCB7ZGVidWc6IGZsYWcoJ2QnKX1cclxuIl19