"use strict";
// buildlib.cmd.civet

import {
	undef, defined, notdefined,
	assert, exit, flag, nonOption,
	findFile, withExt, tryCmd, LOG,
	doCompile, doUnitTest, lAllLibs,
	} from 'base-utils'

const stub = nonOption(0)
if (!stub) {
	exit("USAGE: buildlib <stub> [-n]")
}

// ---------------------------------------------------------------------------

if (stub === 'all') {
	for (const s of lAllLibs) {
		await tryCmd(doCompile, s, 'lib')
	}
	if (!flag('n')) {
		for (const s of lAllLibs) {
			await tryCmd(doUnitTest, s, 'lib')
		}
	}
}
else {
	await tryCmd(doCompile, stub, 'lib')
	if (!flag('n')) {
		await tryCmd(doUnitTest, stub, 'lib')
	}
}

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3JjL2NtZC9idWlsZGxpYi5jbWQuY2l2ZXQudHN4Iiwic291cmNlcyI6WyJzcmMvY21kL2J1aWxkbGliLmNtZC5jaXZldCJdLCJtYXBwaW5ncyI6IjtBQUFBLHFCQUFvQjtBQUNwQixBQUFBO0FBQ0EsQUFBQSxNQUFNLENBQUMsQ0FBQztBQUNSLENBQUMsS0FBSyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsVUFBVSxDQUFDO0FBQzVCLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsU0FBUyxDQUFDO0FBQy9CLENBQUMsUUFBUSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDO0FBQ2hDLENBQUMsU0FBUyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsUUFBUSxDQUFDO0FBQ2pDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxZQUFZO0FBQ3BCLEFBQUE7QUFDQSxBQUFBLEFBQUksTUFBSixJQUFJLENBQUMsQ0FBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7QUFDcEIsQUFBQSxBQUFBLEdBQUcsQ0FBQSxDQUFJLElBQUksQ0FBQSxDQUFBLENBQUE7QUFDWCxBQUFBLENBQUMsSUFBSSxDQUFBLEFBQUMsNkJBQTZCLEM7QUFBQSxDQUFBO0FBQ25DLEFBQUE7QUFDQSxBQUFBLDhFQUE2RTtBQUM3RSxBQUFBO0FBQ0EsQUFBQSxBQUFBLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRSxDQUFDLEtBQUssQ0FBQyxDQUFBLENBQUE7QUFDbEIsQUFBQSxDQUFDLEdBQUcsQ0FBQyxDQUFBLE1BQUEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxRQUFRLENBQUEsQ0FBQSxDQUFBO0FBQ2xCLEFBQUEsRUFBRSxLQUFLLENBQUMsTUFBTSxDQUFBLEFBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDO0NBQUEsQ0FBQTtBQUNsQyxBQUFBLENBQUMsR0FBRyxDQUFBLENBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFBLENBQUEsQ0FBQTtBQUNqQixBQUFBLEVBQUUsR0FBRyxDQUFDLENBQUEsTUFBQSxDQUFDLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQSxDQUFBLENBQUE7QUFDbkIsQUFBQSxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUEsQUFBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEM7RUFBQSxDO0NBQUEsQztBQUFBLENBQUE7QUFDcEMsQUFBQSxBQUFBLElBQUksQ0FBQSxDQUFBO0FBQ0osQUFBQSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUEsQUFBQyxTQUFTLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUE7QUFDcEMsQUFBQSxDQUFDLEdBQUcsQ0FBQSxDQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQSxDQUFBLENBQUE7QUFDakIsQUFBQSxFQUFFLEtBQUssQ0FBQyxNQUFNLENBQUEsQUFBQyxVQUFVLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLEM7Q0FBQSxDO0FBQUEsQ0FBQTtBQUN0QyIsIm5hbWVzIjpbXSwic291cmNlc0NvbnRlbnQiOlsiIyBidWlsZGxpYi5jbWQuY2l2ZXRcclxuXHJcbmltcG9ydCB7XHJcblx0dW5kZWYsIGRlZmluZWQsIG5vdGRlZmluZWQsXHJcblx0YXNzZXJ0LCBleGl0LCBmbGFnLCBub25PcHRpb24sXHJcblx0ZmluZEZpbGUsIHdpdGhFeHQsIHRyeUNtZCwgTE9HLFxyXG5cdGRvQ29tcGlsZSwgZG9Vbml0VGVzdCwgbEFsbExpYnMsXHJcblx0fSBmcm9tICdiYXNlLXV0aWxzJ1xyXG5cclxuc3R1YiA6PSBub25PcHRpb24oMClcclxuaWYgbm90IHN0dWJcclxuXHRleGl0IFwiVVNBR0U6IGJ1aWxkbGliIDxzdHViPiBbLW5dXCJcclxuXHJcbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5pZiAoc3R1YiA9PSAnYWxsJylcclxuXHRmb3IgcyBvZiBsQWxsTGlic1xyXG5cdFx0YXdhaXQgdHJ5Q21kIGRvQ29tcGlsZSwgcywgJ2xpYidcclxuXHRpZiBub3QgZmxhZygnbicpXHJcblx0XHRmb3IgcyBvZiBsQWxsTGlic1xyXG5cdFx0XHRhd2FpdCB0cnlDbWQgZG9Vbml0VGVzdCwgcywgJ2xpYidcclxuZWxzZVxyXG5cdGF3YWl0IHRyeUNtZCBkb0NvbXBpbGUsIHN0dWIsICdsaWInXHJcblx0aWYgbm90IGZsYWcoJ24nKVxyXG5cdFx0YXdhaXQgdHJ5Q21kIGRvVW5pdFRlc3QsIHN0dWIsICdsaWInXHJcbiJdfQ==