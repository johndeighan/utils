"use strict";
// buildlib.cmd.civet

import {
	nonOption, FAIL, lAllLibs, tryCmd, civet2tsFile, flag,
	doUnitTest, defined,
	} from 'base-utils'

const stub = nonOption(0) || FAIL("USAGE: buildlib <stub> [-n]")

// ---------------------------------------------------------------------------

if (stub === 'all') {
	for (const s of lAllLibs) {
		await tryCmd(civet2tsFile, s, 'lib')
	}
	if (!flag('n')) {
		for (const s of lAllLibs) {
			await tryCmd(doUnitTest, s, 'lib')
		}
	}
}
else {
	await tryCmd(civet2tsFile, stub, 'lib')
	if (!flag('n')) {
		await tryCmd(doUnitTest, stub, 'lib')
	}

	let n = 1
	let xstub = nonOption(1)
	while (defined(xstub)) {
		await tryCmd(civet2tsFile, xstub, 'lib')
		if (!flag('n')) {
			await tryCmd(doUnitTest, xstub, 'lib')
		}
		n += 1
		xstub = nonOption(n)
	}
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3JjL2NtZC9idWlsZGxpYi5jbWQuY2l2ZXQudHN4Iiwic291cmNlcyI6WyJzcmMvY21kL2J1aWxkbGliLmNtZC5jaXZldCJdLCJtYXBwaW5ncyI6IjtBQUFBLHFCQUFvQjtBQUNwQixBQUFBO0FBQ0EsQUFBQSxNQUFNLENBQUMsQ0FBQztBQUNSLENBQUMsU0FBUyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsSUFBSSxDQUFDO0FBQ3ZELENBQUMsVUFBVSxDQUFDLENBQUMsT0FBTyxDQUFDO0FBQ3JCLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxZQUFZO0FBQ3BCLEFBQUE7QUFDQSxBQUFBLEFBQUksTUFBSixJQUFJLENBQUMsQ0FBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLDZCQUE2QixDQUFDO0FBQzNELEFBQUE7QUFDQSxBQUFBLDhFQUE2RTtBQUM3RSxBQUFBO0FBQ0EsQUFBQSxBQUFBLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRSxDQUFDLEtBQUssQ0FBQyxDQUFBLENBQUE7QUFDbEIsQUFBQSxDQUFDLEdBQUcsQ0FBQyxDQUFBLE1BQUEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxRQUFRLENBQUEsQ0FBQSxDQUFBO0FBQ2xCLEFBQUEsRUFBRSxLQUFLLENBQUMsTUFBTSxDQUFBLEFBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDO0NBQUEsQ0FBQTtBQUNyQyxBQUFBLENBQUMsR0FBRyxDQUFBLENBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFBLENBQUEsQ0FBQTtBQUNqQixBQUFBLEVBQUUsR0FBRyxDQUFDLENBQUEsTUFBQSxDQUFDLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQSxDQUFBLENBQUE7QUFDbkIsQUFBQSxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUEsQUFBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEM7RUFBQSxDO0NBQUEsQztBQUFBLENBQUE7QUFDcEMsQUFBQSxBQUFBLElBQUksQ0FBQSxDQUFBO0FBQ0osQUFBQSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUEsQUFBQyxZQUFZLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUE7QUFDdkMsQUFBQSxDQUFDLEdBQUcsQ0FBQSxDQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQSxDQUFBLENBQUE7QUFDakIsQUFBQSxFQUFFLEtBQUssQ0FBQyxNQUFNLENBQUEsQUFBQyxVQUFVLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLEM7Q0FBQSxDQUFBO0FBQ3RDLEFBQUE7QUFDQSxBQUFBLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNWLEFBQUEsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO0FBQ3pCLEFBQUEsQ0FBQyxLQUFLLENBQUMsQ0FBQSxPQUFPLENBQUEsQUFBQyxLQUFLLENBQUEsQ0FBQSxDQUFBLENBQUE7QUFDcEIsQUFBQSxFQUFFLEtBQUssQ0FBQyxNQUFNLENBQUEsQUFBQyxZQUFZLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUE7QUFDekMsQUFBQSxFQUFFLEdBQUcsQ0FBQSxDQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQSxDQUFBLENBQUE7QUFDbEIsQUFBQSxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUEsQUFBQyxVQUFVLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLEM7RUFBQSxDQUFBO0FBQ3hDLEFBQUEsRUFBRSxDQUFDLEMsRUFBRyxDQUFDLENBQUM7QUFDUixBQUFBLEVBQUUsS0FBSyxDLENBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDO0NBQUMsQztBQUFBLENBQUE7QUFDdEIiLCJuYW1lcyI6W10sInNvdXJjZXNDb250ZW50IjpbIiMgYnVpbGRsaWIuY21kLmNpdmV0XHJcblxyXG5pbXBvcnQge1xyXG5cdG5vbk9wdGlvbiwgRkFJTCwgbEFsbExpYnMsIHRyeUNtZCwgY2l2ZXQydHNGaWxlLCBmbGFnLFxyXG5cdGRvVW5pdFRlc3QsIGRlZmluZWQsXHJcblx0fSBmcm9tICdiYXNlLXV0aWxzJ1xyXG5cclxuc3R1YiA6PSBub25PcHRpb24oMCkgfHwgRkFJTChcIlVTQUdFOiBidWlsZGxpYiA8c3R1Yj4gWy1uXVwiKVxyXG5cclxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbmlmIChzdHViID09ICdhbGwnKVxyXG5cdGZvciBzIG9mIGxBbGxMaWJzXHJcblx0XHRhd2FpdCB0cnlDbWQgY2l2ZXQydHNGaWxlLCBzLCAnbGliJ1xyXG5cdGlmIG5vdCBmbGFnKCduJylcclxuXHRcdGZvciBzIG9mIGxBbGxMaWJzXHJcblx0XHRcdGF3YWl0IHRyeUNtZCBkb1VuaXRUZXN0LCBzLCAnbGliJ1xyXG5lbHNlXHJcblx0YXdhaXQgdHJ5Q21kIGNpdmV0MnRzRmlsZSwgc3R1YiwgJ2xpYidcclxuXHRpZiBub3QgZmxhZygnbicpXHJcblx0XHRhd2FpdCB0cnlDbWQgZG9Vbml0VGVzdCwgc3R1YiwgJ2xpYidcclxuXHJcblx0bGV0IG4gPSAxXHJcblx0bGV0IHhzdHViID0gbm9uT3B0aW9uKDEpXHJcblx0d2hpbGUgZGVmaW5lZCB4c3R1YlxyXG5cdFx0YXdhaXQgdHJ5Q21kIGNpdmV0MnRzRmlsZSwgeHN0dWIsICdsaWInXHJcblx0XHRpZiBub3QgZmxhZygnbicpXHJcblx0XHRcdGF3YWl0IHRyeUNtZCBkb1VuaXRUZXN0LCB4c3R1YiwgJ2xpYidcclxuXHRcdG4gKz0gMVxyXG5cdFx0eHN0dWIgPSBub25PcHRpb24obilcclxuIl19