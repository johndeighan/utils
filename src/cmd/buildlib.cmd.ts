"use strict";
// buildlib.cmd.civet

import {
	nonOption, FAIL, lAllLibs, tryCmd, civet2tsFile, flag,
	doUnitTest, defined, stdChecks,
	} from 'base-utils'

stdChecks()
const stub = nonOption(0) || FAIL("USAGE: buildlib <stub> [-n]")

// ---------------------------------------------------------------------------

if (stub === 'all') {
	for (const s of lAllLibs) {
		await tryCmd(civet2tsFile, s, 'lib')
	}
	if (!flag('n')) {
		for (const s of lAllLibs) {
			await tryCmd(doUnitTest, s, 'lib')
		}
	}
}
else {
	await tryCmd(civet2tsFile, stub, 'lib')
	if (!flag('n')) {
		await tryCmd(doUnitTest, stub, 'lib')
	}

	let n = 1
	let xstub = nonOption(1)
	while (defined(xstub)) {
		await tryCmd(civet2tsFile, xstub, 'lib')
		if (!flag('n')) {
			await tryCmd(doUnitTest, xstub, 'lib')
		}
		n += 1
		xstub = nonOption(n)
	}
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3JjL2NtZC9idWlsZGxpYi5jbWQuY2l2ZXQudHN4Iiwic291cmNlcyI6WyJzcmMvY21kL2J1aWxkbGliLmNtZC5jaXZldCJdLCJtYXBwaW5ncyI6IjtBQUFBLHFCQUFvQjtBQUNwQixBQUFBO0FBQ0EsQUFBQSxNQUFNLENBQUMsQ0FBQztBQUNSLENBQUMsU0FBUyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsSUFBSSxDQUFDO0FBQ3ZELENBQUMsVUFBVSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsU0FBUyxDQUFDO0FBQ2hDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxZQUFZO0FBQ3BCLEFBQUE7QUFDQSxBQUFBLEFBQUEsU0FBUyxDQUFDLENBQUM7QUFDWCxBQUFBLEFBQUksTUFBSixJQUFJLENBQUMsQ0FBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLDZCQUE2QixDQUFDO0FBQzNELEFBQUE7QUFDQSxBQUFBLDhFQUE2RTtBQUM3RSxBQUFBO0FBQ0EsQUFBQSxBQUFBLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRSxDQUFDLEtBQUssQ0FBQyxDQUFBLENBQUE7QUFDbEIsQUFBQSxDQUFDLEdBQUcsQ0FBQyxDQUFBLE1BQUEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxRQUFRLENBQUEsQ0FBQSxDQUFBO0FBQ2xCLEFBQUEsRUFBRSxLQUFLLENBQUMsTUFBTSxDQUFBLEFBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDO0NBQUEsQ0FBQTtBQUNyQyxBQUFBLENBQUMsR0FBRyxDQUFBLENBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFBLENBQUEsQ0FBQTtBQUNqQixBQUFBLEVBQUUsR0FBRyxDQUFDLENBQUEsTUFBQSxDQUFDLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQSxDQUFBLENBQUE7QUFDbkIsQUFBQSxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUEsQUFBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEM7RUFBQSxDO0NBQUEsQztBQUFBLENBQUE7QUFDcEMsQUFBQSxBQUFBLElBQUksQ0FBQSxDQUFBO0FBQ0osQUFBQSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUEsQUFBQyxZQUFZLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUE7QUFDdkMsQUFBQSxDQUFDLEdBQUcsQ0FBQSxDQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQSxDQUFBLENBQUE7QUFDakIsQUFBQSxFQUFFLEtBQUssQ0FBQyxNQUFNLENBQUEsQUFBQyxVQUFVLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLEM7Q0FBQSxDQUFBO0FBQ3RDLEFBQUE7QUFDQSxBQUFBLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNWLEFBQUEsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO0FBQ3pCLEFBQUEsQ0FBQyxLQUFLLENBQUMsQ0FBQSxPQUFPLENBQUEsQUFBQyxLQUFLLENBQUEsQ0FBQSxDQUFBLENBQUE7QUFDcEIsQUFBQSxFQUFFLEtBQUssQ0FBQyxNQUFNLENBQUEsQUFBQyxZQUFZLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUE7QUFDekMsQUFBQSxFQUFFLEdBQUcsQ0FBQSxDQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQSxDQUFBLENBQUE7QUFDbEIsQUFBQSxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUEsQUFBQyxVQUFVLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLEM7RUFBQSxDQUFBO0FBQ3hDLEFBQUEsRUFBRSxDQUFDLEMsRUFBRyxDQUFDLENBQUM7QUFDUixBQUFBLEVBQUUsS0FBSyxDLENBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDO0NBQUMsQztBQUFBLENBQUE7QUFDdEIiLCJuYW1lcyI6W10sInNvdXJjZXNDb250ZW50IjpbIiMgYnVpbGRsaWIuY21kLmNpdmV0XHJcblxyXG5pbXBvcnQge1xyXG5cdG5vbk9wdGlvbiwgRkFJTCwgbEFsbExpYnMsIHRyeUNtZCwgY2l2ZXQydHNGaWxlLCBmbGFnLFxyXG5cdGRvVW5pdFRlc3QsIGRlZmluZWQsIHN0ZENoZWNrcyxcclxuXHR9IGZyb20gJ2Jhc2UtdXRpbHMnXHJcblxyXG5zdGRDaGVja3MoKVxyXG5zdHViIDo9IG5vbk9wdGlvbigwKSB8fCBGQUlMKFwiVVNBR0U6IGJ1aWxkbGliIDxzdHViPiBbLW5dXCIpXHJcblxyXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuaWYgKHN0dWIgPT0gJ2FsbCcpXHJcblx0Zm9yIHMgb2YgbEFsbExpYnNcclxuXHRcdGF3YWl0IHRyeUNtZCBjaXZldDJ0c0ZpbGUsIHMsICdsaWInXHJcblx0aWYgbm90IGZsYWcoJ24nKVxyXG5cdFx0Zm9yIHMgb2YgbEFsbExpYnNcclxuXHRcdFx0YXdhaXQgdHJ5Q21kIGRvVW5pdFRlc3QsIHMsICdsaWInXHJcbmVsc2VcclxuXHRhd2FpdCB0cnlDbWQgY2l2ZXQydHNGaWxlLCBzdHViLCAnbGliJ1xyXG5cdGlmIG5vdCBmbGFnKCduJylcclxuXHRcdGF3YWl0IHRyeUNtZCBkb1VuaXRUZXN0LCBzdHViLCAnbGliJ1xyXG5cclxuXHRsZXQgbiA9IDFcclxuXHRsZXQgeHN0dWIgPSBub25PcHRpb24oMSlcclxuXHR3aGlsZSBkZWZpbmVkIHhzdHViXHJcblx0XHRhd2FpdCB0cnlDbWQgY2l2ZXQydHNGaWxlLCB4c3R1YiwgJ2xpYidcclxuXHRcdGlmIG5vdCBmbGFnKCduJylcclxuXHRcdFx0YXdhaXQgdHJ5Q21kIGRvVW5pdFRlc3QsIHhzdHViLCAnbGliJ1xyXG5cdFx0biArPSAxXHJcblx0XHR4c3R1YiA9IG5vbk9wdGlvbihuKVxyXG4iXX0=