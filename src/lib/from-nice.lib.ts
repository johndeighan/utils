"use strict";
// from-nice.lib.civet

import {
	undef, defined, notdefined, assert, croak, hash, hashof,
	isArray, isFunction, isBoolean, isString, isNonPrimitive,
	isClass, isArrayOfStrings, isEmpty, nonEmpty,
	className, functionName, symbolName,
	classDef, functionDef, regexpDef,
	} from 'datatypes'
import {
	getOptions, escapeStr, unescapeStr,
	keys, toBlock, o, rtrim, Fetcher,
	} from 'llutils'
import {OL} from 'to-nice'
import {indented} from 'indent'
import {toNice} from 'to-nice'
import {
	TPLLToken, tkEOF, tkIndent, tkUndent,
	TTokenGenerator, allTokensInBlock,
	} from 'pll'

// ---------------------------------------------------------------------------

export const niceSplitter: TTokenGenerator = function*(
		str: string
		) {
	let ref;let ref1;if ((ref = str.match(/^-(.*)$/))) {let lMatches = ref;
		const tail = lMatches[1].trim()
		if (tail) {
			yield {
				kind: 'list-item',
				str,
				value: getPrimitive(tail)
				}
		}
		else {
			yield {
				kind: 'list-head',
				name: str,
				str: ''
				}
		}
	}
	else if ((ref1 = str.match(/^([A-Za-z][A-Za-z0-9_]*):(.*)$/))) {let lMatches = ref1;
		const name = lMatches[1]
		const tail = lMatches[2].trim()
		if (tail) {
			yield {
				kind: 'hash-item',
				str,
				name,
				value: getPrimitive(tail)
				}
		}
		else {
			yield {
				kind: 'hash-head',
				name,
				str
				}
		}
	}
	else {
		yield {
			kind: 'primitive',
			str,
			value: getPrimitive(str)
			}
	}
}

// ---------------------------------------------------------------------------

export const allNiceTokens = function*(
		block: string,
		): Generator<TPLLToken, void, void> {

	for (const h of allTokensInBlock(block, niceSplitter)) {
		yield h
	}
	return
}

// ---------------------------------------------------------------------------

export const fromNice = (
		str: string,
		): unknown => {

	// --- Create a Fetcher, then use
	//     recursive descent parsing

	const fetcher = new Fetcher<TPLLToken>(allNiceTokens(str), tkEOF)

	const parseObj = (): unknown => {
		const {kind, str} = fetcher.peek()
		if(kind === 'list-item' || kind === 'list-head') {
				return parseList()}
else if(kind === 'hash-item' || kind === 'hash-head') {
				return parseHash()}
else if(kind === 'eof') {
				return undef}
else  {
				fetcher.skip()
				if (defined(str)) {
					return getPrimitive(str)
				}
			}
	}

	const parseList = (): unknown[] => {
		const lItems: unknown[] = []
		let {kind} = fetcher.peek()
		while (['list-item', 'list-head'].includes(kind)) {
			if (kind === 'list-head') {
				lItems.push(parseListNest())
			}
			else {
				lItems.push(fetcher.get().value)
			}
			kind = fetcher.peek().kind
		}
		return lItems
	}

	const parseListNest = (): unknown[] => {
		fetcher.get({kind: 'list-head', str: ''})
		fetcher.get({kind: 'indent', str: ''})
		const value = parseObj()
		fetcher.get({kind: 'undent', str: ''})
		return [value]
	}

	const parseHash = (): hash => {
		const hItems: hash = {}
		let {kind, name} = fetcher.peek()
		if (kind === 'hash-head') {
			fetcher.skip()
			fetcher.get({kind: 'indent', str: ''})
			const value = parseObj()
			if (defined(name)) {
				hItems[name] = value
			}
			fetcher.get({kind: 'undent', str: ''})
		}
		else {
			while (kind === 'hash-item') {
				const {name, value} = fetcher.get()
				if (defined(name)) {
					hItems[name] = value
				};
				({kind} = fetcher.peek())
			}
		}
		return hItems
	}

	debugger
	return parseObj()
}

// ---------------------------------------------------------------------------

export const getPrimitive = (
		str: string,
		): unknown => {

	str = str.trim()
	let ref2;if ((ref2 = str.match(/^\.(.*)\.$/))) {const lMatches = ref2;
		const s = lMatches[1].trim()
		if(s === 'undef') { return undef}
else if(s === 'null') { return null}
else if(s === 'true') { return true}
else if(s === 'false') { return false}
else if(s === 'NaN') { return NaN}
else if(s === 'infinity') { return Infinity}
else if(s === 'neginfinity') { return -Infinity}
else if(s === 'symbol') { return Symbol()}
else if(s === '[]') { return []}
else if(s === '{}') { return {}}
else if(typeof s === 'string' && /^symbol\s+(.+)$/.test(s)) {
				const lMatches = s.match(/^symbol\s+(.+)$/)
				if (defined(lMatches)) {
					const name = lMatches[1]
					return Symbol(name)
				}
				else {
					return Symbol()
				}}
else if(typeof s === 'string' && /^regexp\s+(.+)$/.test(s)) {
				const lMatches = s.match(/^regexp\s+(.+)$/)
				if (defined(lMatches)) {
					const name = lMatches[1]
					return new RegExp(name)
				}
				else {
					return new RegExp('^$')
				}}
else  {
				croak("Not Implemented")
			}
	}
	else if (str.match(/^\d+$/)) {
		return parseInt(str, 10)
	}
	else if (str.match(/^\d+\.\d*$/)) {
		return parseFloat(str)
	}
	else {
		return unescapeStr(str, o`purpose=C`)
	}
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQzpcXFVzZXJzXFxqb2huZFxcdXRpbHNcXHNyY1xcbGliXFxmcm9tLW5pY2UubGliLmNpdmV0LnRzeCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxqb2huZFxcdXRpbHNcXHNyY1xcbGliXFxmcm9tLW5pY2UubGliLmNpdmV0Il0sIm1hcHBpbmdzIjoiO0FBQUEsc0JBQXFCO0FBQ3JCLEFBQUE7QUFDQSxBQUFBLE1BQU0sQ0FBQyxDQUFDO0FBQ1IsQ0FBQyxLQUFLLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLENBQUM7QUFDekQsQ0FBQyxPQUFPLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxjQUFjLENBQUM7QUFDMUQsQ0FBQyxPQUFPLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFFBQVEsQ0FBQztBQUM5QyxDQUFDLFNBQVMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLFVBQVUsQ0FBQztBQUNyQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLFNBQVMsQ0FBQztBQUNsQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVztBQUNuQixBQUFBLEFBQUEsTUFBTSxDQUFDLENBQUM7QUFDUixDQUFDLFVBQVUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLFdBQVcsQ0FBQztBQUNwQyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQztBQUNsQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUztBQUNqQixBQUFBLEFBQUEsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVM7QUFDMUIsQUFBQSxBQUFBLE1BQU0sQ0FBQyxDQUFDLFFB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QSxDQUFDLElBQUksQ0FBQSxDQUFBO0FBQ0wsQUFBQSxFQUFFLE1BQU0sQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUMsQyxXQUFZLEM7Q0FBQyxDO0FBQUEsQ0FBQTtBQUN2QyIsIm5hbWVzIjpbXSwic291cmNlc0NvbnRlbnQiOlsiIyBmcm9tLW5pY2UubGliLmNpdmV0XHJcblxyXG5pbXBvcnQge1xyXG5cdHVuZGVmLCBkZWZpbmVkLCBub3RkZWZpbmVkLCBhc3NlcnQsIGNyb2FrLCBoYXNoLCBoYXNob2YsXHJcblx0aXNBcnJheSwgaXNGdW5jdGlvbiwgaXNCb29sZWFuLCBpc1N0cmluZywgaXNOb25QcmltaXRpdmUsXHJcblx0aXNDbGFzcywgaXNBcnJheU9mU3RyaW5ncywgaXNFbXB0eSwgbm9uRW1wdHksXHJcblx0Y2xhc3NOYW1lLCBmdW5jdGlvbk5hbWUsIHN5bWJvbE5hbWUsXHJcblx0Y2xhc3NEZWYsIGZ1bmN0aW9uRGVmLCByZWdleHBEZWYsXHJcblx0fSBmcm9tICdkYXRhdHlwZXMnXHJcbmltcG9ydCB7XHJcblx0Z2V0T3B0aW9ucywgZXNjYXBlU3RyLCB1bmVzY2FwZVN0cixcclxuXHRrZXlzLCB0b0Jsb2NrLCBvLCBydHJpbSwgRmV0Y2hlcixcclxuXHR9IGZyb20gJ2xsdXRpbHMnXHJcbmltcG9ydCB7T0x9IGZyb20gJ3RvLW5pY2UnXHJcbmltcG9ydCB7aW5kZW50ZWR9IGZyb20gJ2luZGVudCdcclxuaW1wb3J0IHt0b05pY2V9IGZyb20gJ3RvLW5pY2UnXHJcbmltcG9ydCB7XHJcblx0VFBMTFRva2VuLCB0a0VPRiwgdGtJbmRlbnQsIHRrVW5kZW50LFxyXG5cdFRUb2tlbkdlbmVyYXRvciwgYWxsVG9rZW5zSW5CbG9jayxcclxuXHR9IGZyb20gJ3BsbCdcclxuXHJcbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5leHBvcnQgbmljZVNwbGl0dGVyOiBUVG9rZW5HZW5lcmF0b3IgOj0gKFxyXG5cdFx0c3RyOiBzdHJpbmdcclxuXHRcdCkgLT5cclxuXHRpZiBsZXQgbE1hdGNoZXMgPSBzdHIubWF0Y2goLy8vXlxyXG5cdFx0XHQtXHJcblx0XHRcdCguKilcclxuXHRcdFx0JC8vLylcclxuXHRcdHRhaWwgOj0gbE1hdGNoZXNbMV0udHJpbSgpXHJcblx0XHRpZiB0YWlsXHJcblx0XHRcdHlpZWxkIHtcclxuXHRcdFx0XHRraW5kOiAnbGlzdC1pdGVtJ1xyXG5cdFx0XHRcdHN0clxyXG5cdFx0XHRcdHZhbHVlOiBnZXRQcmltaXRpdmUodGFpbClcclxuXHRcdFx0XHR9XHJcblx0XHRlbHNlXHJcblx0XHRcdHlpZWxkIHtcclxuXHRcdFx0XHRraW5kOiAnbGlzdC1oZWFkJ1xyXG5cdFx0XHRcdG5hbWU6IHN0clxyXG5cdFx0XHRcdHN0cjogJydcclxuXHRcdFx0XHR9XHJcblx0ZWxzZSBpZiBsZXQgbE1hdGNoZXMgPSBzdHIubWF0Y2goLy8vXlxyXG5cdFx0XHQoW0EtWmEtel1bQS1aYS16MC05X10qKVxyXG5cdFx0XHQ6XHJcblx0XHRcdCguKilcclxuXHRcdFx0JC8vLylcclxuXHRcdG5hbWUgOj0gbE1hdGNoZXNbMV1cclxuXHRcdHRhaWwgOj0gbE1hdGNoZXNbMl0udHJpbSgpXHJcblx0XHRpZiB0YWlsXHJcblx0XHRcdHlpZWxkIHtcclxuXHRcdFx0XHRraW5kOiAnaGFzaC1pdGVtJ1xyXG5cdFx0XHRcdHN0clxyXG5cdFx0XHRcdG5hbWVcclxuXHRcdFx0XHR2YWx1ZTogZ2V0UHJpbWl0aXZlKHRhaWwpXHJcblx0XHRcdFx0fVxyXG5cdFx0ZWxzZVxyXG5cdFx0XHR5aWVsZCB7XHJcblx0XHRcdFx0a2luZDogJ2hhc2gtaGVhZCdcclxuXHRcdFx0XHRuYW1lXHJcblx0XHRcdFx0c3RyXHJcblx0XHRcdFx0fVxyXG5cdGVsc2VcclxuXHRcdHlpZWxkIHtcclxuXHRcdFx0a2luZDogJ3ByaW1pdGl2ZSdcclxuXHRcdFx0c3RyXHJcblx0XHRcdHZhbHVlOiBnZXRQcmltaXRpdmUoc3RyKVxyXG5cdFx0XHR9XHJcblxyXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuZXhwb3J0IGFsbE5pY2VUb2tlbnMgOj0gKFxyXG5cdFx0YmxvY2s6IHN0cmluZyxcclxuXHRcdCk6IEdlbmVyYXRvcjxUUExMVG9rZW4sIHZvaWQsIHZvaWQ+IC0+XHJcblxyXG5cdGZvciBoIG9mIGFsbFRva2Vuc0luQmxvY2soYmxvY2ssIG5pY2VTcGxpdHRlcilcclxuXHRcdHlpZWxkIGhcclxuXHRyZXR1cm5cclxuXHJcbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5leHBvcnQgZnJvbU5pY2UgOj0gKFxyXG5cdFx0c3RyOiBzdHJpbmcsXHJcblx0XHQpOiB1bmtub3duID0+XHJcblxyXG5cdCMgLS0tIENyZWF0ZSBhIEZldGNoZXIsIHRoZW4gdXNlXHJcblx0IyAgICAgcmVjdXJzaXZlIGRlc2NlbnQgcGFyc2luZ1xyXG5cclxuXHRmZXRjaGVyIDo9IG5ldyBGZXRjaGVyPFRQTExUb2tlbj4oYWxsTmljZVRva2VucyhzdHIpLCB0a0VPRilcclxuXHJcblx0cGFyc2VPYmogOj0gKCk6IHVua25vd24gPT5cclxuXHRcdHtraW5kLCBzdHJ9IDo9IGZldGNoZXIucGVlaygpXHJcblx0XHRzd2l0Y2gga2luZFxyXG5cdFx0XHQnbGlzdC1pdGVtJywgJ2xpc3QtaGVhZCdcclxuXHRcdFx0XHRyZXR1cm4gcGFyc2VMaXN0KClcclxuXHRcdFx0J2hhc2gtaXRlbScsICdoYXNoLWhlYWQnXHJcblx0XHRcdFx0cmV0dXJuIHBhcnNlSGFzaCgpXHJcblx0XHRcdCdlb2YnXHJcblx0XHRcdFx0cmV0dXJuIHVuZGVmXHJcblx0XHRcdGVsc2VcclxuXHRcdFx0XHRmZXRjaGVyLnNraXAoKVxyXG5cdFx0XHRcdGlmIGRlZmluZWQoc3RyKVxyXG5cdFx0XHRcdFx0cmV0dXJuIGdldFByaW1pdGl2ZShzdHIpXHJcblxyXG5cdHBhcnNlTGlzdCA6PSAoKTogdW5rbm93bltdID0+XHJcblx0XHRsSXRlbXM6IHVua25vd25bXSA6PSBbXVxyXG5cdFx0bGV0IHtraW5kfSA9IGZldGNoZXIucGVlaygpXHJcblx0XHR3aGlsZSBbJ2xpc3QtaXRlbScsICdsaXN0LWhlYWQnXS5pbmNsdWRlcyBraW5kXHJcblx0XHRcdGlmIChraW5kID09ICdsaXN0LWhlYWQnKVxyXG5cdFx0XHRcdGxJdGVtcy5wdXNoIHBhcnNlTGlzdE5lc3QoKVxyXG5cdFx0XHRlbHNlXHJcblx0XHRcdFx0bEl0ZW1zLnB1c2ggZmV0Y2hlci5nZXQoKS52YWx1ZVxyXG5cdFx0XHRraW5kID0gZmV0Y2hlci5wZWVrKCkua2luZFxyXG5cdFx0cmV0dXJuIGxJdGVtc1xyXG5cclxuXHRwYXJzZUxpc3ROZXN0IDo9ICgpOiB1bmtub3duW10gPT5cclxuXHRcdGZldGNoZXIuZ2V0KHtraW5kOiAnbGlzdC1oZWFkJywgc3RyOiAnJ30pXHJcblx0XHRmZXRjaGVyLmdldCh7a2luZDogJ2luZGVudCcsIHN0cjogJyd9KVxyXG5cdFx0dmFsdWUgOj0gcGFyc2VPYmooKVxyXG5cdFx0ZmV0Y2hlci5nZXQoe2tpbmQ6ICd1bmRlbnQnLCBzdHI6ICcnfSlcclxuXHRcdHJldHVybiBbdmFsdWVdXHJcblxyXG5cdHBhcnNlSGFzaCA6PSAoKTogaGFzaCA9PlxyXG5cdFx0aEl0ZW1zOiBoYXNoIDo9IHt9XHJcblx0XHRsZXQge2tpbmQsIG5hbWV9ID0gZmV0Y2hlci5wZWVrKClcclxuXHRcdGlmIChraW5kID09ICdoYXNoLWhlYWQnKVxyXG5cdFx0XHRmZXRjaGVyLnNraXAoKVxyXG5cdFx0XHRmZXRjaGVyLmdldCh7a2luZDogJ2luZGVudCcsIHN0cjogJyd9KVxyXG5cdFx0XHR2YWx1ZSA6PSBwYXJzZU9iaigpXHJcblx0XHRcdGlmIGRlZmluZWQobmFtZSlcclxuXHRcdFx0XHRoSXRlbXNbbmFtZV0gPSB2YWx1ZVxyXG5cdFx0XHRmZXRjaGVyLmdldCh7a2luZDogJ3VuZGVudCcsIHN0cjogJyd9KVxyXG5cdFx0ZWxzZVxyXG5cdFx0XHR3aGlsZSAoa2luZCA9PSAnaGFzaC1pdGVtJylcclxuXHRcdFx0XHR7bmFtZSwgdmFsdWV9IDo9IGZldGNoZXIuZ2V0KClcclxuXHRcdFx0XHRpZiBkZWZpbmVkKG5hbWUpXHJcblx0XHRcdFx0XHRoSXRlbXNbbmFtZV0gPSB2YWx1ZVxyXG5cdFx0XHRcdHtraW5kfSA9IGZldGNoZXIucGVlaygpXHJcblx0XHRyZXR1cm4gaEl0ZW1zXHJcblxyXG5cdGRlYnVnZ2VyXHJcblx0cmV0dXJuIHBhcnNlT2JqKClcclxuXHJcbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5leHBvcnQgZ2V0UHJpbWl0aXZlIDo9IChcclxuXHRcdHN0cjogc3RyaW5nLFxyXG5cdFx0KTogdW5rbm93biA9PlxyXG5cclxuXHRzdHIgPSBzdHIudHJpbSgpXHJcblx0aWYgbE1hdGNoZXMgOj0gc3RyLm1hdGNoKC9eXFwuKC4qKVxcLiQvKVxyXG5cdFx0cyA6PSBsTWF0Y2hlc1sxXS50cmltKClcclxuXHRcdHN3aXRjaCBzXHJcblx0XHRcdCd1bmRlZicgICAgICAgdGhlbiByZXR1cm4gdW5kZWZcclxuXHRcdFx0J251bGwnICAgICAgICB0aGVuIHJldHVybiBudWxsXHJcblx0XHRcdCd0cnVlJyAgICAgICAgdGhlbiByZXR1cm4gdHJ1ZVxyXG5cdFx0XHQnZmFsc2UnICAgICAgIHRoZW4gcmV0dXJuIGZhbHNlXHJcblx0XHRcdCdOYU4nICAgICAgICAgdGhlbiByZXR1cm4gTmFOXHJcblx0XHRcdCdpbmZpbml0eScgICAgdGhlbiByZXR1cm4gSW5maW5pdHlcclxuXHRcdFx0J25lZ2luZmluaXR5JyB0aGVuIHJldHVybiAtSW5maW5pdHlcclxuXHRcdFx0J3N5bWJvbCcgICAgICB0aGVuIHJldHVybiBTeW1ib2woKVxyXG5cdFx0XHQnW10nICAgICAgICAgIHRoZW4gcmV0dXJuIFtdXHJcblx0XHRcdCd7fScgICAgICAgICAgdGhlbiByZXR1cm4ge31cclxuXHRcdFx0L15zeW1ib2xcXHMrKC4rKSQvXHJcblx0XHRcdFx0bE1hdGNoZXMgOj0gcy5tYXRjaCgvXnN5bWJvbFxccysoLispJC8pXHJcblx0XHRcdFx0aWYgZGVmaW5lZChsTWF0Y2hlcylcclxuXHRcdFx0XHRcdG5hbWUgOj0gbE1hdGNoZXNbMV1cclxuXHRcdFx0XHRcdHJldHVybiBTeW1ib2wobmFtZSlcclxuXHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRyZXR1cm4gU3ltYm9sKClcclxuXHRcdFx0L15yZWdleHBcXHMrKC4rKSQvXHJcblx0XHRcdFx0bE1hdGNoZXMgOj0gcy5tYXRjaCgvXnJlZ2V4cFxccysoLispJC8pXHJcblx0XHRcdFx0aWYgZGVmaW5lZChsTWF0Y2hlcylcclxuXHRcdFx0XHRcdG5hbWUgOj0gbE1hdGNoZXNbMV1cclxuXHRcdFx0XHRcdHJldHVybiBuZXcgUmVnRXhwKG5hbWUpXHJcblx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0cmV0dXJuIG5ldyBSZWdFeHAoJ14kJylcclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHRcdGNyb2FrIFwiTm90IEltcGxlbWVudGVkXCJcclxuXHRlbHNlIGlmIHN0ci5tYXRjaCgvXlxcZCskLylcclxuXHRcdHJldHVybiBwYXJzZUludChzdHIsIDEwKVxyXG5cdGVsc2UgaWYgc3RyLm1hdGNoKC9eXFxkK1xcLlxcZCokLylcclxuXHRcdHJldHVybiBwYXJzZUZsb2F0KHN0cilcclxuXHRlbHNlXHJcblx0XHRyZXR1cm4gdW5lc2NhcGVTdHIoc3RyLCBvJ3B1cnBvc2U9QycpXHJcbiJdfQ==