"use strict";
// nice.lib.civet

import {
	undef, defined, notdefined, assert, croak, hash, hashof,
	isArray, isFunction, isBoolean, isString, isNonPrimitive,
	isClass, isArrayOfStrings, isEmpty, nonEmpty,
	className, functionName, symbolName,
	classDef, functionDef, regexpDef,
	} from 'datatypes'
import {
	getOptions, escapeStr, unescapeStr,
	keys, toBlock, o, OL, rtrim, Fetcher,
	} from 'llutils'
import {
	indented,
	} from 'indent'
import {
	TPLLToken, tkEOF, tkIndent, tkUndent,
	TTokenGenerator, allTokensInBlock,
	} from 'pll'

// ---------------------------------------------------------------------------

export type TCompareFunc = (a: string, b: string) => number
export type TMapFunc = (key: string, x: unknown) => unknown

// ---------------------------------------------------------------------------

export const alphaCompare: TCompareFunc = (
		a: string,
		b: string
		): number => {

	return (a < b) ? -1 : (a > b) ? 1 : 0
}

// ---------------------------------------------------------------------------

// --- Returns a function that:
//        compares 2 strings based on their position in lSortKeys
//        else compares alphabetically

const getCompareFunc = (
		lSortKeys: string[]
		): TCompareFunc => {

	// --- Create map of key to number
	const h: hashof<number> = {}
	let i1 = 0;for (const key of lSortKeys) {const i = i1++;
		h[key] = i+1
	}

	return function(a: string, b: string): number {
		const aVal = h[a]
		const bVal = h[b]

		if (defined(aVal)) {
			if (defined(bVal)) {
				// --- compare numerically
				return (aVal < bVal) ? -1 : (aVal > bVal) ? 1 : 0
			}
			else {
				return -1
			}
		}
		else {
			if (defined(bVal)) {
				return 1
			}
			else {
				return alphaCompare(a, b)
			}
		}
	}
}

// ---------------------------------------------------------------------------
// --- leading digit must be preceded by a single '\'
//     leading and trailing whitespace must be replaced
//        with \t, \n or \x20

export const toNiceString = (str: string): string => {

	// --- escape TABs and NEWLINEs

	const str1 = escapeStr(str, o`style=C`)

	// --- precede with '/' if starts with digit, '.' or '-'

	const str2 = str1.match(/^[\d.-]/) ? `\\${str1}` : str1
	const str3 = str2.match(/^\S+:/) ? `\\${str2}` : str2

	// --- check for leading or trailing spaces
	//     (TABs and NEWLINEs have already been escaped)
	//     (regex always matches)

	const lMatches = str3.match(/^(\x20+)?(.*?)(\x20+)?$/)
	if (defined(lMatches)) {
		const [_, pre, mid, post] = lMatches
		return (
			(defined(pre) ? '\\x20'.repeat(pre.length) : '')
			+ mid
			+ (defined(post) ? '\\x20'.repeat(post.length) : '')
			)
	}
	return str2
}

// ---------------------------------------------------------------------------

const pathadd = (
		path: string,
		key: string | number
		): string => {

	const newkey = (
		  (typeof key === 'number')
		? `[${key.toString()}]`
		: `/${key}`
		)
	return (path === '/') ? newkey : `${path}${newkey}`
}

// ---------------------------------------------------------------------------

export const toNice = (
		x: unknown,
		hOptions: hash={},
		mapVisited: Map<object, string> = new Map<object, string>(),
		path: string = '/'
		): string => {

	// --- When recoverable, classes and functions
	//     include their definitions,
	//     with escaped chars

	type opt = {
		recoverable: boolean
		ignoreEmptyKeys: boolean
		sortKeys: boolean
		sortFunc: (TCompareFunc | undefined)
		mapFunc: TMapFunc
		lInclude: ((string[]) | undefined)
		lExclude: string[]
		}
	const {recoverable,
			ignoreEmptyKeys,
			sortKeys,
			sortFunc,
			mapFunc,
			lInclude,
			lExclude,
		} = getOptions<opt>(hOptions, {
		recoverable: false,
		ignoreEmptyKeys: false,
		sortKeys: false,
		sortFunc: undef,
		mapFunc: (key: string, x: unknown) => { return x },
		lInclude: undef,
		lExclude: []
		})

	assert(!(sortKeys && defined(sortFunc)), "Bad options")
	switch(typeof x) {
		case 'undefined': {
			return '.undef.'
		}

		case 'boolean': {
			return x ? '.true.' : '.false.'
		}

		case 'number': {
			return (
				  Number.isNaN(x)    ? '.NaN.'
				: Number.isFinite(x) ? x.toString()
				: ((x < 0) ? '.neginfinity.' : '.infinity.')
				)
		}

		case 'bigint': {
			return x.toString() + 'n'
		}

		case 'string': {
			return toNiceString(x)
		}

		case 'symbol': {
			const name = symbolName(x)
			return name ? `.symbol ${name}.` : '.symbol.'
		}

		case 'function': {
			if (isClass(x)) {
				return `.class ${className(x)}.`
			}
			else {
				return `.function ${functionName(x)}.`
			}
		}

		case 'object': {
			if (x === null) {
				return '.null.'
			}

			if (x instanceof RegExp) {
				const def = regexpDef(x)
				return def ? `.regexp ${def}.` : '.regexp.'
			}

			if (x instanceof String) {
				return toNiceString(x.toString())
			}

			if (x instanceof Boolean) {
				return x ? '.true.' : '.false.'
			}

			if (x instanceof Number) {
				return x.toString()
			}

			// --- Check if object was previously visited
			const prevpath = mapVisited.get(x)
			if (prevpath) {
				return `.REF ${prevpath}.`
			}

			// --- a utility function ---

			const shouldSplit = (v: unknown): boolean => {
				return (
						(typeof v === 'object')
					&& (v !== null)
					&& !(v instanceof String)
					&& !(v instanceof Number)
					&& !(v instanceof Boolean)
					&& nonEmpty(v)
					&& !mapVisited.has(v)
					)
			}

			if (isArray(x)) {
				if (x.length === 0) {
					return '.[].'
				}
				const lLines = []
				let i2 = 0;for (const val of x) {const i = i2++;
					const doSplit = shouldSplit(val)
					const block = toNice(
							val,
							hOptions,
							mapVisited,
							pathadd(path, i)
							)
					if (doSplit) {
						lLines.push('-')
						lLines.push(indented(block, 1, {oneIndent: '   '}))
					}
					else {
						lLines.push(`- ${block}`)
					}
				}
				return toBlock(lLines)
			}

			// --- Add to visited map
			mapVisited.set(x, path)

			const lKeys = Object.keys(x)
			if (lKeys.length === 0) {
				return '.{}.'
			}

			const func: (TCompareFunc | undefined) = (
				  defined(sortFunc) ? sortFunc
				: defined(lInclude) ? getCompareFunc(lInclude)
				: sortKeys          ? alphaCompare
				:                     undef
				)

			const useKey = (key: unknown): boolean => {
				if (typeof key !== 'string') {
					return false
				}
				if (defined(lExclude) && lExclude.includes(key)) {
					return false
				}
				if (defined(lInclude) && !lInclude.includes(key)) {
					return false
				}
				return true
			}

			const lLines = []
			for (const key of (defined(func) ? lKeys.sort(func) : lKeys)) {
				if (useKey(key)) {
					const val = mapFunc(key, (x as hashof<unknown>)[key])
					if (!ignoreEmptyKeys || !isEmpty(val)) {
						const doSplit = shouldSplit(val)
						const block = toNice(
								val,
								hOptions,
								mapVisited,
								pathadd(path, key)
								)
						if (doSplit) {
							lLines.push(`${key}:`)
							lLines.push(indented(block, 1, {oneIndent: '   '}))
						}
						else {
							lLines.push(`${key}: ${block}`)
						}
					}
				}
			}
			return toBlock(lLines)
		}
	}

	return `<Unknown object ${OL(x)}>`
}

// ---------------------------------------------------------------------------


// ---------------------------------------------------------------------------

export const niceSplitter: TTokenGenerator = function*(
		str: string
		) {
	let ref;let ref1;if ((ref = str.match(/^-(.*)$/))) {let lMatches = ref;
		const tail = lMatches[1].trim()
		if (tail) {
			yield {
				kind: 'list-item',
				str,
				value: getPrimitive(tail)
				}
		}
		else {
			yield {
				kind: 'list-head',
				name: str,
				str: ''
				}
		}
	}
	else if ((ref1 = str.match(/^([A-Za-z][A-Za-z0-9_]*):(.*)$/))) {let lMatches = ref1;
		const name = lMatches[1]
		const tail = lMatches[2].trim()
		if (tail) {
			yield {
				kind: 'hash-item',
				str,
				name,
				value: getPrimitive(tail)
				}
		}
		else {
			yield {
				kind: 'hash-head',
				name,
				str
				}
		}
	}
	else {
		yield {
			kind: 'primitive',
			str,
			value: getPrimitive(str)
			}
	}
}

// ---------------------------------------------------------------------------

export const allNiceTokens = function*(
		block: string,
		): Generator<TPLLToken, void, void> {

	for (const h of allTokensInBlock(block, niceSplitter)) {
		yield h
	}
	return
}

// ---------------------------------------------------------------------------

export const fromNice = (
		str: string,
		): unknown => {

	// --- Create a Fetcher, then use
	//     recursive descent parsing

	const fetcher = new Fetcher<TPLLToken>(allNiceTokens(str), tkEOF)

	const parseObj = (): unknown => {
		const {kind, str} = fetcher.peek()
		if(kind === 'list-item' || kind === 'list-head') {
				return parseList()}
else if(kind === 'hash-item' || kind === 'hash-head') {
				return parseHash()}
else if(kind === 'eof') {
				return undef}
else  {
				fetcher.skip()
				if (defined(str)) {
					return getPrimitive(str)
				}
			}
	}

	const parseList = (): unknown[] => {
		const lItems: unknown[] = []
		let {kind} = fetcher.peek()
		while (['list-item', 'list-head'].includes(kind)) {
			if (kind === 'list-head') {
				lItems.push(parseListNest())
			}
			else {
				lItems.push(fetcher.get().value)
			}
			kind = fetcher.peek().kind
		}
		return lItems
	}

	const parseListNest = (): unknown[] => {
		fetcher.get({kind: 'list-head', str: ''})
		fetcher.get({kind: 'indent', str: ''})
		const value = parseObj()
		fetcher.get({kind: 'undent', str: ''})
		return [value]
	}

	const parseHash = (): hash => {
		const hItems: hash = {}
		let {kind, name} = fetcher.peek()
		if (kind === 'hash-head') {
			fetcher.skip()
			fetcher.get({kind: 'indent', str: ''})
			const value = parseObj()
			if (defined(name)) {
				hItems[name] = value
			}
			fetcher.get({kind: 'undent', str: ''})
		}
		else {
			while (kind === 'hash-item') {
				const {name, value} = fetcher.get()
				if (defined(name)) {
					hItems[name] = value
				};
				({kind} = fetcher.peek())
			}
		}
		return hItems
	}

	debugger
	return parseObj()
}

// ---------------------------------------------------------------------------

export const getPrimitive = (
		str: string,
		): unknown => {

	str = str.trim()
	let ref2;if ((ref2 = str.match(/^\.(.*)\.$/))) {const lMatches = ref2;
		const s = lMatches[1].trim()
		if(s === 'undef') { return undef}
else if(s === 'null') { return null}
else if(s === 'true') { return true}
else if(s === 'false') { return false}
else if(s === 'NaN') { return NaN}
else if(s === 'infinity') { return Infinity}
else if(s === 'neginfinity') { return -Infinity}
else if(s === 'symbol') { return Symbol()}
else if(s === '[]') { return []}
else if(s === '{}') { return {}}
else if(typeof s === 'string' && /^symbol\s+(.+)$/.test(s)) {
				const lMatches = s.match(/^symbol\s+(.+)$/)
				if (defined(lMatches)) {
					const name = lMatches[1]
					return Symbol(name)
				}
				else {
					return Symbol()
				}}
else if(typeof s === 'string' && /^regexp\s+(.+)$/.test(s)) {
				const lMatches = s.match(/^regexp\s+(.+)$/)
				if (defined(lMatches)) {
					const name = lMatches[1]
					return new RegExp(name)
				}
				else {
					return new RegExp('^$')
				}}
else  {
				croak("Not Implemented")
			}
	}
	else if (str.match(/^\d+$/)) {
		return parseInt(str, 10)
	}
	else if (str.match(/^\d+\.\d*$/)) {
		return parseFloat(str)
	}
	else {
		return unescapeStr(str, o`purpose=C`)
	}
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQzpcXFVzZXJzXFxqb2huZFxcdXRpbHNcXHNyY1xcbGliXFxuaWNlLmxpYi5jaXZldC50c3giLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcam9obmRcXHV0aWxzXFxzcmNcXGxpYlxcbmljZS5saWIuY2l2ZXQiXSwibWFwcGluZ3MiOiI7QUFBQSxpQkFBZ0I7QUFDaEIsQUFBQTtBQUNBLEFBQUEsTUFBTSxDQUFDLENBQUM7QUFDUixDQUFDLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQztBQUN6RCxDQUFDLE9BQU8sQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLGNBQWMsQ0FBQztBQUMxRCxDQUFDLE9BQU8sQ0FBQyxDQUFDLGdCQUFnQixDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsUUFBUSxDQUFDO0FBQzlDLENBQUMsU0FBUyxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsVUFBVSxDQUFDO0FBQ3JDLENBQUMsUUFBUSxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsU0FBUyxDQUFDO0FBQ2xDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXO0FBQ25CLEFBQUEsQUFBQSxNQUFNLENBQUMsQ0FBQztBQUNSLENBQUMsVUFBVSxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsV0FBVyxDQUFDO0FBQ3BDLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsT0FBTyxDQUFDO0FBQ3RDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTO0FBQ2pCLEFBQUEsQUFBQSxNQUFNLENBQUMsQ0FBQztBQUNSLENBQUMsUUFBUSxDQUFDO0FBQ1YsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVE7QUFD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LEMsRUFrQlc7QUFDcEIsQUFBQSxJQUFZLE1BQVIsUUFBUSxDQUFDLENBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLGlCQUFpQixDQUFDO0FBQzFDLEFBQUEsSUFBSSxHQUFHLENBQUEsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFBLENBQUEsQ0FBQTtBQUN4QixBQUFBLEtBQVMsTUFBSixJQUFJLENBQUMsQ0FBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7QUFDeEIsQUFBQSxLQUFLLE1BQU0sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLElBQUksQztJQUFDLENBQUE7QUFDNUIsQUFBQSxJQUFJLElBQUksQ0FBQSxDQUFBO0FBQ1IsQUFBQSxLQUFLLE1BQU0sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLElBQUksQztJQUFDLEMsQztLQUNyQixDQUFBLENBQUE7QUFDUCxBQUFBLElBQUksS0FBSyxDQUFBLEFBQUMsaUJBQWlCLEM7R0FBQSxDO0NBQUEsQ0FBQTtBQUMzQixBQUFBLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQSxHQUFHLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFBLENBQUEsQ0FBQTtBQUMzQixBQUFBLEVBQUUsTUFBTSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLEM7Q0FBQyxDQUFBO0FBQzFCLEFBQUEsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFBLEdBQUcsQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLENBQUEsQ0FBQSxDQUFBO0FBQ2hDLEFBQUEsRUFBRSxNQUFNLENBQUMsVUFBVSxDQUFDLEdBQUcsQztDQUFDLENBQUE7QUFDeEIsQUFBQSxDQUFDLElBQUksQ0FBQSxDQUFBO0FBQ0wsQUFBQSxFQUFFLE1BQU0sQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUMsQyxXQUFZLEM7Q0FBQyxDO0FBQUEsQ0FBQTtBQUN2QyIsIm5hbWVzIjpbXSwic291cmNlc0NvbnRlbnQiOlsiIyBuaWNlLmxpYi5jaXZldFxyXG5cclxuaW1wb3J0IHtcclxuXHR1bmRlZiwgZGVmaW5lZCwgbm90ZGVmaW5lZCwgYXNzZXJ0LCBjcm9haywgaGFzaCwgaGFzaG9mLFxyXG5cdGlzQXJyYXksIGlzRnVuY3Rpb24sIGlzQm9vbGVhbiwgaXNTdHJpbmcsIGlzTm9uUHJpbWl0aXZlLFxyXG5cdGlzQ2xhc3MsIGlzQXJyYXlPZlN0cmluZ3MsIGlzRW1wdHksIG5vbkVtcHR5LFxyXG5cdGNsYXNzTmFtZSwgZnVuY3Rpb25OYW1lLCBzeW1ib2xOYW1lLFxyXG5cdGNsYXNzRGVmLCBmdW5jdGlvbkRlZiwgcmVnZXhwRGVmLFxyXG5cdH0gZnJvbSAnZGF0YXR5cGVzJ1xyXG5pbXBvcnQge1xyXG5cdGdldE9wdGlvbnMsIGVzY2FwZVN0ciwgdW5lc2NhcGVTdHIsXHJcblx0a2V5cywgdG9CbG9jaywgbywgT0wsIHJ0cmltLCBGZXRjaGVyLFxyXG5cdH0gZnJvbSAnbGx1dGlscydcclxuaW1wb3J0IHtcclxuXHRpbmRlbnRlZCxcclxuXHR9IGZyb20gJ2luZGVudCdcclxuaW1wb3J0IHtcclxuXHRUUExMVG9rZW4sIHRrRU9GLCB0a0luZGVudCwgdGtVbmRlbnQsXHJcblx0VFRva2VuR2VuZXJhdG9yLCBhbGxUb2tlbnNJbkJsb2NrLFxyXG5cdH0gZnJvbSAncGxsJ1xyXG5cclxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbmV4cG9ydCB0eXBlIFRDb21wYXJlRnVuYyA9IChhOiBzdHJpbmcsIGI6IHN0cmluZykgPT4gbnVtYmVyXHJcbmV4cG9ydCB0eXBlIFRNYXBGdW5jID0gKGtleTogc3RyaW5nLCB4OiB1bmtub3duKSA9PiB1bmtub3duXHJcblxyXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuZXhwb3J0IGFscGhhQ29tcGFyZTogVENvbXBhcmVGdW5jIDo9IChcclxuXHRcdGE6IHN0cmluZyxcclxuXHRcdGI6IHN0cmluZ1xyXG5cdFx0KTogbnVtYmVyID0+XHJcblxyXG5cdHJldHVybiAoYSA8IGIpID8gLTEgOiAoYSA+IGIpID8gMSA6IDBcclxuXHJcbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4jIC0tLSBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdDpcclxuIyAgICAgICAgY29tcGFyZXMgMiBzdHJpbmdzIGJhc2VkIG9uIHRoZWlyIHBvc2l0aW9uIGluIGxTb3J0S2V5c1xyXG4jICAgICAgICBlbHNlIGNvbXBhcmVzIGFscGhhYmV0aWNhbGx5XHJcblxyXG5nZXRDb21wYXJlRnVuYyA6PSAoXHJcblx0XHRsU29ydEtleXM6IHN0cmluZ1tdXHJcblx0XHQpOiBUQ29tcGFyZUZ1bmMgPT5cclxuXHJcblx0IyAtLS0gQ3JlYXRlIG1hcCBvZiBrZXkgdG8gbnVtYmVyXHJcblx0aDogaGFzaG9mPG51bWJlcj4gOj0ge31cclxuXHRmb3Iga2V5LGkgb2YgbFNvcnRLZXlzXHJcblx0XHRoW2tleV0gPSBpKzFcclxuXHJcblx0cmV0dXJuIChhOiBzdHJpbmcsIGI6IHN0cmluZyk6IG51bWJlciAtPlxyXG5cdFx0YVZhbCA6PSBoW2FdXHJcblx0XHRiVmFsIDo9IGhbYl1cclxuXHJcblx0XHRpZiBkZWZpbmVkKGFWYWwpXHJcblx0XHRcdGlmIGRlZmluZWQoYlZhbClcclxuXHRcdFx0XHQjIC0tLSBjb21wYXJlIG51bWVyaWNhbGx5XHJcblx0XHRcdFx0cmV0dXJuIChhVmFsIDwgYlZhbCkgPyAtMSA6IChhVmFsID4gYlZhbCkgPyAxIDogMFxyXG5cdFx0XHRlbHNlXHJcblx0XHRcdFx0cmV0dXJuIC0xXHJcblx0XHRlbHNlXHJcblx0XHRcdGlmIGRlZmluZWQoYlZhbClcclxuXHRcdFx0XHRyZXR1cm4gMVxyXG5cdFx0XHRlbHNlXHJcblx0XHRcdFx0cmV0dXJuIGFscGhhQ29tcGFyZShhLCBiKVxyXG5cclxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuIyAtLS0gbGVhZGluZyBkaWdpdCBtdXN0IGJlIHByZWNlZGVkIGJ5IGEgc2luZ2xlICdcXCdcclxuIyAgICAgbGVhZGluZyBhbmQgdHJhaWxpbmcgd2hpdGVzcGFjZSBtdXN0IGJlIHJlcGxhY2VkXHJcbiMgICAgICAgIHdpdGggXFx0LCBcXG4gb3IgXFx4MjBcclxuXHJcbmV4cG9ydCB0b05pY2VTdHJpbmcgOj0gKHN0cjogc3RyaW5nKTogc3RyaW5nID0+XHJcblxyXG5cdCMgLS0tIGVzY2FwZSBUQUJzIGFuZCBORVdMSU5Fc1xyXG5cclxuXHRzdHIxIDo9IGVzY2FwZVN0cihzdHIsIG8nc3R5bGU9QycpXHJcblxyXG5cdCMgLS0tIHByZWNlZGUgd2l0aCAnLycgaWYgc3RhcnRzIHdpdGggZGlnaXQsICcuJyBvciAnLSdcclxuXHJcblx0c3RyMiA6PSBzdHIxLm1hdGNoKC9eW1xcZC4tXS8pID8gXCJcXFxcI3tzdHIxfVwiIDogc3RyMVxyXG5cdHN0cjMgOj0gc3RyMi5tYXRjaCgvXlxcUys6LykgPyBcIlxcXFwje3N0cjJ9XCIgOiBzdHIyXHJcblxyXG5cdCMgLS0tIGNoZWNrIGZvciBsZWFkaW5nIG9yIHRyYWlsaW5nIHNwYWNlc1xyXG5cdCMgICAgIChUQUJzIGFuZCBORVdMSU5FcyBoYXZlIGFscmVhZHkgYmVlbiBlc2NhcGVkKVxyXG5cdCMgICAgIChyZWdleCBhbHdheXMgbWF0Y2hlcylcclxuXHJcblx0bE1hdGNoZXMgOj0gc3RyMy5tYXRjaCAvLy9eXHJcblx0XHRcdChcXHgyMCspP1xyXG5cdFx0XHQoLio/KVxyXG5cdFx0XHQoXFx4MjArKT9cclxuXHRcdFx0JC8vL1xyXG5cdGlmIGRlZmluZWQobE1hdGNoZXMpXHJcblx0XHRbXywgcHJlLCBtaWQsIHBvc3RdIDo9IGxNYXRjaGVzXHJcblx0XHRyZXR1cm4gKFxyXG5cdFx0XHQoZGVmaW5lZChwcmUpID8gJ1xcXFx4MjAnLnJlcGVhdChwcmUubGVuZ3RoKSA6ICcnKVxyXG5cdFx0XHQrIG1pZFxyXG5cdFx0XHQrIChkZWZpbmVkKHBvc3QpID8gJ1xcXFx4MjAnLnJlcGVhdChwb3N0Lmxlbmd0aCkgOiAnJylcclxuXHRcdFx0KVxyXG5cdHJldHVybiBzdHIyXHJcblxyXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxucGF0aGFkZCA6PSAoXHJcblx0XHRwYXRoOiBzdHJpbmdcclxuXHRcdGtleTogc3RyaW5nIHwgbnVtYmVyXHJcblx0XHQpOiBzdHJpbmcgPT5cclxuXHJcblx0bmV3a2V5IDo9IChcclxuXHRcdCAgKHR5cGVvZiBrZXkgPT0gJ251bWJlcicpXHJcblx0XHQ/IFwiWyN7a2V5LnRvU3RyaW5nKCl9XVwiXHJcblx0XHQ6IFwiLyN7a2V5fVwiXHJcblx0XHQpXHJcblx0cmV0dXJuIChwYXRoID09ICcvJykgPyBuZXdrZXkgOiBcIiN7cGF0aH0je25ld2tleX1cIlxyXG5cclxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbmV4cG9ydCB0b05pY2UgOj0gKFxyXG5cdFx0eDogdW5rbm93bixcclxuXHRcdGhPcHRpb25zOiBoYXNoPXt9XHJcblx0XHRtYXBWaXNpdGVkOiBNYXA8b2JqZWN0LCBzdHJpbmc+ID0gbmV3IE1hcDxvYmplY3QsIHN0cmluZz4oKVxyXG5cdFx0cGF0aDogc3RyaW5nID0gJy8nXHJcblx0XHQpOiBzdHJpbmcgPT5cclxuXHJcblx0IyAtLS0gV2hlbiByZWNvdmVyYWJsZSwgY2xhc3NlcyBhbmQgZnVuY3Rpb25zXHJcblx0IyAgICAgaW5jbHVkZSB0aGVpciBkZWZpbml0aW9ucyxcclxuXHQjICAgICB3aXRoIGVzY2FwZWQgY2hhcnNcclxuXHJcblx0dHlwZSBvcHQgPSB7XHJcblx0XHRyZWNvdmVyYWJsZTogYm9vbGVhblxyXG5cdFx0aWdub3JlRW1wdHlLZXlzOiBib29sZWFuXHJcblx0XHRzb3J0S2V5czogYm9vbGVhblxyXG5cdFx0c29ydEZ1bmM6IFRDb21wYXJlRnVuYz9cclxuXHRcdG1hcEZ1bmM6IFRNYXBGdW5jXHJcblx0XHRsSW5jbHVkZTogc3RyaW5nW10/XHJcblx0XHRsRXhjbHVkZTogc3RyaW5nW11cclxuXHRcdH1cclxuXHR7cmVjb3ZlcmFibGUsXHJcblx0XHRcdGlnbm9yZUVtcHR5S2V5cyxcclxuXHRcdFx0c29ydEtleXMsXHJcblx0XHRcdHNvcnRGdW5jLFxyXG5cdFx0XHRtYXBGdW5jLFxyXG5cdFx0XHRsSW5jbHVkZSxcclxuXHRcdFx0bEV4Y2x1ZGUsXHJcblx0XHR9IDo9IGdldE9wdGlvbnM8b3B0PiBoT3B0aW9ucywge1xyXG5cdFx0cmVjb3ZlcmFibGU6IGZhbHNlXHJcblx0XHRpZ25vcmVFbXB0eUtleXM6IGZhbHNlXHJcblx0XHRzb3J0S2V5czogZmFsc2VcclxuXHRcdHNvcnRGdW5jOiB1bmRlZlxyXG5cdFx0bWFwRnVuYzogKGtleTogc3RyaW5nLCB4OiB1bmtub3duKSA9PiByZXR1cm4geFxyXG5cdFx0bEluY2x1ZGU6IHVuZGVmXHJcblx0XHRsRXhjbHVkZTogW11cclxuXHRcdH1cclxuXHJcblx0YXNzZXJ0IG5vdCAoc29ydEtleXMgJiYgZGVmaW5lZChzb3J0RnVuYykpLCBcIkJhZCBvcHRpb25zXCJcclxuXHRzd2l0Y2ggdHlwZW9mIHhcclxuXHRcdHdoZW4gJ3VuZGVmaW5lZCdcclxuXHRcdFx0cmV0dXJuICcudW5kZWYuJ1xyXG5cclxuXHRcdHdoZW4gJ2Jvb2xlYW4nXHJcblx0XHRcdHJldHVybiB4ID8gJy50cnVlLicgOiAnLmZhbHNlLidcclxuXHJcblx0XHR3aGVuICdudW1iZXInXHJcblx0XHRcdHJldHVybiAoXHJcblx0XHRcdFx0ICBOdW1iZXIuaXNOYU4oeCkgICAgPyAnLk5hTi4nXHJcblx0XHRcdFx0OiBOdW1iZXIuaXNGaW5pdGUoeCkgPyB4LnRvU3RyaW5nKClcclxuXHRcdFx0XHQ6ICgoeCA8IDApID8gJy5uZWdpbmZpbml0eS4nIDogJy5pbmZpbml0eS4nKVxyXG5cdFx0XHRcdClcclxuXHJcblx0XHR3aGVuICdiaWdpbnQnXHJcblx0XHRcdHJldHVybiB4LnRvU3RyaW5nKCkgKyAnbidcclxuXHJcblx0XHR3aGVuICdzdHJpbmcnXHJcblx0XHRcdHJldHVybiB0b05pY2VTdHJpbmcoeClcclxuXHJcblx0XHR3aGVuICdzeW1ib2wnXHJcblx0XHRcdG5hbWUgOj0gc3ltYm9sTmFtZSh4KVxyXG5cdFx0XHRyZXR1cm4gbmFtZSA/IFwiLnN5bWJvbCAje25hbWV9LlwiIDogJy5zeW1ib2wuJ1xyXG5cclxuXHRcdHdoZW4gJ2Z1bmN0aW9uJ1xyXG5cdFx0XHRpZiBpc0NsYXNzKHgpXHJcblx0XHRcdFx0cmV0dXJuIFwiLmNsYXNzICN7Y2xhc3NOYW1lKHgpfS5cIlxyXG5cdFx0XHRlbHNlXHJcblx0XHRcdFx0cmV0dXJuIFwiLmZ1bmN0aW9uICN7ZnVuY3Rpb25OYW1lKHgpfS5cIlxyXG5cclxuXHRcdHdoZW4gJ29iamVjdCdcclxuXHRcdFx0aWYgKHggPT0gbnVsbClcclxuXHRcdFx0XHRyZXR1cm4gJy5udWxsLidcclxuXHJcblx0XHRcdGlmICh4IGluc3RhbmNlb2YgUmVnRXhwKVxyXG5cdFx0XHRcdGRlZiA6PSByZWdleHBEZWYoeClcclxuXHRcdFx0XHRyZXR1cm4gZGVmID8gXCIucmVnZXhwICN7ZGVmfS5cIiA6ICcucmVnZXhwLidcclxuXHJcblx0XHRcdGlmICh4IGluc3RhbmNlb2YgU3RyaW5nKVxyXG5cdFx0XHRcdHJldHVybiB0b05pY2VTdHJpbmcoeC50b1N0cmluZygpKVxyXG5cclxuXHRcdFx0aWYgKHggaW5zdGFuY2VvZiBCb29sZWFuKVxyXG5cdFx0XHRcdHJldHVybiB4ID8gJy50cnVlLicgOiAnLmZhbHNlLidcclxuXHJcblx0XHRcdGlmICh4IGluc3RhbmNlb2YgTnVtYmVyKVxyXG5cdFx0XHRcdHJldHVybiB4LnRvU3RyaW5nKClcclxuXHJcblx0XHRcdCMgLS0tIENoZWNrIGlmIG9iamVjdCB3YXMgcHJldmlvdXNseSB2aXNpdGVkXHJcblx0XHRcdHByZXZwYXRoIDo9IG1hcFZpc2l0ZWQuZ2V0IHhcclxuXHRcdFx0aWYgcHJldnBhdGhcclxuXHRcdFx0XHRyZXR1cm4gXCIuUkVGICN7cHJldnBhdGh9LlwiXHJcblxyXG5cdFx0XHQjIC0tLSBhIHV0aWxpdHkgZnVuY3Rpb24gLS0tXHJcblxyXG5cdFx0XHRzaG91bGRTcGxpdCA6PSAodjogdW5rbm93bik6IGJvb2xlYW4gPT5cclxuXHRcdFx0XHRyZXR1cm4gKFxyXG5cdFx0XHRcdFx0XHQodHlwZW9mIHYgPT0gJ29iamVjdCcpXHJcblx0XHRcdFx0XHQmJiAodiAhPSBudWxsKVxyXG5cdFx0XHRcdFx0JiYgbm90ICh2IGluc3RhbmNlb2YgU3RyaW5nKVxyXG5cdFx0XHRcdFx0JiYgbm90ICh2IGluc3RhbmNlb2YgTnVtYmVyKVxyXG5cdFx0XHRcdFx0JiYgbm90ICh2IGluc3RhbmNlb2YgQm9vbGVhbilcclxuXHRcdFx0XHRcdCYmIG5vbkVtcHR5KHYpXHJcblx0XHRcdFx0XHQmJiBub3QgbWFwVmlzaXRlZC5oYXModilcclxuXHRcdFx0XHRcdClcclxuXHJcblx0XHRcdGlmIGlzQXJyYXkoeClcclxuXHRcdFx0XHRpZiAoeC5sZW5ndGggPT0gMClcclxuXHRcdFx0XHRcdHJldHVybiAnLltdLidcclxuXHRcdFx0XHRsTGluZXMgOj0gW11cclxuXHRcdFx0XHRmb3IgdmFsLGkgb2YgeFxyXG5cdFx0XHRcdFx0ZG9TcGxpdCA6PSBzaG91bGRTcGxpdCh2YWwpXHJcblx0XHRcdFx0XHRibG9jayA6PSB0b05pY2UoXHJcblx0XHRcdFx0XHRcdFx0dmFsLFxyXG5cdFx0XHRcdFx0XHRcdGhPcHRpb25zLFxyXG5cdFx0XHRcdFx0XHRcdG1hcFZpc2l0ZWQsXHJcblx0XHRcdFx0XHRcdFx0cGF0aGFkZChwYXRoLCBpKVxyXG5cdFx0XHRcdFx0XHRcdClcclxuXHRcdFx0XHRcdGlmIGRvU3BsaXRcclxuXHRcdFx0XHRcdFx0bExpbmVzLnB1c2ggJy0nXHJcblx0XHRcdFx0XHRcdGxMaW5lcy5wdXNoIGluZGVudGVkKGJsb2NrLCAxLCB7b25lSW5kZW50OiAnICAgJ30pXHJcblx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRcdGxMaW5lcy5wdXNoIFwiLSAje2Jsb2NrfVwiXHJcblx0XHRcdFx0cmV0dXJuIHRvQmxvY2sobExpbmVzKVxyXG5cclxuXHRcdFx0IyAtLS0gQWRkIHRvIHZpc2l0ZWQgbWFwXHJcblx0XHRcdG1hcFZpc2l0ZWQuc2V0IHgsIHBhdGhcclxuXHJcblx0XHRcdGxLZXlzIDo9IE9iamVjdC5rZXlzKHgpXHJcblx0XHRcdGlmIChsS2V5cy5sZW5ndGggPT0gMClcclxuXHRcdFx0XHRyZXR1cm4gJy57fS4nXHJcblxyXG5cdFx0XHRmdW5jOiBUQ29tcGFyZUZ1bmM/IDo9IChcclxuXHRcdFx0XHQgIGRlZmluZWQoc29ydEZ1bmMpID8gc29ydEZ1bmNcclxuXHRcdFx0XHQ6IGRlZmluZWQobEluY2x1ZGUpID8gZ2V0Q29tcGFyZUZ1bmMobEluY2x1ZGUpXHJcblx0XHRcdFx0OiBzb3J0S2V5cyAgICAgICAgICA/IGFscGhhQ29tcGFyZVxyXG5cdFx0XHRcdDogICAgICAgICAgICAgICAgICAgICB1bmRlZlxyXG5cdFx0XHRcdClcclxuXHJcblx0XHRcdHVzZUtleSA6PSAoa2V5OiB1bmtub3duKTogYm9vbGVhbiA9PlxyXG5cdFx0XHRcdGlmICh0eXBlb2Yga2V5ICE9ICdzdHJpbmcnKVxyXG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlXHJcblx0XHRcdFx0aWYgZGVmaW5lZChsRXhjbHVkZSkgJiYgbEV4Y2x1ZGUuaW5jbHVkZXMoa2V5KVxyXG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlXHJcblx0XHRcdFx0aWYgZGVmaW5lZChsSW5jbHVkZSkgJiYgbm90IGxJbmNsdWRlLmluY2x1ZGVzKGtleSlcclxuXHRcdFx0XHRcdHJldHVybiBmYWxzZVxyXG5cdFx0XHRcdHJldHVybiB0cnVlXHJcblxyXG5cdFx0XHRsTGluZXMgOj0gW11cclxuXHRcdFx0Zm9yIGtleSBvZiAoZGVmaW5lZChmdW5jKSA/IGxLZXlzLnNvcnQoZnVuYykgOiBsS2V5cylcclxuXHRcdFx0XHRpZiB1c2VLZXkoa2V5KVxyXG5cdFx0XHRcdFx0dmFsIDo9IG1hcEZ1bmMoa2V5LCAoeCBhcyBoYXNob2Y8dW5rbm93bj4pW2tleV0pXHJcblx0XHRcdFx0XHRpZiBub3QgaWdub3JlRW1wdHlLZXlzIHx8IG5vdCBpc0VtcHR5KHZhbClcclxuXHRcdFx0XHRcdFx0ZG9TcGxpdCA6PSBzaG91bGRTcGxpdCh2YWwpXHJcblx0XHRcdFx0XHRcdGJsb2NrIDo9IHRvTmljZShcclxuXHRcdFx0XHRcdFx0XHRcdHZhbCxcclxuXHRcdFx0XHRcdFx0XHRcdGhPcHRpb25zLFxyXG5cdFx0XHRcdFx0XHRcdFx0bWFwVmlzaXRlZCxcclxuXHRcdFx0XHRcdFx0XHRcdHBhdGhhZGQocGF0aCwga2V5KVxyXG5cdFx0XHRcdFx0XHRcdFx0KVxyXG5cdFx0XHRcdFx0XHRpZiBkb1NwbGl0XHJcblx0XHRcdFx0XHRcdFx0bExpbmVzLnB1c2ggXCIje2tleX06XCJcclxuXHRcdFx0XHRcdFx0XHRsTGluZXMucHVzaCBpbmRlbnRlZChibG9jaywgMSwge29uZUluZGVudDogJyAgICd9KVxyXG5cdFx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRcdFx0bExpbmVzLnB1c2ggXCIje2tleX06ICN7YmxvY2t9XCJcclxuXHRcdFx0cmV0dXJuIHRvQmxvY2sobExpbmVzKVxyXG5cclxuXHRyZXR1cm4gXCI8VW5rbm93biBvYmplY3QgI3tPTCh4KX0+XCJcclxuXHJcbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5cclxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbmV4cG9ydCBuaWNlU3BsaXR0ZXI6IFRUb2tlbkdlbmVyYXRvciA6PSAoXHJcblx0XHRzdHI6IHN0cmluZ1xyXG5cdFx0KSAtPlxyXG5cdGlmIGxldCBsTWF0Y2hlcyA9IHN0ci5tYXRjaCgvLy9eXHJcblx0XHRcdC1cclxuXHRcdFx0KC4qKVxyXG5cdFx0XHQkLy8vKVxyXG5cdFx0dGFpbCA6PSBsTWF0Y2hlc1sxXS50cmltKClcclxuXHRcdGlmIHRhaWxcclxuXHRcdFx0eWllbGQge1xyXG5cdFx0XHRcdGtpbmQ6ICdsaXN0LWl0ZW0nXHJcblx0XHRcdFx0c3RyXHJcblx0XHRcdFx0dmFsdWU6IGdldFByaW1pdGl2ZSh0YWlsKVxyXG5cdFx0XHRcdH1cclxuXHRcdGVsc2VcclxuXHRcdFx0eWllbGQge1xyXG5cdFx0XHRcdGtpbmQ6ICdsaXN0LWhlYWQnXHJcblx0XHRcdFx0bmFtZTogc3RyXHJcblx0XHRcdFx0c3RyOiAnJ1xyXG5cdFx0XHRcdH1cclxuXHRlbHNlIGlmIGxldCBsTWF0Y2hlcyA9IHN0ci5tYXRjaCgvLy9eXHJcblx0XHRcdChbQS1aYS16XVtBLVphLXowLTlfXSopXHJcblx0XHRcdDpcclxuXHRcdFx0KC4qKVxyXG5cdFx0XHQkLy8vKVxyXG5cdFx0bmFtZSA6PSBsTWF0Y2hlc1sxXVxyXG5cdFx0dGFpbCA6PSBsTWF0Y2hlc1syXS50cmltKClcclxuXHRcdGlmIHRhaWxcclxuXHRcdFx0eWllbGQge1xyXG5cdFx0XHRcdGtpbmQ6ICdoYXNoLWl0ZW0nXHJcblx0XHRcdFx0c3RyXHJcblx0XHRcdFx0bmFtZVxyXG5cdFx0XHRcdHZhbHVlOiBnZXRQcmltaXRpdmUodGFpbClcclxuXHRcdFx0XHR9XHJcblx0XHRlbHNlXHJcblx0XHRcdHlpZWxkIHtcclxuXHRcdFx0XHRraW5kOiAnaGFzaC1oZWFkJ1xyXG5cdFx0XHRcdG5hbWVcclxuXHRcdFx0XHRzdHJcclxuXHRcdFx0XHR9XHJcblx0ZWxzZVxyXG5cdFx0eWllbGQge1xyXG5cdFx0XHRraW5kOiAncHJpbWl0aXZlJ1xyXG5cdFx0XHRzdHJcclxuXHRcdFx0dmFsdWU6IGdldFByaW1pdGl2ZShzdHIpXHJcblx0XHRcdH1cclxuXHJcbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5leHBvcnQgYWxsTmljZVRva2VucyA6PSAoXHJcblx0XHRibG9jazogc3RyaW5nLFxyXG5cdFx0KTogR2VuZXJhdG9yPFRQTExUb2tlbiwgdm9pZCwgdm9pZD4gLT5cclxuXHJcblx0Zm9yIGggb2YgYWxsVG9rZW5zSW5CbG9jayhibG9jaywgbmljZVNwbGl0dGVyKVxyXG5cdFx0eWllbGQgaFxyXG5cdHJldHVyblxyXG5cclxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbmV4cG9ydCBmcm9tTmljZSA6PSAoXHJcblx0XHRzdHI6IHN0cmluZyxcclxuXHRcdCk6IHVua25vd24gPT5cclxuXHJcblx0IyAtLS0gQ3JlYXRlIGEgRmV0Y2hlciwgdGhlbiB1c2VcclxuXHQjICAgICByZWN1cnNpdmUgZGVzY2VudCBwYXJzaW5nXHJcblxyXG5cdGZldGNoZXIgOj0gbmV3IEZldGNoZXI8VFBMTFRva2VuPihhbGxOaWNlVG9rZW5zKHN0ciksIHRrRU9GKVxyXG5cclxuXHRwYXJzZU9iaiA6PSAoKTogdW5rbm93biA9PlxyXG5cdFx0e2tpbmQsIHN0cn0gOj0gZmV0Y2hlci5wZWVrKClcclxuXHRcdHN3aXRjaCBraW5kXHJcblx0XHRcdCdsaXN0LWl0ZW0nLCAnbGlzdC1oZWFkJ1xyXG5cdFx0XHRcdHJldHVybiBwYXJzZUxpc3QoKVxyXG5cdFx0XHQnaGFzaC1pdGVtJywgJ2hhc2gtaGVhZCdcclxuXHRcdFx0XHRyZXR1cm4gcGFyc2VIYXNoKClcclxuXHRcdFx0J2VvZidcclxuXHRcdFx0XHRyZXR1cm4gdW5kZWZcclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHRcdGZldGNoZXIuc2tpcCgpXHJcblx0XHRcdFx0aWYgZGVmaW5lZChzdHIpXHJcblx0XHRcdFx0XHRyZXR1cm4gZ2V0UHJpbWl0aXZlKHN0cilcclxuXHJcblx0cGFyc2VMaXN0IDo9ICgpOiB1bmtub3duW10gPT5cclxuXHRcdGxJdGVtczogdW5rbm93bltdIDo9IFtdXHJcblx0XHRsZXQge2tpbmR9ID0gZmV0Y2hlci5wZWVrKClcclxuXHRcdHdoaWxlIFsnbGlzdC1pdGVtJywgJ2xpc3QtaGVhZCddLmluY2x1ZGVzIGtpbmRcclxuXHRcdFx0aWYgKGtpbmQgPT0gJ2xpc3QtaGVhZCcpXHJcblx0XHRcdFx0bEl0ZW1zLnB1c2ggcGFyc2VMaXN0TmVzdCgpXHJcblx0XHRcdGVsc2VcclxuXHRcdFx0XHRsSXRlbXMucHVzaCBmZXRjaGVyLmdldCgpLnZhbHVlXHJcblx0XHRcdGtpbmQgPSBmZXRjaGVyLnBlZWsoKS5raW5kXHJcblx0XHRyZXR1cm4gbEl0ZW1zXHJcblxyXG5cdHBhcnNlTGlzdE5lc3QgOj0gKCk6IHVua25vd25bXSA9PlxyXG5cdFx0ZmV0Y2hlci5nZXQoe2tpbmQ6ICdsaXN0LWhlYWQnLCBzdHI6ICcnfSlcclxuXHRcdGZldGNoZXIuZ2V0KHtraW5kOiAnaW5kZW50Jywgc3RyOiAnJ30pXHJcblx0XHR2YWx1ZSA6PSBwYXJzZU9iaigpXHJcblx0XHRmZXRjaGVyLmdldCh7a2luZDogJ3VuZGVudCcsIHN0cjogJyd9KVxyXG5cdFx0cmV0dXJuIFt2YWx1ZV1cclxuXHJcblx0cGFyc2VIYXNoIDo9ICgpOiBoYXNoID0+XHJcblx0XHRoSXRlbXM6IGhhc2ggOj0ge31cclxuXHRcdGxldCB7a2luZCwgbmFtZX0gPSBmZXRjaGVyLnBlZWsoKVxyXG5cdFx0aWYgKGtpbmQgPT0gJ2hhc2gtaGVhZCcpXHJcblx0XHRcdGZldGNoZXIuc2tpcCgpXHJcblx0XHRcdGZldGNoZXIuZ2V0KHtraW5kOiAnaW5kZW50Jywgc3RyOiAnJ30pXHJcblx0XHRcdHZhbHVlIDo9IHBhcnNlT2JqKClcclxuXHRcdFx0aWYgZGVmaW5lZChuYW1lKVxyXG5cdFx0XHRcdGhJdGVtc1tuYW1lXSA9IHZhbHVlXHJcblx0XHRcdGZldGNoZXIuZ2V0KHtraW5kOiAndW5kZW50Jywgc3RyOiAnJ30pXHJcblx0XHRlbHNlXHJcblx0XHRcdHdoaWxlIChraW5kID09ICdoYXNoLWl0ZW0nKVxyXG5cdFx0XHRcdHtuYW1lLCB2YWx1ZX0gOj0gZmV0Y2hlci5nZXQoKVxyXG5cdFx0XHRcdGlmIGRlZmluZWQobmFtZSlcclxuXHRcdFx0XHRcdGhJdGVtc1tuYW1lXSA9IHZhbHVlXHJcblx0XHRcdFx0e2tpbmR9ID0gZmV0Y2hlci5wZWVrKClcclxuXHRcdHJldHVybiBoSXRlbXNcclxuXHJcblx0ZGVidWdnZXJcclxuXHRyZXR1cm4gcGFyc2VPYmooKVxyXG5cclxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbmV4cG9ydCBnZXRQcmltaXRpdmUgOj0gKFxyXG5cdFx0c3RyOiBzdHJpbmcsXHJcblx0XHQpOiB1bmtub3duID0+XHJcblxyXG5cdHN0ciA9IHN0ci50cmltKClcclxuXHRpZiBsTWF0Y2hlcyA6PSBzdHIubWF0Y2goL15cXC4oLiopXFwuJC8pXHJcblx0XHRzIDo9IGxNYXRjaGVzWzFdLnRyaW0oKVxyXG5cdFx0c3dpdGNoIHNcclxuXHRcdFx0J3VuZGVmJyAgICAgICB0aGVuIHJldHVybiB1bmRlZlxyXG5cdFx0XHQnbnVsbCcgICAgICAgIHRoZW4gcmV0dXJuIG51bGxcclxuXHRcdFx0J3RydWUnICAgICAgICB0aGVuIHJldHVybiB0cnVlXHJcblx0XHRcdCdmYWxzZScgICAgICAgdGhlbiByZXR1cm4gZmFsc2VcclxuXHRcdFx0J05hTicgICAgICAgICB0aGVuIHJldHVybiBOYU5cclxuXHRcdFx0J2luZmluaXR5JyAgICB0aGVuIHJldHVybiBJbmZpbml0eVxyXG5cdFx0XHQnbmVnaW5maW5pdHknIHRoZW4gcmV0dXJuIC1JbmZpbml0eVxyXG5cdFx0XHQnc3ltYm9sJyAgICAgIHRoZW4gcmV0dXJuIFN5bWJvbCgpXHJcblx0XHRcdCdbXScgICAgICAgICAgdGhlbiByZXR1cm4gW11cclxuXHRcdFx0J3t9JyAgICAgICAgICB0aGVuIHJldHVybiB7fVxyXG5cdFx0XHQvXnN5bWJvbFxccysoLispJC9cclxuXHRcdFx0XHRsTWF0Y2hlcyA6PSBzLm1hdGNoKC9ec3ltYm9sXFxzKyguKykkLylcclxuXHRcdFx0XHRpZiBkZWZpbmVkKGxNYXRjaGVzKVxyXG5cdFx0XHRcdFx0bmFtZSA6PSBsTWF0Y2hlc1sxXVxyXG5cdFx0XHRcdFx0cmV0dXJuIFN5bWJvbChuYW1lKVxyXG5cdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdHJldHVybiBTeW1ib2woKVxyXG5cdFx0XHQvXnJlZ2V4cFxccysoLispJC9cclxuXHRcdFx0XHRsTWF0Y2hlcyA6PSBzLm1hdGNoKC9ecmVnZXhwXFxzKyguKykkLylcclxuXHRcdFx0XHRpZiBkZWZpbmVkKGxNYXRjaGVzKVxyXG5cdFx0XHRcdFx0bmFtZSA6PSBsTWF0Y2hlc1sxXVxyXG5cdFx0XHRcdFx0cmV0dXJuIG5ldyBSZWdFeHAobmFtZSlcclxuXHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRyZXR1cm4gbmV3IFJlZ0V4cCgnXiQnKVxyXG5cdFx0XHRlbHNlXHJcblx0XHRcdFx0Y3JvYWsgXCJOb3QgSW1wbGVtZW50ZWRcIlxyXG5cdGVsc2UgaWYgc3RyLm1hdGNoKC9eXFxkKyQvKVxyXG5cdFx0cmV0dXJuIHBhcnNlSW50KHN0ciwgMTApXHJcblx0ZWxzZSBpZiBzdHIubWF0Y2goL15cXGQrXFwuXFxkKiQvKVxyXG5cdFx0cmV0dXJuIHBhcnNlRmxvYXQoc3RyKVxyXG5cdGVsc2VcclxuXHRcdHJldHVybiB1bmVzY2FwZVN0cihzdHIsIG8ncHVycG9zZT1DJylcclxuIl19