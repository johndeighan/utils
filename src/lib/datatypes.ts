"use strict";
// datatypes.civet

/**
 * An alias for TypeScript type 'object' with string keys
 */

export interface hash {
	[key: string]: any
}

/**
 * An array containing anything
 */

export type array = any[]

/**
 * A function that takes no parameters and returns nothing
 */

export type voidFunc = () => void

/**
 * specifying options for function getOptions()
 */

export type optionspec = hash | string

// ---------------------------------------------------------------------------

/**
 * An alias for JavaScript's `undefined`
 * [(unit tests)](../test/datatypes.test.civet#:~:text=%23%20%2D%2D%2D%20undef)
 */

export const undef = undefined

// ---------------------------------------------------------------------------

/**
 * returns true if the provided value is defined
 * (i.e. not null or undefined), else returns false
 * [(unit tests)](../test/datatypes.test.civet#:~:text=%23%20%2D%2D%2D%20defined()))
 */

export const defined = (x: any): boolean => {

	return (x !== undef) && (x !== null)
}

// ---------------------------------------------------------------------------

/**
 * Returns true if all the values provided are not defined
 * (i.e. either null or undefined), else returns false
 * [(unit tests)](../test/datatypes.test.civet#:~:text=%23%20%2D%2D%2D%20notdefined())
 */

export const notdefined = (x: any): x is undefined => {

	return (x === undefined) || (x === null)
}

// ---------------------------------------------------------------------------

/**
 * returns true if (typeof item == 'string') or item instanceof String
 * [(unit tests)](../test/datatypes.test.civet#:~:text=%23%20%2D%2D%2D%20isString)
 */

export const isString = (x: any): x is string => {

	return (typeof x === 'string') || (x instanceof String)
}

// ---------------------------------------------------------------------------

/**
 * Test if something is a non-empty string,
 * i.e. isn't all whitespace
 * [(unit tests)](../test/datatypes.test.civet#:~:text=%23%20%2D%2D%2D%20isNonEmptyString)
 */

export const isNonEmptyString = (x: any): boolean => {

	// --- must contain non-whitespace character
	return isString(x) && defined(x.match(/\S/))
}

// ---------------------------------------------------------------------------

/**
 * Test if something is a boolean
 * [(unit tests)](../test/datatypes.test.civet#:~:text=%23%20%2D%2D%2D%20isBoolean)
 */

export const isBoolean = (x: any): x is boolean => {

	return (typeof x === 'boolean') || (x instanceof Boolean)
}

// ---------------------------------------------------------------------------

/**
 * Test if something is a number
 * [(unit tests)](../test/datatypes.test.civet#:~:text=%23%20%2D%2D%2D%20isNumber)
 */

export const isNumber = (x: any): x is number => {

	const type = typeof x
	return (type === 'bigint') || (type === 'number') || (x instanceof Number)
}

// ---------------------------------------------------------------------------

/**
 * Type integer
 */

export type integer = number

/**
 * Test if something is an integer
 * [(unit tests)](../test/datatypes.test.civet#:~:text=%23%20%2D%2D%2D%20isInteger)
 */

export const isInteger = (x: any): x is integer => {

	return isNumber(x) && Number.isInteger(x.valueOf())
}

// ---------------------------------------------------------------------------

/**
 * Test if something is an array
 * [(unit tests)](../test/datatypes.test.civet#:~:text=%23%20%2D%2D%2D%20isArray())
 */

export const isArray = (x: any): x is array => {

	return Array.isArray(x)
}

// ---------------------------------------------------------------------------

/**
 * Test if something is an array of strings
 * [(unit tests)](../test/datatypes.test.civet#:~:text=%23%20%2D%2D%2D%20isArrayOfStrings())
 */

export const isArrayOfStrings = (x: any): boolean => {

	if (!Array.isArray(x)) {
		return false
	}
	for (const item of x) {
		if (!isString(item)) {
			return false
		}
	}
	return true
}

// ---------------------------------------------------------------------------

/**
 * Type regexp - a regular expression
 */

type regexp = object

/**
 * Test if something is a regular expression
 * [(unit tests)](../test/datatypes.test.civet#:~:text=%23%20%2D%2D%2D%20isRegExp)
 */

export const isRegExp = (item: any): item is regexp => {

	return (item instanceof RegExp)
}

// ---------------------------------------------------------------------------

/**
 * Test if something is an object
 * [(unit tests)](../test/datatypes.test.civet#:~:text=%23%20%2D%2D%2D%20isObject)
 */

export const isObject = (item: any): item is object => {

	return (typeof item === 'object')
}

// ---------------------------------------------------------------------------

/**
 * Test if something is a hash
 * [(unit tests)](../test/datatypes.test.civet#:~:text=%23%20%2D%2D%2D%20isHash)
 */

export const isHash = (item: any): item is hash => {

	return isObject(item) && !(isArray(item) || isRegExp(item))
}

// ---------------------------------------------------------------------------

/**
 * returns true if any of these is true:
 * 	- x is null or undef
 * 	- x is a string consisting of only whitespace
 * 	- x is an array of length 0
 * 	- x is a hash that has no keys
 * else returns false
 * [(unit tests)](../test/datatypes.test.civet#:~:text=%23%20%2D%2D%2D%20isEmpty)
 */

export const isEmpty = (x: any): boolean => {

	if ((x === undef) || (x === null)) {
		return true
	}
	if (isString(x)) {
		return (x.match(/^\s*$/) !== null)
	}
	if (isArray(x)) {
		return (x.length === 0)
	}
	if (isHash(x)) {
		return (Object.keys(x).length === 0)
	}
	else {
		return false
	}
}

// ---------------------------------------------------------------------------

/**
 * returns not isEmpty(x)
 * [(unit tests)](../test/datatypes.test.civet#:~:text=%23%20%2D%2D%2D%20nonEmpty)
 */

export const nonEmpty = (x: any): boolean => {

	return !isEmpty(x)
}

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3JjL2xpYi9kYXRhdHlwZXMuY2l2ZXQudHN4Iiwic291cmNlcyI6WyJzcmMvbGliL2RhdGF0eXBlcy5jaXZldCJdLCJtYXBwaW5ncyI6IjtBQUFBLGtCQUFpQjtBQUNqQixBQUFBO0FBQ0EsQUFBQTtBQUNBO0FBQ0EsR0FBRztBQUNILEFBQUE7QUFDQSxBQUFBLE1BQU0sQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFBLENBQUE7QUFDckIsQUFBQSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHO0FBQUcsQ0FBQTtBQUNuQixBQUFBO0FBQ0EsQUFBQTtBQUNBO0FBQ0EsR0FBRztBQUNILEFBQUE7QUFDQSxBQUFBLEFBQUEsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ3pCLEFBQUE7QUFDQSxBQUFBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQUFBQTtBQUNBLEFBQUEsQUFBQSxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUk7QUFDakMsQUFBQTtBQUNBLEFBQUE7QUFDQTtBQUNBLEdBQUc7QUFDSCxBQUFBO0FBQ0EsQUFBQSxBQUFBLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLE1BQU07QUFDdEMsQUFBQTtBQUNBLEFBQUEsOEVBQTZFO0FBQzdFLEFBQUE7QUFDQSxBQUFBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxBQUFBO0FBQ0EsQUFBQSxBQUFBLE1BQU0sQ0FBTSxNQUFMLEtBQUssQ0FBQyxDQUFFLENBQUMsU0FBUztBQUN6QixBQUFBO0FBQ0EsQUFBQSw4RUFBNkU7QUFDN0UsQUFBQTtBQUNBLEFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQUFBQTtBQUNBLEFBQUEsQUFBQSxNQUFNLENBQVEsTUFBUCxPQUFPLENBQUMsQ0FBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFBLENBQUE7QUFDdEMsQUFBQTtBQUNBLEFBQUEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFFLENBQUMsSUFBSSxDO0FBQUMsQ0FBQTtBQUNuQyxBQUFBO0FBQ0EsQUFBQSw4RUFBNkU7QUFDN0UsQUFBQTtBQUNBLEFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQUFBQTtBQUNBLEFBQUEsQUFBQSxNQUFNLENBQVcsTUFBVixVQUFVLENBQUMsQ0FBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUEsQ0FBQTtBQUNoRCxBQUFBO0FBQ0EsQUFBQSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUUsQ0FBQyxJQUFJLEM7QUFBQyxDQUFBO0FBQ3ZDLEFBQUE7QUFDQSxBQUFBLDhFQUE2RTtBQUM3RSxBQUFBO0FBQ0EsQUFBQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQUFBQTtBQUNBLEFBQUEsQUFBQSxNQUFNLENBQVMsTUFBUixRQUFRLENBQUMsQ0FBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUEsQ0FBQTtBQUMzQyxBQUFBO0FBQ0EsQUFBQSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsTUFBTSxDO0FBQUMsQ0FBQTtBQUN2RCxBQUFBO0FBQ0EsQUFBQSw4RUFBNkU7QUFDN0UsQUFBQTtBQUNBLEFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQUFBQTtBQUNBLEFBQUEsQUFBQSxNQUFNLENBQWlCLE1BQWhCLGdCQUFnQixDQUFDLENBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQSxDQUFBO0FBQy9DLEFBQUE7QUFDQSxBQUFBLENBQUMsNENBQTJDO0FBQzVDLEFBQUEsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQztBQUFDLENBQUE7QUFDN0MsQUFBQTtBQUNBLEFBQUEsOEVBQTZFO0FBQzdFLEFBQUE7QUFDQSxBQUFBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxBQUFBO0FBQ0EsQUFBQSxBQUFBLE1BQU0sQ0FBVSxNQUFULFNBQVMsQ0FBQyxDQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQSxDQUFBO0FBQzdDLEFBQUE7QUFDQSxBQUFBLENBQUMsTUFBTSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxPQUFPLEM7QUFBQyxDQUFBO0FBQ3pELEFBQUE7QUFDQSxBQUFBLDhFQUE2RTtBQUM3RSxBQUFBO0FBQ0EsQUFBQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQUFBQTtBQUNBLEFBQUEsQUFBQSxNQUFNLENBQVMsTUFBUixRQUFRLENBQUMsQ0FBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUEsQ0FBQTtBQUMzQyxBQUFBO0FBQ0EsQUFBQSxDQUFLLE1BQUosSUFBSSxDQUFDLENBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUNqQixBQUFBLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsTUFBTSxDO0FBQUMsQ0FBQTtBQUN6RSxBQUFBO0FBQ0EsQUFBQSw4RUFBNkU7QUFDN0UsQUFBQTtBQUNBLEFBQUE7QUFDQTtBQUNBLEdBQUc7QUFDSCxBQUFBO0FBQ0EsQUFBQSxBQUFBLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxNQUFNO0FBQzVCLEFBQUE7QUFDQSxBQUFBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxBQUFBO0FBQ0EsQUFBQSxBQUFBLE1BQU0sQ0FBVSxNQUFULFNBQVMsQ0FBQyxDQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQSxDQUFBO0FBQzdDLEFBQUE7QUFDQSxBQUFBLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQztBQUFDLENBQUE7QUFDcEQsQUFBQTtBQUNBLEFBQUEsOEVBQTZFO0FBQzdFLEFBQUE7QUFDQSxBQUFBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxBQUFBO0FBQ0EsQUFBQSxBQUFBLE1BQU0sQ0FBUSxNQUFQLE9BQU8sQ0FBQyxDQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFD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QUEsTUFBTSxDQUFRLE1BQVAsT0FBTyxDQUFDLENBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQSxDQUFBO0FBQ3RDLEFBQUE7QUFDQSxBQUFBLENBQUMsR0FBRyxDQUFBLENBQUMsQ0FBQyxDQUFDLEdBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRSxDQUFDLElBQUksQ0FBQyxDQUFBLENBQUEsQ0FBQTtBQUMvQixBQUFBLEVBQUUsTUFBTSxDQUFDLEk7Q0FBSSxDQUFBO0FBQ2IsQUFBQSxDQUFDLEdBQUcsQ0FBQSxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUEsQ0FBQSxDQUFBO0FBQ2YsQUFBQSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsR0FBRSxDQUFDLElBQUksQztDQUFDLENBQUE7QUFDbkMsQUFBQSxDQUFDLEdBQUcsQ0FBQSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUEsQ0FBQSxDQUFBO0FBQ2QsQUFBQSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsR0FBRSxDQUFDLENBQUMsQztDQUFDLENBQUE7QUFDeEIsQUFBQSxDQUFDLEdBQUcsQ0FBQSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUEsQ0FBQSxDQUFBO0FBQ2IsQUFBQSxFQUFFLE1BQU0sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEdBQUUsQ0FBQyxDQUFDLEM7Q0FBQyxDQUFBO0FBQ3JDLEFBQUEsQ0FBQyxJQUFJLENBQUEsQ0FBQTtBQUNMLEFBQUEsRUFBRSxNQUFNLENBQUMsSztDQUFLLEM7QUFBQSxDQUFBO0FBQ2QsQUFBQTtBQUNBLEFBQUEsOEVBQTZFO0FBQzdFLEFBQUE7QUFDQSxBQUFBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxBQUFBO0FBQ0EsQUFBQSxBQUFBLE1BQU0sQ0FBUyxNQUFSLFFBQVEsQ0FBQyxDQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUEsQ0FBQTtBQUN2QyxBQUFBO0FBQ0EsQUFBQSxDQUFDLE1BQU0sQ0FBQyxDQUFJLE9BQU8sQ0FBQyxDQUFDLEM7QUFBQyxDQUFBO0FBQ3RCIiwibmFtZXMiOltdLCJzb3VyY2VzQ29udGVudCI6WyIjIGRhdGF0eXBlcy5jaXZldFxuXG4vKipcbiAqIEFuIGFsaWFzIGZvciBUeXBlU2NyaXB0IHR5cGUgJ29iamVjdCcgd2l0aCBzdHJpbmcga2V5c1xuICovXG5cbmV4cG9ydCBpbnRlcmZhY2UgaGFzaFxuXHRba2V5OiBzdHJpbmddOiBhbnlcblxuLyoqXG4gKiBBbiBhcnJheSBjb250YWluaW5nIGFueXRoaW5nXG4gKi9cblxuZXhwb3J0IHR5cGUgYXJyYXkgPSBhbnlbXVxuXG4vKipcbiAqIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBubyBwYXJhbWV0ZXJzIGFuZCByZXR1cm5zIG5vdGhpbmdcbiAqL1xuXG5leHBvcnQgdHlwZSB2b2lkRnVuYyA9ICgpID0+IHZvaWRcblxuLyoqXG4gKiBzcGVjaWZ5aW5nIG9wdGlvbnMgZm9yIGZ1bmN0aW9uIGdldE9wdGlvbnMoKVxuICovXG5cbmV4cG9ydCB0eXBlIG9wdGlvbnNwZWMgPSBoYXNoIHwgc3RyaW5nXG5cbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8qKlxuICogQW4gYWxpYXMgZm9yIEphdmFTY3JpcHQncyBgdW5kZWZpbmVkYFxuICogWyh1bml0IHRlc3RzKV0oLi4vdGVzdC9kYXRhdHlwZXMudGVzdC5jaXZldCM6fjp0ZXh0PSUyMyUyMCUyRCUyRCUyRCUyMHVuZGVmKVxuICovXG5cbmV4cG9ydCB1bmRlZiA6PSB1bmRlZmluZWRcblxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLyoqXG4gKiByZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGVkIHZhbHVlIGlzIGRlZmluZWRcbiAqIChpLmUuIG5vdCBudWxsIG9yIHVuZGVmaW5lZCksIGVsc2UgcmV0dXJucyBmYWxzZVxuICogWyh1bml0IHRlc3RzKV0oLi4vdGVzdC9kYXRhdHlwZXMudGVzdC5jaXZldCM6fjp0ZXh0PSUyMyUyMCUyRCUyRCUyRCUyMGRlZmluZWQoKSkpXG4gKi9cblxuZXhwb3J0IGRlZmluZWQgOj0gKHg6IGFueSk6IGJvb2xlYW4gPT5cblxuXHRyZXR1cm4gKHggIT0gdW5kZWYpICYmICh4ICE9IG51bGwpXG5cbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIGFsbCB0aGUgdmFsdWVzIHByb3ZpZGVkIGFyZSBub3QgZGVmaW5lZFxuICogKGkuZS4gZWl0aGVyIG51bGwgb3IgdW5kZWZpbmVkKSwgZWxzZSByZXR1cm5zIGZhbHNlXG4gKiBbKHVuaXQgdGVzdHMpXSguLi90ZXN0L2RhdGF0eXBlcy50ZXN0LmNpdmV0Izp+OnRleHQ9JTIzJTIwJTJEJTJEJTJEJTIwbm90ZGVmaW5lZCgpKVxuICovXG5cbmV4cG9ydCBub3RkZWZpbmVkIDo9ICh4OiBhbnkpOiB4IGlzIHVuZGVmaW5lZCA9PlxuXG5cdHJldHVybiAoeCA9PSB1bmRlZmluZWQpIHx8ICh4ID09IG51bGwpXG5cbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8qKlxuICogcmV0dXJucyB0cnVlIGlmICh0eXBlb2YgaXRlbSA9PSAnc3RyaW5nJykgb3IgaXRlbSBpbnN0YW5jZW9mIFN0cmluZ1xuICogWyh1bml0IHRlc3RzKV0oLi4vdGVzdC9kYXRhdHlwZXMudGVzdC5jaXZldCM6fjp0ZXh0PSUyMyUyMCUyRCUyRCUyRCUyMGlzU3RyaW5nKVxuICovXG5cbmV4cG9ydCBpc1N0cmluZyA6PSAoeDogYW55KTogeCBpcyBzdHJpbmcgPT5cblxuXHRyZXR1cm4gKHR5cGVvZiB4ID09ICdzdHJpbmcnKSB8fCAoeCBpbnN0YW5jZW9mIFN0cmluZylcblxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLyoqXG4gKiBUZXN0IGlmIHNvbWV0aGluZyBpcyBhIG5vbi1lbXB0eSBzdHJpbmcsXG4gKiBpLmUuIGlzbid0IGFsbCB3aGl0ZXNwYWNlXG4gKiBbKHVuaXQgdGVzdHMpXSguLi90ZXN0L2RhdGF0eXBlcy50ZXN0LmNpdmV0Izp+OnRleHQ9JTIzJTIwJTJEJTJEJTJEJTIwaXNOb25FbXB0eVN0cmluZylcbiAqL1xuXG5leHBvcnQgaXNOb25FbXB0eVN0cmluZyA6PSAoeDogYW55KTogYm9vbGVhbiA9PlxuXG5cdCMgLS0tIG11c3QgY29udGFpbiBub24td2hpdGVzcGFjZSBjaGFyYWN0ZXJcblx0cmV0dXJuIGlzU3RyaW5nKHgpICYmIGRlZmluZWQoeC5tYXRjaCgvXFxTLykpXG5cbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8qKlxuICogVGVzdCBpZiBzb21ldGhpbmcgaXMgYSBib29sZWFuXG4gKiBbKHVuaXQgdGVzdHMpXSguLi90ZXN0L2RhdGF0eXBlcy50ZXN0LmNpdmV0Izp+OnRleHQ9JTIzJTIwJTJEJTJEJTJEJTIwaXNCb29sZWFuKVxuICovXG5cbmV4cG9ydCBpc0Jvb2xlYW4gOj0gKHg6IGFueSk6IHggaXMgYm9vbGVhbiA9PlxuXG5cdHJldHVybiAodHlwZW9mIHggPT0gJ2Jvb2xlYW4nKSB8fCAoeCBpbnN0YW5jZW9mIEJvb2xlYW4pXG5cbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8qKlxuICogVGVzdCBpZiBzb21ldGhpbmcgaXMgYSBudW1iZXJcbiAqIFsodW5pdCB0ZXN0cyldKC4uL3Rlc3QvZGF0YXR5cGVzLnRlc3QuY2l2ZXQjOn46dGV4dD0lMjMlMjAlMkQlMkQlMkQlMjBpc051bWJlcilcbiAqL1xuXG5leHBvcnQgaXNOdW1iZXIgOj0gKHg6IGFueSk6IHggaXMgbnVtYmVyID0+XG5cblx0dHlwZSA6PSB0eXBlb2YgeFxuXHRyZXR1cm4gKHR5cGUgPT0gJ2JpZ2ludCcpIHx8ICh0eXBlID09ICdudW1iZXInKSB8fCAoeCBpbnN0YW5jZW9mIE51bWJlcilcblxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLyoqXG4gKiBUeXBlIGludGVnZXJcbiAqL1xuXG5leHBvcnQgdHlwZSBpbnRlZ2VyID0gbnVtYmVyXG5cbi8qKlxuICogVGVzdCBpZiBzb21ldGhpbmcgaXMgYW4gaW50ZWdlclxuICogWyh1bml0IHRlc3RzKV0oLi4vdGVzdC9kYXRhdHlwZXMudGVzdC5jaXZldCM6fjp0ZXh0PSUyMyUyMCUyRCUyRCUyRCUyMGlzSW50ZWdlcilcbiAqL1xuXG5leHBvcnQgaXNJbnRlZ2VyIDo9ICh4OiBhbnkpOiB4IGlzIGludGVnZXIgPT5cblxuXHRyZXR1cm4gaXNOdW1iZXIoeCkgJiYgTnVtYmVyLmlzSW50ZWdlcih4LnZhbHVlT2YoKSlcblxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLyoqXG4gKiBUZXN0IGlmIHNvbWV0aGluZyBpcyBhbiBhcnJheVxuICogWyh1bml0IHRlc3RzKV0oLi4vdGVzdC9kYXRhdHlwZXMudGVzdC5jaXZldCM6fjp0ZXh0PSUyMyUyMCUyRCUyRCUyRCUyMGlzQXJyYXkoKSlcbiAqL1xuXG5leHBvcnQgaXNBcnJheSA6PSAoeDogYW55KTogeCBpcyBhcnJheSA9PlxuXG5cdHJldHVybiBBcnJheS5pc0FycmF5KHgpXG5cbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8qKlxuICogVGVzdCBpZiBzb21ldGhpbmcgaXMgYW4gYXJyYXkgb2Ygc3RyaW5nc1xuICogWyh1bml0IHRlc3RzKV0oLi4vdGVzdC9kYXRhdHlwZXMudGVzdC5jaXZldCM6fjp0ZXh0PSUyMyUyMCUyRCUyRCUyRCUyMGlzQXJyYXlPZlN0cmluZ3MoKSlcbiAqL1xuXG5leHBvcnQgaXNBcnJheU9mU3RyaW5ncyA6PSAoeDogYW55KTogYm9vbGVhbiA9PlxuXG5cdGlmIG5vdCBBcnJheS5pc0FycmF5KHgpXG5cdFx0cmV0dXJuIGZhbHNlXG5cdGZvciBpdGVtIG9mIHhcblx0XHRpZiBub3QgaXNTdHJpbmcoaXRlbSlcblx0XHRcdHJldHVybiBmYWxzZVxuXHRyZXR1cm4gdHJ1ZVxuXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vKipcbiAqIFR5cGUgcmVnZXhwIC0gYSByZWd1bGFyIGV4cHJlc3Npb25cbiAqL1xuXG50eXBlIHJlZ2V4cCA9IG9iamVjdFxuXG4vKipcbiAqIFRlc3QgaWYgc29tZXRoaW5nIGlzIGEgcmVndWxhciBleHByZXNzaW9uXG4gKiBbKHVuaXQgdGVzdHMpXSguLi90ZXN0L2RhdGF0eXBlcy50ZXN0LmNpdmV0Izp+OnRleHQ9JTIzJTIwJTJEJTJEJTJEJTIwaXNSZWdFeHApXG4gKi9cblxuZXhwb3J0IGlzUmVnRXhwIDo9IChpdGVtOiBhbnkpOiBpdGVtIGlzIHJlZ2V4cCA9PlxuXG5cdHJldHVybiAoaXRlbSBpbnN0YW5jZW9mIFJlZ0V4cClcblxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLyoqXG4gKiBUZXN0IGlmIHNvbWV0aGluZyBpcyBhbiBvYmplY3RcbiAqIFsodW5pdCB0ZXN0cyldKC4uL3Rlc3QvZGF0YXR5cGVzLnRlc3QuY2l2ZXQjOn46dGV4dD0lMjMlMjAlMkQlMkQlMkQlMjBpc09iamVjdClcbiAqL1xuXG5leHBvcnQgaXNPYmplY3QgOj0gKGl0ZW06IGFueSk6IGl0ZW0gaXMgb2JqZWN0ID0+XG5cblx0cmV0dXJuICh0eXBlb2YgaXRlbSA9PSAnb2JqZWN0JylcblxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLyoqXG4gKiBUZXN0IGlmIHNvbWV0aGluZyBpcyBhIGhhc2hcbiAqIFsodW5pdCB0ZXN0cyldKC4uL3Rlc3QvZGF0YXR5cGVzLnRlc3QuY2l2ZXQjOn46dGV4dD0lMjMlMjAlMkQlMkQlMkQlMjBpc0hhc2gpXG4gKi9cblxuZXhwb3J0IGlzSGFzaCA6PSAoaXRlbTogYW55KTogaXRlbSBpcyBoYXNoID0+XG5cblx0cmV0dXJuIGlzT2JqZWN0KGl0ZW0pICYmIG5vdCAoaXNBcnJheShpdGVtKSB8fCBpc1JlZ0V4cChpdGVtKSlcblxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLyoqXG4gKiByZXR1cm5zIHRydWUgaWYgYW55IG9mIHRoZXNlIGlzIHRydWU6XG4gKiBcdC0geCBpcyBudWxsIG9yIHVuZGVmXG4gKiBcdC0geCBpcyBhIHN0cmluZyBjb25zaXN0aW5nIG9mIG9ubHkgd2hpdGVzcGFjZVxuICogXHQtIHggaXMgYW4gYXJyYXkgb2YgbGVuZ3RoIDBcbiAqIFx0LSB4IGlzIGEgaGFzaCB0aGF0IGhhcyBubyBrZXlzXG4gKiBlbHNlIHJldHVybnMgZmFsc2VcbiAqIFsodW5pdCB0ZXN0cyldKC4uL3Rlc3QvZGF0YXR5cGVzLnRlc3QuY2l2ZXQjOn46dGV4dD0lMjMlMjAlMkQlMkQlMkQlMjBpc0VtcHR5KVxuICovXG5cbmV4cG9ydCBpc0VtcHR5IDo9ICh4OiBhbnkpOiBib29sZWFuID0+XG5cblx0aWYgKHggPT0gdW5kZWYpIHx8ICh4ID09IG51bGwpXG5cdFx0cmV0dXJuIHRydWVcblx0aWYgaXNTdHJpbmcoeClcblx0XHRyZXR1cm4gKHgubWF0Y2goL15cXHMqJC8pICE9IG51bGwpXG5cdGlmIGlzQXJyYXkoeClcblx0XHRyZXR1cm4gKHgubGVuZ3RoID09IDApXG5cdGlmIGlzSGFzaCh4KVxuXHRcdHJldHVybiAoT2JqZWN0LmtleXMoeCkubGVuZ3RoID09IDApXG5cdGVsc2Vcblx0XHRyZXR1cm4gZmFsc2VcblxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLyoqXG4gKiByZXR1cm5zIG5vdCBpc0VtcHR5KHgpXG4gKiBbKHVuaXQgdGVzdHMpXSguLi90ZXN0L2RhdGF0eXBlcy50ZXN0LmNpdmV0Izp+OnRleHQ9JTIzJTIwJTJEJTJEJTJEJTIwbm9uRW1wdHkpXG4gKi9cblxuZXhwb3J0IG5vbkVtcHR5IDo9ICh4OiBhbnkpOiBib29sZWFuID0+XG5cblx0cmV0dXJuIG5vdCBpc0VtcHR5KHgpXG4iXX0=