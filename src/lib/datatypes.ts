"use strict";
// datatypes.civet

/**
 * An alias for TypeScript type 'object' with string keys
 * [unit tests](../test/datatypes.test.civet#:~:text=DBG,hash)
 */

export interface hash {
	[key: string | symbol]: any
}

/**
 * An array containing anything
 * [unit tests](../test/datatypes.test.civet#:~:text=DBG,array)
 */

export type array = any[]

/**
 * A function that takes no parameters and returns nothing
 * [unit tests](../test/datatypes.test.civet#:~:text=DBG,voidFunc)
 */

export type voidFunc = () => void

/**
 * specifying options for function getOptions()
 * [unit tests](../test/datatypes.test.civet#:~:text=DBG,optionspec)
 */

export type optionspec = hash | string

// ---------------------------------------------------------------------------

/**
 * An alias for JavaScript's `undefined`
 * [unit tests](../test/datatypes.test.civet#:~:text=DBG,undef)
 */

export const undef = undefined

// ---------------------------------------------------------------------------

/**
 * returns true if the provided value is defined
 * (i.e. not null or undefined), else returns false
 * [unit tests](../test/datatypes.test.civet#:~:text=DBG,defined)
 */

export const defined = (x: any): boolean => {

	return (x !== undef) && (x !== null)
}

// ---------------------------------------------------------------------------

/**
 * Returns true if all the values provided are not defined
 * (i.e. either null or undefined), else returns false
 * [unit tests](../test/datatypes.test.civet#:~:text=DBG,notdefined)
 */

export const notdefined = (x: any): x is undefined => {

	return (x === undefined) || (x === null)
}

// ---------------------------------------------------------------------------

/**
 * returns true if (typeof item == 'string') or item instanceof String
 * [unit tests](../test/datatypes.test.civet#:~:text=DBG,isString)
 */

export const isString = (x: any): x is string => {

	return (typeof x === 'string') || (x instanceof String)
}

// ---------------------------------------------------------------------------

/**
 * Test if something is a non-empty string,
 * i.e. isn't all whitespace
 * [unit tests](../test/datatypes.test.civet#:~:text=DBG,isNonEmptyString)
 */

export const isNonEmptyString = (x: any): boolean => {

	// --- must contain non-whitespace character
	return isString(x) && defined(x.match(/\S/))
}

// ---------------------------------------------------------------------------

/**
 * Test if something is a boolean
 * [unit tests](../test/datatypes.test.civet#:~:text=DBG,isBoolean)
 */

export const isBoolean = (x: any): x is boolean => {

	return (typeof x === 'boolean') || (x instanceof Boolean)
}

// ---------------------------------------------------------------------------

/**
 * Test if something is a number
 * [unit tests](../test/datatypes.test.civet#:~:text=DBG,isNumber)
 */

export const isNumber = (x: any): x is number => {

	const type = typeof x
	return (type === 'bigint') || (type === 'number') || (x instanceof Number)
}

// ---------------------------------------------------------------------------

/**
 * Type integer
 */

export type integer = number

/**
 * Test if something is an integer
 * [unit tests](../test/datatypes.test.civet#:~:text=DBG,isInteger)
 */

export const isInteger = (x: any): x is integer => {

	return isNumber(x) && Number.isInteger(x.valueOf())
}

// ---------------------------------------------------------------------------

/**
 * Test if something is an array
 * [unit tests](../test/datatypes.test.civet#:~:text=DBG,isArray)
 */

export const isArray = (x: any): x is array => {

	return Array.isArray(x)
}

// ---------------------------------------------------------------------------

/**
 * Test if something is an array of strings
 * [unit tests](../test/datatypes.test.civet#:~:text=DBG,isArrayOfStrings)
 */

export const isArrayOfStrings = (x: any): boolean => {

	if (!Array.isArray(x)) {
		return false
	}
	for (const item of x) {
		if (!isString(item)) {
			return false
		}
	}
	return true
}

// ---------------------------------------------------------------------------

/**
 * Type regexp - a regular expression
 * [unit tests](../test/datatypes.test.civet#:~:text=DBG,regexp)
 */

type regexp = object

/**
 * Test if something is a regular expression
 * [unit tests](../test/datatypes.test.civet#:~:text=DBG,isRegExp)
 */

export const isRegExp = (item: any): item is regexp => {

	return (item instanceof RegExp)
}

// ---------------------------------------------------------------------------

/**
 * Test if something is an object
 * [unit tests](../test/datatypes.test.civet#:~:text=DBG,isObject)
 */

export const isObject = (item: any): item is object => {

	return (typeof item === 'object')
}

// ---------------------------------------------------------------------------

/**
 * Test if something is a hash
 * [unit tests](../test/datatypes.test.civet#:~:text=DBG,isHash)
 */

export const isHash = (item: any): item is hash => {

	return isObject(item) && !(isArray(item) || isRegExp(item))
}

// ---------------------------------------------------------------------------

/**
 * returns true if any of these is true:
 * 	- x is null or undef
 * 	- x is a string consisting of only whitespace
 * 	- x is an array of length 0
 * 	- x is a hash that has no keys
 * else returns false
 * [unit tests](../test/datatypes.test.civet#:~:text=DBG,isEmpty)
 */

export const isEmpty = (x: any): boolean => {

	if ((x === undef) || (x === null)) {
		return true
	}
	if (isString(x)) {
		return (x.match(/^\s*$/) !== null)
	}
	if (isArray(x)) {
		return (x.length === 0)
	}
	if (isHash(x)) {
		return (Object.keys(x).length === 0)
	}
	else {
		return false
	}
}

// ---------------------------------------------------------------------------

/**
 * returns not isEmpty(x)
 * [unit tests](../test/datatypes.test.civet#:~:text=DBG,nonEmpty)
 */

export const nonEmpty = (x: any): boolean => {

	return !isEmpty(x)
}

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3JjL2xpYi9kYXRhdHlwZXMuY2l2ZXQudHN4Iiwic291cmNlcyI6WyJzcmMvbGliL2RhdGF0eXBlcy5jaXZldCJdLCJtYXBwaW5ncyI6IjtBQUFBLGtCQUFpQjtBQUNqQixBQUFBO0FBQ0EsQUFBQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQUFBQTtBQUNBLEFBQUEsTUFBTSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUEsQ0FBQTtBQUNyQixBQUFBLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRztBQUFHLENBQUE7QUFDNUIsQUFBQTtBQUNBLEFBQUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEFBQUE7QUFDQSxBQUFBLEFBQUEsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ3pCLEFBQUE7QUFDQSxBQUFBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxBQUFBO0FBQ0EsQUFBQSxBQUFBLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSTtBQUNqQyxBQUFBO0FBQ0EsQUFBQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQUFBQTtBQUNBLEFBQUEsQUFBQSxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxNQUFNO0FBQ3RDLEFBQUE7QUFDQSxBQUFBLDhFQUE2RTtBQUM3RSxBQUFBO0FBQ0EsQUFBQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQUFBQTtBQUNBLEFBQUEsQUFBQSxNQUFNLENBQU0sTUFBTCxLQUFLLENBQUMsQ0FBRSxDQUFDLFNBQVM7QUFDekIsQUFBQTtBQUNBLEFBQUEsOEVBQTZFO0FBQzdFLEFBQUE7QUFDQSxBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEFBQUE7QUFDQSxBQUFBLEFBQUEsTUFBTSxDQUFRLE1BQVAsT0FBTyxDQUFDLENBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQSxDQUFBO0FBQ3RDLEFBQUE7QUFDQSxBQUFBLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRSxDQUFDLElBQUksQztBQUFDLENBQUE7QUFDbkMsQUFBQTtBQUNBLEFBQUEsOEVBQTZFO0FBQzdFLEFBQUE7QUFDQSxBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEFBQUE7QUFDQSxBQUFBLEFBQUEsTUFBTSxDQUFXLE1BQVYsVUFBVSxDQUFDLENBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFBLENBQUE7QUFDaEQsQUFBQTtBQUNBLEFBQUEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFFLENBQUMsSUFBSSxDO0FBQUMsQ0FBQTtBQUN2QyxBQUFBO0FBQ0EsQUFBQSw4RUFBNkU7QUFDN0UsQUFBQTtBQUNBLEFBQUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEFBQUE7QUFDQSxBQUFBLEFBQUEsTUFBTSxDQUFTLE1BQVIsUUFBUSxDQUFDLENBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFBLENBQUE7QUFDM0MsQUFBQTtBQUNBLEFBQUEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLENB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Q0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEFBQUE7QUFDQSxBQUFBLEFBQUEsTUFBTSxDQUFRLE1BQVAsT0FBTyxDQUFDLENBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQSxDQUFBO0FBQ3RDLEFBQUE7QUFDQSxBQUFBLENBQUMsR0FBRyxDQUFBLENBQUMsQ0FBQyxDQUFDLEdBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRSxDQUFDLElBQUksQ0FBQyxDQUFBLENBQUEsQ0FBQTtBQUMvQixBQUFBLEVBQUUsTUFBTSxDQUFDLEk7Q0FBSSxDQUFBO0FBQ2IsQUFBQSxDQUFDLEdBQUcsQ0FBQSxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUEsQ0FBQSxDQUFBO0FBQ2YsQUFBQSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsR0FBRSxDQUFDLElBQUksQztDQUFDLENBQUE7QUFDbkMsQUFBQSxDQUFDLEdBQUcsQ0FBQSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUEsQ0FBQSxDQUFBO0FBQ2QsQUFBQSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsR0FBRSxDQUFDLENBQUMsQztDQUFDLENBQUE7QUFDeEIsQUFBQSxDQUFDLEdBQUcsQ0FBQSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUEsQ0FBQSxDQUFBO0FBQ2IsQUFBQSxFQUFFLE1BQU0sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEdBQUUsQ0FBQyxDQUFDLEM7Q0FBQyxDQUFBO0FBQ3JDLEFBQUEsQ0FBQyxJQUFJLENBQUEsQ0FBQTtBQUNMLEFBQUEsRUFBRSxNQUFNLENBQUMsSztDQUFLLEM7QUFBQSxDQUFBO0FBQ2QsQUFBQTtBQUNBLEFBQUEsOEVBQTZFO0FBQzdFLEFBQUE7QUFDQSxBQUFBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxBQUFBO0FBQ0EsQUFBQSxBQUFBLE1BQU0sQ0FBUyxNQUFSLFFBQVEsQ0FBQyxDQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUEsQ0FBQTtBQUN2QyxBQUFBO0FBQ0EsQUFBQSxDQUFDLE1BQU0sQ0FBQyxDQUFJLE9BQU8sQ0FBQyxDQUFDLEM7QUFBQyxDQUFBO0FBQ3RCIiwibmFtZXMiOltdLCJzb3VyY2VzQ29udGVudCI6WyIjIGRhdGF0eXBlcy5jaXZldFxuXG4vKipcbiAqIEFuIGFsaWFzIGZvciBUeXBlU2NyaXB0IHR5cGUgJ29iamVjdCcgd2l0aCBzdHJpbmcga2V5c1xuICogW3VuaXQgdGVzdHNdKC4uL3Rlc3QvZGF0YXR5cGVzLnRlc3QuY2l2ZXQjOn46dGV4dD1EQkcsaGFzaClcbiAqL1xuXG5leHBvcnQgaW50ZXJmYWNlIGhhc2hcblx0W2tleTogc3RyaW5nIHwgc3ltYm9sXTogYW55XG5cbi8qKlxuICogQW4gYXJyYXkgY29udGFpbmluZyBhbnl0aGluZ1xuICogW3VuaXQgdGVzdHNdKC4uL3Rlc3QvZGF0YXR5cGVzLnRlc3QuY2l2ZXQjOn46dGV4dD1EQkcsYXJyYXkpXG4gKi9cblxuZXhwb3J0IHR5cGUgYXJyYXkgPSBhbnlbXVxuXG4vKipcbiAqIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBubyBwYXJhbWV0ZXJzIGFuZCByZXR1cm5zIG5vdGhpbmdcbiAqIFt1bml0IHRlc3RzXSguLi90ZXN0L2RhdGF0eXBlcy50ZXN0LmNpdmV0Izp+OnRleHQ9REJHLHZvaWRGdW5jKVxuICovXG5cbmV4cG9ydCB0eXBlIHZvaWRGdW5jID0gKCkgPT4gdm9pZFxuXG4vKipcbiAqIHNwZWNpZnlpbmcgb3B0aW9ucyBmb3IgZnVuY3Rpb24gZ2V0T3B0aW9ucygpXG4gKiBbdW5pdCB0ZXN0c10oLi4vdGVzdC9kYXRhdHlwZXMudGVzdC5jaXZldCM6fjp0ZXh0PURCRyxvcHRpb25zcGVjKVxuICovXG5cbmV4cG9ydCB0eXBlIG9wdGlvbnNwZWMgPSBoYXNoIHwgc3RyaW5nXG5cbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8qKlxuICogQW4gYWxpYXMgZm9yIEphdmFTY3JpcHQncyBgdW5kZWZpbmVkYFxuICogW3VuaXQgdGVzdHNdKC4uL3Rlc3QvZGF0YXR5cGVzLnRlc3QuY2l2ZXQjOn46dGV4dD1EQkcsdW5kZWYpXG4gKi9cblxuZXhwb3J0IHVuZGVmIDo9IHVuZGVmaW5lZFxuXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vKipcbiAqIHJldHVybnMgdHJ1ZSBpZiB0aGUgcHJvdmlkZWQgdmFsdWUgaXMgZGVmaW5lZFxuICogKGkuZS4gbm90IG51bGwgb3IgdW5kZWZpbmVkKSwgZWxzZSByZXR1cm5zIGZhbHNlXG4gKiBbdW5pdCB0ZXN0c10oLi4vdGVzdC9kYXRhdHlwZXMudGVzdC5jaXZldCM6fjp0ZXh0PURCRyxkZWZpbmVkKVxuICovXG5cbmV4cG9ydCBkZWZpbmVkIDo9ICh4OiBhbnkpOiBib29sZWFuID0+XG5cblx0cmV0dXJuICh4ICE9IHVuZGVmKSAmJiAoeCAhPSBudWxsKVxuXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBhbGwgdGhlIHZhbHVlcyBwcm92aWRlZCBhcmUgbm90IGRlZmluZWRcbiAqIChpLmUuIGVpdGhlciBudWxsIG9yIHVuZGVmaW5lZCksIGVsc2UgcmV0dXJucyBmYWxzZVxuICogW3VuaXQgdGVzdHNdKC4uL3Rlc3QvZGF0YXR5cGVzLnRlc3QuY2l2ZXQjOn46dGV4dD1EQkcsbm90ZGVmaW5lZClcbiAqL1xuXG5leHBvcnQgbm90ZGVmaW5lZCA6PSAoeDogYW55KTogeCBpcyB1bmRlZmluZWQgPT5cblxuXHRyZXR1cm4gKHggPT0gdW5kZWZpbmVkKSB8fCAoeCA9PSBudWxsKVxuXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vKipcbiAqIHJldHVybnMgdHJ1ZSBpZiAodHlwZW9mIGl0ZW0gPT0gJ3N0cmluZycpIG9yIGl0ZW0gaW5zdGFuY2VvZiBTdHJpbmdcbiAqIFt1bml0IHRlc3RzXSguLi90ZXN0L2RhdGF0eXBlcy50ZXN0LmNpdmV0Izp+OnRleHQ9REJHLGlzU3RyaW5nKVxuICovXG5cbmV4cG9ydCBpc1N0cmluZyA6PSAoeDogYW55KTogeCBpcyBzdHJpbmcgPT5cblxuXHRyZXR1cm4gKHR5cGVvZiB4ID09ICdzdHJpbmcnKSB8fCAoeCBpbnN0YW5jZW9mIFN0cmluZylcblxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLyoqXG4gKiBUZXN0IGlmIHNvbWV0aGluZyBpcyBhIG5vbi1lbXB0eSBzdHJpbmcsXG4gKiBpLmUuIGlzbid0IGFsbCB3aGl0ZXNwYWNlXG4gKiBbdW5pdCB0ZXN0c10oLi4vdGVzdC9kYXRhdHlwZXMudGVzdC5jaXZldCM6fjp0ZXh0PURCRyxpc05vbkVtcHR5U3RyaW5nKVxuICovXG5cbmV4cG9ydCBpc05vbkVtcHR5U3RyaW5nIDo9ICh4OiBhbnkpOiBib29sZWFuID0+XG5cblx0IyAtLS0gbXVzdCBjb250YWluIG5vbi13aGl0ZXNwYWNlIGNoYXJhY3RlclxuXHRyZXR1cm4gaXNTdHJpbmcoeCkgJiYgZGVmaW5lZCh4Lm1hdGNoKC9cXFMvKSlcblxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLyoqXG4gKiBUZXN0IGlmIHNvbWV0aGluZyBpcyBhIGJvb2xlYW5cbiAqIFt1bml0IHRlc3RzXSguLi90ZXN0L2RhdGF0eXBlcy50ZXN0LmNpdmV0Izp+OnRleHQ9REJHLGlzQm9vbGVhbilcbiAqL1xuXG5leHBvcnQgaXNCb29sZWFuIDo9ICh4OiBhbnkpOiB4IGlzIGJvb2xlYW4gPT5cblxuXHRyZXR1cm4gKHR5cGVvZiB4ID09ICdib29sZWFuJykgfHwgKHggaW5zdGFuY2VvZiBCb29sZWFuKVxuXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vKipcbiAqIFRlc3QgaWYgc29tZXRoaW5nIGlzIGEgbnVtYmVyXG4gKiBbdW5pdCB0ZXN0c10oLi4vdGVzdC9kYXRhdHlwZXMudGVzdC5jaXZldCM6fjp0ZXh0PURCRyxpc051bWJlcilcbiAqL1xuXG5leHBvcnQgaXNOdW1iZXIgOj0gKHg6IGFueSk6IHggaXMgbnVtYmVyID0+XG5cblx0dHlwZSA6PSB0eXBlb2YgeFxuXHRyZXR1cm4gKHR5cGUgPT0gJ2JpZ2ludCcpIHx8ICh0eXBlID09ICdudW1iZXInKSB8fCAoeCBpbnN0YW5jZW9mIE51bWJlcilcblxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLyoqXG4gKiBUeXBlIGludGVnZXJcbiAqL1xuXG5leHBvcnQgdHlwZSBpbnRlZ2VyID0gbnVtYmVyXG5cbi8qKlxuICogVGVzdCBpZiBzb21ldGhpbmcgaXMgYW4gaW50ZWdlclxuICogW3VuaXQgdGVzdHNdKC4uL3Rlc3QvZGF0YXR5cGVzLnRlc3QuY2l2ZXQjOn46dGV4dD1EQkcsaXNJbnRlZ2VyKVxuICovXG5cbmV4cG9ydCBpc0ludGVnZXIgOj0gKHg6IGFueSk6IHggaXMgaW50ZWdlciA9PlxuXG5cdHJldHVybiBpc051bWJlcih4KSAmJiBOdW1iZXIuaXNJbnRlZ2VyKHgudmFsdWVPZigpKVxuXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vKipcbiAqIFRlc3QgaWYgc29tZXRoaW5nIGlzIGFuIGFycmF5XG4gKiBbdW5pdCB0ZXN0c10oLi4vdGVzdC9kYXRhdHlwZXMudGVzdC5jaXZldCM6fjp0ZXh0PURCRyxpc0FycmF5KVxuICovXG5cbmV4cG9ydCBpc0FycmF5IDo9ICh4OiBhbnkpOiB4IGlzIGFycmF5ID0+XG5cblx0cmV0dXJuIEFycmF5LmlzQXJyYXkoeClcblxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLyoqXG4gKiBUZXN0IGlmIHNvbWV0aGluZyBpcyBhbiBhcnJheSBvZiBzdHJpbmdzXG4gKiBbdW5pdCB0ZXN0c10oLi4vdGVzdC9kYXRhdHlwZXMudGVzdC5jaXZldCM6fjp0ZXh0PURCRyxpc0FycmF5T2ZTdHJpbmdzKVxuICovXG5cbmV4cG9ydCBpc0FycmF5T2ZTdHJpbmdzIDo9ICh4OiBhbnkpOiBib29sZWFuID0+XG5cblx0aWYgbm90IEFycmF5LmlzQXJyYXkoeClcblx0XHRyZXR1cm4gZmFsc2Vcblx0Zm9yIGl0ZW0gb2YgeFxuXHRcdGlmIG5vdCBpc1N0cmluZyhpdGVtKVxuXHRcdFx0cmV0dXJuIGZhbHNlXG5cdHJldHVybiB0cnVlXG5cbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8qKlxuICogVHlwZSByZWdleHAgLSBhIHJlZ3VsYXIgZXhwcmVzc2lvblxuICogW3VuaXQgdGVzdHNdKC4uL3Rlc3QvZGF0YXR5cGVzLnRlc3QuY2l2ZXQjOn46dGV4dD1EQkcscmVnZXhwKVxuICovXG5cbnR5cGUgcmVnZXhwID0gb2JqZWN0XG5cbi8qKlxuICogVGVzdCBpZiBzb21ldGhpbmcgaXMgYSByZWd1bGFyIGV4cHJlc3Npb25cbiAqIFt1bml0IHRlc3RzXSguLi90ZXN0L2RhdGF0eXBlcy50ZXN0LmNpdmV0Izp+OnRleHQ9REJHLGlzUmVnRXhwKVxuICovXG5cbmV4cG9ydCBpc1JlZ0V4cCA6PSAoaXRlbTogYW55KTogaXRlbSBpcyByZWdleHAgPT5cblxuXHRyZXR1cm4gKGl0ZW0gaW5zdGFuY2VvZiBSZWdFeHApXG5cbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8qKlxuICogVGVzdCBpZiBzb21ldGhpbmcgaXMgYW4gb2JqZWN0XG4gKiBbdW5pdCB0ZXN0c10oLi4vdGVzdC9kYXRhdHlwZXMudGVzdC5jaXZldCM6fjp0ZXh0PURCRyxpc09iamVjdClcbiAqL1xuXG5leHBvcnQgaXNPYmplY3QgOj0gKGl0ZW06IGFueSk6IGl0ZW0gaXMgb2JqZWN0ID0+XG5cblx0cmV0dXJuICh0eXBlb2YgaXRlbSA9PSAnb2JqZWN0JylcblxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLyoqXG4gKiBUZXN0IGlmIHNvbWV0aGluZyBpcyBhIGhhc2hcbiAqIFt1bml0IHRlc3RzXSguLi90ZXN0L2RhdGF0eXBlcy50ZXN0LmNpdmV0Izp+OnRleHQ9REJHLGlzSGFzaClcbiAqL1xuXG5leHBvcnQgaXNIYXNoIDo9IChpdGVtOiBhbnkpOiBpdGVtIGlzIGhhc2ggPT5cblxuXHRyZXR1cm4gaXNPYmplY3QoaXRlbSkgJiYgbm90IChpc0FycmF5KGl0ZW0pIHx8IGlzUmVnRXhwKGl0ZW0pKVxuXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vKipcbiAqIHJldHVybnMgdHJ1ZSBpZiBhbnkgb2YgdGhlc2UgaXMgdHJ1ZTpcbiAqIFx0LSB4IGlzIG51bGwgb3IgdW5kZWZcbiAqIFx0LSB4IGlzIGEgc3RyaW5nIGNvbnNpc3Rpbmcgb2Ygb25seSB3aGl0ZXNwYWNlXG4gKiBcdC0geCBpcyBhbiBhcnJheSBvZiBsZW5ndGggMFxuICogXHQtIHggaXMgYSBoYXNoIHRoYXQgaGFzIG5vIGtleXNcbiAqIGVsc2UgcmV0dXJucyBmYWxzZVxuICogW3VuaXQgdGVzdHNdKC4uL3Rlc3QvZGF0YXR5cGVzLnRlc3QuY2l2ZXQjOn46dGV4dD1EQkcsaXNFbXB0eSlcbiAqL1xuXG5leHBvcnQgaXNFbXB0eSA6PSAoeDogYW55KTogYm9vbGVhbiA9PlxuXG5cdGlmICh4ID09IHVuZGVmKSB8fCAoeCA9PSBudWxsKVxuXHRcdHJldHVybiB0cnVlXG5cdGlmIGlzU3RyaW5nKHgpXG5cdFx0cmV0dXJuICh4Lm1hdGNoKC9eXFxzKiQvKSAhPSBudWxsKVxuXHRpZiBpc0FycmF5KHgpXG5cdFx0cmV0dXJuICh4Lmxlbmd0aCA9PSAwKVxuXHRpZiBpc0hhc2goeClcblx0XHRyZXR1cm4gKE9iamVjdC5rZXlzKHgpLmxlbmd0aCA9PSAwKVxuXHRlbHNlXG5cdFx0cmV0dXJuIGZhbHNlXG5cbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8qKlxuICogcmV0dXJucyBub3QgaXNFbXB0eSh4KVxuICogW3VuaXQgdGVzdHNdKC4uL3Rlc3QvZGF0YXR5cGVzLnRlc3QuY2l2ZXQjOn46dGV4dD1EQkcsbm9uRW1wdHkpXG4gKi9cblxuZXhwb3J0IG5vbkVtcHR5IDo9ICh4OiBhbnkpOiBib29sZWFuID0+XG5cblx0cmV0dXJuIG5vdCBpc0VtcHR5KHgpXG4iXX0=