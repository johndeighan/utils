"use strict";
// ast-builder.lib.civet

import {
	undef, defined, notdefined, array, hash, hashof, croak,
	nonEmpty, isNonEmptyString, assert, isArray, isHash, isString,
	} from 'datatypes'
import {OL} from 'llutils'
import {resetOneIndent, indented} from 'indent'

// ---------------------------------------------------------------------------

export type TNodeDesc = (
	  string
	| [string]
	| [string, hash]
	| [string, hash, TNodeDesc[]]   // --- [name, hAttr, lChildren]
	)

// ---------------------------------------------------------------------------

export type TAstKeys = {
	kindKey: string
	childrenKey: string
	}

const hStdKeys: TAstKeys = {
	kindKey: 'kind',
	childrenKey: 'lChildren'
	}

export const toAst = (
		node: TNodeDesc,
		hKeys: TAstKeys = hStdKeys
		): hash => {

	// --- These are string keys
	const {kindKey, childrenKey} = hKeys

	if (isString(node)) {
		return {[kindKey]: node}
	}

	// --- kind will be a defined string
	//     hAttr may be undef, else is a hash
	//     lChildren may be undef, else is TNodeDesc[]
	const [kind, hAttr, lChildren] = node

	assert(isNonEmptyString(kind), `Bad kind: ${OL(kind)}`)
	if (defined(hAttr)) {
		assert(!(kindKey in hAttr), `${kindKey} in hAttr`)
		assert(!(childrenKey in hAttr), `${childrenKey} in hAttr`)
	}

	const h: hash = (
		  defined(hAttr)
		? Object.assign({[kindKey]: kind}, hAttr)
		: {[kindKey]: kind}
		)
	if (defined(lChildren)) {
		const results=[];for (const child of lChildren) {
			results.push(toAst(child, hKeys))
		};const lSubs =results
		h[childrenKey] = lSubs
	}
	return h
}

// ---------------------------------------------------------------------------

export const ast2str = (
		hAst: hash | string,
		hKeys: hashof<string> = hStdKeys
		): string => {

	if (typeof hAst === 'string') {
		return `- ${hAst}`
	}

	// --- These are string keys
	const {kindKey, childrenKey} = hKeys

	const lAttr: string[] = []
	const lChildren: string[] = []
	for (const key in hAst) {const val = hAst[key];
		if (key === childrenKey) {
			if (isArray(val)) {
				for (const child of val) {
					if (isHash(child) || isString(child)) {
						lChildren.push(indented(ast2str(child)))
					}
					else {
						croak(`Child not hash or string: ${OL(child)}`)
					}
				}
			}
			else {
				croak(`Value for key ${childrenKey} not an array`)
			}
		}
		else if (key !== kindKey) {
			lAttr.push(indented(`${key}: ${val}`))
		}
	}

	return [
		`- ${hAst[kindKey]}`,
		...lAttr,
		...lChildren
		].join('\n')
}

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3JjL2xpYi9hc3QtYnVpbGRlci5saWIuY2l2ZXQudHN4Iiwic291cmNlcyI6WyJzcmMvbGliL2FzdC1idWlsZGVyLmxpYi5jaXZldCJdLCJtYXBwaW5ncyI6IjtBQUFBLHdCQUF1QjtBQUN2QixBQUFBO0FBQ0EsQUFBQSxNQUFNLENBQUMsQ0FBQztBQUNSLENBQUMsS0FBSyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsS0FBSyxDQUFDO0FBQ3hELENBQUMsUUFBUSxDQUFDLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxRQUFRLENBQUM7QUFDL0QsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFdBQVc7QUFDbkIsQUFBQSxBQUFBLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTO0FBQzFCLEFBQUEsQUFBQSxNQUFNLENBQUMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUTtBQUMvQyxBQUFBO0FBQ0EsQUFBQSw4RUFBNkU7QUFDN0UsQUFBQTtBQUNBLEFBQUEsQUFBQSxNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN6QixBQUFBLEdBQUcsTUFBTTtBQUNULEFBQUEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUM7QUFDWCxBQUFBLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDO0FBQ2pCLEFBQUEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsK0JBQThCO0FBQy9ELENBQUMsQ0FBQztBQUNGLEFBQUE7QUFDQSxBQUFBLDhFQUE2RTtBQUM3RSxB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QyxDQUFDLENBQUMsQztFQUFBLEM7Q0FBQSxDQUFBO0FBQ3hDLEFBQUE7QUFDQSxBQUFBLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDVCxBQUFBLEVBQUUsQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN2QixBQUFBLEVBQU8sR0FBTCxLQUFRLENBQUE7QUFDVixBQUFBLEVBQVcsR0FBVCxTQUFZO0FBQ2QsQUFBQSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDO0FBQUMsQ0FBQTtBQUNkIiwibmFtZXMiOltdLCJzb3VyY2VzQ29udGVudCI6WyIjIGFzdC1idWlsZGVyLmxpYi5jaXZldFxuXG5pbXBvcnQge1xuXHR1bmRlZiwgZGVmaW5lZCwgbm90ZGVmaW5lZCwgYXJyYXksIGhhc2gsIGhhc2hvZiwgY3JvYWssXG5cdG5vbkVtcHR5LCBpc05vbkVtcHR5U3RyaW5nLCBhc3NlcnQsIGlzQXJyYXksIGlzSGFzaCwgaXNTdHJpbmcsXG5cdH0gZnJvbSAnZGF0YXR5cGVzJ1xuaW1wb3J0IHtPTH0gZnJvbSAnbGx1dGlscydcbmltcG9ydCB7cmVzZXRPbmVJbmRlbnQsIGluZGVudGVkfSBmcm9tICdpbmRlbnQnXG5cbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCB0eXBlIFROb2RlRGVzYyA9IChcblx0ICBzdHJpbmdcblx0fCBbc3RyaW5nXVxuXHR8IFtzdHJpbmcsIGhhc2hdXG5cdHwgW3N0cmluZywgaGFzaCwgVE5vZGVEZXNjW11dICAgIyAtLS0gW25hbWUsIGhBdHRyLCBsQ2hpbGRyZW5dXG5cdClcblxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IHR5cGUgVEFzdEtleXMgPSB7XG5cdGtpbmRLZXk6IHN0cmluZ1xuXHRjaGlsZHJlbktleTogc3RyaW5nXG5cdH1cblxuaFN0ZEtleXM6IFRBc3RLZXlzIDo9IHtcblx0a2luZEtleTogJ2tpbmQnXG5cdGNoaWxkcmVuS2V5OiAnbENoaWxkcmVuJ1xuXHR9XG5cbmV4cG9ydCB0b0FzdCA6PSAoXG5cdFx0bm9kZTogVE5vZGVEZXNjXG5cdFx0aEtleXM6IFRBc3RLZXlzID0gaFN0ZEtleXNcblx0XHQpOiBoYXNoID0+XG5cblx0IyAtLS0gVGhlc2UgYXJlIHN0cmluZyBrZXlzXG5cdHtraW5kS2V5LCBjaGlsZHJlbktleX0gOj0gaEtleXNcblxuXHRpZiBpc1N0cmluZyhub2RlKVxuXHRcdHJldHVybiB7W2tpbmRLZXldOiBub2RlfVxuXG5cdCMgLS0tIGtpbmQgd2lsbCBiZSBhIGRlZmluZWQgc3RyaW5nXG5cdCMgICAgIGhBdHRyIG1heSBiZSB1bmRlZiwgZWxzZSBpcyBhIGhhc2hcblx0IyAgICAgbENoaWxkcmVuIG1heSBiZSB1bmRlZiwgZWxzZSBpcyBUTm9kZURlc2NbXVxuXHRba2luZCwgaEF0dHIsIGxDaGlsZHJlbl0gOj0gbm9kZVxuXG5cdGFzc2VydCBpc05vbkVtcHR5U3RyaW5nKGtpbmQpLCBcIkJhZCBraW5kOiAje09MKGtpbmQpfVwiXG5cdGlmIGRlZmluZWQoaEF0dHIpXG5cdFx0YXNzZXJ0IG5vdCAoa2luZEtleSBpbiBoQXR0ciksIFwiI3traW5kS2V5fSBpbiBoQXR0clwiXG5cdFx0YXNzZXJ0IG5vdCAoY2hpbGRyZW5LZXkgaW4gaEF0dHIpLCBcIiN7Y2hpbGRyZW5LZXl9IGluIGhBdHRyXCJcblxuXHRoOiBoYXNoIDo9IChcblx0XHQgIGRlZmluZWQoaEF0dHIpXG5cdFx0PyBPYmplY3QuYXNzaWduKHtba2luZEtleV06IGtpbmR9LCBoQXR0cilcblx0XHQ6IHtba2luZEtleV06IGtpbmR9XG5cdFx0KVxuXHRpZiBkZWZpbmVkKGxDaGlsZHJlbilcblx0XHRsU3VicyA6PSBmb3IgY2hpbGQgb2YgbENoaWxkcmVuXG5cdFx0XHR0b0FzdChjaGlsZCwgaEtleXMpXG5cdFx0aFtjaGlsZHJlbktleV0gPSBsU3Vic1xuXHRyZXR1cm4gaFxuXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgYXN0MnN0ciA6PSAoXG5cdFx0aEFzdDogaGFzaCB8IHN0cmluZ1xuXHRcdGhLZXlzOiBoYXNob2Y8c3RyaW5nPiA9IGhTdGRLZXlzXG5cdFx0KTogc3RyaW5nID0+XG5cblx0aWYgKHR5cGVvZiBoQXN0ID09ICdzdHJpbmcnKVxuXHRcdHJldHVybiBcIi0gI3toQXN0fVwiXG5cblx0IyAtLS0gVGhlc2UgYXJlIHN0cmluZyBrZXlzXG5cdHtraW5kS2V5LCBjaGlsZHJlbktleX0gOj0gaEtleXNcblxuXHRsQXR0cjogc3RyaW5nW10gOj0gW11cblx0bENoaWxkcmVuOiBzdHJpbmdbXSA6PSBbXVxuXHRmb3Iga2V5LHZhbCBpbiBoQXN0XG5cdFx0aWYgKGtleSA9PSBjaGlsZHJlbktleSlcblx0XHRcdGlmIGlzQXJyYXkodmFsKVxuXHRcdFx0XHRmb3IgY2hpbGQgb2YgdmFsXG5cdFx0XHRcdFx0aWYgaXNIYXNoKGNoaWxkKSB8fCBpc1N0cmluZyhjaGlsZClcblx0XHRcdFx0XHRcdGxDaGlsZHJlbi5wdXNoIGluZGVudGVkKGFzdDJzdHIoY2hpbGQpKVxuXHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRcdGNyb2FrIFwiQ2hpbGQgbm90IGhhc2ggb3Igc3RyaW5nOiAje09MKGNoaWxkKX1cIlxuXHRcdFx0ZWxzZVxuXHRcdFx0XHRjcm9hayBcIlZhbHVlIGZvciBrZXkgI3tjaGlsZHJlbktleX0gbm90IGFuIGFycmF5XCJcblx0XHRlbHNlIGlmIChrZXkgIT0ga2luZEtleSlcblx0XHRcdGxBdHRyLnB1c2ggaW5kZW50ZWQoXCIje2tleX06ICN7dmFsfVwiKVxuXG5cdHJldHVybiBbXG5cdFx0XCItICN7aEFzdFtraW5kS2V5XX1cIixcblx0XHRsQXR0ci4uLlxuXHRcdGxDaGlsZHJlbi4uLlxuXHRcdF0uam9pbignXFxuJylcbiJdfQ==