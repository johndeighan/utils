"use strict";
// civet.lib.civet

import {SourceFile} from 'typescript'
import {
	undef, defined, notdefined, hash, assert,
	} from './datatypes.lib.ts'
import {
	OL, getOptions, o,
	} from './llutils.lib.ts'
import {
	isFile, fileExt, withExt, slurp, barf, barfTempFile,
	} from './fs.lib.ts'
import {execCmdSync} from './exec.lib.ts'
import {ts2ast} from './typescript.lib.ts'

// ---------------------------------------------------------------------------

export const civet2tsFile = (
		path: string,
		tsPath: string = withExt(path, '.ts'),
		hOptions: hash = {}
		): string => {

	assert(isFile(path), `No such file: ${OL(path)} (civet2tsFile)`)
	assert((fileExt(path) === '.civet'), `Not a civet file: ${OL(path)}`)

	const {inlineMap} = getOptions(hOptions, {
		inlineMap: true
		})
	if (inlineMap) {
		execCmdSync('civet', [
			'--inline-map',
			'-o',
			tsPath,
			'-c',
			path
			])
	}
	else {
		execCmdSync('civet', [
			'-o',
			tsPath,
			'-c',
			path
			])
	}
	assert(isFile(tsPath), `File not created: ${OL(tsPath)}`)
	return tsPath
}

// ---------------------------------------------------------------------------

export const civet2jsFile = (
		path: string,
		jsPath: string = withExt(path, '.js'),
		hOptions: hash = {}
		): string => {

	assert(isFile(path), `No such file: ${OL(path)} (civet2jsFile)`)
	assert((fileExt(path) === '.civet'), `Not a civet file: ${OL(path)}`)

	const {inlineMap} = getOptions(hOptions, {
		inlineMap: true
		})
	if (inlineMap) {
		execCmdSync('civet', [
			'--js',
			'--inline-map',
			'-o',
			jsPath,
			'-c',
			path
			])
	}
	else {
		execCmdSync('civet', [
			'--js',
			'-o',
			jsPath,
			'-c',
			path
			])
	}
	assert(isFile(jsPath), `File not created: ${OL(jsPath)}`)
	return jsPath
}

// ---------------------------------------------------------------------------

export const civet2ts = (civetCode: string): string => {

	const tempFilePath = barfTempFile(civetCode)
	const tsFilePath = withExt(tempFilePath, '.ts')
	civet2tsFile(tempFilePath, tsFilePath, o`!inlineMap`)
	return slurp(tsFilePath)
}

// ---------------------------------------------------------------------------

export const civet2js = (civetCode: string): string => {

	const tempFilePath = Deno.makeTempFileSync({suffix: '.civet'})
	const jsFilePath = withExt(tempFilePath, '.js')
	barf(tempFilePath, civetCode)
	civet2jsFile(tempFilePath, jsFilePath, o`!inlineMap`)
	return slurp(jsFilePath)
}

// ---------------------------------------------------------------------------

export const civet2ast = (civetCode: string): SourceFile => {

	const tsCode = civet2ts(civetCode)
	return ts2ast(tsCode)
}

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3JjL2xpYi9jaXZldC5saWIuY2l2ZXQudHN4Iiwic291cmNlcyI6WyJzcmMvbGliL2NpdmV0LmxpYi5jaXZldCJdLCJtYXBwaW5ncyI6IjtBQUFBLGtCQUFpQjtBQUNqQixBQUFBO0FBQ0EsQUFBQSxNQUFNLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWTtBQUNyQyxBQUFBLEFBQUEsTUFBTSxDQUFDLENBQUM7QUFDUixDQUFDLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQztBQUMxQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsb0JBQW9CO0FBQzVCLEFBQUEsQUFBQSxNQUFNLENBQUMsQ0FBQztBQUNSLENBQUMsRUFBRSxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ25CLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxrQkFBa0I7QUFDMUIsQUFBQSxBQUFBLE1BQU0sQ0FBQyxDQUFDO0FBQ1IsQ0FBQyxNQUFNLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxZQUFZLENBQUM7QUFDckQsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGFBQWE7QUFDckIsQUFBQSxBQUFBLE1BQU0sQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLElBQUksQ0FBQyxlQUFlO0FBQ3pDLEFBQUEsQUFBQSxNQUFNLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMscUJBQXFCO0FBQzFDLEFBQUE7QUFDQSxBQUFBLDhFQUE2RTtBQUM3RSxBQUFBO0FBQ0EsQUFBQSxBQUFBLE1BQU0sQ0FBYSxNQUFaLFlBQVksQ0FBQyxDQUFFLENBQUMsQ0FBQztBQUN4QixBQUFBLEVBQUUsSUFBSSxDQUFDLENBQUMsTUFBTSxDQUFBO0FBQ2QsQUFBQSxFQUFFLE1BQU0sQ0FBQyxDQUFDLE1B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QUNBLEFBQUEsOEVBQTZFO0FBQzdFLEFBQUE7QUFDQSxBQUFBLEFBQUEsTUFBTSxDQUFVLE1BQVQsU0FBUyxDQUFDLENBQUUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQSxDQUFBO0FBQ3RELEFBQUE7QUFDQSxBQUFBLENBQU8sTUFBTixNQUFNLENBQUMsQ0FBRSxDQUFDLFFBQVEsQ0FBQSxBQUFDLFNBQVMsQ0FBQTtBQUM3QixBQUFBLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEM7QUFBQyxDQUFBO0FBQ3RCIiwibmFtZXMiOltdLCJzb3VyY2VzQ29udGVudCI6WyIjIGNpdmV0LmxpYi5jaXZldFxuXG5pbXBvcnQge1NvdXJjZUZpbGV9IGZyb20gJ3R5cGVzY3JpcHQnXG5pbXBvcnQge1xuXHR1bmRlZiwgZGVmaW5lZCwgbm90ZGVmaW5lZCwgaGFzaCwgYXNzZXJ0LFxuXHR9IGZyb20gJy4vZGF0YXR5cGVzLmxpYi50cydcbmltcG9ydCB7XG5cdE9MLCBnZXRPcHRpb25zLCBvLFxuXHR9IGZyb20gJy4vbGx1dGlscy5saWIudHMnXG5pbXBvcnQge1xuXHRpc0ZpbGUsIGZpbGVFeHQsIHdpdGhFeHQsIHNsdXJwLCBiYXJmLCBiYXJmVGVtcEZpbGUsXG5cdH0gZnJvbSAnLi9mcy5saWIudHMnXG5pbXBvcnQge2V4ZWNDbWRTeW5jfSBmcm9tICcuL2V4ZWMubGliLnRzJ1xuaW1wb3J0IHt0czJhc3R9IGZyb20gJy4vdHlwZXNjcmlwdC5saWIudHMnXG5cbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBjaXZldDJ0c0ZpbGUgOj0gKFxuXHRcdHBhdGg6IHN0cmluZ1xuXHRcdHRzUGF0aDogc3RyaW5nID0gd2l0aEV4dChwYXRoLCAnLnRzJylcblx0XHRoT3B0aW9uczogaGFzaCA9IHt9XG5cdFx0KTogc3RyaW5nID0+XG5cblx0YXNzZXJ0IGlzRmlsZShwYXRoKSwgXCJObyBzdWNoIGZpbGU6ICN7T0wocGF0aCl9IChjaXZldDJ0c0ZpbGUpXCJcblx0YXNzZXJ0IChmaWxlRXh0KHBhdGgpID09ICcuY2l2ZXQnKSwgXCJOb3QgYSBjaXZldCBmaWxlOiAje09MKHBhdGgpfVwiXG5cblx0e2lubGluZU1hcH0gOj0gZ2V0T3B0aW9ucyBoT3B0aW9ucywge1xuXHRcdGlubGluZU1hcDogdHJ1ZVxuXHRcdH1cblx0aWYgaW5saW5lTWFwXG5cdFx0ZXhlY0NtZFN5bmMgJ2NpdmV0JywgW1xuXHRcdFx0Jy0taW5saW5lLW1hcCcsXG5cdFx0XHQnLW8nLFxuXHRcdFx0dHNQYXRoLFxuXHRcdFx0Jy1jJyxcblx0XHRcdHBhdGhcblx0XHRcdF1cblx0ZWxzZVxuXHRcdGV4ZWNDbWRTeW5jICdjaXZldCcsIFtcblx0XHRcdCctbycsXG5cdFx0XHR0c1BhdGgsXG5cdFx0XHQnLWMnLFxuXHRcdFx0cGF0aFxuXHRcdFx0XVxuXHRhc3NlcnQgaXNGaWxlKHRzUGF0aCksIFwiRmlsZSBub3QgY3JlYXRlZDogI3tPTCh0c1BhdGgpfVwiXG5cdHJldHVybiB0c1BhdGhcblxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGNpdmV0MmpzRmlsZSA6PSAoXG5cdFx0cGF0aDogc3RyaW5nXG5cdFx0anNQYXRoOiBzdHJpbmcgPSB3aXRoRXh0KHBhdGgsICcuanMnKVxuXHRcdGhPcHRpb25zOiBoYXNoID0ge31cblx0XHQpOiBzdHJpbmcgPT5cblxuXHRhc3NlcnQgaXNGaWxlKHBhdGgpLCBcIk5vIHN1Y2ggZmlsZTogI3tPTChwYXRoKX0gKGNpdmV0MmpzRmlsZSlcIlxuXHRhc3NlcnQgKGZpbGVFeHQocGF0aCkgPT0gJy5jaXZldCcpLCBcIk5vdCBhIGNpdmV0IGZpbGU6ICN7T0wocGF0aCl9XCJcblxuXHR7aW5saW5lTWFwfSA6PSBnZXRPcHRpb25zIGhPcHRpb25zLCB7XG5cdFx0aW5saW5lTWFwOiB0cnVlXG5cdFx0fVxuXHRpZiBpbmxpbmVNYXBcblx0XHRleGVjQ21kU3luYyAnY2l2ZXQnLCBbXG5cdFx0XHQnLS1qcydcblx0XHRcdCctLWlubGluZS1tYXAnLFxuXHRcdFx0Jy1vJyxcblx0XHRcdGpzUGF0aCxcblx0XHRcdCctYycsXG5cdFx0XHRwYXRoXG5cdFx0XHRdXG5cdGVsc2Vcblx0XHRleGVjQ21kU3luYyAnY2l2ZXQnLCBbXG5cdFx0XHQnLS1qcydcblx0XHRcdCctbycsXG5cdFx0XHRqc1BhdGgsXG5cdFx0XHQnLWMnLFxuXHRcdFx0cGF0aFxuXHRcdFx0XVxuXHRhc3NlcnQgaXNGaWxlKGpzUGF0aCksIFwiRmlsZSBub3QgY3JlYXRlZDogI3tPTChqc1BhdGgpfVwiXG5cdHJldHVybiBqc1BhdGhcblxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGNpdmV0MnRzIDo9IChjaXZldENvZGU6IHN0cmluZyk6IHN0cmluZyA9PlxuXG5cdHRlbXBGaWxlUGF0aCA6PSBiYXJmVGVtcEZpbGUgY2l2ZXRDb2RlXG5cdHRzRmlsZVBhdGggOj0gd2l0aEV4dCB0ZW1wRmlsZVBhdGgsICcudHMnXG5cdGNpdmV0MnRzRmlsZSB0ZW1wRmlsZVBhdGgsIHRzRmlsZVBhdGgsIG8nIWlubGluZU1hcCdcblx0cmV0dXJuIHNsdXJwIHRzRmlsZVBhdGhcblxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGNpdmV0MmpzIDo9IChjaXZldENvZGU6IHN0cmluZyk6IHN0cmluZyA9PlxuXG5cdHRlbXBGaWxlUGF0aCA6PSBEZW5vLm1ha2VUZW1wRmlsZVN5bmMge3N1ZmZpeDogJy5jaXZldCd9XG5cdGpzRmlsZVBhdGggOj0gd2l0aEV4dCB0ZW1wRmlsZVBhdGgsICcuanMnXG5cdGJhcmYgdGVtcEZpbGVQYXRoLCBjaXZldENvZGVcblx0Y2l2ZXQyanNGaWxlIHRlbXBGaWxlUGF0aCwganNGaWxlUGF0aCwgbychaW5saW5lTWFwJ1xuXHRyZXR1cm4gc2x1cnAganNGaWxlUGF0aFxuXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgY2l2ZXQyYXN0IDo9IChjaXZldENvZGU6IHN0cmluZyk6IFNvdXJjZUZpbGUgPT5cblxuXHR0c0NvZGUgOj0gY2l2ZXQydHMgY2l2ZXRDb2RlXG5cdHJldHVybiB0czJhc3QodHNDb2RlKVxuIl19