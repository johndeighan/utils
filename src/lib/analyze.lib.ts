"use strict";
// analyze.lib.civet

import {
	undef, defined, notdefined, assert, croak,
	isEmpty, nonEmpty, isInteger,
	hash, isHash, integer, hashof,
	} from 'datatypes'
import {
	words, hasKey, hasKeys, allMatches, OL,
	} from 'llutils'
import {
	LOG, LOGVALUE, DBG, DBGVALUE,
	} from 'logger'
import {TextTable} from 'text-table'
import {allLinesIn} from 'fsys'

// ---------------------------------------------------------------------------

export type symbolKind = 'const'|'var'|'function'|'type'|'interface'|'enum'|'class'

export const isSymbolKind = (x: string): x is symbolKind => {

	return ['const','var','function','type','interface','enum','class'].includes(x)
}

export type symbolDesc = {
	kind: symbolKind
	name: string
	guardFor?: string   // for functions
	numTests?: integer
	status?: string
	}

export const isSymbolDesc = (x: unknown): x is symbolDesc => {

	if (!(isHash(x) && hasKeys(x, 'name', 'kind', 'numTests'))) {
		return false
	}
	const n = x.numTests
	return isInteger(n) && (n >= 0)
}

export type testDesc = {
	kind: symbolKind
	name: string
	numTests: integer
	}

// ---------------------------------------------------------------------------

/**
 * parses line that begins with 'export',
 * except 'export {' or 'export type {'
 * returns a symbolDesc
 */

export const parseExportLine = (
	line: string
	): (symbolDesc | undefined) => {

	if (line.match(/^export(?:\s+type)?\s*\{/)) {
		DBG(`ignoring line ${OL(line)}`)
		return undef
	}

	// --- check for functions
	let ref;let ref1;if ((ref = line.match(/^export\s+([A-Za-z][A-Za-z0-9_]*)\s*(?:\:\s*[A-Za-z][A-Za-z0-9_]*\s*)?(\:?\=)\s*\((.*)$/))) {const lMatches = ref;
		const [_, name, sym, rest] = lMatches
		if (sym === '=') {
			LOG(`WARNING: function ${name} uses '=', not ':='`)
		}
		let ref2;if ((ref2 = rest.match(/\sis\s([A-Za-z][A-Za-z0-9_]*(?:\[\])?)/))) {const lGuard = ref2;
			return {
				name,
				kind: 'function',
				guardFor: lGuard[1]
				}
		}
		else {
			return {
				name,
				kind: 'function'
				}
		}
	}

	else if ((ref1 = line.match(/^export\s+(?:(let|var|const|type|function|interface|enum|class)\s+)?([A-Za-z0-9_]+(?:\<[A-Za-z]+\>)?)(.*)$/))) {const lMatches = ref1;
		DBG(`LINE: ${OL(line)}`)
		const [_, knd, name, tail] = lMatches
		const kind = (
			  notdefined(knd) ? 'const'
			: (knd === 'let')  ? 'var'
			:                  knd
			)
		if (isSymbolKind(kind)) {
			const lTailMatches = tail.match(/\s*\:?\=\s*\(([A-Za-z0-9_]+)\:\s*any\):\s*([A-Za-z0-9_]+)\s+is\s+([A-Za-z0-9_]+(?:\[\])?)/)
			if (defined(lTailMatches)) {
				const [_, var1, var2, typeName] = lTailMatches
				assert((var1 === var2),
						"var name mismatch in type guard")
				DBG(`   EXPORT: ${OL(name)}, kind = ${kind}, guard = ${name}`)
				return {
					name,
					kind
					}
			}
			else {
				DBG(`   EXPORT: ${OL(name)}, kind = ${kind}`)
				return {
					name,
					kind
					}
			}
		}
		else {
			croak(`Bad kind: ${kind}`)
		}
	}
	else {
		return undef
	}
}

// ---------------------------------------------------------------------------
// ASYNC GENERATOR

/**
 * yields symbolDesc objects for a civet file
 */

export const allExportsIn = async function*(
		path: string
		): AsyncGenerator<symbolDesc,void,void> {

	DBG("CALL allExportsIn()")

	// --- There might be multiple lines like 'export function X'
	//     due to function overloading

	const setYielded = new Set()

	for await (const line of allLinesIn(path)) {
		const h = parseExportLine(line)
		if (defined(h) && !setYielded.has(h.name)) {
			yield h
			setYielded.add(h.name)
		}
	}
	return
}

// ---------------------------------------------------------------------------
// ASYNC GENERATOR

export const allUnitTestsIn = async function*(
		path: string
		): AsyncGenerator<testDesc,void,void> {

	let lCurSymbols: testDesc[] = []
	let lineNum = 0
	for await (const line of allLinesIn(path)) {
		lineNum += 1
		if (line.indexOf('DBG ') === 0) {

			DBG(`LINE: '${line}'`)

			// --- Yield all current symbols, then reset array
			for (const sym of lCurSymbols) {
				yield sym
			}
			lCurSymbols = []

			// --- process all quoted strings on line
			for (const [_, lq, desc, rq] of allMatches(line, /(["'])([^"']*)(["'])/)) {
				assert((lq === rq), "Mismatched quotes")
				DBGVALUE('desc', desc)
				const errMsg = `Bad unit test header ${OL(desc)} at ${path}:${lineNum}`
				const lMatches = desc.trim().match(/^(?:(type|const|interface|enum|class|function)\s+)?([A-Za-z0-9_]+)(\(.*\))?(\<T\>)?(.*)$/)
				DBGVALUE("lMatches", lMatches)
				if (defined(lMatches)) {
					const [_, knd, name, funcArgs, subTypes, rest] = lMatches
					assert(isEmpty(rest),
								`${errMsg} - nonempty rest`)
					if (isEmpty(funcArgs)) {
						assert(nonEmpty(knd),
								`${errMsg} - no kind or funcArgs`)
					}
					else {
						assert((isEmpty(knd) || (knd === 'function')),
								`${errMsg} - funcArgs + nonempty kind but not 'function'`)
					}
					const kind = knd || 'function'
					const fullName = defined(subTypes) ? `${name}<T>` : name
					if (isSymbolKind(kind)) {
						lCurSymbols.push({
							name: fullName,
							kind,
							numTests: 0
							})
					}
					else {
						croak(`Bad kind: ${kind}`)
					}
				}
				else {
					LOG(`${errMsg} - no match`)
				}
			}
		}
		else {
			let ref3;if ((ref3 = line.match(/\b(equal|truthy|falsy|fails|succeeds|matches|like|listLike|includes|includesAll|isType|notType)\b/))) {const lMatches2 = ref3;
				DBG(`      - unit test ${lMatches2[1]}`)
				for (const h of lCurSymbols) {
					h.numTests += 1
				}
			}
		}
	}

	// --- Yield any remaining symbols
	for (const sym of lCurSymbols) {
		yield sym
	}
	return
}

// ---------------------------------------------------------------------------

/**
 * Returns an array of symbolDesc objects, including:
 * 	- objects in lExports that don't appear in lTests
 * 		with status = 'missing'
 * 	- objects in lTests that don't appear in lExports
 * 		with status = 'extra'
 */

export const mergeAnalyses = (
		lExports: symbolDesc[],
		lTests: testDesc[]
		): symbolDesc[] => {

	// --- Keep track of all type guard names so we can
	//     remove those functions from the returned list

	const results=[];for (const sym of lExports) {
		const {name, kind} = sym

		// --- find the corresponding testDesc, if any

		const utsym = lTests.find((h) => (h.name === sym.name))
		if (defined(utsym)) {
			results.push(({
				name,
				kind,
				numTests: utsym.numTests,
				status: (utsym.numTests === 0) ? 'missing' : 'ok'
				}))
		}
		else {
			results.push(({
				name,
				kind,
				numTests: 0,
				status: 'missing'
				}))
		}
	};const lResult: symbolDesc[] =results

	// --- find tested symbols, not exported from library
	for (const sym of lTests) {
		const {name, kind, numTests} = sym
		const exsym = lExports.find((h) => (h.name === sym.name))
		if (notdefined(exsym)) {
			lResult.push({
				name,
				kind,
				numTests,
				status: 'extra'
				})
		}
	}

	// --- Filter out any functions which are type guards
	return lResult
}

// ---------------------------------------------------------------------------

/**
 * logs a table of number of unit tests for each symbol
 * returns number of missing tests
 */

export const dumpSymbols = (
		label: string,
		lSymbols: symbolDesc[]
		): integer => {

	const table = new TextTable('l l l r%d')
	table.title(label)
	table.fullsep()
	table.labels(['name','kind','guardFor','# tests'])
	table.sep()
	let numMissing = 0
	for (const {name, kind, guardFor, numTests} of lSymbols) {
		if (numTests === 0) {
			numMissing += 1
		}
		if (kind === 'function') {
			table.data([name, kind, guardFor, numTests || 'missing'])
		}
		else {
			table.data([name, kind, guardFor, numTests || 'missing'])
		}
	}
	console.log(table.asString())
	return numMissing
}

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3JjL2xpYi9hbmFseXplLmxpYi5jaXZldC50c3giLCJzb3VyY2VzIjpbInNyYy9saWIvYW5hbHl6ZS5saWIuY2l2ZXQiXSwibWFwcGluZ3MiOiI7QUFBQSxvQkFBbUI7QUFDbkIsQUFBQTtBQUNBLEFBQUEsTUFBTSxDQUFDLENBQUM7QUFDUixDQUFDLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEtBQUssQ0FBQztBQUMzQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLFNBQVMsQ0FBQztBQUM5QixDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLE1BQU0sQ0FBQztBQUMvQixDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVztBQUNuQixBQUFBLEFBQUEsTUFBTSxDQUFDLENBQUM7QUFDUixDQUFDLEtBQUssQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLEVBQUUsQ0FBQztBQUN4QyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUztBQUNqQixBQUFBLEFBQUEsTUFBTSxDQUFDLENBQUM7QUFDUixDQUFDLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQztBQUM5QixDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUTtBQUNoQixBQUFBLEFBQUEsTUFBTSxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsSUFBSSxDQUFDLFlBQVk7QUFDcEMsQUFBQSxBQUFBLE1BQU0sQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNO0FBQy9CLEFBQUE7QUFDQSxBQUFBLDhFQUE2RTtBQUM3RSxBQUFBO0FBQ0EsQUFBQSxBQUFBLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxPQUFPO0FBQ25GLEFBQUE7QUFDQSxBQUFBLEFBQUEsTUFBTSxDQUFhLE1BQVosWUFBWSxDQUFDLENBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFBLENBQUE7QUFDdEQsQUFBQTtBQUNBLEFBQUEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDO0FBQUMsQ0FBQTtBQUNoRixBQUFBO0FBQ0EsQUFBQSxBQUFBLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzFCLEFBQUEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxVQUFVO0FBQ2pCLEFBQUEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNO0FBQ2IsQUFBQSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsTUFBTSxHQUFHLGdCQUFlO0FBQ3BDLEFBQUEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLE9BQU87QUFDbkIsQUFBQSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsTUFBTTtBQUNoQixDQUFDLENBQUM7QUFDRixBQUFBO0FBQ0EsQUFBQSxBQUFBLE1BQU0sQ0FBYSxNQUFaLFlBQVksQ0FBQyxDQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQSxDQUFBO0FBQ3ZELEFBQUE7QUFDQSxBQUFBLENBQUMsR0FBRyxDQUFBLENBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFBLENBQUEsQ0FBQTtBQUM3RCxBQUFBLEVBQUUsTUFBTSxDQUFDLEs7Q0FBSyxDQUFBO0FBQ2QsQUFBQSxDQUFFLE1BQUQsQ0FBQyxDQUFDLENBQUUsQ0FBQyxDQUFDLENBQUMsUUFBUTtBQUNoQixBQUFBLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQztBQUFDLENBQUE7QUFDaEMsQUFBQTtBQUNBLEFBQUEsQUFBQSxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN4QixBQUFBLENBQUMsSUFBSSxDQUFDLENBQUMsVUFBVTtBQUNqQixBQUFBLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBTTtBQUNiLEFBQUEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxPQUFPO0FBQ2xCLENBQUMsQ0FBQztBQUNGLEFBQUE7QUFDQSxBQUFBLDhFQUE2RTtBQUM3RSxBQUFBO0FBQ0EsQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxBQUFBO0FBQ0EsQUFBQSxBQUFBLE1BQU0sQ0FBZ0IsTUFBZixlQUFlLENBQUMsQ0FBRSxDQUFDLENBQUM7QUFDM0IsQUFBQSxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU07QUFDYixDQUFDLENBQUMsQyxDLENBQUMsQUFBQyxVLFksQ0FBVyxDQUFDLEVBQUUsQ0FBQSxDQUFBO0FBQ2xCLEFBQUE7QUFDQSxBQUFBLENBQUMsR0FBRyxDQUFBLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBRyxDQUFDLEFBQ2hCLE1BQU0sQUFDTixHQUFHLEFBQUMsRUFBRSxDQUFDLEFBQUMsTUFBTSxBQUNkLEVBQUUsQ0FBQyxBQUNILEVBQUUsQUFDRixDQUFHLENBQUMsQ0FBQSxDQUFBLENBQUE7QUFDUCxBQUFBLEVBQUUsR0FBRyxDQUFBLEFBQUMsQ0FBQyxjQUFjLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUNqQyxBQUFBLEVBQUUsTUFBTSxDQUFDLEs7Q0FBSyxDQUFBO0FBQ2QsQUFBQTtBQUNBLEFBQUEsQ0FBQywwQkFBeUI7QUFDMUIsQUFBQSxDLEksRyxDLEksSSxDQUFDLEdBQUcsQyxDLEdBQVEsQ0FBQyxDQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFHLENBQUMsQUFDNUIsTUFBTSxBQUNOLEVBQUUsQ0FBQyxBQUNILENBQUMsUUFBUSxZQUFZLEVBQUUsQUFDdkIsRUFBRSxDQUFDLEFBQ0gsR0FBRyxBQUNGLEVBQUUsQUFDRixFQUFFLENBQUMsQUFDSCxRQUFRLFlBQVksQ0FBQyxBQUNyQixFQUFFLENBQUMsQUFDSCxFQUFFLEFBQ0gsQ0FBQyxFQUFFLENBQUMsQUFBQyxFQUFFLENBQUMsQUFDUixFQUFFLENBQUMsQUFDSCxFQUFFLEFBQ0YsSUFBSSxBQUNKLENBQUMsQ0FBRyxDLENBQUMsQ0FBQSxDQUFBLENBZkksTUFBUixRLEcsRyxDQWVJO0FBQ1IsQUFBQSxFQUFzQixNQUFwQixDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUUsQ0FBQyxRQUFRO0FBQ2xDLEFBQUEsRUFBRSxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQSxDQUFBO0FBQ2pCLEFBQUEsR0FBRyxHQUFHLENBQUEsQUFBQyxDQUFDLGtCQUFrQixFQUFFLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxDO0VBQUEsQ0FBQTtBQUNyRCxBQUFBLEUsSSxJLENBQUUsR0FBRyxDLEMsSUFBTSxDQUFDLENBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUcsQUFDekIsRUFBRSxBQUNGLEVBQUUsQUFDRixFQUFFLEFBQ0YsQ0FBQyxBQUFDLFFBQVEsWUFBWSxDQUFDLEFBQUMsR0FBRyxBQUFDLEVBQUUsQUFBQyxFQUFFLEVBQUUsQUFBQyxDQUFDLEFBQ3JDLENBQUcsQyxDQUFDLENBQUEsQ0FBQSxDQUxHLE1BQU4sTSxHLEksQ0FLRztBQUNSLEFBQUEsR0FBRyxNQUFNLENBQUMsQ0FBQztBQUNYLEFBQUEsSUFBSSxJQUFJLENBQUE7QUFDUixBQUFBLElBQUksSUFBSSxDQUFDLENBQUMsVUFBVSxDQUFBO0FBQ3BCLEFBQUEsSUFBSSxRQUFRLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO0FBQ3ZCLElBQUksQztFQUFDLENBQUE7QUFDTCxBQUFBLEVBQUUsSUFBSSxDQUFBLENBQUE7QUFDTixBQUFBLEdBQUcsTUFBTSxDQUFDLENBQUM7QUFDWCxBQUFBLElBQUksSUFBSSxDQUFBO0FBQ1IsQUFBQSxJQUFJLElBQUksQ0FBQyxDQUFDLFVBQVU7QUFDcEIsSUFBSSxDO0VBQUMsQztDQUFBLENBQUE7QUFDTCxBQUFBO0FBQ0EsQUFBQSxDQUFDLElBQUksQ0FBQyxHQUFHLEMsQyxJQUFRLENBQUMsQ0FBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBRyxDQUFDLEFBQ2pDLE1BQU0sQUFBYSxBQUFtQixBQUN0QyxFQUFFLENBQUMsQUFBZ0IsQUFBWSxBQUMvQixHQUFHLEFBQ0YsSUFBSSxBQUFDLENBQUMsQUFBQyxHQUFHLEFBQUMsQ0FBQyxBQUFDLEtBQUssQUFBQyxDQUFDLEFBQUMsSUFBSSxBQUFDLENBQUMsQUFBQyxRQUFRLEFBQUMsQ0FBQyxBQUFDLFNBQVMsQUFBQyxDQUFDLEFBQUMsSUFBSSxBQUFDLENBQUMsQUFBQyxNQUFNLEFBQ2hFLEVBQUUsQ0FBQyxBQUNILEVBQUUsQUFDSCxDQUFDLEFBQ0EsWUFBWSxDQUFDLEFBQUcsQUFBZSxBQUMvQixHQUFHLEFBQ0YsRUFBRSxBQUFDLFFBQVEsQ0FBQyxBQUFDLEVBQUUsQUFDZixFQUFFLEFBQ0gsQ0FBQyxBQUNGLElBQUksQUFDSixDQUFDLENBQUcsQyxDQUFDLENBQUEsQ0FBQSxDQWRTLE1BQVIsUSxHLEksQ0FjRDtBQUNSLEFBQUEsRUFBRSxHQUFHLENBQUEsQUFBQyxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQ3pCLEFBQUEsRUFBc0IsTUFBcEIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFFLENBQUMsUUFBUTtBQUNsQyxBQUFBLEVBQU0sTUFBSixJQUFJLENBQUMsQ0FBRSxDQUFDLENBQUM7QUFDWCxBQUFBLEtBQUssVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPO0FBQzlCLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUUsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSztBQUM1QixHQUFHLENBQUMsa0JBQWtCLEdBQUc7QUFDekIsR0FBRyxDQUFDO0FBQ0osQUFBQSxFQUFFLEdBQUcsQ0FBQSxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUEsQ0FBQSxDQUFBO0FBQ3ZCLEFBQUEsR0FBZSxNQUFaLFlBQVksQ0FBQyxDQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFHLEFBQzNCLEVBQUUsQ0FBQyxBQUFhLEFBQXFCLEFBQ3JDLEVBQUUsQ0FBQyxBQUFDLEVBQUUsQUFBVSxBQUFJLEFBQ3BCLEVBQUUsQ0FBQyxBQUFhLEFBQXFCLEFBQ3JDLEVBQUUsQUFBYyxBQUFtQixBQUNsQyxDQUFDLFlBQVksRUFBRSxBQUNmLEVBQUUsQUFDRixFQUFFLENBQUMsQUFDSCxHQUFHLEFBQ0gsRUFBRSxBQUNILENBQUMsQUFDRCxFQUFFLENBQUMsQUFDSCxDQUFDLFlBQVksRUFBRSxBQUNmLEVBQUUsQ0FBQyxBQUFDLEVBQUUsQUFBQyxFQUFFLENBQUMsQUFDVixDQUFDLEFBQUMsWUFBWSxDQUFDLEFBQUMsR0FBRyxBQUFDLEVBQUUsQUFBQyxFQUFFLEVBQUUsQUFBQyxDQUFDLEFBQzdCLENBQUcsQ0FBQztBQUNWLEFBQUEsR0FBRyxHQUFHLENBQUEsT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFBLENBQUEsQ0FBQTtBQUMzQixBQUFBLElBQTZCLE1BQXpCLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBRSxDQUFDLFlBQVk7QUFDN0MsQUFBQSxJQUFJLE1BQU0sQ0FBQSxBQUFDLENBQUMsSUFBSSxDQUFDLEdBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUMxQixBQUFBLE1BQU0saUNBQWlDLENBQUE7QUFDdkMsQUFBQSxJQUFJLEdBQUcsQ0FBQSxBQUFDLENBQUMsV0FBVyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFBO0FBQ2pFLEFBQUEsSUFBSSxNQUFNLENBQUMsQ0FBQztBQUNaLEFBQUEsS0FBSyxJQUFJLENBQUE7QUFDVCxBQUFBLEtBQUssSUFBSTtBQUNULEtBQUssQztHQUFDLENBQUE7QUFDTixBQUFBLEdBQUcsSUFBSSxDQUFBLENBQUE7QUFDUCxBQUFBLElBQUksR0FBRyxDQUFBLEFBQUMsQ0FBQyxXQUFXLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFBO0FBQ2hELEFBQUEsSUFBSSxNQUFNLENBQUMsQ0FBQztBQUNaLEFBQUEsS0FBSyxJQUFJLENBQUE7QUFDVCxBQUFBLEtBQUssSUFBSTtBQUNULEtBQUssQztHQUFDLEM7RUFBQSxDQUFBO0FBQ04sQUFBQSxFQUFFLElBQUksQ0FBQSxDQUFBO0FBQ04sQUFBQSxHQUFHLEtBQUssQ0FBQSxBQUFDLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxDQUFDLEM7RUFBQSxDO0NBQUEsQ0FBQTtBQUM1QixBQUFBLENBQUMsSUFBSSxDQUFBLENBQUE7QUFDTCxBQUFBLEVBQUUsTUFBTSxDQUFDLEs7Q0FBSyxDO0FBQUEsQ0FBQTtBQUNkLEFBQUE7QUFDQSxBQUFBLDhFQUE2RTtBQUM3RSxBQUFBLGtCQUFpQjtBQUNqQixBQUFBO0FBQ0EsQUFBQTtBQUNBO0FBQ0EsR0FBRztBQUNILEFBQUE7QUFDQSxBQUFBLEFBQUEsTUFBTSxDQUFhLE1BQVosWUFBWSxDQUFDLENBQUUsQyxNQUVvQixRLENBRm5CLENBQUM7QUFDeEIsQUFBQSxFQUFFLElBQUksQ0FBQyxDQUFDLE1BQU07QUFDZCxFQUFFLENBQUMsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBSSxDQUFBLENBQUE7QUFDNUMsQUFBQTtBQUNBLEFBQUEsQ0FBQyxHQUFHLENBQUEsQUFBQyxxQkFBcUIsQ0FBQTtBQUMxQixBQUFBO0FBQ0EsQUFBQSxDQUFDLDZEQUE0RDtBQUM3RCxBQUFBLENBQUMsa0NBQWlDO0FBQ2xDLEFBQUE7QUFDQSxBQUFBLENBQVcsTUFBVixVQUFVLENBQUMsQ0FBRSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUN4QixBQUFBO0FBQ0EsQUFBQSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQSxNQUFBLElBQUksQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFBLENBQUEsQ0FBQTtBQUNuQyxBQUFBLEVBQUcsTUFBRCxDQUFDLENBQUMsQ0FBRSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUM7QUFDNUIsQUFBQSxFQUFFLEdBQUcsQ0FBQSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUksVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUEsQ0FBQSxDQUFBO0FBQzdDLEFBQUEsR0FBRyxLQUFLLENBQUMsQ0FBQztBQUNWLEFBQUEsR0FBRyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLEM7RUFBQyxDO0NBQUEsQ0FBQTtBQUN6QixBQUFBLENBQUMsTTtBQUFNLENBQUE7QUFDUCxBQUFBO0FBQ0EsQUFBQSw4RUFBNkU7QUFDN0UsQUFBQSxrQkFBaUI7QUFDakIsQUFBQTtBQUNBLEFBQUEsQUFBQSxNQUFNLENBQWUsTUFBZCxjQUFjLENBQUMsQ0FBRSxDLE1BRWdCLFEsQ0FGZixDQUFDO0FBQzFCLEFBQUEsRUFBRSxJQUFJLENBQUMsQ0FBQyxNQUFNO0FBQ2QsRUFBRSxDQUFDLENBQUMsQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUksQ0FBQSxDQUFBO0FBQzFDLEFBQUE7QUFDQSxBQUFBLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNqQyxBQUFBLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNoQixBQUFBLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFBLE1BQUEsSUFBSSxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUEsQ0FBQSxDQUFBO0FBQ25DLEFBQUEsRUFBRSxPQUFPLEMsRUFBRyxDQUFDLENBQUM7QUFDZCxBQUFBLEVBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRSxDQUFDLENBQUMsQ0FBQyxDQUFBLENBQUE7QUFDaEMsQUFBQTtBQUNBLEFBQUEsR0FBRyxHQUFHLENBQUEsQUFBQyxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDeEIsQUFBQTtBQUNBLEFBQUEsR0FBRyxrREFBaUQ7QUFDcEQsQUFBQSxHQUFHLEdBQUcsQ0FBQyxDQUFBLE1BQUEsR0FBRyxDQUFDLEVBQUUsQ0FBQyxXQUFXLENBQUEsQ0FBQSxDQUFBO0FBQ3pCLEFBQUEsSUFBSSxLQUFLLENBQUMsRztHQUFHLENBQUE7QUFDYixBQUFBLEdBQUcsV0FBVyxDLENBQUUsQ0FBQyxDQUFDLENBQUM7QUFDbkIsQUFBQTtBQUNBLEFBQUEsR0FBRyx5Q0FBd0M7QUFDM0MsQUFBQSxHQUFHLEdBQUcsQ0FBQyxDQUFBLE1BQUEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUcsQUFDM0MsQ0FBQyxJQUFJLENBQUMsQUFDTixDQUFDLEtBQUssRUFBRSxBQUNSLENBQUMsSUFBSSxDQUFDLEFBQ04sQ0FBRyxDQUFDLENBQUEsQ0FBQSxDQUFBO0FBQ1QsQUFBQSxJQUFJLE1BQU0sQ0FBQSxBQUFDLENBQUMsRUFBRSxDQUFDLEdBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLG1CQUFtQixDQUFBO0FBQzFDLEFBQUEsSUFBSSxRQUFRLENBQUEsQUFBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUE7QUFDekIsQUFBQSxJQUFVLE1BQU4sTUFBTSxDQUFDLENBQUUsQ0FBQyxDQUFDLHFCQUFxQixFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQztBQUN0RSxBQUFBLElBQVksTUFBUixRQUFRLENBQUMsQ0FBRSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFHLENBQUMsQUFDaEMsR0FBRyxBQUNGLENBQUMsQUFDRSxJQUFJLEFBQ04sQ0FBQyxBQUFDLEtBQUssQUFDUCxDQUFDLEFBQUMsU0FBUyxBQUNYLENBQUMsQUFBQyxJQUFJLEFBQ04sQ0FBQyxBQUFDLEtBQUssQUFDUCxDQUFDLEFBQUMsUUFBUSxBQUNWLENBQUMsQUFDRixFQUFFLENBQUMsQUFDSCxFQUFFLEFBQ0gsQ0FBQyxZQUFZLEVBQUUsQUFBRyxBQUFlLEFBQ2pDLENBQUMsQUFDQSxFQUFFLEFBQWEsQUFBZSxBQUM5QixFQUFFLEFBQ0YsRUFBRSxBQUNGLEVBQUUsQUFDSCxDQUFDLEFBQ0EsRUFBRSxBQUFhLEFBQVUsQUFDekIsQ0FBQyxBQUNELEVBQUUsQUFDRixFQUFFLEFBQ0gsSUFBSSxBQUNKLENBQUMsQ0FBRyxDQUFDO0FBQ1gsQUFBQSxJQUFJLFFBQVEsQ0FBQSxBQUFDLFVBQVUsQ0FBQyxDQUFDLFFBQVEsQ0FBQTtBQUNqQyxBQUFBLElBQUksR0FBRyxDQUFBLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQSxDQUFBLENBQUE7QUFDeEIsQUFBQSxLQUE2QyxNQUF4QyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUUsQ0FBQyxRQUFRO0FBQ3pELEFBQUEsS0FBSyxNQUFNLENBQUEsQUFBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDMUIsQUFBQSxRQUFRLENBQUMsRUFBRSxNQUFNLENBQUMsZ0JBQWdCLENBQUMsQ0FBQTtBQUNuQyxBQUFBLEtBQUssR0FBRyxDQUFBLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQSxDQUFBLENBQUE7QUFDekIsQUFBQSxNQUFNLE1BQU0sQ0FBQSxBQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUMzQixBQUFBLFFBQVEsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxzQkFBc0IsQ0FBQyxDO0tBQUEsQ0FBQTtBQUN6QyxBQUFBLEtBQUssSUFBSSxDQUFBLENBQUE7QUFDVCxBQUFBLE1BQU0sTUFBTSxDQUFBLEFBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO0FBQ25ELEFBQUEsUUFBUSxDQUFDLEVBQUUsTUFBTSxDQUFDLDhDQUE4QyxDQUFDLEM7S0FBQSxDQUFBO0FBQ2pFLEFBQUEsS0FBUyxNQUFKLElBQUksQ0FBQyxDQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxVQUFVO0FBQzlCLEFBQUEsS0FBYSxNQUFSLFFBQVEsQ0FBQyxDQUFFLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJO0FBQ3hELEFBQUEsS0FBSyxHQUFHLENBQUEsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFBLENBQUEsQ0FBQTtBQUMxQixBQUFBLE1BQU0sV0FBVyxDQUFDLElBQUksQ0FBQSxBQUFDLENBQUM7QUFDeEIsQUFBQSxPQUFPLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQTtBQUNyQixBQUFBLE9BQU8sSUFBSSxDQUFBO0FBQ1gsQUFBQSxPQUFPLFFBQVEsQ0FBQyxDQUFDLENBQUM7QUFDbEIsT0FBTyxDQUFDLEM7S0FBQSxDQUFBO0FBQ1IsQUFBQSxLQUFLLElBQUksQ0FBQSxDQUFBO0FBQ1QsQUFBQSxNQUFNLEtBQUssQ0FBQSxBQUFDLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxDQUFDLEM7S0FBQSxDO0lBQUEsQ0FBQTtBQUMvQixBQUFBLElBQUksSUFBSSxDQUFBLENBQUE7QUFDUixBQUFBLEtBQUssR0FBRyxDQUFBLEFBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxXQUFXLENBQUMsQztJQUFBLEM7R0FBQSxDO0VBQUEsQ0FBQTtBQUMvQixBQUFBLEVBQUUsSUFBSSxDQUFBLENBQUE7QUFDTixBQUFBLEcsSSxJLENBQUcsR0FBRyxDLEMsSUFBUyxDQUFDLENBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUcsQUFDNUIsRUFBRSxBQUNGLENBQUMsQUFDRSxLQUFLLEFBQ1AsQ0FBQyxBQUFDLE1BQU0sQUFDUixDQUFDLEFBQUMsS0FBSyxBQUNQLENBQUMsQUFBQyxLQUFLLEFBQ1AsQ0FBQyxBQUFDLFFBQVEsQUFDVixDQUFDLEFBQUMsT0FBTyxBQUNULENBQUMsQUFBQyxJQUFJLEFBQ04sQ0FBQyxBQUFDLFFBQVEsQUFDVixDQUFDLEFBQUMsUUFBUSxBQUNWLENBQUMsQUFBQyxXQUFXLEFBQ2IsQ0FBQyxBQUFDLE1BQU0sQUFDUixDQUFDLEFBQUMsT0FBTyxBQUNULENBQUMsQUFDRixFQUFFLEFBQ0YsQ0FBRyxDLENBQUMsQ0FBQSxDQUFBLENBakJNLE1BQVQsUyxHLEksQ0FpQkc7QUFDVCxBQUFBLElBQUksR0FBRyxDQUFBLEFBQUMsQ0FBQyxrQkFBa0IsRUFBRSxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQzNDLEFBQUEsSUFBSSxHQUFHLENBQUMsQ0FBQSxNQUFBLENBQUMsQ0FBQyxFQUFFLENBQUMsV0FBVyxDQUFBLENBQUEsQ0FBQTtBQUN4QixBQUFBLEtBQUssQ0FBQyxDQUFDLFFBQVEsQyxFQUFHLENBQUMsQztJQUFDLEM7R0FBQSxDO0VBQUEsQztDQUFBLENBQUE7QUFDcEIsQUFBQTtBQUNBLEFBQUEsQ0FBQyxrQ0FBaUM7QUFDbEMsQUFBQSxDQUFDLEdBQUcsQ0FBQyxDQUFBLE1BQUEsR0FBRyxDQUFDLEVBQUUsQ0FBQyxXQUFXLENBQUEsQ0FBQSxDQUFBO0FBQ3ZCLEFBQUEsRUFBRSxLQUFLLENBQUMsRztDQUFHLENBQUE7QUFDWCxBQUFBLENBQUMsTTtBQUFNLENBQUE7QUFDUCxBQUFBO0FBQ0EsQUFBQSw4RUFBNkU7QUFDN0UsQUFBQTtBQUNBLEFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEFBQUE7QUFDQSxBQUFBLEFBQUEsTUFBTSxDQUFjLE1BQWIsYUFBYSxDQUFDLENBQUUsQ0FBQyxDQUFDO0FBQ3pCLEFBQUEsRUFBRSxRQUFRLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO0FBQ3pCLEFBQUEsRUFBRSxNQUFNLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUNwQixFQUFFLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFBLENBQUE7QUFDcEIsQUFBQTtBQUNBLEFBQUEsQ0FBQyxtREFBa0Q7QUFDbkQsQUFBQSxDQUFDLG9EQUFtRDtBQUNwRCxBQUFBO0FBQ0EsQUFBQSxDLEssQyxPLEcsQ0FBMEIsR0FBRyxDQUFDLENBQUEsTUFBQSxHQUFHLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQSxDQUFBLENBQUE7QUFDN0MsQUFBQSxFQUFjLE1BQVosQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFFLENBQUMsR0FBRztBQUNyQixBQUFBO0FBQ0EsQUFBQSxFQUFFLDhDQUE2QztBQUMvQyxBQUFBO0FBQ0EsQUFBQSxFQUFPLE1BQUwsS0FBSyxDQUFDLENBQUUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFFLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ25ELEFBQUEsRUFBRSxHQUFHLENBQUEsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFBLENBQUEsQ0FBQTtBQUNuQixBQUFBLEcsTyxNLENBQUcsQ0FBQztBQUNKLEFBQUEsSUFBSSxJQUFJLENBQUE7QUFDUixBQUFBLElBQUksSUFBSSxDQUFBO0FBQ1IsQUFBQSxJQUFJLFFBQVEsQ0FBQyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUE7QUFDNUIsQUFBQSxJQUFJLE1BQU0sQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxHQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsSUFBSTtBQUNwRCxJQUFJLEMsQyxDO0VBQUMsQ0FBQTtBQUNMLEFBQUEsRUFBRSxJQUFJLENBQUEsQ0FBQTtBQUNOLEFBQUEsRyxPLE0sQ0FBRyxDQUFDO0FBQ0osQUFBQSxJQUFJLElBQUksQ0FBQTtBQUNSLEFBQUEsSUFBSSxJQUFJLENBQUE7QUFDUixBQUFBLElBQUksUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQ2YsQUFBQSxJQUFJLE1BQU0sQ0FBQyxDQUFDLFNBQVM7QUFDckIsSUFBSSxDLEMsQztFQUFDLEM7Q0FBQSxDLENBbkJpQixNQUFyQixPQUFPLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLEMsT0FtQmxCO0FBQ0wsQUFBQTtBQUNBLEFBQUEsQ0FBQyxxREFBb0Q7QUFDckQsQUFBQSxDQUFDLEdBQUcsQ0FBQyxDQUFBLE1BQUEsR0FBRyxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUEsQ0FBQSxDQUFBO0FBQ2xCLEFBQUEsRUFBd0IsTUFBdEIsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFFLENBQUMsR0FBRztBQUMvQixBQUFBLEVBQU8sTUFBTCxLQUFLLENBQUMsQ0FBRSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUUsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDckQsQUFBQSxFQUFFLEdBQUcsQ0FBQSxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUEsQ0FBQSxDQUFBO0FBQ3RCLEFBQUEsR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFBLEFBQUMsQ0FBQztBQUNqQixBQUFBLElBQUksSUFBSSxDQUFBO0FBQ1IsQUFBQSxJQUFJLElBQUksQ0FBQTtBQUNSLEFBQUEsSUFBSSxRQUFRLENBQUE7QUFDWixBQUFBLElBQUksTUFBTSxDQUFDLENBQUMsT0FBTztBQUNuQixJQUFJLENBQUMsQztFQUFBLEM7Q0FBQSxDQUFBO0FBQ0wsQUFBQTtBQUNBLEFBQUEsQ0FBQyxxREFBb0Q7QUFDckQsQUFBQSxDQUFDLE1BQU0sQ0FBQyxPO0FBQU8sQ0FBQTtBQUNmLEFBQUE7QUFDQSxBQUFBLDhFQUE2RTtBQUM3RSxBQUFBO0FBQ0EsQUFBQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQUFBQTtBQUNBLEFBQUEsQUFBQSxNQUFNLENBQVksTUFBWCxXQUFXLENBQUMsQ0FBRSxDQUFDLENBQUM7QUFDdkIsQUFBQSxFQUFFLEtBQUssQ0FBQyxDQUFDLE1BQU0sQ0FBQztBQUNoQixBQUFBLEVBQUUsUUFBUSxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDeEIsRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFBLENBQUE7QUFDZixBQUFBO0FBQ0EsQUFBQSxDQUFNLE1BQUwsS0FBSyxDQUFDLENBQUUsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQztBQUNwQyxBQUFBLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQSxBQUFDLEtBQUssQ0FBQTtBQUNsQixBQUFBLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ2hCLEFBQUEsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFBLEFBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsQ0FBQTtBQUNsRCxBQUFBLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ1osQUFBQSxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbkIsQUFBQSxDQUFDLEdBQUcsQ0FBQyxDQUFBLE1BQUEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFBLENBQUEsQ0FBQTtBQUNqRCxBQUFBLEVBQUUsR0FBRyxDQUFDLFFBQVEsQ0FBQyxHQUFFLENBQUMsQ0FBQyxDQUFDLENBQUEsQ0FBQTtBQUNwQixBQUFBLEdBQUcsVUFBVSxDLEVBQUcsQ0FBQyxDO0VBQUMsQ0FBQTtBQUNsQixBQUFBLEVBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFFLENBQUMsVUFBVSxDQUFDLENBQUEsQ0FBQTtBQUN6QixBQUFBLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQSxBQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsQztFQUFBLENBQUE7QUFDM0QsQUFBQSxFQUFFLElBQUksQ0FBQSxDQUFBO0FBQ04sQUFBQSxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUEsQUFBQyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLEM7RUFBQSxDO0NBQUEsQ0FBQTtBQUMzRCxBQUFBLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQSxBQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFBO0FBQzdCLEFBQUEsQ0FBQyxNQUFNLENBQUMsVTtBQUFVLENBQUE7QUFDbEIiLCJuYW1lcyI6W10sInNvdXJjZXNDb250ZW50IjpbIiMgYW5hbHl6ZS5saWIuY2l2ZXRcblxuaW1wb3J0IHtcblx0dW5kZWYsIGRlZmluZWQsIG5vdGRlZmluZWQsIGFzc2VydCwgY3JvYWssXG5cdGlzRW1wdHksIG5vbkVtcHR5LCBpc0ludGVnZXIsXG5cdGhhc2gsIGlzSGFzaCwgaW50ZWdlciwgaGFzaG9mLFxuXHR9IGZyb20gJ2RhdGF0eXBlcydcbmltcG9ydCB7XG5cdHdvcmRzLCBoYXNLZXksIGhhc0tleXMsIGFsbE1hdGNoZXMsIE9MLFxuXHR9IGZyb20gJ2xsdXRpbHMnXG5pbXBvcnQge1xuXHRMT0csIExPR1ZBTFVFLCBEQkcsIERCR1ZBTFVFLFxuXHR9IGZyb20gJ2xvZ2dlcidcbmltcG9ydCB7VGV4dFRhYmxlfSBmcm9tICd0ZXh0LXRhYmxlJ1xuaW1wb3J0IHthbGxMaW5lc0lufSBmcm9tICdmc3lzJ1xuXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgdHlwZSBzeW1ib2xLaW5kID0gJ2NvbnN0J3wndmFyJ3wnZnVuY3Rpb24nfCd0eXBlJ3wnaW50ZXJmYWNlJ3wnZW51bSd8J2NsYXNzJ1xuXG5leHBvcnQgaXNTeW1ib2xLaW5kIDo9ICh4OiBzdHJpbmcpOiB4IGlzIHN5bWJvbEtpbmQgPT5cblxuXHRyZXR1cm4gWydjb25zdCcsJ3ZhcicsJ2Z1bmN0aW9uJywndHlwZScsJ2ludGVyZmFjZScsJ2VudW0nLCdjbGFzcyddLmluY2x1ZGVzKHgpXG5cbmV4cG9ydCB0eXBlIHN5bWJvbERlc2MgPSB7XG5cdGtpbmQ6IHN5bWJvbEtpbmRcblx0bmFtZTogc3RyaW5nXG5cdGd1YXJkRm9yPzogc3RyaW5nICAgIyBmb3IgZnVuY3Rpb25zXG5cdG51bVRlc3RzPzogaW50ZWdlclxuXHRzdGF0dXM/OiBzdHJpbmdcblx0fVxuXG5leHBvcnQgaXNTeW1ib2xEZXNjIDo9ICh4OiB1bmtub3duKTogeCBpcyBzeW1ib2xEZXNjID0+XG5cblx0aWYgbm90IChpc0hhc2goeCkgJiYgaGFzS2V5cyh4LCAnbmFtZScsICdraW5kJywgJ251bVRlc3RzJykpXG5cdFx0cmV0dXJuIGZhbHNlXG5cdG4gOj0geC5udW1UZXN0c1xuXHRyZXR1cm4gaXNJbnRlZ2VyKG4pICYmIChuID49IDApXG5cbmV4cG9ydCB0eXBlIHRlc3REZXNjID0ge1xuXHRraW5kOiBzeW1ib2xLaW5kXG5cdG5hbWU6IHN0cmluZ1xuXHRudW1UZXN0czogaW50ZWdlclxuXHR9XG5cbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8qKlxuICogcGFyc2VzIGxpbmUgdGhhdCBiZWdpbnMgd2l0aCAnZXhwb3J0JyxcbiAqIGV4Y2VwdCAnZXhwb3J0IHsnIG9yICdleHBvcnQgdHlwZSB7J1xuICogcmV0dXJucyBhIHN5bWJvbERlc2NcbiAqL1xuXG5leHBvcnQgcGFyc2VFeHBvcnRMaW5lIDo9IChcblx0bGluZTogc3RyaW5nXG5cdCk6IHN5bWJvbERlc2M/ID0+XG5cblx0aWYgbGluZS5tYXRjaCgvLy9eXG5cdFx0XHRleHBvcnRcblx0XHRcdCg/OiBcXHMrIHR5cGUpP1xuXHRcdFx0XFxzKlxuXHRcdFx0XFx7XG5cdFx0XHQvLy8pXG5cdFx0REJHIFwiaWdub3JpbmcgbGluZSAje09MKGxpbmUpfVwiXG5cdFx0cmV0dXJuIHVuZGVmXG5cblx0IyAtLS0gY2hlY2sgZm9yIGZ1bmN0aW9uc1xuXHRpZiBsTWF0Y2hlcyA6PSBsaW5lLm1hdGNoKC8vL15cblx0XHRcdGV4cG9ydFxuXHRcdFx0XFxzK1xuXHRcdFx0KFtBLVphLXpdW0EtWmEtejAtOV9dKilcblx0XHRcdFxccypcblx0XHRcdCg/OlxuXHRcdFx0XHRcXDpcblx0XHRcdFx0XFxzKlxuXHRcdFx0XHRbQS1aYS16XVtBLVphLXowLTlfXSpcblx0XHRcdFx0XFxzKlxuXHRcdFx0XHQpP1xuXHRcdFx0KFxcOj8gXFw9KVxuXHRcdFx0XFxzKlxuXHRcdFx0XFwoXG5cdFx0XHQoLiopXG5cdFx0XHQkLy8vKVxuXHRcdFtfLCBuYW1lLCBzeW0sIHJlc3RdIDo9IGxNYXRjaGVzXG5cdFx0aWYgKHN5bSA9PSAnPScpXG5cdFx0XHRMT0cgXCJXQVJOSU5HOiBmdW5jdGlvbiAje25hbWV9IHVzZXMgJz0nLCBub3QgJzo9J1wiXG5cdFx0aWYgbEd1YXJkIDo9IHJlc3QubWF0Y2goLy8vXG5cdFx0XHRcdFxcc1xuXHRcdFx0XHRpc1xuXHRcdFx0XHRcXHNcblx0XHRcdFx0KCBbQS1aYS16XVtBLVphLXowLTlfXSogKD86IFxcWyBcXF0pPyApXG5cdFx0XHRcdC8vLylcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdG5hbWVcblx0XHRcdFx0a2luZDogJ2Z1bmN0aW9uJ1xuXHRcdFx0XHRndWFyZEZvcjogbEd1YXJkWzFdXG5cdFx0XHRcdH1cblx0XHRlbHNlXG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRuYW1lXG5cdFx0XHRcdGtpbmQ6ICdmdW5jdGlvbidcblx0XHRcdFx0fVxuXG5cdGVsc2UgaWYgbE1hdGNoZXMgOj0gbGluZS5tYXRjaCgvLy9eXG5cdFx0XHRleHBvcnQgICAgICAgICAgICAgIyB0aGUgd29yZCAnZXhwb3J0J1xuXHRcdFx0XFxzKyAgICAgICAgICAgICAgICAjIHdoaXRlc3BhY2Vcblx0XHRcdCg/OlxuXHRcdFx0XHQobGV0IHwgdmFyIHwgY29uc3QgfCB0eXBlIHwgZnVuY3Rpb24gfCBpbnRlcmZhY2UgfCBlbnVtIHwgY2xhc3MpXG5cdFx0XHRcdFxccytcblx0XHRcdFx0KT9cblx0XHRcdChcblx0XHRcdFx0W0EtWmEtejAtOV9dKyAgICMgYW4gaWRlbnRpZmllclxuXHRcdFx0XHQoPzpcblx0XHRcdFx0XHRcXDwgW0EtWmEtel0rIFxcPlxuXHRcdFx0XHRcdCk/XG5cdFx0XHRcdClcblx0XHRcdCguKilcblx0XHRcdCQvLy8pXG5cdFx0REJHIFwiTElORTogI3tPTChsaW5lKX1cIlxuXHRcdFtfLCBrbmQsIG5hbWUsIHRhaWxdIDo9IGxNYXRjaGVzXG5cdFx0a2luZCA6PSAoXG5cdFx0XHQgIG5vdGRlZmluZWQoa25kKSA/ICdjb25zdCdcblx0XHRcdDogKGtuZCA9PSAnbGV0JykgID8gJ3Zhcidcblx0XHRcdDogICAgICAgICAgICAgICAgICBrbmRcblx0XHRcdClcblx0XHRpZiBpc1N5bWJvbEtpbmQoa2luZClcblx0XHRcdGxUYWlsTWF0Y2hlcyA6PSB0YWlsLm1hdGNoKC8vL1xuXHRcdFx0XHRcdFx0XFxzKiAgICAgICAgICAgICAjIG9wdGlvbmFsIHdoaXRlc3BhY2Vcblx0XHRcdFx0XHRcdFxcOj8gXFw9ICAgICAgICAgICMgOj1cblx0XHRcdFx0XHRcdFxccyogICAgICAgICAgICAgIyBvcHRpb25hbCB3aGl0ZXNwYWNlXG5cdFx0XHRcdFx0XHRcXCggICAgICAgICAgICAgICMgc3RhcnQgb2YgYXJnIGxpc3Rcblx0XHRcdFx0XHRcdFx0KFtBLVphLXowLTlfXSspXG5cdFx0XHRcdFx0XHRcdFxcOlxuXHRcdFx0XHRcdFx0XHRcXHMqXG5cdFx0XHRcdFx0XHRcdGFueVxuXHRcdFx0XHRcdFx0XHRcXClcblx0XHRcdFx0XHRcdDpcblx0XHRcdFx0XHRcdFxccypcblx0XHRcdFx0XHRcdChbQS1aYS16MC05X10rKVxuXHRcdFx0XHRcdFx0XFxzKyBpcyBcXHMrXG5cdFx0XHRcdFx0XHQoIFtBLVphLXowLTlfXSsgKD86IFxcWyBcXF0pPyApXG5cdFx0XHRcdFx0XHQvLy8pXG5cdFx0XHRpZiBkZWZpbmVkKGxUYWlsTWF0Y2hlcylcblx0XHRcdFx0W18sIHZhcjEsIHZhcjIsIHR5cGVOYW1lXSA6PSBsVGFpbE1hdGNoZXNcblx0XHRcdFx0YXNzZXJ0ICh2YXIxID09IHZhcjIpLFxuXHRcdFx0XHRcdFx0XCJ2YXIgbmFtZSBtaXNtYXRjaCBpbiB0eXBlIGd1YXJkXCJcblx0XHRcdFx0REJHIFwiICAgRVhQT1JUOiAje09MKG5hbWUpfSwga2luZCA9ICN7a2luZH0sIGd1YXJkID0gI3tuYW1lfVwiXG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0bmFtZVxuXHRcdFx0XHRcdGtpbmRcblx0XHRcdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHRcdERCRyBcIiAgIEVYUE9SVDogI3tPTChuYW1lKX0sIGtpbmQgPSAje2tpbmR9XCJcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRuYW1lXG5cdFx0XHRcdFx0a2luZFxuXHRcdFx0XHRcdH1cblx0XHRlbHNlXG5cdFx0XHRjcm9hayBcIkJhZCBraW5kOiAje2tpbmR9XCJcblx0ZWxzZVxuXHRcdHJldHVybiB1bmRlZlxuXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuIyBBU1lOQyBHRU5FUkFUT1JcblxuLyoqXG4gKiB5aWVsZHMgc3ltYm9sRGVzYyBvYmplY3RzIGZvciBhIGNpdmV0IGZpbGVcbiAqL1xuXG5leHBvcnQgYWxsRXhwb3J0c0luIDo9IChcblx0XHRwYXRoOiBzdHJpbmdcblx0XHQpOiBBc3luY0dlbmVyYXRvcjxzeW1ib2xEZXNjLHZvaWQsdm9pZD4gLT5cblxuXHREQkcgXCJDQUxMIGFsbEV4cG9ydHNJbigpXCJcblxuXHQjIC0tLSBUaGVyZSBtaWdodCBiZSBtdWx0aXBsZSBsaW5lcyBsaWtlICdleHBvcnQgZnVuY3Rpb24gWCdcblx0IyAgICAgZHVlIHRvIGZ1bmN0aW9uIG92ZXJsb2FkaW5nXG5cblx0c2V0WWllbGRlZCA6PSBuZXcgU2V0KClcblxuXHRmb3IgYXdhaXQgbGluZSBvZiBhbGxMaW5lc0luKHBhdGgpXG5cdFx0aCA6PSBwYXJzZUV4cG9ydExpbmUobGluZSlcblx0XHRpZiBkZWZpbmVkKGgpICYmIG5vdCBzZXRZaWVsZGVkLmhhcyhoLm5hbWUpXG5cdFx0XHR5aWVsZCBoXG5cdFx0XHRzZXRZaWVsZGVkLmFkZChoLm5hbWUpXG5cdHJldHVyblxuXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuIyBBU1lOQyBHRU5FUkFUT1JcblxuZXhwb3J0IGFsbFVuaXRUZXN0c0luIDo9IChcblx0XHRwYXRoOiBzdHJpbmdcblx0XHQpOiBBc3luY0dlbmVyYXRvcjx0ZXN0RGVzYyx2b2lkLHZvaWQ+IC0+XG5cblx0bGV0IGxDdXJTeW1ib2xzOiB0ZXN0RGVzY1tdID0gW11cblx0bGV0IGxpbmVOdW0gPSAwXG5cdGZvciBhd2FpdCBsaW5lIG9mIGFsbExpbmVzSW4ocGF0aClcblx0XHRsaW5lTnVtICs9IDFcblx0XHRpZiAobGluZS5pbmRleE9mKCdEQkcgJykgPT0gMClcblxuXHRcdFx0REJHIFwiTElORTogJyN7bGluZX0nXCJcblxuXHRcdFx0IyAtLS0gWWllbGQgYWxsIGN1cnJlbnQgc3ltYm9scywgdGhlbiByZXNldCBhcnJheVxuXHRcdFx0Zm9yIHN5bSBvZiBsQ3VyU3ltYm9sc1xuXHRcdFx0XHR5aWVsZCBzeW1cblx0XHRcdGxDdXJTeW1ib2xzID0gW11cblxuXHRcdFx0IyAtLS0gcHJvY2VzcyBhbGwgcXVvdGVkIHN0cmluZ3Mgb24gbGluZVxuXHRcdFx0Zm9yIFtfLCBscSwgZGVzYywgcnFdIG9mIGFsbE1hdGNoZXMobGluZSwgLy8vXG5cdFx0XHRcdFx0KFtcIiddKVxuXHRcdFx0XHRcdChbXlwiJ10qKVxuXHRcdFx0XHRcdChbXCInXSlcblx0XHRcdFx0XHQvLy8pXG5cdFx0XHRcdGFzc2VydCAobHEgPT0gcnEpLCBcIk1pc21hdGNoZWQgcXVvdGVzXCJcblx0XHRcdFx0REJHVkFMVUUgJ2Rlc2MnLCBkZXNjXG5cdFx0XHRcdGVyck1zZyA6PSBcIkJhZCB1bml0IHRlc3QgaGVhZGVyICN7T0woZGVzYyl9IGF0ICN7cGF0aH06I3tsaW5lTnVtfVwiXG5cdFx0XHRcdGxNYXRjaGVzIDo9IGRlc2MudHJpbSgpLm1hdGNoKC8vL15cblx0XHRcdFx0XHRcdCg/OlxuXHRcdFx0XHRcdFx0XHQoXG5cdFx0XHRcdFx0XHRcdFx0ICB0eXBlXG5cdFx0XHRcdFx0XHRcdFx0fCBjb25zdFxuXHRcdFx0XHRcdFx0XHRcdHwgaW50ZXJmYWNlXG5cdFx0XHRcdFx0XHRcdFx0fCBlbnVtXG5cdFx0XHRcdFx0XHRcdFx0fCBjbGFzc1xuXHRcdFx0XHRcdFx0XHRcdHwgZnVuY3Rpb25cblx0XHRcdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0XHRcdFxccytcblx0XHRcdFx0XHRcdFx0KT9cblx0XHRcdFx0XHRcdChbQS1aYS16MC05X10rKSAgICMgYW4gaWRlbnRpZmllclxuXHRcdFx0XHRcdFx0KFxuXHRcdFx0XHRcdFx0XHRcXCggICAgICAgICAgICAgIyBhcmd1bWVudCBsaXN0XG5cdFx0XHRcdFx0XHRcdC4qXG5cdFx0XHRcdFx0XHRcdFxcKVxuXHRcdFx0XHRcdFx0XHQpP1xuXHRcdFx0XHRcdFx0KFxuXHRcdFx0XHRcdFx0XHRcXDwgICAgICAgICAgICAgIyBzdWJ0eXBlc1xuXHRcdFx0XHRcdFx0XHRUXG5cdFx0XHRcdFx0XHRcdFxcPlxuXHRcdFx0XHRcdFx0XHQpP1xuXHRcdFx0XHRcdFx0KC4qKVxuXHRcdFx0XHRcdFx0JC8vLylcblx0XHRcdFx0REJHVkFMVUUgXCJsTWF0Y2hlc1wiLCBsTWF0Y2hlc1xuXHRcdFx0XHRpZiBkZWZpbmVkKGxNYXRjaGVzKVxuXHRcdFx0XHRcdFtfLCBrbmQsIG5hbWUsIGZ1bmNBcmdzLCBzdWJUeXBlcywgcmVzdF0gOj0gbE1hdGNoZXNcblx0XHRcdFx0XHRhc3NlcnQgaXNFbXB0eShyZXN0KSxcblx0XHRcdFx0XHRcdFx0XHRcIiN7ZXJyTXNnfSAtIG5vbmVtcHR5IHJlc3RcIlxuXHRcdFx0XHRcdGlmIGlzRW1wdHkoZnVuY0FyZ3MpXG5cdFx0XHRcdFx0XHRhc3NlcnQgbm9uRW1wdHkoa25kKSxcblx0XHRcdFx0XHRcdFx0XHRcIiN7ZXJyTXNnfSAtIG5vIGtpbmQgb3IgZnVuY0FyZ3NcIlxuXHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRcdGFzc2VydCAoaXNFbXB0eShrbmQpIHx8IChrbmQgPT0gJ2Z1bmN0aW9uJykpLFxuXHRcdFx0XHRcdFx0XHRcdFwiI3tlcnJNc2d9IC0gZnVuY0FyZ3MgKyBub25lbXB0eSBraW5kIGJ1dCBub3QgJ2Z1bmN0aW9uJ1wiXG5cdFx0XHRcdFx0a2luZCA6PSBrbmQgfHwgJ2Z1bmN0aW9uJ1xuXHRcdFx0XHRcdGZ1bGxOYW1lIDo9IGRlZmluZWQoc3ViVHlwZXMpID8gXCIje25hbWV9PFQ+XCIgOiBuYW1lXG5cdFx0XHRcdFx0aWYgaXNTeW1ib2xLaW5kKGtpbmQpXG5cdFx0XHRcdFx0XHRsQ3VyU3ltYm9scy5wdXNoIHtcblx0XHRcdFx0XHRcdFx0bmFtZTogZnVsbE5hbWVcblx0XHRcdFx0XHRcdFx0a2luZFxuXHRcdFx0XHRcdFx0XHRudW1UZXN0czogMFxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0Y3JvYWsgXCJCYWQga2luZDogI3traW5kfVwiXG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRMT0cgXCIje2Vyck1zZ30gLSBubyBtYXRjaFwiXG5cdFx0ZWxzZVxuXHRcdFx0aWYgbE1hdGNoZXMyIDo9IGxpbmUubWF0Y2goLy8vXG5cdFx0XHRcdFx0XFxiXG5cdFx0XHRcdFx0KFxuXHRcdFx0XHRcdFx0ICBlcXVhbFxuXHRcdFx0XHRcdFx0fCB0cnV0aHlcblx0XHRcdFx0XHRcdHwgZmFsc3lcblx0XHRcdFx0XHRcdHwgZmFpbHNcblx0XHRcdFx0XHRcdHwgc3VjY2VlZHNcblx0XHRcdFx0XHRcdHwgbWF0Y2hlc1xuXHRcdFx0XHRcdFx0fCBsaWtlXG5cdFx0XHRcdFx0XHR8IGxpc3RMaWtlXG5cdFx0XHRcdFx0XHR8IGluY2x1ZGVzXG5cdFx0XHRcdFx0XHR8IGluY2x1ZGVzQWxsXG5cdFx0XHRcdFx0XHR8IGlzVHlwZVxuXHRcdFx0XHRcdFx0fCBub3RUeXBlXG5cdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0XFxiXG5cdFx0XHRcdFx0Ly8vKVxuXHRcdFx0XHREQkcgXCIgICAgICAtIHVuaXQgdGVzdCAje2xNYXRjaGVzMlsxXX1cIlxuXHRcdFx0XHRmb3IgaCBvZiBsQ3VyU3ltYm9sc1xuXHRcdFx0XHRcdGgubnVtVGVzdHMgKz0gMVxuXG5cdCMgLS0tIFlpZWxkIGFueSByZW1haW5pbmcgc3ltYm9sc1xuXHRmb3Igc3ltIG9mIGxDdXJTeW1ib2xzXG5cdFx0eWllbGQgc3ltXG5cdHJldHVyblxuXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vKipcbiAqIFJldHVybnMgYW4gYXJyYXkgb2Ygc3ltYm9sRGVzYyBvYmplY3RzLCBpbmNsdWRpbmc6XG4gKiBcdC0gb2JqZWN0cyBpbiBsRXhwb3J0cyB0aGF0IGRvbid0IGFwcGVhciBpbiBsVGVzdHNcbiAqIFx0XHR3aXRoIHN0YXR1cyA9ICdtaXNzaW5nJ1xuICogXHQtIG9iamVjdHMgaW4gbFRlc3RzIHRoYXQgZG9uJ3QgYXBwZWFyIGluIGxFeHBvcnRzXG4gKiBcdFx0d2l0aCBzdGF0dXMgPSAnZXh0cmEnXG4gKi9cblxuZXhwb3J0IG1lcmdlQW5hbHlzZXMgOj0gKFxuXHRcdGxFeHBvcnRzOiBzeW1ib2xEZXNjW10sXG5cdFx0bFRlc3RzOiB0ZXN0RGVzY1tdXG5cdFx0KTogc3ltYm9sRGVzY1tdID0+XG5cblx0IyAtLS0gS2VlcCB0cmFjayBvZiBhbGwgdHlwZSBndWFyZCBuYW1lcyBzbyB3ZSBjYW5cblx0IyAgICAgcmVtb3ZlIHRob3NlIGZ1bmN0aW9ucyBmcm9tIHRoZSByZXR1cm5lZCBsaXN0XG5cblx0bFJlc3VsdDogc3ltYm9sRGVzY1tdIDo9IGZvciBzeW0gb2YgbEV4cG9ydHNcblx0XHR7bmFtZSwga2luZH0gOj0gc3ltXG5cblx0XHQjIC0tLSBmaW5kIHRoZSBjb3JyZXNwb25kaW5nIHRlc3REZXNjLCBpZiBhbnlcblxuXHRcdHV0c3ltIDo9IGxUZXN0cy5maW5kKChoKSA9PiAoaC5uYW1lID09IHN5bS5uYW1lKSlcblx0XHRpZiBkZWZpbmVkKHV0c3ltKVxuXHRcdFx0e1xuXHRcdFx0XHRuYW1lXG5cdFx0XHRcdGtpbmRcblx0XHRcdFx0bnVtVGVzdHM6IHV0c3ltLm51bVRlc3RzXG5cdFx0XHRcdHN0YXR1czogKHV0c3ltLm51bVRlc3RzID09IDApID8gJ21pc3NpbmcnIDogJ29rJ1xuXHRcdFx0XHR9XG5cdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHRuYW1lXG5cdFx0XHRcdGtpbmRcblx0XHRcdFx0bnVtVGVzdHM6IDBcblx0XHRcdFx0c3RhdHVzOiAnbWlzc2luZydcblx0XHRcdFx0fVxuXG5cdCMgLS0tIGZpbmQgdGVzdGVkIHN5bWJvbHMsIG5vdCBleHBvcnRlZCBmcm9tIGxpYnJhcnlcblx0Zm9yIHN5bSBvZiBsVGVzdHNcblx0XHR7bmFtZSwga2luZCwgbnVtVGVzdHN9IDo9IHN5bVxuXHRcdGV4c3ltIDo9IGxFeHBvcnRzLmZpbmQoKGgpID0+IChoLm5hbWUgPT0gc3ltLm5hbWUpKVxuXHRcdGlmIG5vdGRlZmluZWQoZXhzeW0pXG5cdFx0XHRsUmVzdWx0LnB1c2gge1xuXHRcdFx0XHRuYW1lXG5cdFx0XHRcdGtpbmRcblx0XHRcdFx0bnVtVGVzdHNcblx0XHRcdFx0c3RhdHVzOiAnZXh0cmEnXG5cdFx0XHRcdH1cblxuXHQjIC0tLSBGaWx0ZXIgb3V0IGFueSBmdW5jdGlvbnMgd2hpY2ggYXJlIHR5cGUgZ3VhcmRzXG5cdHJldHVybiBsUmVzdWx0XG5cbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8qKlxuICogbG9ncyBhIHRhYmxlIG9mIG51bWJlciBvZiB1bml0IHRlc3RzIGZvciBlYWNoIHN5bWJvbFxuICogcmV0dXJucyBudW1iZXIgb2YgbWlzc2luZyB0ZXN0c1xuICovXG5cbmV4cG9ydCBkdW1wU3ltYm9scyA6PSAoXG5cdFx0bGFiZWw6IHN0cmluZyxcblx0XHRsU3ltYm9sczogc3ltYm9sRGVzY1tdXG5cdFx0KTogaW50ZWdlciA9PlxuXG5cdHRhYmxlIDo9IG5ldyBUZXh0VGFibGUoJ2wgbCBsIHIlZCcpXG5cdHRhYmxlLnRpdGxlIGxhYmVsXG5cdHRhYmxlLmZ1bGxzZXAoKVxuXHR0YWJsZS5sYWJlbHMgWyduYW1lJywna2luZCcsJ2d1YXJkRm9yJywnIyB0ZXN0cyddXG5cdHRhYmxlLnNlcCgpXG5cdGxldCBudW1NaXNzaW5nID0gMFxuXHRmb3Ige25hbWUsIGtpbmQsIGd1YXJkRm9yLCBudW1UZXN0c30gb2YgbFN5bWJvbHNcblx0XHRpZiAobnVtVGVzdHMgPT0gMClcblx0XHRcdG51bU1pc3NpbmcgKz0gMVxuXHRcdGlmIChraW5kID09ICdmdW5jdGlvbicpXG5cdFx0XHR0YWJsZS5kYXRhIFtuYW1lLCBraW5kLCBndWFyZEZvciwgbnVtVGVzdHMgfHwgJ21pc3NpbmcnXVxuXHRcdGVsc2Vcblx0XHRcdHRhYmxlLmRhdGEgW25hbWUsIGtpbmQsIGd1YXJkRm9yLCBudW1UZXN0cyB8fCAnbWlzc2luZyddXG5cdGNvbnNvbGUubG9nIHRhYmxlLmFzU3RyaW5nKClcblx0cmV0dXJuIG51bU1pc3NpbmdcbiJdfQ==