"use strict";
// extract.lib.civet

import {sep} from 'base-utils'
import {
	undef, defined, notdefined, isString, isArray, isEmpty, nonEmpty,
	integer,
	assert, assertIsString, assertIsNumber, assertIsArray,
	} from 'datatypes'
import {o} from 'llutils'
import {toNice} from 'to-nice'

// ---------------------------------------------------------------------------

export type TPathItem = string | number

export const getDsPath = (lPath: TPathItem[]): string => {

	const results=[];for (const x of lPath) {
		results.push(isString(x) ? `.${x}` : `[${x}]`)
	};const lParts =results
	return lParts.join('')
}

// ---------------------------------------------------------------------------

export const extract = (
		x: unknown,
		dspath: string | TPathItem[]
		): unknown => {

	const pathstr = isArray(dspath) ? getDsPath(dspath) : dspath
	if (nonEmpty(pathstr)) {
		const expr = `x = x${pathstr}`
		try {
			eval(expr)
		}
		catch (err) {
			const msg: string = (
				  isString(err)          ? err
				: (err instanceof Error) ? err.message
				:                          'Unknown error'
				)
			try {
				console.log(sep(`EVAL ERROR in ${expr}`, '='))
				console.log(msg)
				console.log(sep(undef, '='))
				console.log(toNice(x, o`ignoreEmptyValues`))
				console.log(sep(undef, '='))
			} catch(e) {}
			console.log(`EVAL ERROR in '${expr}'`)
			console.log(sep(undef, '='))
			Deno.exit(99)
		}
	}
	return x
}

// ---------------------------------------------------------------------------

export const getString = (
		x: unknown,
		dspath: string | TPathItem[],
		value: (string | undefined) = undef
		): string => {

	const val = extract(x, dspath)
	assertIsString(val)
	if (value) {
		assert((val === value), `Expected ${value}, got ${val}`)
	}
	return val
}

// ---------------------------------------------------------------------------

export const getNumber = (
		x: unknown,
		dspath: string | TPathItem[],
		value: (number | undefined) = undef
		): number => {

	const val = extract(x, dspath)
	assertIsNumber(val)
	if (value) {
		assert((val === value), `Expected ${value}, got ${val}`)
	}
	return val
}

// ---------------------------------------------------------------------------

export const getArray = (
		x: unknown,
		dspath: string | TPathItem[],
		len: (integer | undefined) = undef
		): unknown[] => {

	const val = extract(x, dspath)
	assertIsArray(val)
	if (len) {
		assert((val.length === len), `Expected ${len} len array, got ${val}`)
	}
	return val
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQzovVXNlcnMvam9obmQvdXRpbHMvc3JjL2xpYi9leHRyYWN0LmxpYi5jaXZldC50c3giLCJzb3VyY2VzIjpbIkM6L1VzZXJzL2pvaG5kL3V0aWxzL3NyYy9saWIvZXh0cmFjdC5saWIuY2l2ZXQiXSwibWFwcGluZ3MiOiI7QUFBQSxvQkFBbUI7QUFDbkIsQUFBQTtBQUNBLEFBQUEsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLFlBQVk7QUFDOUIsQUFBQSxBQUFBLE1BQU0sQ0FBQyxDQUFDO0FBQ1IsQ0FBQyxLQUFLLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxRQUFRLENBQUM7QUFDbEUsQ0FBQyxPQUFPLENBQUM7QUFDVCxDQUFDLE1BQU0sQ0FBQyxDQUFDLGNBQWMsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxDQUFDLGFBQWEsQ0FBQztBQUN2RCxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVztBQUNuQixBQUFBLEFBQUEsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVM7QUFDekIsQUFBQSxBQUFBLE1BQU0sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTO0FBQzlCLEFBQUE7QUFDQSxBQUFBLDhFQUE2RTtBQUM3RSxBQUFBO0FBQ0EsQUFBQSxBQUFBLE1BQU0sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLE1BQU07QUFDdkMsQUFBQTtBQUNBLEFBQUEsQUFBQSxNQUFNLENBQVUsTUFBVCxTQUFTLENBQUMsQ0FBRSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQSxDQUFBO0FBQ25ELEFBQUE7QUFDQSxBQUFBLEMsSyxDLE8sRyxDQUFX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Q0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDO0FBQzFCLEFBQUEsQ0FBQyxhQUFhLENBQUMsR0FBRyxDQUFDO0FBQ25CLEFBQUEsQ0FBQyxHQUFHLENBQUEsR0FBRyxDQUFBLENBQUEsQ0FBQTtBQUNQLEFBQUEsRUFBRSxNQUFNLENBQUEsQUFBQyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUUsR0FBRyxDQUFDLGdCQUFnQixFQUFFLEdBQUcsQ0FBQyxDQUFDLEM7Q0FBQSxDQUFBO0FBQ3JFLEFBQUEsQ0FBQyxNQUFNLENBQUMsRztBQUFHLENBQUE7QUFDWCIsIm5hbWVzIjpbXSwic291cmNlc0NvbnRlbnQiOlsiIyBleHRyYWN0LmxpYi5jaXZldFxuXG5pbXBvcnQge3NlcH0gZnJvbSAnYmFzZS11dGlscydcbmltcG9ydCB7XG5cdHVuZGVmLCBkZWZpbmVkLCBub3RkZWZpbmVkLCBpc1N0cmluZywgaXNBcnJheSwgaXNFbXB0eSwgbm9uRW1wdHksXG5cdGludGVnZXIsXG5cdGFzc2VydCwgYXNzZXJ0SXNTdHJpbmcsIGFzc2VydElzTnVtYmVyLCBhc3NlcnRJc0FycmF5LFxuXHR9IGZyb20gJ2RhdGF0eXBlcydcbmltcG9ydCB7b30gZnJvbSAnbGx1dGlscydcbmltcG9ydCB7dG9OaWNlfSBmcm9tICd0by1uaWNlJ1xuXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgdHlwZSBUUGF0aEl0ZW0gPSBzdHJpbmcgfCBudW1iZXJcblxuZXhwb3J0IGdldERzUGF0aCA6PSAobFBhdGg6IFRQYXRoSXRlbVtdKTogc3RyaW5nID0+XG5cblx0bFBhcnRzIDo9IGZvciB4IG9mIGxQYXRoXG5cdFx0aXNTdHJpbmcoeCkgPyBcIi4je3h9XCIgOiBcIlsje3h9XVwiXG5cdHJldHVybiBsUGFydHMuam9pbignJylcblxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGV4dHJhY3QgOj0gKFxuXHRcdHg6IHVua25vd24sXG5cdFx0ZHNwYXRoOiBzdHJpbmcgfCBUUGF0aEl0ZW1bXVxuXHRcdCk6IHVua25vd24gPT5cblxuXHRwYXRoc3RyIDo9IGlzQXJyYXkoZHNwYXRoKSA/IGdldERzUGF0aChkc3BhdGgpIDogZHNwYXRoXG5cdGlmIG5vbkVtcHR5KHBhdGhzdHIpXG5cdFx0ZXhwciA6PSBcInggPSB4I3twYXRoc3RyfVwiXG5cdFx0dHJ5XG5cdFx0XHRldmFsIGV4cHJcblx0XHRjYXRjaCBlcnJcblx0XHRcdG1zZzogc3RyaW5nIDo9IChcblx0XHRcdFx0ICBpc1N0cmluZyhlcnIpICAgICAgICAgID8gZXJyXG5cdFx0XHRcdDogKGVyciBpbnN0YW5jZW9mIEVycm9yKSA/IGVyci5tZXNzYWdlXG5cdFx0XHRcdDogICAgICAgICAgICAgICAgICAgICAgICAgICdVbmtub3duIGVycm9yJ1xuXHRcdFx0XHQpXG5cdFx0XHR0cnlcblx0XHRcdFx0Y29uc29sZS5sb2cgc2VwKFwiRVZBTCBFUlJPUiBpbiAje2V4cHJ9XCIsICc9Jylcblx0XHRcdFx0Y29uc29sZS5sb2cgbXNnXG5cdFx0XHRcdGNvbnNvbGUubG9nIHNlcCh1bmRlZiwgJz0nKVxuXHRcdFx0XHRjb25zb2xlLmxvZyB0b05pY2UoeCwgbydpZ25vcmVFbXB0eVZhbHVlcycpXG5cdFx0XHRcdGNvbnNvbGUubG9nIHNlcCh1bmRlZiwgJz0nKVxuXHRcdFx0Y29uc29sZS5sb2cgXCJFVkFMIEVSUk9SIGluICcje2V4cHJ9J1wiXG5cdFx0XHRjb25zb2xlLmxvZyBzZXAodW5kZWYsICc9Jylcblx0XHRcdERlbm8uZXhpdCA5OVxuXHRyZXR1cm4geFxuXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgZ2V0U3RyaW5nIDo9IChcblx0XHR4OiB1bmtub3duLFxuXHRcdGRzcGF0aDogc3RyaW5nIHwgVFBhdGhJdGVtW11cblx0XHR2YWx1ZTogc3RyaW5nPyA9IHVuZGVmXG5cdFx0KTogc3RyaW5nID0+XG5cblx0dmFsIDo9IGV4dHJhY3QoeCwgZHNwYXRoKVxuXHRhc3NlcnRJc1N0cmluZyh2YWwpXG5cdGlmIHZhbHVlXG5cdFx0YXNzZXJ0ICh2YWwgPT0gdmFsdWUpLCBcIkV4cGVjdGVkICN7dmFsdWV9LCBnb3QgI3t2YWx9XCJcblx0cmV0dXJuIHZhbFxuXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgZ2V0TnVtYmVyIDo9IChcblx0XHR4OiB1bmtub3duLFxuXHRcdGRzcGF0aDogc3RyaW5nIHwgVFBhdGhJdGVtW11cblx0XHR2YWx1ZTogbnVtYmVyPyA9IHVuZGVmXG5cdFx0KTogbnVtYmVyID0+XG5cblx0dmFsIDo9IGV4dHJhY3QoeCwgZHNwYXRoKVxuXHRhc3NlcnRJc051bWJlcih2YWwpXG5cdGlmIHZhbHVlXG5cdFx0YXNzZXJ0ICh2YWwgPT0gdmFsdWUpLCBcIkV4cGVjdGVkICN7dmFsdWV9LCBnb3QgI3t2YWx9XCJcblx0cmV0dXJuIHZhbFxuXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgZ2V0QXJyYXkgOj0gKFxuXHRcdHg6IHVua25vd24sXG5cdFx0ZHNwYXRoOiBzdHJpbmcgfCBUUGF0aEl0ZW1bXVxuXHRcdGxlbjogaW50ZWdlcj8gPSB1bmRlZlxuXHRcdCk6IHVua25vd25bXSA9PlxuXG5cdHZhbCA6PSBleHRyYWN0KHgsIGRzcGF0aClcblx0YXNzZXJ0SXNBcnJheSh2YWwpXG5cdGlmIGxlblxuXHRcdGFzc2VydCAodmFsLmxlbmd0aCA9PSBsZW4pLCBcIkV4cGVjdGVkICN7bGVufSBsZW4gYXJyYXksIGdvdCAje3ZhbH1cIlxuXHRyZXR1cm4gdmFsXG4iXX0=