"use strict";
// logger.civet

import {existsSync} from "@std/fs"
import {sprintf} from "@std/fmt/printf"
import {
	ConsoleHandler, FileHandler, setup, getLogger,
	LogRecord,
	} from "@std/log"

import {
	undef, defined, notdefined,
	hash, isString,
	} from './datatypes.ts'
import {
	assert, croak, pass, sinceLoadStr,
	} from './llutils.ts'
import {
	mkpath, relpath, isDir, isFile, mkDir,
	} from './fs.ts'

/**
 * @module logger - logging utilities
 */

const Deno = globalThis.Deno
export const logFileName : string = "./logs/logs.txt"
export const sepdash : string = '-'.repeat(32)
export const sepeq : string   = '='.repeat(32)

// --- These are not exported
const isSep = (str : string): boolean => {
	return (str === sepdash) || (str === sepeq)
}

const getMainModule = (): string => {
	const path: string = new URL(Deno.mainModule).pathname
	return relpath(path.slice(1))
}

// --- There always needs to be a 'logs' folder in the current directory
// mkDir './logs'

let indent : number = 0
const prefix = () => '   '.repeat(indent)

const hFileLabel: hash = {
	DEBUG: 'D ',
	INFO:  'I ',
	WARN:  'W ',
	ERROR: 'ERROR: '
	}

const hConsoleLabel: hash = {
	DEBUG: '',
	INFO:  '',
	WARN:  '',
	ERROR: ''
	}

// ---------------------------------------------------------------------------

export const hLoggerConfig: hash = {
	handlers: {

		profile: new ConsoleHandler('DEBUG', {
			formatter: ((rec: LogRecord) => {
				const {datetime, msg, levelName} = rec
				const ts = sinceLoadStr()
				const label = hConsoleLabel[levelName]
				return `[${ts}] ${label}${prefix()}${msg}`
			}
				)
			}),

		pfile: new FileHandler('DEBUG', {
			filename: mkpath(logFileName),
			mode: 'a',
			formatter: (rec) => {
				const {datetime, msg, levelName} = rec
				const ts = sinceLoadStr()
				const label = hFileLabel[levelName]
				return `[${ts}] ${label}${prefix()}${msg}`
			}
			}),

		console: new ConsoleHandler('DEBUG', {
			formatter: ((rec) => {
				const {levelName, msg} = rec
				assert(isString(msg), `Not a string: ${msg}`)
				if (msg.startsWith('=====  ')) {
					return ''
				}
				const label = hConsoleLabel[levelName]
				assert(defined(label), `No label for ${levelName}`)
				return `${label}${prefix()}${msg}`
			}
				)
			}),

		file: new FileHandler('DEBUG', {
			filename: logFileName,
			mode: 'a',
			formatter: (rec) => {
				const {levelName, msg} = rec
				if (isSep(msg)) {
					return msg
				}
				else if (msg.startsWith('=====  ')) {
					return msg
				}
				else {
					const label = hFileLabel[levelName]
					assert(defined(label), `No label for ${levelName}`)
					return `${label}${prefix()}${msg}`
				}
			}
				}),
	},

	// --- assign handlers to loggers
	//     must include:
	//        'profile', 'debug', 'info', 'warn', 'error', 'file' and 'silent'
	loggers: {
		profile: {
			level: "DEBUG",
			num: 1,
			handlers: ["profile", "pfile"]
			},
		debug: {
			level: "DEBUG",
			num: 2,
			handlers: ["console", "file"]
			},
		info: {
			level: "INFO",
			num: 3,
			handlers: ["console", "file"]
			},
		warn: {
			level: "WARN",
			num: 4,
			handlers: ["console", "file"]
			},
		error: {
			level: "ERROR",
			num: 5,
			handlers: ["console", "file"]
			},
		file: {
			level: "DEBUG",
			num: 6,
			handlers: ["file"]
			},
		silent: {
			level: "ERROR",
			num: 7,
			handlers: []
			}
		}
	}

await setup(hLoggerConfig)

export const INDENT : string = 'MOKaHenzkyZNbNWmUYijCNoqmIrIemFh'
export const UNDENT : string = 'MXrveSEaCkCfQjEgPdMIaEDFMIWMtHqz'
export const CLEAR  : string = '2EYCEu1v7xs0i4L3o5rAV1ZNLFkQYNHh'

// ---------------------------------------------------------------------------
// levels: profile, debug, info, warn, error, file, silent

export class LoggerEx {

	defLevel: string       = Deno.env.get('DEFAULT_LOGGER') || 'info'
	lLoggerStack: string[] = [this.defLevel]
	hConfig: hash          = hLoggerConfig
	hLoggers: hash         = this.hConfig.loggers
	silent: boolean        = false
	mainModule: string     = getMainModule()

	constructor() {
		this.check(this.defLevel)
	}

	curLevel(): string {
		const result = this.lLoggerStack.at(-1)
		if (result === undef) {
			throw new Error("empty stack")
		}
		else {
			return result
		}
	}

	levelChanged(): void {
		return
	}

	setLevel(level: string): void {
		this.check(level)
		this.lLoggerStack[this.lLoggerStack.length-1] = level
		this.levelChanged()
		return
	}

	pushLevel(level: string): void {
		this.check(level)
		this.lLoggerStack.push(level)
		this.levelChanged()
		return
	}

	popLevel(): string {
		assert((this.lLoggerStack.length > 0), "Empty logger stack")
		const level = this.lLoggerStack.pop()
		if (level === undef) {
			throw new Error("empty stack")
		}
		this.levelChanged()
		return level
	}

	isActive(level: string): boolean {
		this.check(level)
		const curNum = this.hLoggers[this.curLevel()].num
		const lvlNum = this.hLoggers[level].num
		return (lvlNum >= curNum)
	}

	output(level: string, lItems: any[]): void {
		const main = getMainModule()
		if (main !== this.mainModule) {
			const logger = getLogger('debug')
			logger.debug(`=====  ${main}  =====`)
			this.mainModule = main
		}
		if (this.isActive(level)) {
			for (const item of lItems) {
				switch(item) {
					case INDENT: {
						indent += 1;break;
					}
					case UNDENT: {
						indent = (indent===0) ? 0 : indent-1;break;
					}
					case CLEAR: {
						this.clearLog();break;
					}
					default: {
						const str = isString(item) ? item : JSON.stringify(item)
						const logger = getLogger(this.curLevel())
						switch(level) {
//							when 'profile'
//								logger.profile str
							case 'debug': {
								logger.debug(str);break;
							}
							case 'info': {
								logger.info(str);break;
							}
							case 'warn': {
								logger.warn(str);break;
							}
							case 'error': {
								logger.error(str);break;
							}
//							when 'file'
//								logger.file str
							case 'silent': {
								pass();break;
							}
							default: {
								logger.debug(str)
							}
						}
					}
				}
			}
		}
		return
	}

	flush(): void {
		this.hConfig.handlers.file.flush()
		this.hConfig.handlers.pfile.flush()
		return
	}

	clearLog(): void {
		this.flush()
		Deno.writeTextFileSync(logFileName, '')
		return
	}

	getFullLog(): string {
		this.flush()
		const text = Deno.readTextFileSync(logFileName)
		return text ? text.trim() : ''
	}

	getLog(): string {
		const text = this.getFullLog()
		const lLines = text ? text.split('\n') : []
		const lNewLines = lLines.filter((x) => !x.match(/^=====\s\s/))
		const resultStr = lNewLines.join('\n')
		return resultStr
	}

	check(level: string): void {
		assert(this.hLoggers[level], `Bad logger level: '${level}'`)
		return
	}
}

export const logger: LoggerEx = new LoggerEx()

// ---------------------------------------------------------------------------

export const clearLog = (level: (string | undefined)=undef): void => {

	logger.clearLog()
	if (!notdefined(level)) {
		logger.setLevel(level)
	}
	return
}

// ---------------------------------------------------------------------------

export const DBG  = (...lItems: any[]): void => logger.output('debug', lItems)
export const LOG  = (...lItems: any[]): void => logger.output('info', lItems)
export const WARN = (...lItems: any[]): void => logger.output('warn', lItems)
export const ERR  = (...lItems: any[]): void => logger.output('error', lItems)

export const curLogLevel  = (): string => { return logger.curLevel() }
export const setLogLevel  = (level: string): void => logger.setLevel(level)
export const pushLogLevel = (level: string): void => logger.pushLevel(level)
export const popLogLevel  = (): string => { return logger.popLevel() }
export const getFullLog   = (): string => { return logger.getFullLog() }
export const getLog       = (): string => { return logger.getLog() }
export const flushLog     = (): void => logger.flush()

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3JjL2xpYi9sb2dnZXIuY2l2ZXQudHN4Iiwic291cmNlcyI6WyJzcmMvbGliL2xvZ2dlci5jaXZldCJdLCJtYXBwaW5ncyI6IjtBQUFBLGVBQWM7QUFDZCxBQUFBO0FBQ0EsQUFBQSxNQUFNLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUztBQUNsQyxBQUFBLEFBQUEsTUFBTSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLGlCQUFpQjtBQUN2QyxBQUFBLEFBQUEsTUFBTSxDQUFDLENBQUM7QUFDUixDQUFDLGNBQWMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLFNBQVMsQ0FBQztBQUMvQyxDQUFDLFNBQVMsQ0FBQztBQUNYLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVO0FBQ2xCLEFBQUE7QUFDQSxBQUFBLEFBQUEsTUFBTSxDQUFDLENBQUM7QUFDUixDQUFDLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFVBQVUsQ0FBQztBQUM1QixDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQztBQUNoQixDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCO0FBQ3hCLEFBQUEsQUFBQSxNQUFNLENBQUMsQ0FBQztBQUNSLENBQUMsTUFBTSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsWUFBWSxDQUFDO0FBQ25DLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxjQUFjO0FBQ3RCLEFBQUEsQUFBQSxNQUFNLENBQUMsQ0FBQztBQUNSLENBQUMsTUFBTSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsS0FBSyxDQUFDO0FBQ3ZDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTO0FBQ2pCLEFBQUE7QUFDQSxBQUFBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQUFBQTtBQUNBLEFBQUEsQUFBSSxNQUFKLElBQUks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QyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDaEMsQUFBQSxFQUFFLEksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUNqQyxBQUFBLEVBQUUsTTtDQUFNLENBQUE7QUFDUixBQUFBO0FBQ0EsQUFBQSxDLFFBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUEsQ0FBQTtBQUNqQixBQUFBLEVBQUUsSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ1YsQUFBQSxFQUFFLElBQUksQ0FBQyxpQkFBaUIsQ0FBQSxBQUFDLFdBQVcsQ0FBQyxDQUFDLEVBQUUsQ0FBQTtBQUN4QyxBQUFBLEVBQUUsTTtDQUFNLENBQUE7QUFDUixBQUFBO0FBQ0EsQUFBQSxDLFVBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUEsQ0FBQTtBQUNyQixBQUFBLEVBQUUsSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ1YsQUFBQSxFQUFNLE1BQUosSUFBSSxDQUFDLENBQUUsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsV0FBVyxDQUFDO0FBQzVDLEFBQUEsRUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRTtDQUFFLENBQUE7QUFDaEMsQUFBQTtBQUNBLEFBQUEsQyxNQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFBLENBQUE7QUFDakIsQUFBQSxFQUFNLE1BQUosSUFBSSxDQUFDLENBQUUsQ0FBQyxJLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDdkIsQUFBQSxFQUFRLE1BQU4sTUFBTSxDQUFDLENBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN4QyxBQUFBLEVBQVcsTUFBVCxTQUFTLENBQUMsQ0FBRSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBSSxDQUFDLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxDQUFDO0FBQzlELEFBQUEsRUFBVyxNQUFULFNBQVMsQ0FBQyxDQUFFLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7QUFDbkMsQUFBQSxFQUFFLE1BQU0sQ0FBQyxTO0NBQVMsQ0FBQTtBQUNsQixBQUFBO0FBQ0EsQUFBQSxDLEtBQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQSxDQUFBO0FBQzNCLEFBQUEsRUFBRSxNQUFNLENBQUEsQUFBQyxJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxtQkFBbUIsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDekQsQUFBQSxFQUFFLE07Q0FBTSxDO0FBQUEsQ0FBQTtBQUNSLEFBQUE7QUFDQSxBQUFBLEFBQUEsTUFBTSxDQUFpQixNQUFoQixNQUFNLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBRSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUN6QyxBQUFBO0FBQ0EsQUFBQSw4RUFBNkU7QUFDN0UsQUFBQTtBQUNBLEFBQUEsQUFBQSxNQUFNLENBQVMsTUFBUixRQUFRLENBQUMsQ0FBRSxDQUFDLENBQUMsS0FBSyxDLEMsQ0FBQyxBQUFDLE0sWSxDQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFBLENBQUE7QUFDbEQsQUFBQTtBQUNBLEFBQUEsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDbEIsQUFBQSxDQUFDLEdBQUcsQ0FBQSxDQUFJLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQSxDQUFBLENBQUE7QUFDekIsQUFBQSxFQUFFLE1BQU0sQ0FBQyxRQUFRLENBQUMsS0FBSyxDO0NBQUMsQ0FBQTtBQUN4QixBQUFBLENBQUMsTTtBQUFNLENBQUE7QUFDUCxBQUFBO0FBQ0EsQUFBQSw4RUFBNkU7QUFDN0UsQUFBQTtBQUNBLEFBQUEsQUFBQSxNQUFNLENBQUssTUFBSixHQUFHLEVBQUUsQ0FBRSxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUEsQUFBQyxPQUFPLENBQUMsQ0FBQyxNQUFNLENBQUE7QUFDeEUsQUFBQSxBQUFBLE1BQU0sQ0FBSyxNQUFKLEdBQUcsRUFBRSxDQUFFLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQSxBQUFDLE1BQU0sQ0FBQyxDQUFDLE1BQU0sQ0FBQTtBQUN2RSxBQUFBLEFBQUEsTUFBTSxDQUFLLE1BQUosSUFBSSxDQUFDLENBQUUsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFBLEFBQUMsTUFBTSxDQUFDLENBQUMsTUFBTSxDQUFBO0FBQ3ZFLEFBQUEsQUFBQSxNQUFNLENBQUssTUFBSixHQUFHLEVBQUUsQ0FBRSxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUEsQUFBQyxPQUFPLENBQUMsQ0FBQyxNQUFNLENBQUE7QUFDeEUsQUFBQTtBQUNBLEFBQUEsQUFBQSxNQUFNLENBQWEsTUFBWixXQUFXLEVBQUUsQ0FBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQSxDQUFBLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFBLENBQUE7QUFDN0QsQUFBQSxBQUFBLE1BQU0sQ0FBYSxNQUFaLFdBQVcsRUFBRSxDQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUM7QUFDdEUsQUFBQSxBQUFBLE1BQU0sQ0FBYSxNQUFaLFlBQVksQ0FBQyxDQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUM7QUFDdkUsQUFBQSxBQUFBLE1BQU0sQ0FBYSxNQUFaLFdBQVcsRUFBRSxDQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFBLENBQUEsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUEsQ0FBQTtBQUM3RCxBQUFBLEFBQUEsTUFBTSxDQUFhLE1BQVosVUFBVSxHQUFHLENBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUEsQ0FBQSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQSxDQUFBO0FBQy9ELEFBQUEsQUFBQSxNQUFNLENBQWEsTUFBWixNQUFNLE9BQU8sQ0FBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQSxDQUFBLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFBLENBQUE7QUFDM0QsQUFBQSxBQUFBLE1BQU0sQ0FBYSxNQUFaLFFBQVEsS0FBSyxDQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUNqRCIsIm5hbWVzIjpbXSwic291cmNlc0NvbnRlbnQiOlsiIyBsb2dnZXIuY2l2ZXRcblxuaW1wb3J0IHtleGlzdHNTeW5jfSBmcm9tIFwiQHN0ZC9mc1wiXG5pbXBvcnQge3NwcmludGZ9IGZyb20gXCJAc3RkL2ZtdC9wcmludGZcIlxuaW1wb3J0IHtcblx0Q29uc29sZUhhbmRsZXIsIEZpbGVIYW5kbGVyLCBzZXR1cCwgZ2V0TG9nZ2VyLFxuXHRMb2dSZWNvcmQsXG5cdH0gZnJvbSBcIkBzdGQvbG9nXCJcblxuaW1wb3J0IHtcblx0dW5kZWYsIGRlZmluZWQsIG5vdGRlZmluZWQsXG5cdGhhc2gsIGlzU3RyaW5nLFxuXHR9IGZyb20gJy4vZGF0YXR5cGVzLnRzJ1xuaW1wb3J0IHtcblx0YXNzZXJ0LCBjcm9haywgcGFzcywgc2luY2VMb2FkU3RyLFxuXHR9IGZyb20gJy4vbGx1dGlscy50cydcbmltcG9ydCB7XG5cdG1rcGF0aCwgcmVscGF0aCwgaXNEaXIsIGlzRmlsZSwgbWtEaXIsXG5cdH0gZnJvbSAnLi9mcy50cydcblxuLyoqXG4gKiBAbW9kdWxlIGxvZ2dlciAtIGxvZ2dpbmcgdXRpbGl0aWVzXG4gKi9cblxuRGVubyA6PSBnbG9iYWxUaGlzLkRlbm9cbmV4cG9ydCBsb2dGaWxlTmFtZSA6IHN0cmluZyA6PSBcIi4vbG9ncy9sb2dzLnR4dFwiXG5leHBvcnQgc2VwZGFzaCA6IHN0cmluZyA6PSAnLScucmVwZWF0KDMyKVxuZXhwb3J0IHNlcGVxIDogc3RyaW5nICAgOj0gJz0nLnJlcGVhdCgzMilcblxuIyAtLS0gVGhlc2UgYXJlIG5vdCBleHBvcnRlZFxuaXNTZXAgOj0gKHN0ciA6IHN0cmluZyk6IGJvb2xlYW4gPT5cblx0cmV0dXJuIChzdHIgPT0gc2VwZGFzaCkgfHwgKHN0ciA9PSBzZXBlcSlcblxuZ2V0TWFpbk1vZHVsZSA6PSAoKTogc3RyaW5nID0+XG5cdHBhdGg6IHN0cmluZyA6PSBuZXcgVVJMKERlbm8ubWFpbk1vZHVsZSkucGF0aG5hbWVcblx0cmV0dXJuIHJlbHBhdGgocGF0aC5zbGljZSgxKSlcblxuIyAtLS0gVGhlcmUgYWx3YXlzIG5lZWRzIHRvIGJlIGEgJ2xvZ3MnIGZvbGRlciBpbiB0aGUgY3VycmVudCBkaXJlY3RvcnlcbiMgbWtEaXIgJy4vbG9ncydcblxubGV0IGluZGVudCA6IG51bWJlciA9IDBcbnByZWZpeCA6PSAoKSA9PiAnICAgJy5yZXBlYXQoaW5kZW50KVxuXG5oRmlsZUxhYmVsOiBoYXNoIDo9IHtcblx0REVCVUc6ICdEICdcblx0SU5GTzogICdJICdcblx0V0FSTjogICdXICdcblx0RVJST1I6ICdFUlJPUjogJ1xuXHR9XG5cbmhDb25zb2xlTGFiZWw6IGhhc2ggOj0ge1xuXHRERUJVRzogJydcblx0SU5GTzogICcnXG5cdFdBUk46ICAnJ1xuXHRFUlJPUjogJydcblx0fVxuXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgaExvZ2dlckNvbmZpZzogaGFzaCA6PSB7XG5cdGhhbmRsZXJzOlxuXG5cdFx0cHJvZmlsZTogbmV3IENvbnNvbGVIYW5kbGVyKCdERUJVRycsIHtcblx0XHRcdGZvcm1hdHRlcjogKChyZWM6IExvZ1JlY29yZCkgPT5cblx0XHRcdFx0e2RhdGV0aW1lLCBtc2csIGxldmVsTmFtZX0gOj0gcmVjXG5cdFx0XHRcdHRzIDo9IHNpbmNlTG9hZFN0cigpXG5cdFx0XHRcdGxhYmVsIDo9IGhDb25zb2xlTGFiZWxbbGV2ZWxOYW1lXVxuXHRcdFx0XHRyZXR1cm4gXCJbI3t0c31dICN7bGFiZWx9I3twcmVmaXgoKX0je21zZ31cIlxuXHRcdFx0XHQpXG5cdFx0XHR9KVxuXG5cdFx0cGZpbGU6IG5ldyBGaWxlSGFuZGxlcignREVCVUcnLCB7XG5cdFx0XHRmaWxlbmFtZTogbWtwYXRoKGxvZ0ZpbGVOYW1lKVxuXHRcdFx0bW9kZTogJ2EnXG5cdFx0XHRmb3JtYXR0ZXI6IChyZWMpID0+XG5cdFx0XHRcdHtkYXRldGltZSwgbXNnLCBsZXZlbE5hbWV9IDo9IHJlY1xuXHRcdFx0XHR0cyA6PSBzaW5jZUxvYWRTdHIoKVxuXHRcdFx0XHRsYWJlbCA6PSBoRmlsZUxhYmVsW2xldmVsTmFtZV1cblx0XHRcdFx0cmV0dXJuIFwiWyN7dHN9XSAje2xhYmVsfSN7cHJlZml4KCl9I3ttc2d9XCJcblx0XHRcdH0pXG5cblx0XHRjb25zb2xlOiBuZXcgQ29uc29sZUhhbmRsZXIoJ0RFQlVHJywge1xuXHRcdFx0Zm9ybWF0dGVyOiAoKHJlYykgPT5cblx0XHRcdFx0e2xldmVsTmFtZSwgbXNnfSA6PSByZWNcblx0XHRcdFx0YXNzZXJ0IGlzU3RyaW5nKG1zZyksIFwiTm90IGEgc3RyaW5nOiAje21zZ31cIlxuXHRcdFx0XHRpZiBtc2cuc3RhcnRzV2l0aCgnPT09PT0gICcpXG5cdFx0XHRcdFx0cmV0dXJuICcnXG5cdFx0XHRcdGxhYmVsIDo9IGhDb25zb2xlTGFiZWxbbGV2ZWxOYW1lXVxuXHRcdFx0XHRhc3NlcnQgZGVmaW5lZChsYWJlbCksIFwiTm8gbGFiZWwgZm9yICN7bGV2ZWxOYW1lfVwiXG5cdFx0XHRcdHJldHVybiBcIiN7bGFiZWx9I3twcmVmaXgoKX0je21zZ31cIlxuXHRcdFx0XHQpXG5cdFx0XHR9KVxuXG5cdFx0ZmlsZTogbmV3IEZpbGVIYW5kbGVyKCdERUJVRycsIHtcblx0XHRcdGZpbGVuYW1lOiBsb2dGaWxlTmFtZVxuXHRcdFx0bW9kZTogJ2EnXG5cdFx0XHRmb3JtYXR0ZXI6IChyZWMpID0+XG5cdFx0XHRcdHtsZXZlbE5hbWUsIG1zZ30gOj0gcmVjXG5cdFx0XHRcdGlmIGlzU2VwKG1zZylcblx0XHRcdFx0XHRyZXR1cm4gbXNnXG5cdFx0XHRcdGVsc2UgaWYgbXNnLnN0YXJ0c1dpdGgoJz09PT09ICAnKVxuXHRcdFx0XHRcdHJldHVybiBtc2dcblx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdGxhYmVsIDo9IGhGaWxlTGFiZWxbbGV2ZWxOYW1lXVxuXHRcdFx0XHRcdGFzc2VydCBkZWZpbmVkKGxhYmVsKSwgXCJObyBsYWJlbCBmb3IgI3tsZXZlbE5hbWV9XCJcblx0XHRcdFx0XHRyZXR1cm4gXCIje2xhYmVsfSN7cHJlZml4KCl9I3ttc2d9XCJcblx0XHRcdFx0fSlcblxuXHQjIC0tLSBhc3NpZ24gaGFuZGxlcnMgdG8gbG9nZ2Vyc1xuXHQjICAgICBtdXN0IGluY2x1ZGU6XG5cdCMgICAgICAgICdwcm9maWxlJywgJ2RlYnVnJywgJ2luZm8nLCAnd2FybicsICdlcnJvcicsICdmaWxlJyBhbmQgJ3NpbGVudCdcblx0bG9nZ2Vyczoge1xuXHRcdHByb2ZpbGU6IHtcblx0XHRcdGxldmVsOiBcIkRFQlVHXCJcblx0XHRcdG51bTogMVxuXHRcdFx0aGFuZGxlcnM6IFtcInByb2ZpbGVcIiwgXCJwZmlsZVwiXVxuXHRcdFx0fVxuXHRcdGRlYnVnOiB7XG5cdFx0XHRsZXZlbDogXCJERUJVR1wiXG5cdFx0XHRudW06IDJcblx0XHRcdGhhbmRsZXJzOiBbXCJjb25zb2xlXCIsIFwiZmlsZVwiXVxuXHRcdFx0fVxuXHRcdGluZm86IHtcblx0XHRcdGxldmVsOiBcIklORk9cIlxuXHRcdFx0bnVtOiAzXG5cdFx0XHRoYW5kbGVyczogW1wiY29uc29sZVwiLCBcImZpbGVcIl1cblx0XHRcdH1cblx0XHR3YXJuOiB7XG5cdFx0XHRsZXZlbDogXCJXQVJOXCIsXG5cdFx0XHRudW06IDRcblx0XHRcdGhhbmRsZXJzOiBbXCJjb25zb2xlXCIsIFwiZmlsZVwiXVxuXHRcdFx0fVxuXHRcdGVycm9yOiB7XG5cdFx0XHRsZXZlbDogXCJFUlJPUlwiXG5cdFx0XHRudW06IDVcblx0XHRcdGhhbmRsZXJzOiBbXCJjb25zb2xlXCIsIFwiZmlsZVwiXVxuXHRcdFx0fVxuXHRcdGZpbGU6IHtcblx0XHRcdGxldmVsOiBcIkRFQlVHXCIsXG5cdFx0XHRudW06IDZcblx0XHRcdGhhbmRsZXJzOiBbXCJmaWxlXCJdXG5cdFx0XHR9XG5cdFx0c2lsZW50OiB7XG5cdFx0XHRsZXZlbDogXCJFUlJPUlwiXG5cdFx0XHRudW06IDdcblx0XHRcdGhhbmRsZXJzOiBbXVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5hd2FpdCBzZXR1cChoTG9nZ2VyQ29uZmlnKVxuXG5leHBvcnQgSU5ERU5UIDogc3RyaW5nIDo9ICdNT0thSGVuemt5Wk5iTldtVVlpakNOb3FtSXJJZW1GaCdcbmV4cG9ydCBVTkRFTlQgOiBzdHJpbmcgOj0gJ01YcnZlU0VhQ2tDZlFqRWdQZE1JYUVERk1JV010SHF6J1xuZXhwb3J0IENMRUFSICA6IHN0cmluZyA6PSAnMkVZQ0V1MXY3eHMwaTRMM281ckFWMVpOTEZrUVlOSGgnXG5cbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4jIGxldmVsczogcHJvZmlsZSwgZGVidWcsIGluZm8sIHdhcm4sIGVycm9yLCBmaWxlLCBzaWxlbnRcblxuZXhwb3J0IGNsYXNzIExvZ2dlckV4XG5cblx0ZGVmTGV2ZWw6IHN0cmluZyAgICAgICA9IERlbm8uZW52LmdldCgnREVGQVVMVF9MT0dHRVInKSB8fCAnaW5mbydcblx0bExvZ2dlclN0YWNrOiBzdHJpbmdbXSA9IFtAZGVmTGV2ZWxdXG5cdGhDb25maWc6IGhhc2ggICAgICAgICAgPSBoTG9nZ2VyQ29uZmlnXG5cdGhMb2dnZXJzOiBoYXNoICAgICAgICAgPSBAaENvbmZpZy5sb2dnZXJzXG5cdHNpbGVudDogYm9vbGVhbiAgICAgICAgPSBmYWxzZVxuXHRtYWluTW9kdWxlOiBzdHJpbmcgICAgID0gZ2V0TWFpbk1vZHVsZSgpXG5cblx0Y29uc3RydWN0b3IoKVxuXHRcdEBjaGVjayBAZGVmTGV2ZWxcblxuXHRjdXJMZXZlbCgpOiBzdHJpbmdcblx0XHRyZXN1bHQgOj0gQGxMb2dnZXJTdGFjay5hdCgtMSlcblx0XHRpZiAocmVzdWx0ID09IHVuZGVmKVxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiZW1wdHkgc3RhY2tcIilcblx0XHRlbHNlXG5cdFx0XHRyZXR1cm4gcmVzdWx0XG5cblx0bGV2ZWxDaGFuZ2VkKCk6IHZvaWRcblx0XHRyZXR1cm5cblxuXHRzZXRMZXZlbChsZXZlbDogc3RyaW5nKTogdm9pZFxuXHRcdEBjaGVjayBsZXZlbFxuXHRcdEBsTG9nZ2VyU3RhY2tbQGxMb2dnZXJTdGFjay5sZW5ndGgtMV0gPSBsZXZlbFxuXHRcdEBsZXZlbENoYW5nZWQoKVxuXHRcdHJldHVyblxuXG5cdHB1c2hMZXZlbChsZXZlbDogc3RyaW5nKTogdm9pZFxuXHRcdEBjaGVjayBsZXZlbFxuXHRcdEBsTG9nZ2VyU3RhY2sucHVzaCBsZXZlbFxuXHRcdEBsZXZlbENoYW5nZWQoKVxuXHRcdHJldHVyblxuXG5cdHBvcExldmVsKCk6IHN0cmluZ1xuXHRcdGFzc2VydCAoQGxMb2dnZXJTdGFjay5sZW5ndGggPiAwKSwgXCJFbXB0eSBsb2dnZXIgc3RhY2tcIlxuXHRcdGxldmVsIDo9IEBsTG9nZ2VyU3RhY2sucG9wKClcblx0XHRpZiAobGV2ZWwgPT0gdW5kZWYpXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJlbXB0eSBzdGFja1wiKVxuXHRcdEBsZXZlbENoYW5nZWQoKVxuXHRcdHJldHVybiBsZXZlbFxuXG5cdGlzQWN0aXZlKGxldmVsOiBzdHJpbmcpOiBib29sZWFuXG5cdFx0QGNoZWNrIGxldmVsXG5cdFx0Y3VyTnVtIDo9IEBoTG9nZ2Vyc1tAY3VyTGV2ZWwoKV0ubnVtXG5cdFx0bHZsTnVtIDo9IEBoTG9nZ2Vyc1tsZXZlbF0ubnVtXG5cdFx0cmV0dXJuIChsdmxOdW0gPj0gY3VyTnVtKVxuXG5cdG91dHB1dChsZXZlbDogc3RyaW5nLCBsSXRlbXM6IGFueVtdKTogdm9pZFxuXHRcdG1haW4gOj0gZ2V0TWFpbk1vZHVsZSgpXG5cdFx0aWYgKG1haW4gIT0gQG1haW5Nb2R1bGUpXG5cdFx0XHRsb2dnZXIgOj0gZ2V0TG9nZ2VyKCdkZWJ1ZycpXG5cdFx0XHRsb2dnZXIuZGVidWcgXCI9PT09PSAgI3ttYWlufSAgPT09PT1cIlxuXHRcdFx0QG1haW5Nb2R1bGUgPSBtYWluXG5cdFx0aWYgQGlzQWN0aXZlKGxldmVsKVxuXHRcdFx0Zm9yIGl0ZW0gb2YgbEl0ZW1zXG5cdFx0XHRcdHN3aXRjaCBpdGVtXG5cdFx0XHRcdFx0d2hlbiBJTkRFTlRcblx0XHRcdFx0XHRcdGluZGVudCArPSAxXG5cdFx0XHRcdFx0d2hlbiBVTkRFTlRcblx0XHRcdFx0XHRcdGluZGVudCA9IChpbmRlbnQ9PTApID8gMCA6IGluZGVudC0xXG5cdFx0XHRcdFx0d2hlbiBDTEVBUlxuXHRcdFx0XHRcdFx0QGNsZWFyTG9nKClcblx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHRzdHIgOj0gaXNTdHJpbmcoaXRlbSkgPyBpdGVtIDogSlNPTi5zdHJpbmdpZnkoaXRlbSlcblx0XHRcdFx0XHRcdGxvZ2dlciA6PSBnZXRMb2dnZXIoQGN1ckxldmVsKCkpXG5cdFx0XHRcdFx0XHRzd2l0Y2ggbGV2ZWxcbiNcdFx0XHRcdFx0XHRcdHdoZW4gJ3Byb2ZpbGUnXG4jXHRcdFx0XHRcdFx0XHRcdGxvZ2dlci5wcm9maWxlIHN0clxuXHRcdFx0XHRcdFx0XHR3aGVuICdkZWJ1Zydcblx0XHRcdFx0XHRcdFx0XHRsb2dnZXIuZGVidWcgc3RyXG5cdFx0XHRcdFx0XHRcdHdoZW4gJ2luZm8nXG5cdFx0XHRcdFx0XHRcdFx0bG9nZ2VyLmluZm8gc3RyXG5cdFx0XHRcdFx0XHRcdHdoZW4gJ3dhcm4nXG5cdFx0XHRcdFx0XHRcdFx0bG9nZ2VyLndhcm4gc3RyXG5cdFx0XHRcdFx0XHRcdHdoZW4gJ2Vycm9yJ1xuXHRcdFx0XHRcdFx0XHRcdGxvZ2dlci5lcnJvciBzdHJcbiNcdFx0XHRcdFx0XHRcdHdoZW4gJ2ZpbGUnXG4jXHRcdFx0XHRcdFx0XHRcdGxvZ2dlci5maWxlIHN0clxuXHRcdFx0XHRcdFx0XHR3aGVuICdzaWxlbnQnXG5cdFx0XHRcdFx0XHRcdFx0cGFzcygpXG5cdFx0XHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRcdFx0XHRsb2dnZXIuZGVidWcgc3RyXG5cdFx0cmV0dXJuXG5cblx0Zmx1c2goKTogdm9pZFxuXHRcdEBoQ29uZmlnLmhhbmRsZXJzLmZpbGUuZmx1c2goKVxuXHRcdEBoQ29uZmlnLmhhbmRsZXJzLnBmaWxlLmZsdXNoKClcblx0XHRyZXR1cm5cblxuXHRjbGVhckxvZygpOiB2b2lkXG5cdFx0QGZsdXNoKClcblx0XHREZW5vLndyaXRlVGV4dEZpbGVTeW5jIGxvZ0ZpbGVOYW1lLCAnJ1xuXHRcdHJldHVyblxuXG5cdGdldEZ1bGxMb2coKTogc3RyaW5nXG5cdFx0QGZsdXNoKClcblx0XHR0ZXh0IDo9IERlbm8ucmVhZFRleHRGaWxlU3luYyhsb2dGaWxlTmFtZSlcblx0XHRyZXR1cm4gdGV4dCA/IHRleHQudHJpbSgpIDogJydcblxuXHRnZXRMb2coKTogc3RyaW5nXG5cdFx0dGV4dCA6PSBAZ2V0RnVsbExvZygpXG5cdFx0bExpbmVzIDo9IHRleHQgPyB0ZXh0LnNwbGl0KCdcXG4nKSA6IFtdXG5cdFx0bE5ld0xpbmVzIDo9IGxMaW5lcy5maWx0ZXIoKHgpID0+IG5vdCB4Lm1hdGNoKC9ePT09PT1cXHNcXHMvKSlcblx0XHRyZXN1bHRTdHIgOj0gbE5ld0xpbmVzLmpvaW4oJ1xcbicpXG5cdFx0cmV0dXJuIHJlc3VsdFN0clxuXG5cdGNoZWNrKGxldmVsOiBzdHJpbmcpOiB2b2lkXG5cdFx0YXNzZXJ0IEBoTG9nZ2Vyc1tsZXZlbF0sIFwiQmFkIGxvZ2dlciBsZXZlbDogJyN7bGV2ZWx9J1wiXG5cdFx0cmV0dXJuXG5cbmV4cG9ydCBsb2dnZXI6IExvZ2dlckV4IDo9IG5ldyBMb2dnZXJFeCgpXG5cbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBjbGVhckxvZyA6PSAobGV2ZWw6IHN0cmluZz89dW5kZWYpOiB2b2lkID0+XG5cblx0bG9nZ2VyLmNsZWFyTG9nKClcblx0aWYgbm90IG5vdGRlZmluZWQobGV2ZWwpXG5cdFx0bG9nZ2VyLnNldExldmVsKGxldmVsKVxuXHRyZXR1cm5cblxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IERCRyAgOj0gKC4uLmxJdGVtczogYW55W10pOiB2b2lkID0+IGxvZ2dlci5vdXRwdXQgJ2RlYnVnJywgbEl0ZW1zXG5leHBvcnQgTE9HICA6PSAoLi4ubEl0ZW1zOiBhbnlbXSk6IHZvaWQgPT4gbG9nZ2VyLm91dHB1dCAnaW5mbycsIGxJdGVtc1xuZXhwb3J0IFdBUk4gOj0gKC4uLmxJdGVtczogYW55W10pOiB2b2lkID0+IGxvZ2dlci5vdXRwdXQgJ3dhcm4nLCBsSXRlbXNcbmV4cG9ydCBFUlIgIDo9ICguLi5sSXRlbXM6IGFueVtdKTogdm9pZCA9PiBsb2dnZXIub3V0cHV0ICdlcnJvcicsIGxJdGVtc1xuXG5leHBvcnQgY3VyTG9nTGV2ZWwgIDo9ICgpOiBzdHJpbmcgPT4gcmV0dXJuIGxvZ2dlci5jdXJMZXZlbCgpXG5leHBvcnQgc2V0TG9nTGV2ZWwgIDo9IChsZXZlbDogc3RyaW5nKTogdm9pZCA9PiBsb2dnZXIuc2V0TGV2ZWwobGV2ZWwpXG5leHBvcnQgcHVzaExvZ0xldmVsIDo9IChsZXZlbDogc3RyaW5nKTogdm9pZCA9PiBsb2dnZXIucHVzaExldmVsKGxldmVsKVxuZXhwb3J0IHBvcExvZ0xldmVsICA6PSAoKTogc3RyaW5nID0+IHJldHVybiBsb2dnZXIucG9wTGV2ZWwoKVxuZXhwb3J0IGdldEZ1bGxMb2cgICA6PSAoKTogc3RyaW5nID0+IHJldHVybiBsb2dnZXIuZ2V0RnVsbExvZygpXG5leHBvcnQgZ2V0TG9nICAgICAgIDo9ICgpOiBzdHJpbmcgPT4gcmV0dXJuIGxvZ2dlci5nZXRMb2coKVxuZXhwb3J0IGZsdXNoTG9nICAgICA6PSAoKTogdm9pZCA9PiBsb2dnZXIuZmx1c2goKVxuIl19