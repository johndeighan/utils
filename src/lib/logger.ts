"use strict";
// logger.civet

import {existsSync} from "https://deno.land/std/fs/mod.ts";
import {sprintf} from "https://deno.land/std/fmt/printf.ts";
import {
	ConsoleHandler, FileHandler, setup, getLogger,
	LogRecord,
	} from "https://deno.land/std/log/mod.ts";

import {
	assert, croak, pass,
	} from './llutils.ts'
import {
	undef, defined, hash, isString,
	} from './datatypes.ts'
import {
	mkpath, relpath, isDir, isFile, mkDir,
	} from './fs.ts'

const Deno = globalThis.Deno
export const logFileName : string = "./logs/logs.txt"
export const sepdash : string = '-'.repeat(32)
export const sepeq : string   = '='.repeat(32)

// --- These are not exported
const isSep = (str : string): boolean => {
	return (str === sepdash) || (str === sepeq)
}

const getMainModule = (): string => {
	const path: string = new URL(Deno.mainModule).pathname
	return relpath(path.slice(1))
}

// --- There always needs to be a 'logs' folder in the current directory
mkDir('./logs')

let indent : number = 0
const prefix = () => '   '.repeat(indent)

// --- Used when current logger is 'profile'
let prevMS: number = 0
let prevFileMS: number = 0
let headerOutput: boolean = false
let fileHeaderOutput: boolean = false

const hFileLabel: hash = {
	DEBUG: 'D ',
	INFO:  'I ',
	WARN:  'W ',
	ERROR: 'ERROR: '
	}

const hConsoleLabel: hash = {
	DEBUG: '',
	INFO:  '',
	WARN:  '',
	ERROR: ''
	}

// ---------------------------------------------------------------------------

export const hLoggerConfig: hash = {
	handlers: {

		profile: new ConsoleHandler('DEBUG', {
			formatter: ((rec: LogRecord) => {
				const {datetime, msg, levelName} = rec
				const ms = datetime.getMilliseconds()
				const msStr = sprintf("%5d", ms - prevMS)
				prevMS = ms
				const label = hConsoleLabel[levelName]
				if (!headerOutput) {
					headerOutput = true
					return `ms\n-----\n${msStr} ${label}${prefix()}${msg}`
				}
				else {
					return `${msStr} ${label}${prefix()}${msg}`
				}
			}
				)
			}),

		pfile: new FileHandler('DEBUG', {
			filename: mkpath(logFileName),
			mode: 'a',
			formatter: (rec) => {
				const {datetime, msg, levelName} = rec
				const ms = datetime.getMilliseconds()
				const msStr = sprintf("%5d", ms - prevFileMS)
				prevFileMS = ms
				const label = hFileLabel[levelName]
				if (!fileHeaderOutput) {
					fileHeaderOutput = true
					return `ms\n-----\n${msStr} ${label}${prefix()}${msg}`
				}
				else {
					return `${msStr} ${label}${prefix()}${msg}`
				}
			}
			}),

		console: new ConsoleHandler('DEBUG', {
			formatter: ((rec) => {
				const {levelName, msg} = rec
				assert(isString(msg), `Not a string: ${msg}`)
				if (msg.startsWith('=====  ')) {
					return ''
				}
				const label = hConsoleLabel[levelName]
				assert(defined(label), `No label for ${levelName}`)
				return `${label}${prefix()}${msg}`
			}
				)
			}),

		file: new FileHandler('DEBUG', {
			filename: logFileName,
			mode: 'a',
			formatter: (rec) => {
				const {levelName, msg} = rec
				if (isSep(msg)) {
					return msg
				}
				else if (msg.startsWith('=====  ')) {
					return msg
				}
				else {
					const label = hFileLabel[levelName]
					assert(defined(label), `No label for ${levelName}`)
					return `${label}${prefix()}${msg}`
				}
			}
				}),
	},

	// --- assign handlers to loggers
	//     must include:
	//        'profile', 'debug', 'info', 'warn', 'error', 'file' and 'silent'
	loggers: {
		profile: {
			level: "DEBUG",
			num: 1,
			handlers: ["profile", "pfile"]
			},
		debug: {
			level: "DEBUG",
			num: 2,
			handlers: ["console", "file"]
			},
		info: {
			level: "INFO",
			num: 3,
			handlers: ["console", "file"]
			},
		warn: {
			level: "WARN",
			num: 4,
			handlers: ["console", "file"]
			},
		error: {
			level: "ERROR",
			num: 5,
			handlers: ["console", "file"]
			},
		file: {
			level: "DEBUG",
			num: 6,
			handlers: ["file"]
			},
		silent: {
			level: "ERROR",
			num: 7,
			handlers: []
			}
		}
	}

await setup(hLoggerConfig)

export const INDENT : string = 'MOKaHenzkyZNbNWmUYijCNoqmIrIemFh'
export const UNDENT : string = 'MXrveSEaCkCfQjEgPdMIaEDFMIWMtHqz'
export const CLEAR  : string = '2EYCEu1v7xs0i4L3o5rAV1ZNLFkQYNHh'

// ---------------------------------------------------------------------------
// levels: profile, debug, info, warn, error, file, silent

class LoggerEx {

	defLevel: string       = Deno.env.get('DEFAULT_LOGGER') || 'info'
	lLoggerStack: string[] = [this.defLevel]
	hConfig: hash          = hLoggerConfig
	hLoggers: hash         = this.hConfig.loggers
	silent: boolean        = false
	mainModule: string     = getMainModule()

	constructor() {
		this.check(this.defLevel)
	}

	curLevel(): string {
		const result = this.lLoggerStack.at(-1)
		if (result === undef) {
			throw new Error("empty stack")
		}
		else {
			return result
		}
	}

	levelChanged(): void {
		switch(this.curLevel()) {
			case 'profile': {
				// --- NOTE: These are package global variables
				prevMS = prevFileMS = Date.now()
				headerOutput = false
				fileHeaderOutput = false;break;
			}
		}
		return
	}

	setLevel(level: string): void {
		this.check(level)
		this.lLoggerStack[this.lLoggerStack.length-1] = level
		this.levelChanged()
		return
	}

	pushLevel(level: string): void {
		this.check(level)
		this.lLoggerStack.push(level)
		this.levelChanged()
		return
	}

	popLevel(): string {
		assert((this.lLoggerStack.length > 0), "Empty logger stack")
		const level = this.lLoggerStack.pop()
		if (level === undef) {
			throw new Error("empty stack")
		}
		this.levelChanged()
		return level
	}

	isActive(level: string): boolean {
		this.check(level)
		const curNum = this.hLoggers[this.curLevel()].num
		const lvlNum = this.hLoggers[level].num
		return (lvlNum >= curNum)
	}

	output(level: string, lItems: any[]): void {
		const main = getMainModule()
		if (main !== this.mainModule) {
			const logger = getLogger('debug')
			logger.debug(`=====  ${main}  =====`)
			this.mainModule = main
		}
		if (this.isActive(level)) {
			for (const item of lItems) {
				switch(item) {
					case INDENT: {
						indent += 1;break;
					}
					case UNDENT: {
						indent = (indent===0) ? 0 : indent-1;break;
					}
					case CLEAR: {
						this.clearLog();break;
					}
					default: {
						const str = isString(item) ? item : JSON.stringify(item)
						const logger = getLogger(this.curLevel())
						switch(level) {
//							when 'profile'
//								logger.profile str
							case 'debug': {
								logger.debug(str);break;
							}
							case 'info': {
								logger.info(str);break;
							}
							case 'warn': {
								logger.warn(str);break;
							}
							case 'error': {
								logger.error(str);break;
							}
//							when 'file'
//								logger.file str
							case 'silent': {
								pass();break;
							}
							default: {
								logger.debug(str)
							}
						}
					}
				}
			}
		}
		return
	}

	flush(): void {
		this.hConfig.handlers.file.flush()
		this.hConfig.handlers.pfile.flush()
		return
	}

	clearLog(): void {
		this.flush()
		Deno.writeTextFileSync(logFileName, '')
		prevMS = prevFileMS = Date.now()
		return
	}

	getFullLog(): string {
		this.flush()
		const text = Deno.readTextFileSync(logFileName)
		return text ? text.trim() : ''
	}

	getLog(): string {
		this.flush()
		const text = Deno.readTextFileSync(logFileName)
		const lLines = text ? text.trim().split('\n') : []
		const lNewLines = lLines.filter((x) => !x.match(/^=====\s\s/))
		const resultStr = lNewLines.join('\n')
		return resultStr
	}

	check(level: string): void {
		assert(this.hLoggers[level], `Bad logger level: '${level}'`)
		return
	}
}

export const logger: LoggerEx = new LoggerEx()

// ---------------------------------------------------------------------------

export const DBG  = (...lItems: any[]): void => logger.output('debug', lItems)
export const LOG  = (...lItems: any[]): void => logger.output('info', lItems)
export const WARN = (...lItems: any[]): void => logger.output('warn', lItems)
export const ERR  = (...lItems: any[]): void => logger.output('error', lItems)

export const curLogLevel  = (): string => { return logger.curLevel() }
export const setLogLevel  = (level: string): void => logger.setLevel(level)
export const pushLogLevel = (level: string): void => logger.pushLevel(level)
export const popLogLevel  = (): string => { return logger.popLevel() }
export const clearLog     = (): void => { return logger.clearLog() }
export const getFullLog   = (): string => { return logger.getFullLog() }
export const getLog       = (): string => { return logger.getLog() }
export const flushLog     = (): void => logger.flush()

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3JjL2xpYi9sb2dnZXIuY2l2ZXQudHN4Iiwic291cmNlcyI6WyJzcmMvbGliL2xvZ2dlci5jaXZldCJdLCJtYXBwaW5ncyI6IjtBQUFBLGVBQWM7QUFDZCxBQUFBO0FBQ0EsQUFBQSxNQUFNLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxJQUFJLENBQUMsaUNBQWlDLENBQUM7QUFDM0QsQUFBQSxBQUFBLE1BQU0sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxxQ0FBcUMsQ0FBQztBQUM1RCxBQUFBLEFBQUEsTUFBTSxDQUFDLENBQUM7QUFDUixDQUFDLGNBQWMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLFNBQVMsQ0FBQztBQUMvQyxDQUFDLFNBQVMsQ0FBQztBQUNYLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxrQ0FBa0MsQ0FBQztBQUMzQyxBQUFBO0FBQ0EsQUFBQSxBQUFBLE1BQU0sQ0FBQyxDQUFDO0FBQ1IsQ0FBQyxNQUFNLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUM7QUFDckIsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGNBQWM7QUFDdEIsQUFBQSxBQUFBLE1BQU0sQ0FBQyxDQUFDO0FBQ1IsQ0FBQyxLQUFLLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxRQUFRLENBQUM7QUFDaEMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGdCQUFnQjtBQUN4QixBQUFBLEFBQUEsTUFBTSxDQUFDLENBQUM7QUFDUixDQUFDLE1BQU0sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEtBQUssQ0FBQztBQUN2QyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUztBQUNqQixBQUFBO0FBQ0EsQUFBQSxBQUFJLE1BQUosSUFBSSxDQUFDLENBQUUsQ0FBQyxVQUFVLENBQUMsSUFBSTtBQUN2QixBQUFBLEFBQUEsTUFBTSxD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T0FBTyxDQUFDLENBQUMsTUFBTSxDQUFBO0FBQ3hFLEFBQUE7QUFDQSxBQUFBLEFBQUEsTUFBTSxDQUFhLE1BQVosV0FBVyxFQUFFLENBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUEsQ0FBQSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQSxDQUFBO0FBQzdELEFBQUEsQUFBQSxNQUFNLENBQWEsTUFBWixXQUFXLEVBQUUsQ0FBRSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDO0FBQ3RFLEFBQUEsQUFBQSxNQUFNLENBQWEsTUFBWixZQUFZLENBQUMsQ0FBRSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDO0FBQ3ZFLEFBQUEsQUFBQSxNQUFNLENBQWEsTUFBWixXQUFXLEVBQUUsQ0FBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQSxDQUFBLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFBLENBQUE7QUFDN0QsQUFBQSxBQUFBLE1BQU0sQ0FBYSxNQUFaLFFBQVEsS0FBSyxDQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFBLENBQUEsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUEsQ0FBQTtBQUMzRCxBQUFBLEFBQUEsTUFBTSxDQUFhLE1BQVosVUFBVSxHQUFHLENBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUEsQ0FBQSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQSxDQUFBO0FBQy9ELEFBQUEsQUFBQSxNQUFNLENBQWEsTUFBWixNQUFNLE9BQU8sQ0FBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQSxDQUFBLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFBLENBQUE7QUFDM0QsQUFBQSxBQUFBLE1BQU0sQ0FBYSxNQUFaLFFBQVEsS0FBSyxDQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUNqRCIsIm5hbWVzIjpbXSwic291cmNlc0NvbnRlbnQiOlsiIyBsb2dnZXIuY2l2ZXRcblxuaW1wb3J0IHtleGlzdHNTeW5jfSBmcm9tIFwiaHR0cHM6Ly9kZW5vLmxhbmQvc3RkL2ZzL21vZC50c1wiO1xuaW1wb3J0IHtzcHJpbnRmfSBmcm9tIFwiaHR0cHM6Ly9kZW5vLmxhbmQvc3RkL2ZtdC9wcmludGYudHNcIjtcbmltcG9ydCB7XG5cdENvbnNvbGVIYW5kbGVyLCBGaWxlSGFuZGxlciwgc2V0dXAsIGdldExvZ2dlcixcblx0TG9nUmVjb3JkLFxuXHR9IGZyb20gXCJodHRwczovL2Rlbm8ubGFuZC9zdGQvbG9nL21vZC50c1wiO1xuXG5pbXBvcnQge1xuXHRhc3NlcnQsIGNyb2FrLCBwYXNzLFxuXHR9IGZyb20gJy4vbGx1dGlscy50cydcbmltcG9ydCB7XG5cdHVuZGVmLCBkZWZpbmVkLCBoYXNoLCBpc1N0cmluZyxcblx0fSBmcm9tICcuL2RhdGF0eXBlcy50cydcbmltcG9ydCB7XG5cdG1rcGF0aCwgcmVscGF0aCwgaXNEaXIsIGlzRmlsZSwgbWtEaXIsXG5cdH0gZnJvbSAnLi9mcy50cydcblxuRGVubyA6PSBnbG9iYWxUaGlzLkRlbm9cbmV4cG9ydCBsb2dGaWxlTmFtZSA6IHN0cmluZyA6PSBcIi4vbG9ncy9sb2dzLnR4dFwiXG5leHBvcnQgc2VwZGFzaCA6IHN0cmluZyA6PSAnLScucmVwZWF0KDMyKVxuZXhwb3J0IHNlcGVxIDogc3RyaW5nICAgOj0gJz0nLnJlcGVhdCgzMilcblxuIyAtLS0gVGhlc2UgYXJlIG5vdCBleHBvcnRlZFxuaXNTZXAgOj0gKHN0ciA6IHN0cmluZyk6IGJvb2xlYW4gPT5cblx0cmV0dXJuIChzdHIgPT0gc2VwZGFzaCkgfHwgKHN0ciA9PSBzZXBlcSlcblxuZ2V0TWFpbk1vZHVsZSA6PSAoKTogc3RyaW5nID0+XG5cdHBhdGg6IHN0cmluZyA6PSBuZXcgVVJMKERlbm8ubWFpbk1vZHVsZSkucGF0aG5hbWVcblx0cmV0dXJuIHJlbHBhdGgocGF0aC5zbGljZSgxKSlcblxuIyAtLS0gVGhlcmUgYWx3YXlzIG5lZWRzIHRvIGJlIGEgJ2xvZ3MnIGZvbGRlciBpbiB0aGUgY3VycmVudCBkaXJlY3Rvcnlcbm1rRGlyICcuL2xvZ3MnXG5cbmxldCBpbmRlbnQgOiBudW1iZXIgPSAwXG5wcmVmaXggOj0gKCkgPT4gJyAgICcucmVwZWF0KGluZGVudClcblxuIyAtLS0gVXNlZCB3aGVuIGN1cnJlbnQgbG9nZ2VyIGlzICdwcm9maWxlJ1xubGV0IHByZXZNUzogbnVtYmVyID0gMFxubGV0IHByZXZGaWxlTVM6IG51bWJlciA9IDBcbmxldCBoZWFkZXJPdXRwdXQ6IGJvb2xlYW4gPSBmYWxzZVxubGV0IGZpbGVIZWFkZXJPdXRwdXQ6IGJvb2xlYW4gPSBmYWxzZVxuXG5oRmlsZUxhYmVsOiBoYXNoIDo9IHtcblx0REVCVUc6ICdEICdcblx0SU5GTzogICdJICdcblx0V0FSTjogICdXICdcblx0RVJST1I6ICdFUlJPUjogJ1xuXHR9XG5cbmhDb25zb2xlTGFiZWw6IGhhc2ggOj0ge1xuXHRERUJVRzogJydcblx0SU5GTzogICcnXG5cdFdBUk46ICAnJ1xuXHRFUlJPUjogJydcblx0fVxuXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgaExvZ2dlckNvbmZpZzogaGFzaCA6PSB7XG5cdGhhbmRsZXJzOlxuXG5cdFx0cHJvZmlsZTogbmV3IENvbnNvbGVIYW5kbGVyKCdERUJVRycsIHtcblx0XHRcdGZvcm1hdHRlcjogKChyZWM6IExvZ1JlY29yZCkgPT5cblx0XHRcdFx0e2RhdGV0aW1lLCBtc2csIGxldmVsTmFtZX0gOj0gcmVjXG5cdFx0XHRcdG1zIDo9IGRhdGV0aW1lLmdldE1pbGxpc2Vjb25kcygpXG5cdFx0XHRcdG1zU3RyIDo9IHNwcmludGYoXCIlNWRcIiwgbXMgLSBwcmV2TVMpXG5cdFx0XHRcdHByZXZNUyA9IG1zXG5cdFx0XHRcdGxhYmVsIDo9IGhDb25zb2xlTGFiZWxbbGV2ZWxOYW1lXVxuXHRcdFx0XHRpZiBub3QgaGVhZGVyT3V0cHV0XG5cdFx0XHRcdFx0aGVhZGVyT3V0cHV0ID0gdHJ1ZVxuXHRcdFx0XHRcdHJldHVybiBcIm1zXFxuLS0tLS1cXG4je21zU3RyfSAje2xhYmVsfSN7cHJlZml4KCl9I3ttc2d9XCJcblx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdHJldHVybiBcIiN7bXNTdHJ9ICN7bGFiZWx9I3twcmVmaXgoKX0je21zZ31cIlxuXHRcdFx0XHQpXG5cdFx0XHR9KVxuXG5cdFx0cGZpbGU6IG5ldyBGaWxlSGFuZGxlcignREVCVUcnLCB7XG5cdFx0XHRmaWxlbmFtZTogbWtwYXRoKGxvZ0ZpbGVOYW1lKVxuXHRcdFx0bW9kZTogJ2EnXG5cdFx0XHRmb3JtYXR0ZXI6IChyZWMpID0+XG5cdFx0XHRcdHtkYXRldGltZSwgbXNnLCBsZXZlbE5hbWV9IDo9IHJlY1xuXHRcdFx0XHRtcyA6PSBkYXRldGltZS5nZXRNaWxsaXNlY29uZHMoKVxuXHRcdFx0XHRtc1N0ciA6PSBzcHJpbnRmKFwiJTVkXCIsIG1zIC0gcHJldkZpbGVNUylcblx0XHRcdFx0cHJldkZpbGVNUyA9IG1zXG5cdFx0XHRcdGxhYmVsIDo9IGhGaWxlTGFiZWxbbGV2ZWxOYW1lXVxuXHRcdFx0XHRpZiBub3QgZmlsZUhlYWRlck91dHB1dFxuXHRcdFx0XHRcdGZpbGVIZWFkZXJPdXRwdXQgPSB0cnVlXG5cdFx0XHRcdFx0cmV0dXJuIFwibXNcXG4tLS0tLVxcbiN7bXNTdHJ9ICN7bGFiZWx9I3twcmVmaXgoKX0je21zZ31cIlxuXHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0cmV0dXJuIFwiI3ttc1N0cn0gI3tsYWJlbH0je3ByZWZpeCgpfSN7bXNnfVwiXG5cdFx0XHR9KVxuXG5cdFx0Y29uc29sZTogbmV3IENvbnNvbGVIYW5kbGVyKCdERUJVRycsIHtcblx0XHRcdGZvcm1hdHRlcjogKChyZWMpID0+XG5cdFx0XHRcdHtsZXZlbE5hbWUsIG1zZ30gOj0gcmVjXG5cdFx0XHRcdGFzc2VydCBpc1N0cmluZyhtc2cpLCBcIk5vdCBhIHN0cmluZzogI3ttc2d9XCJcblx0XHRcdFx0aWYgbXNnLnN0YXJ0c1dpdGgoJz09PT09ICAnKVxuXHRcdFx0XHRcdHJldHVybiAnJ1xuXHRcdFx0XHRsYWJlbCA6PSBoQ29uc29sZUxhYmVsW2xldmVsTmFtZV1cblx0XHRcdFx0YXNzZXJ0IGRlZmluZWQobGFiZWwpLCBcIk5vIGxhYmVsIGZvciAje2xldmVsTmFtZX1cIlxuXHRcdFx0XHRyZXR1cm4gXCIje2xhYmVsfSN7cHJlZml4KCl9I3ttc2d9XCJcblx0XHRcdFx0KVxuXHRcdFx0fSlcblxuXHRcdGZpbGU6IG5ldyBGaWxlSGFuZGxlcignREVCVUcnLCB7XG5cdFx0XHRmaWxlbmFtZTogbG9nRmlsZU5hbWVcblx0XHRcdG1vZGU6ICdhJ1xuXHRcdFx0Zm9ybWF0dGVyOiAocmVjKSA9PlxuXHRcdFx0XHR7bGV2ZWxOYW1lLCBtc2d9IDo9IHJlY1xuXHRcdFx0XHRpZiBpc1NlcChtc2cpXG5cdFx0XHRcdFx0cmV0dXJuIG1zZ1xuXHRcdFx0XHRlbHNlIGlmIG1zZy5zdGFydHNXaXRoKCc9PT09PSAgJylcblx0XHRcdFx0XHRyZXR1cm4gbXNnXG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRsYWJlbCA6PSBoRmlsZUxhYmVsW2xldmVsTmFtZV1cblx0XHRcdFx0XHRhc3NlcnQgZGVmaW5lZChsYWJlbCksIFwiTm8gbGFiZWwgZm9yICN7bGV2ZWxOYW1lfVwiXG5cdFx0XHRcdFx0cmV0dXJuIFwiI3tsYWJlbH0je3ByZWZpeCgpfSN7bXNnfVwiXG5cdFx0XHRcdH0pXG5cblx0IyAtLS0gYXNzaWduIGhhbmRsZXJzIHRvIGxvZ2dlcnNcblx0IyAgICAgbXVzdCBpbmNsdWRlOlxuXHQjICAgICAgICAncHJvZmlsZScsICdkZWJ1ZycsICdpbmZvJywgJ3dhcm4nLCAnZXJyb3InLCAnZmlsZScgYW5kICdzaWxlbnQnXG5cdGxvZ2dlcnM6IHtcblx0XHRwcm9maWxlOiB7XG5cdFx0XHRsZXZlbDogXCJERUJVR1wiXG5cdFx0XHRudW06IDFcblx0XHRcdGhhbmRsZXJzOiBbXCJwcm9maWxlXCIsIFwicGZpbGVcIl1cblx0XHRcdH1cblx0XHRkZWJ1Zzoge1xuXHRcdFx0bGV2ZWw6IFwiREVCVUdcIlxuXHRcdFx0bnVtOiAyXG5cdFx0XHRoYW5kbGVyczogW1wiY29uc29sZVwiLCBcImZpbGVcIl1cblx0XHRcdH1cblx0XHRpbmZvOiB7XG5cdFx0XHRsZXZlbDogXCJJTkZPXCJcblx0XHRcdG51bTogM1xuXHRcdFx0aGFuZGxlcnM6IFtcImNvbnNvbGVcIiwgXCJmaWxlXCJdXG5cdFx0XHR9XG5cdFx0d2Fybjoge1xuXHRcdFx0bGV2ZWw6IFwiV0FSTlwiLFxuXHRcdFx0bnVtOiA0XG5cdFx0XHRoYW5kbGVyczogW1wiY29uc29sZVwiLCBcImZpbGVcIl1cblx0XHRcdH1cblx0XHRlcnJvcjoge1xuXHRcdFx0bGV2ZWw6IFwiRVJST1JcIlxuXHRcdFx0bnVtOiA1XG5cdFx0XHRoYW5kbGVyczogW1wiY29uc29sZVwiLCBcImZpbGVcIl1cblx0XHRcdH1cblx0XHRmaWxlOiB7XG5cdFx0XHRsZXZlbDogXCJERUJVR1wiLFxuXHRcdFx0bnVtOiA2XG5cdFx0XHRoYW5kbGVyczogW1wiZmlsZVwiXVxuXHRcdFx0fVxuXHRcdHNpbGVudDoge1xuXHRcdFx0bGV2ZWw6IFwiRVJST1JcIlxuXHRcdFx0bnVtOiA3XG5cdFx0XHRoYW5kbGVyczogW11cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuYXdhaXQgc2V0dXAoaExvZ2dlckNvbmZpZylcblxuZXhwb3J0IElOREVOVCA6IHN0cmluZyA6PSAnTU9LYUhlbnpreVpOYk5XbVVZaWpDTm9xbUlySWVtRmgnXG5leHBvcnQgVU5ERU5UIDogc3RyaW5nIDo9ICdNWHJ2ZVNFYUNrQ2ZRakVnUGRNSWFFREZNSVdNdEhxeidcbmV4cG9ydCBDTEVBUiAgOiBzdHJpbmcgOj0gJzJFWUNFdTF2N3hzMGk0TDNvNXJBVjFaTkxGa1FZTkhoJ1xuXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuIyBsZXZlbHM6IHByb2ZpbGUsIGRlYnVnLCBpbmZvLCB3YXJuLCBlcnJvciwgZmlsZSwgc2lsZW50XG5cbmNsYXNzIExvZ2dlckV4XG5cblx0ZGVmTGV2ZWw6IHN0cmluZyAgICAgICA9IERlbm8uZW52LmdldCgnREVGQVVMVF9MT0dHRVInKSB8fCAnaW5mbydcblx0bExvZ2dlclN0YWNrOiBzdHJpbmdbXSA9IFtAZGVmTGV2ZWxdXG5cdGhDb25maWc6IGhhc2ggICAgICAgICAgPSBoTG9nZ2VyQ29uZmlnXG5cdGhMb2dnZXJzOiBoYXNoICAgICAgICAgPSBAaENvbmZpZy5sb2dnZXJzXG5cdHNpbGVudDogYm9vbGVhbiAgICAgICAgPSBmYWxzZVxuXHRtYWluTW9kdWxlOiBzdHJpbmcgICAgID0gZ2V0TWFpbk1vZHVsZSgpXG5cblx0Y29uc3RydWN0b3IoKVxuXHRcdEBjaGVjayBAZGVmTGV2ZWxcblxuXHRjdXJMZXZlbCgpOiBzdHJpbmdcblx0XHRyZXN1bHQgOj0gQGxMb2dnZXJTdGFjay5hdCgtMSlcblx0XHRpZiAocmVzdWx0ID09IHVuZGVmKVxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiZW1wdHkgc3RhY2tcIilcblx0XHRlbHNlXG5cdFx0XHRyZXR1cm4gcmVzdWx0XG5cblx0bGV2ZWxDaGFuZ2VkKCk6IHZvaWRcblx0XHRzd2l0Y2ggQGN1ckxldmVsKClcblx0XHRcdHdoZW4gJ3Byb2ZpbGUnXG5cdFx0XHRcdCMgLS0tIE5PVEU6IFRoZXNlIGFyZSBwYWNrYWdlIGdsb2JhbCB2YXJpYWJsZXNcblx0XHRcdFx0cHJldk1TID0gcHJldkZpbGVNUyA9IERhdGUubm93KClcblx0XHRcdFx0aGVhZGVyT3V0cHV0ID0gZmFsc2Vcblx0XHRcdFx0ZmlsZUhlYWRlck91dHB1dCA9IGZhbHNlXG5cdFx0cmV0dXJuXG5cblx0c2V0TGV2ZWwobGV2ZWw6IHN0cmluZyk6IHZvaWRcblx0XHRAY2hlY2sgbGV2ZWxcblx0XHRAbExvZ2dlclN0YWNrW0BsTG9nZ2VyU3RhY2subGVuZ3RoLTFdID0gbGV2ZWxcblx0XHRAbGV2ZWxDaGFuZ2VkKClcblx0XHRyZXR1cm5cblxuXHRwdXNoTGV2ZWwobGV2ZWw6IHN0cmluZyk6IHZvaWRcblx0XHRAY2hlY2sgbGV2ZWxcblx0XHRAbExvZ2dlclN0YWNrLnB1c2ggbGV2ZWxcblx0XHRAbGV2ZWxDaGFuZ2VkKClcblx0XHRyZXR1cm5cblxuXHRwb3BMZXZlbCgpOiBzdHJpbmdcblx0XHRhc3NlcnQgKEBsTG9nZ2VyU3RhY2subGVuZ3RoID4gMCksIFwiRW1wdHkgbG9nZ2VyIHN0YWNrXCJcblx0XHRsZXZlbCA6PSBAbExvZ2dlclN0YWNrLnBvcCgpXG5cdFx0aWYgKGxldmVsID09IHVuZGVmKVxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiZW1wdHkgc3RhY2tcIilcblx0XHRAbGV2ZWxDaGFuZ2VkKClcblx0XHRyZXR1cm4gbGV2ZWxcblxuXHRpc0FjdGl2ZShsZXZlbDogc3RyaW5nKTogYm9vbGVhblxuXHRcdEBjaGVjayBsZXZlbFxuXHRcdGN1ck51bSA6PSBAaExvZ2dlcnNbQGN1ckxldmVsKCldLm51bVxuXHRcdGx2bE51bSA6PSBAaExvZ2dlcnNbbGV2ZWxdLm51bVxuXHRcdHJldHVybiAobHZsTnVtID49IGN1ck51bSlcblxuXHRvdXRwdXQobGV2ZWw6IHN0cmluZywgbEl0ZW1zOiBhbnlbXSk6IHZvaWRcblx0XHRtYWluIDo9IGdldE1haW5Nb2R1bGUoKVxuXHRcdGlmIChtYWluICE9IEBtYWluTW9kdWxlKVxuXHRcdFx0bG9nZ2VyIDo9IGdldExvZ2dlcignZGVidWcnKVxuXHRcdFx0bG9nZ2VyLmRlYnVnIFwiPT09PT0gICN7bWFpbn0gID09PT09XCJcblx0XHRcdEBtYWluTW9kdWxlID0gbWFpblxuXHRcdGlmIEBpc0FjdGl2ZShsZXZlbClcblx0XHRcdGZvciBpdGVtIG9mIGxJdGVtc1xuXHRcdFx0XHRzd2l0Y2ggaXRlbVxuXHRcdFx0XHRcdHdoZW4gSU5ERU5UXG5cdFx0XHRcdFx0XHRpbmRlbnQgKz0gMVxuXHRcdFx0XHRcdHdoZW4gVU5ERU5UXG5cdFx0XHRcdFx0XHRpbmRlbnQgPSAoaW5kZW50PT0wKSA/IDAgOiBpbmRlbnQtMVxuXHRcdFx0XHRcdHdoZW4gQ0xFQVJcblx0XHRcdFx0XHRcdEBjbGVhckxvZygpXG5cdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0c3RyIDo9IGlzU3RyaW5nKGl0ZW0pID8gaXRlbSA6IEpTT04uc3RyaW5naWZ5KGl0ZW0pXG5cdFx0XHRcdFx0XHRsb2dnZXIgOj0gZ2V0TG9nZ2VyKEBjdXJMZXZlbCgpKVxuXHRcdFx0XHRcdFx0c3dpdGNoIGxldmVsXG4jXHRcdFx0XHRcdFx0XHR3aGVuICdwcm9maWxlJ1xuI1x0XHRcdFx0XHRcdFx0XHRsb2dnZXIucHJvZmlsZSBzdHJcblx0XHRcdFx0XHRcdFx0d2hlbiAnZGVidWcnXG5cdFx0XHRcdFx0XHRcdFx0bG9nZ2VyLmRlYnVnIHN0clxuXHRcdFx0XHRcdFx0XHR3aGVuICdpbmZvJ1xuXHRcdFx0XHRcdFx0XHRcdGxvZ2dlci5pbmZvIHN0clxuXHRcdFx0XHRcdFx0XHR3aGVuICd3YXJuJ1xuXHRcdFx0XHRcdFx0XHRcdGxvZ2dlci53YXJuIHN0clxuXHRcdFx0XHRcdFx0XHR3aGVuICdlcnJvcidcblx0XHRcdFx0XHRcdFx0XHRsb2dnZXIuZXJyb3Igc3RyXG4jXHRcdFx0XHRcdFx0XHR3aGVuICdmaWxlJ1xuI1x0XHRcdFx0XHRcdFx0XHRsb2dnZXIuZmlsZSBzdHJcblx0XHRcdFx0XHRcdFx0d2hlbiAnc2lsZW50J1xuXHRcdFx0XHRcdFx0XHRcdHBhc3MoKVxuXHRcdFx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHRcdFx0bG9nZ2VyLmRlYnVnIHN0clxuXHRcdHJldHVyblxuXG5cdGZsdXNoKCk6IHZvaWRcblx0XHRAaENvbmZpZy5oYW5kbGVycy5maWxlLmZsdXNoKClcblx0XHRAaENvbmZpZy5oYW5kbGVycy5wZmlsZS5mbHVzaCgpXG5cdFx0cmV0dXJuXG5cblx0Y2xlYXJMb2coKTogdm9pZFxuXHRcdEBmbHVzaCgpXG5cdFx0RGVuby53cml0ZVRleHRGaWxlU3luYyBsb2dGaWxlTmFtZSwgJydcblx0XHRwcmV2TVMgPSBwcmV2RmlsZU1TID0gRGF0ZS5ub3coKVxuXHRcdHJldHVyblxuXG5cdGdldEZ1bGxMb2coKTogc3RyaW5nXG5cdFx0QGZsdXNoKClcblx0XHR0ZXh0IDo9IERlbm8ucmVhZFRleHRGaWxlU3luYyhsb2dGaWxlTmFtZSlcblx0XHRyZXR1cm4gdGV4dCA/IHRleHQudHJpbSgpIDogJydcblxuXHRnZXRMb2coKTogc3RyaW5nXG5cdFx0QGZsdXNoKClcblx0XHR0ZXh0IDo9IERlbm8ucmVhZFRleHRGaWxlU3luYyhsb2dGaWxlTmFtZSlcblx0XHRsTGluZXMgOj0gdGV4dCA/IHRleHQudHJpbSgpLnNwbGl0KCdcXG4nKSA6IFtdXG5cdFx0bE5ld0xpbmVzIDo9IGxMaW5lcy5maWx0ZXIoKHgpID0+IG5vdCB4Lm1hdGNoKC9ePT09PT1cXHNcXHMvKSlcblx0XHRyZXN1bHRTdHIgOj0gbE5ld0xpbmVzLmpvaW4oJ1xcbicpXG5cdFx0cmV0dXJuIHJlc3VsdFN0clxuXG5cdGNoZWNrKGxldmVsOiBzdHJpbmcpOiB2b2lkXG5cdFx0YXNzZXJ0IEBoTG9nZ2Vyc1tsZXZlbF0sIFwiQmFkIGxvZ2dlciBsZXZlbDogJyN7bGV2ZWx9J1wiXG5cdFx0cmV0dXJuXG5cbmV4cG9ydCBsb2dnZXI6IExvZ2dlckV4IDo9IG5ldyBMb2dnZXJFeCgpXG5cbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBEQkcgIDo9ICguLi5sSXRlbXM6IGFueVtdKTogdm9pZCA9PiBsb2dnZXIub3V0cHV0ICdkZWJ1ZycsIGxJdGVtc1xuZXhwb3J0IExPRyAgOj0gKC4uLmxJdGVtczogYW55W10pOiB2b2lkID0+IGxvZ2dlci5vdXRwdXQgJ2luZm8nLCBsSXRlbXNcbmV4cG9ydCBXQVJOIDo9ICguLi5sSXRlbXM6IGFueVtdKTogdm9pZCA9PiBsb2dnZXIub3V0cHV0ICd3YXJuJywgbEl0ZW1zXG5leHBvcnQgRVJSICA6PSAoLi4ubEl0ZW1zOiBhbnlbXSk6IHZvaWQgPT4gbG9nZ2VyLm91dHB1dCAnZXJyb3InLCBsSXRlbXNcblxuZXhwb3J0IGN1ckxvZ0xldmVsICA6PSAoKTogc3RyaW5nID0+IHJldHVybiBsb2dnZXIuY3VyTGV2ZWwoKVxuZXhwb3J0IHNldExvZ0xldmVsICA6PSAobGV2ZWw6IHN0cmluZyk6IHZvaWQgPT4gbG9nZ2VyLnNldExldmVsKGxldmVsKVxuZXhwb3J0IHB1c2hMb2dMZXZlbCA6PSAobGV2ZWw6IHN0cmluZyk6IHZvaWQgPT4gbG9nZ2VyLnB1c2hMZXZlbChsZXZlbClcbmV4cG9ydCBwb3BMb2dMZXZlbCAgOj0gKCk6IHN0cmluZyA9PiByZXR1cm4gbG9nZ2VyLnBvcExldmVsKClcbmV4cG9ydCBjbGVhckxvZyAgICAgOj0gKCk6IHZvaWQgPT4gcmV0dXJuIGxvZ2dlci5jbGVhckxvZygpXG5leHBvcnQgZ2V0RnVsbExvZyAgIDo9ICgpOiBzdHJpbmcgPT4gcmV0dXJuIGxvZ2dlci5nZXRGdWxsTG9nKClcbmV4cG9ydCBnZXRMb2cgICAgICAgOj0gKCk6IHN0cmluZyA9PiByZXR1cm4gbG9nZ2VyLmdldExvZygpXG5leHBvcnQgZmx1c2hMb2cgICAgIDo9ICgpOiB2b2lkID0+IGxvZ2dlci5mbHVzaCgpXG4iXX0=