"use strict";
// logger.lib.civet

import {
	existsSync, ensureDirSync,
	} from '@std/fs'
import {LogLevels} from "@std/log/levels"
import {
	ConsoleHandler, FileHandler, setup, getLogger, LogRecord,
	} from '@std/log'
import {blue, black} from "@std/fmt/colors"

import {
	getPrefix,
	} from 'unicode'
import {
	undef, defined, notdefined, hash, isString, nonEmpty,
	croak, assert,
	} from 'datatypes'
import {
	spaces, o, sinceLoadStr, OL, ML, pass,
	} from 'llutils'
import {
	TLogLevel, isLogLevel, getLogLevel, setLogLevel,
	pushLogLevel, popLogLevel, resetLogLevel,
	isInactiveLevel,
	} from 'log-levels'
import {
	getFormatter, indentLog, undentLog,
	getConsoleLog, clearConsoleLog, logIndent,
	} from 'log-formatter'

export {
	getLogLevel, isLogLevel, setLogLevel,
	pushLogLevel, popLogLevel,
	indentLog, undentLog,
	clearConsoleLog, getConsoleLog,
	}
export type {TLogLevel}

ensureDirSync('./logs')

// ---------------------------------------------------------------------------

const mainModule: string = new URL(Deno.mainModule).pathname.slice(1)

const logFileName = (() => {
	const lMatches = mainModule.match(/[A-Za-z0-9_\-\.]+$/)
	if (lMatches === null) {
		return "logs/dummy.log"
	}
	const label = lMatches[0].replaceAll('.', '_')
	const time = new Date().toISOString().replaceAll(':','-')
	return `logs/${label} ${time}.log`
}
	)()

// ---------------------------------------------------------------------------

export const getLog = (from: string): string => {

	switch(from) {
		case 'console': {
			return getConsoleLog()
		}
		case 'file': {
			if (existsSync(logFileName)) {
				const data = Deno.readFileSync(logFileName)
				const decoder = new TextDecoder("utf-8")
				return decoder.decode(data)
			}
			else {
				return ''
			}
		}
		default: {
			croak(`getLog(): invalid from = ${from}`)
			return ''
		}
	}
}

// ---------------------------------------------------------------------------

export const clearLog = (which: string): void => {

	switch(which) {
		case 'console': {
			clearConsoleLog();break;
		}
		case 'file': {
			const encoder = new TextEncoder();
			const str = encoder.encode('')
			Deno.writeFileSync(logFileName, str);break;
		}
		case 'both': {
			clearConsoleLog()
			const encoder = new TextEncoder();
			const str = encoder.encode('')
			Deno.writeFileSync(logFileName, str);break;
		}
		default: {
			pass()
		}
	}
	return
}

// ---------------------------------------------------------------------------

const hConfig: hash = {

	handlers: {

		console: new ConsoleHandler('DEBUG', {
			formatter: getFormatter('$msg', 'console')
			}),

		file: new FileHandler('DEBUG', {
			filename: logFileName,
			mode: 'a',
			formatter: getFormatter('$ll $msg', 'file')
			}),

		console_prof: new ConsoleHandler('DEBUG', {
			formatter: getFormatter('[$ts] $msg', 'console')
			}),

		file_prof: new FileHandler('DEBUG', {
			filename: logFileName,
			mode: 'a',
			formatter: getFormatter('[$ts] $ll $msg', 'file')
			}),
	},

	// --- assign handlers to loggers
	//     order from most verbose to least verbose

	loggers: {
		profile: {
			level: "DEBUG",
			num: 1,
			handlers: ["console_prof", "file_prof"]
			},
		debug: {
			level: "DEBUG",
			num: 2,
			handlers: ["console", "file"]
			},
		info: {
			level: "INFO",
			num: 3,
			handlers: ["console", "file"]
			},
		warn: {
			level: "WARN",
			num: 4,
			handlers: ["console", "file"]
			},
		error: {
			level: "ERROR",
			num: 5,
			handlers: ["console", "file"]
			},
		file: {
			level: "DEBUG",
			num: 6,
			handlers: ["file"]
			},
		silent: {
			level: "ERROR",
			num: 7,
			handlers: []
			}
		}
	}

setup(hConfig)
const hLoggers = hConfig.loggers
const hHandlers = hConfig.handlers

export const INDENT = Symbol('indent')
export const UNDENT = Symbol('undent')

// ---------------------------------------------------------------------------

const output = (level: TLogLevel, lItems: unknown[]): void => {

	if (isInactiveLevel(level)) {
		return
	}

	let logger = getLogger(getLogLevel())
	for (const item of lItems) {
		switch(item) {
			case INDENT: {
				indentLog();break;
			}
			case UNDENT: {
				undentLog();break;
			}
			default: {
				const str = isString(item) ? item : ML(item)
				if (nonEmpty(str)) {
					switch(level) {
						case 'debug': { logger.debug(str);break;
						}
						case 'info': {  logger.info(black(str));break;
						}
						case 'warn': {  logger.warn(str);break;
						}
						case 'error': { logger.error(str);break;
						}
						default: { pass() }
					}
				}
			}
		}
	}

	return
}

// ---------------------------------------------------------------------------

export const DBG  = (...lItems: unknown[]): void => {
	output('debug', lItems)
	return
}

export const LOG  = (...lItems: unknown[]): void => {
	output('info', lItems)
	return
}

export const WARN = (...lItems: unknown[]): void => {
	output('warn', lItems)
	return
}

export const ERR  = (...lItems: unknown[]): void => {
	output('error', lItems)
	return
}

export const LOGVALUE = (label: string, value: unknown): void => {
	if (isInactiveLevel('info')) {
		return
	}
	LOG(`${label} = ${ML(value)}`)
	return
}

export const LOGLABELED = (label: string, value: unknown): void => {
	if (isInactiveLevel('info')) {
		return
	}
	LOG(blue(label) + ` = ${ML(value)}`)
	return
}

export const DBGVALUE = (label: string, value: unknown): void => {
	if (isInactiveLevel('debug')) {
		return
	}
	DBG(blue(label) + ` = ${ML(value)}`)
	return
}

export const DBGLABELED = (label: string, value: unknown): void => {
	if (isInactiveLevel('debug')) {
		return
	}
	DBG(blue(label) + `: ${ML(value)}`)
	return
}

// ---------------------------------------------------------------------------

export const removeLogFile = (): void => {

	Deno.removeSync(logFileName)
	return
}

// ---------------------------------------------------------------------------

export type TFormatter<T> = (desc: string, item: (T | undefined)) => string

export class TreeLogger<T> {

	// --- data fields
	indentLevel: number = 0
	logLevel: TLogLevel = 'debug'
	formatter: TFormatter<T>

	// --- methods
	constructor(
			formatter1 = (desc: string, item: (T | undefined)) => desc,
			logLevel: string = 'debug'
			) {
		this.formatter = formatter1;
		if (isLogLevel(logLevel)) {
			this.logLevel = logLevel
		}
	}

	start(desc: string, item: (T | undefined)=undef): void {
		const str = this.formatter(desc, item)
		const pre = getPrefix(this.indentLevel, 'plain')
		output(this.logLevel, [pre + str])
		this.indentLevel += 1
		return
	}

	log(desc: string, item: (T | undefined)=undef): void {
		const str = this.formatter(desc, item)
		const pre = getPrefix(this.indentLevel, 'plain')
		output(this.logLevel,  [pre + str])
		return
	}

	succeed(desc: string, item: (T | undefined)=undef): void {
		const str = this.formatter(desc, item)
		const pre = getPrefix(this.indentLevel, 'withArrow')
		output(this.logLevel,  [pre + str])
		this.indentLevel -= 1
		return
	}

	fail(desc: string, item: (T | undefined)=undef): void {
		const str = this.formatter(desc, item)
		const pre = getPrefix(this.indentLevel, 'withArrow')
		output(this.logLevel,  [pre + str])
		this.indentLevel -= 1
		return
	}
}

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQzpcXFVzZXJzXFxqb2huZFxcdXRpbHNcXHNyY1xcbGliXFxsb2dnZXIubGliLmNpdmV0LnRzeCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxqb2huZFxcdXRpbHNcXHNyY1xcbGliXFxsb2dnZXIubGliLmNpdmV0Il0sIm1hcHBpbmdzIjoiO0FBQUEsbUJBQWtCO0FBQ2xCLEFBQUE7QUFDQSxBQUFBLE1BQU0sQ0FBQyxDQUFDO0FBQ1IsQ0FBQyxVQUFVLENBQUMsQ0FBQyxhQUFhLENBQUM7QUFDM0IsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVM7QUFDakIsQUFBQSxBQUFBLE1BQU0sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLElBQUksQ0FBQyxpQkFBaUI7QUFDekMsQUFBQSxBQUFBLE1BQU0sQ0FBQyxDQUFDO0FBQ1IsQ0FBQyxjQUFjLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxTQUFTLENBQUM7QUFDMUQsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVU7QUFDbEIsQUFBQSxBQUFBLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxpQkFBaUI7QUFDM0MsQUFBQTtBQUNBLEFBQUEsQUFBQSxNQUFNLENBQUMsQ0FBQztBQUNSLENBQUMsU0FBUyxDQUFDO0FBQ1gsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVM7QUFDakIsQUFBQSxBQUFBLE1BQU0sQ0FBQyxDQUFDO0FBQ1IsQ0FBQyxLQUFLLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxRQUFRLENBQUM7QUFDdEQsQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLENBQUM7QUFDZixDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVztBQUNuQixBQUFBLEFBQUEsTUFBTSxDQUFDLENBQUM7QUFDUixDQUFDLE1B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QUFDcEMsQUFBQSxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQSxDQUFBLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQSxBQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQSxPO01BQUEsQ0FBQTtBQUMxQyxBQUFBLE1BQU0sSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFBLENBQUEsRUFBRSxNQUFNLENBQUMsSUFBSSxDQUFBLEFBQUMsR0FBRyxDQUFBLE87TUFBQSxDQUFBO0FBQ25DLEFBQUEsTUFBTSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUEsQ0FBQSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUEsQUFBQyxHQUFHLENBQUEsTztNQUFBLENBQUE7QUFDcEMsQUFBQSxNQUFNLE9BQUksQ0FBQSxDQUFBLENBQUEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFBLEM7S0FBQSxDO0lBQUEsQztHQUFBLEM7RUFBQSxDO0NBQUEsQ0FBQTtBQUNqQixBQUFBO0FBQ0EsQUFBQSxDQUFDLE07QUFBTSxDQUFBO0FBQ1AsQUFBQTtBQUNBLEFBQUEsOEVBQTZFO0FBQzdFLEFBQUE7QUFDQSxBQUFBLEFBQUEsTUFBTSxDQUFLLE1BQUosR0FBRyxFQUFFLENBQUUsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQSxDQUFBO0FBQzlDLEFBQUEsQ0FBQyxNQUFNLENBQUEsQUFBQyxPQUFPLENBQUMsQ0FBQyxNQUFNLENBQUE7QUFDdkIsQUFBQSxDQUFDLE07QUFBTSxDQUFBO0FBQ1AsQUFBQTtBQUNBLEFBQUEsQUFBQSxNQUFNLENBQUssTUFBSixHQUFHLEVBQUUsQ0FBRSxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFBLENBQUE7QUFDOUMsQUFBQSxDQUFDLE1BQU0sQ0FBQSxBQUFDLE1BQU0sQ0FBQyxDQUFDLE1BQU0sQ0FBQTtBQUN0QixBQUFBLENBQUMsTTtBQUFNLENBQUE7QUFDUCxBQUFBO0FBQ0EsQUFBQSxBQUFBLE1BQU0sQ0FBSyxNQUFKLElBQUksQ0FBQyxDQUFFLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUEsQ0FBQTtBQUM5QyxBQUFBLENBQUMsTUFBTSxDQUFBLEFBQUMsTUFBTSxDQUFDLENBQUMsTUFBTSxDQUFBO0FBQ3RCLEFBQUEsQ0FBQyxNO0FBQU0sQ0FBQTtBQUNQLEFBQUE7QUFDQSxBQUFBLEFBQUEsTUFBTSxDQUFLLE1BQUosR0FBRyxFQUFFLENBQUUsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQSxDQUFBO0FBQzlDLEFBQUEsQ0FBQyxNQUFNLENBQUEsQUFBQyxPQUFPLENBQUMsQ0FBQyxNQUFNLENBQUE7QUFDdkIsQUFBQSxDQUFDLE07QUFBTSxDQUFBO0FBQ1AsQUFBQTtBQUNBLEFBQUEsQUFBQSxNQUFNLENBQVMsTUFBUixRQUFRLENBQUMsQ0FBRSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFBLENBQUE7QUFDM0QsQUFBQSxDQUFDLEdBQUcsQ0FBQSxlQUFlLENBQUMsTUFBTSxDQUFDLENBQUEsQ0FBQSxDQUFBO0FBQzNCLEFBQUEsRUFBRSxNO0NBQU0sQ0FBQTtBQUNSLEFBQUEsQ0FBQyxHQUFHLENBQUEsQUFBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQzlCLEFBQUEsQ0FBQyxNO0FBQU0sQ0FBQTtBQUNQLEFBQUE7QUFDQSxBQUFBLEFBQUEsTUFBTSxDQUFXLE1BQVYsVUFBVSxDQUFDLENBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQSxDQUFBO0FBQzdELEFBQUEsQ0FBQyxHQUFHLENBQUEsZUFBZSxDQUFDLE1BQU0sQ0FBQyxDQUFBLENBQUEsQ0FBQTtBQUMzQixBQUFBLEVBQUUsTTtDQUFNLENBQUE7QUFDUixBQUFBLENBQUMsR0FBRyxDQUFBLEFBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQ3BDLEFBQUEsQ0FBQyxNO0FBQU0sQ0FBQTtBQUNQLEFBQUE7QUFDQSxBQUFBLEFBQUEsTUFBTSxDQUFTLE1BQVIsUUFBUSxDQUFDLENBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQSxDQUFBO0FBQzNELEFBQUEsQ0FBQyxHQUFHLENBQUEsZUFBZSxDQUFDLE9BQU8sQ0FBQyxDQUFBLENBQUEsQ0FBQTtBQUM1QixBQUFBLEVBQUUsTTtDQUFNLENBQUE7QUFDUixBQUFBLENBQUMsR0FBRyxDQUFBLEFBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQ3BDLEFBQUEsQ0FBQyxNO0FBQU0sQ0FBQTtBQUNQLEFBQUE7QUFDQSxBQUFBLEFBQUEsTUFBTSxDQUFXLE1BQVYsVUFBVSxDQUFDLENBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQSxDQUFBO0FBQzdELEFBQUEsQ0FBQyxHQUFHLENBQUEsZUFBZSxD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LE1BQU0sQ0FBQyxDQUFDLElBQUksQyxDLENBQUMsQUFBQyxDLFksQ0FBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFBLENBQUE7QUFDeEMsQUFBQSxFQUFLLE1BQUgsR0FBRyxDQUFDLENBQUUsQ0FBQyxJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQztBQUMvQixBQUFBLEVBQUssTUFBSCxHQUFHLENBQUMsQ0FBRSxDQUFDLFNBQVMsQ0FBQyxJLENBQUMsV0FBVyxDQUFDLENBQUMsT0FBTyxDQUFDO0FBQ3pDLEFBQUEsRUFBRSxNQUFNLENBQUEsQUFBQyxJLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFBO0FBQ2hDLEFBQUEsRUFBRSxNO0NBQU0sQ0FBQTtBQUNSLEFBQUE7QUFDQSxBQUFBLEMsT0FBUSxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQyxDLENBQUMsQUFBQyxDLFksQ0FBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFBLENBQUE7QUFDNUMsQUFBQSxFQUFLLE1BQUgsR0FBRyxDQUFDLENBQUUsQ0FBQyxJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQztBQUMvQixBQUFBLEVBQUssTUFBSCxHQUFHLENBQUMsQ0FBRSxDQUFDLFNBQVMsQ0FBQyxJLENBQUMsV0FBVyxDQUFDLENBQUMsV0FBVyxDQUFDO0FBQzdDLEFBQUEsRUFBRSxNQUFNLENBQUEsQUFBQyxJLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFBO0FBQ2hDLEFBQUEsRUFBRSxJLENBQUMsV0FBVyxDLEVBQUcsQ0FBQyxDQUFDO0FBQ25CLEFBQUEsRUFBRSxNO0NBQU0sQ0FBQTtBQUNSLEFBQUE7QUFDQSxBQUFBLEMsSUFBSyxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQyxDLENBQUMsQUFBQyxDLFksQ0FBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFBLENBQUE7QUFDekMsQUFBQSxFQUFLLE1BQUgsR0FBRyxDQUFDLENBQUUsQ0FBQyxJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQztBQUMvQixBQUFBLEVBQUssTUFBSCxHQUFHLENBQUMsQ0FBRSxDQUFDLFNBQVMsQ0FBQyxJLENBQUMsV0FBVyxDQUFDLENBQUMsV0FBVyxDQUFDO0FBQzdDLEFBQUEsRUFBRSxNQUFNLENBQUEsQUFBQyxJLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFBO0FBQ2hDLEFBQUEsRUFBRSxJLENBQUMsV0FBVyxDLEVBQUcsQ0FBQyxDQUFDO0FBQ25CLEFBQUEsRUFBRSxNO0NBQU0sQztBQUFBLENBQUE7QUFDUiIsIm5hbWVzIjpbXSwic291cmNlc0NvbnRlbnQiOlsiIyBsb2dnZXIubGliLmNpdmV0XHJcblxyXG5pbXBvcnQge1xyXG5cdGV4aXN0c1N5bmMsIGVuc3VyZURpclN5bmMsXHJcblx0fSBmcm9tICdAc3RkL2ZzJ1xyXG5pbXBvcnQge0xvZ0xldmVsc30gZnJvbSBcIkBzdGQvbG9nL2xldmVsc1wiXHJcbmltcG9ydCB7XHJcblx0Q29uc29sZUhhbmRsZXIsIEZpbGVIYW5kbGVyLCBzZXR1cCwgZ2V0TG9nZ2VyLCBMb2dSZWNvcmQsXHJcblx0fSBmcm9tICdAc3RkL2xvZydcclxuaW1wb3J0IHtibHVlLCBibGFja30gZnJvbSBcIkBzdGQvZm10L2NvbG9yc1wiXHJcblxyXG5pbXBvcnQge1xyXG5cdGdldFByZWZpeCxcclxuXHR9IGZyb20gJ3VuaWNvZGUnXHJcbmltcG9ydCB7XHJcblx0dW5kZWYsIGRlZmluZWQsIG5vdGRlZmluZWQsIGhhc2gsIGlzU3RyaW5nLCBub25FbXB0eSxcclxuXHRjcm9haywgYXNzZXJ0LFxyXG5cdH0gZnJvbSAnZGF0YXR5cGVzJ1xyXG5pbXBvcnQge1xyXG5cdHNwYWNlcywgbywgc2luY2VMb2FkU3RyLCBPTCwgTUwsIHBhc3MsXHJcblx0fSBmcm9tICdsbHV0aWxzJ1xyXG5pbXBvcnQge1xyXG5cdFRMb2dMZXZlbCwgaXNMb2dMZXZlbCwgZ2V0TG9nTGV2ZWwsIHNldExvZ0xldmVsLFxyXG5cdHB1c2hMb2dMZXZlbCwgcG9wTG9nTGV2ZWwsIHJlc2V0TG9nTGV2ZWwsXHJcblx0aXNJbmFjdGl2ZUxldmVsLFxyXG5cdH0gZnJvbSAnbG9nLWxldmVscydcclxuaW1wb3J0IHtcclxuXHRnZXRGb3JtYXR0ZXIsIGluZGVudExvZywgdW5kZW50TG9nLFxyXG5cdGdldENvbnNvbGVMb2csIGNsZWFyQ29uc29sZUxvZywgbG9nSW5kZW50LFxyXG5cdH0gZnJvbSAnbG9nLWZvcm1hdHRlcidcclxuXHJcbmV4cG9ydCB7XHJcblx0Z2V0TG9nTGV2ZWwsIGlzTG9nTGV2ZWwsIHNldExvZ0xldmVsLFxyXG5cdHB1c2hMb2dMZXZlbCwgcG9wTG9nTGV2ZWwsXHJcblx0aW5kZW50TG9nLCB1bmRlbnRMb2csXHJcblx0Y2xlYXJDb25zb2xlTG9nLCBnZXRDb25zb2xlTG9nLFxyXG5cdH1cclxuZXhwb3J0IHR5cGUge1RMb2dMZXZlbH1cclxuXHJcbmVuc3VyZURpclN5bmMgJy4vbG9ncydcclxuXHJcbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5tYWluTW9kdWxlOiBzdHJpbmcgOj0gbmV3IFVSTChEZW5vLm1haW5Nb2R1bGUpLnBhdGhuYW1lLnNsaWNlKDEpXHJcblxyXG5sb2dGaWxlTmFtZSA6PSAoKCkgPT5cclxuXHRsTWF0Y2hlcyA6PSBtYWluTW9kdWxlLm1hdGNoKC9bQS1aYS16MC05X1xcLVxcLl0rJC8pXHJcblx0aWYgKGxNYXRjaGVzID09IG51bGwpXHJcblx0XHRyZXR1cm4gXCJsb2dzL2R1bW15LmxvZ1wiXHJcblx0bGFiZWwgOj0gbE1hdGNoZXNbMF0ucmVwbGFjZUFsbCgnLicsICdfJylcclxuXHR0aW1lIDo9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5yZXBsYWNlQWxsKCc6JywnLScpXHJcblx0cmV0dXJuIFwibG9ncy8je2xhYmVsfSAje3RpbWV9LmxvZ1wiXHJcblx0KSgpXHJcblxyXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuZXhwb3J0IGdldExvZyA6PSAoZnJvbTogc3RyaW5nKTogc3RyaW5nID0+XHJcblxyXG5cdHN3aXRjaCBmcm9tXHJcblx0XHR3aGVuICdjb25zb2xlJ1xyXG5cdFx0XHRyZXR1cm4gZ2V0Q29uc29sZUxvZygpXHJcblx0XHR3aGVuICdmaWxlJ1xyXG5cdFx0XHRpZiBleGlzdHNTeW5jKGxvZ0ZpbGVOYW1lKVxyXG5cdFx0XHRcdGRhdGEgOj0gRGVuby5yZWFkRmlsZVN5bmMobG9nRmlsZU5hbWUpXHJcblx0XHRcdFx0ZGVjb2RlciA6PSBuZXcgVGV4dERlY29kZXIoXCJ1dGYtOFwiKVxyXG5cdFx0XHRcdHJldHVybiBkZWNvZGVyLmRlY29kZShkYXRhKVxyXG5cdFx0XHRlbHNlXHJcblx0XHRcdFx0cmV0dXJuICcnXHJcblx0XHRlbHNlXHJcblx0XHRcdGNyb2FrIFwiZ2V0TG9nKCk6IGludmFsaWQgZnJvbSA9ICN7ZnJvbX1cIlxyXG5cdFx0XHRyZXR1cm4gJydcclxuXHJcbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5leHBvcnQgY2xlYXJMb2cgOj0gKHdoaWNoOiBzdHJpbmcpOiB2b2lkID0+XHJcblxyXG5cdHN3aXRjaCB3aGljaFxyXG5cdFx0d2hlbiAnY29uc29sZSdcclxuXHRcdFx0Y2xlYXJDb25zb2xlTG9nKClcclxuXHRcdHdoZW4gJ2ZpbGUnXHJcblx0XHRcdGVuY29kZXIgOj0gbmV3IFRleHRFbmNvZGVyKCk7XHJcblx0XHRcdHN0ciA6PSBlbmNvZGVyLmVuY29kZSgnJylcclxuXHRcdFx0RGVuby53cml0ZUZpbGVTeW5jKGxvZ0ZpbGVOYW1lLCBzdHIpXHJcblx0XHR3aGVuICdib3RoJ1xyXG5cdFx0XHRjbGVhckNvbnNvbGVMb2coKVxyXG5cdFx0XHRlbmNvZGVyIDo9IG5ldyBUZXh0RW5jb2RlcigpO1xyXG5cdFx0XHRzdHIgOj0gZW5jb2Rlci5lbmNvZGUoJycpXHJcblx0XHRcdERlbm8ud3JpdGVGaWxlU3luYyhsb2dGaWxlTmFtZSwgc3RyKVxyXG5cdFx0ZWxzZVxyXG5cdFx0XHRwYXNzKClcclxuXHRyZXR1cm5cclxuXHJcbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5oQ29uZmlnOiBoYXNoIDo9IHtcclxuXHJcblx0aGFuZGxlcnM6XHJcblxyXG5cdFx0Y29uc29sZTogbmV3IENvbnNvbGVIYW5kbGVyKCdERUJVRycsIHtcclxuXHRcdFx0Zm9ybWF0dGVyOiBnZXRGb3JtYXR0ZXIoJyRtc2cnLCAnY29uc29sZScpXHJcblx0XHRcdH0pXHJcblxyXG5cdFx0ZmlsZTogbmV3IEZpbGVIYW5kbGVyKCdERUJVRycsIHtcclxuXHRcdFx0ZmlsZW5hbWU6IGxvZ0ZpbGVOYW1lXHJcblx0XHRcdG1vZGU6ICdhJ1xyXG5cdFx0XHRmb3JtYXR0ZXI6IGdldEZvcm1hdHRlcignJGxsICRtc2cnLCAnZmlsZScpXHJcblx0XHRcdH0pXHJcblxyXG5cdFx0Y29uc29sZV9wcm9mOiBuZXcgQ29uc29sZUhhbmRsZXIoJ0RFQlVHJywge1xyXG5cdFx0XHRmb3JtYXR0ZXI6IGdldEZvcm1hdHRlcignWyR0c10gJG1zZycsICdjb25zb2xlJylcclxuXHRcdFx0fSlcclxuXHJcblx0XHRmaWxlX3Byb2Y6IG5ldyBGaWxlSGFuZGxlcignREVCVUcnLCB7XHJcblx0XHRcdGZpbGVuYW1lOiBsb2dGaWxlTmFtZVxyXG5cdFx0XHRtb2RlOiAnYSdcclxuXHRcdFx0Zm9ybWF0dGVyOiBnZXRGb3JtYXR0ZXIoJ1skdHNdICRsbCAkbXNnJywgJ2ZpbGUnKVxyXG5cdFx0XHR9KVxyXG5cclxuXHQjIC0tLSBhc3NpZ24gaGFuZGxlcnMgdG8gbG9nZ2Vyc1xyXG5cdCMgICAgIG9yZGVyIGZyb20gbW9zdCB2ZXJib3NlIHRvIGxlYXN0IHZlcmJvc2VcclxuXHJcblx0bG9nZ2Vyczoge1xyXG5cdFx0cHJvZmlsZToge1xyXG5cdFx0XHRsZXZlbDogXCJERUJVR1wiXHJcblx0XHRcdG51bTogMVxyXG5cdFx0XHRoYW5kbGVyczogW1wiY29uc29sZV9wcm9mXCIsIFwiZmlsZV9wcm9mXCJdXHJcblx0XHRcdH1cclxuXHRcdGRlYnVnOiB7XHJcblx0XHRcdGxldmVsOiBcIkRFQlVHXCJcclxuXHRcdFx0bnVtOiAyXHJcblx0XHRcdGhhbmRsZXJzOiBbXCJjb25zb2xlXCIsIFwiZmlsZVwiXVxyXG5cdFx0XHR9XHJcblx0XHRpbmZvOiB7XHJcblx0XHRcdGxldmVsOiBcIklORk9cIlxyXG5cdFx0XHRudW06IDNcclxuXHRcdFx0aGFuZGxlcnM6IFtcImNvbnNvbGVcIiwgXCJmaWxlXCJdXHJcblx0XHRcdH1cclxuXHRcdHdhcm46IHtcclxuXHRcdFx0bGV2ZWw6IFwiV0FSTlwiLFxyXG5cdFx0XHRudW06IDRcclxuXHRcdFx0aGFuZGxlcnM6IFtcImNvbnNvbGVcIiwgXCJmaWxlXCJdXHJcblx0XHRcdH1cclxuXHRcdGVycm9yOiB7XHJcblx0XHRcdGxldmVsOiBcIkVSUk9SXCJcclxuXHRcdFx0bnVtOiA1XHJcblx0XHRcdGhhbmRsZXJzOiBbXCJjb25zb2xlXCIsIFwiZmlsZVwiXVxyXG5cdFx0XHR9XHJcblx0XHRmaWxlOiB7XHJcblx0XHRcdGxldmVsOiBcIkRFQlVHXCIsXHJcblx0XHRcdG51bTogNlxyXG5cdFx0XHRoYW5kbGVyczogW1wiZmlsZVwiXVxyXG5cdFx0XHR9XHJcblx0XHRzaWxlbnQ6IHtcclxuXHRcdFx0bGV2ZWw6IFwiRVJST1JcIlxyXG5cdFx0XHRudW06IDdcclxuXHRcdFx0aGFuZGxlcnM6IFtdXHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5zZXR1cChoQ29uZmlnKVxyXG5oTG9nZ2VycyA6PSBoQ29uZmlnLmxvZ2dlcnNcclxuaEhhbmRsZXJzIDo9IGhDb25maWcuaGFuZGxlcnNcclxuXHJcbmV4cG9ydCBJTkRFTlQgOj0gU3ltYm9sKCdpbmRlbnQnKVxyXG5leHBvcnQgVU5ERU5UIDo9IFN5bWJvbCgndW5kZW50JylcclxuXHJcbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5vdXRwdXQgOj0gKGxldmVsOiBUTG9nTGV2ZWwsIGxJdGVtczogdW5rbm93bltdKTogdm9pZCA9PlxyXG5cclxuXHRpZiBpc0luYWN0aXZlTGV2ZWwobGV2ZWwpXHJcblx0XHRyZXR1cm5cclxuXHJcblx0bGV0IGxvZ2dlciA9IGdldExvZ2dlcihnZXRMb2dMZXZlbCgpKVxyXG5cdGZvciBpdGVtIG9mIGxJdGVtc1xyXG5cdFx0c3dpdGNoIGl0ZW1cclxuXHRcdFx0d2hlbiBJTkRFTlRcclxuXHRcdFx0XHRpbmRlbnRMb2coKVxyXG5cdFx0XHR3aGVuIFVOREVOVFxyXG5cdFx0XHRcdHVuZGVudExvZygpXHJcblx0XHRcdGVsc2VcclxuXHRcdFx0XHRzdHIgOj0gaXNTdHJpbmcoaXRlbSkgPyBpdGVtIDogTUwoaXRlbSlcclxuXHRcdFx0XHRpZiBub25FbXB0eShzdHIpXHJcblx0XHRcdFx0XHRzd2l0Y2ggbGV2ZWxcclxuXHRcdFx0XHRcdFx0d2hlbiAnZGVidWcnOiBsb2dnZXIuZGVidWcgc3RyXHJcblx0XHRcdFx0XHRcdHdoZW4gJ2luZm8nOiAgbG9nZ2VyLmluZm8gYmxhY2soc3RyKVxyXG5cdFx0XHRcdFx0XHR3aGVuICd3YXJuJzogIGxvZ2dlci53YXJuIHN0clxyXG5cdFx0XHRcdFx0XHR3aGVuICdlcnJvcic6IGxvZ2dlci5lcnJvciBzdHJcclxuXHRcdFx0XHRcdFx0ZWxzZSBwYXNzKClcclxuXHJcblx0cmV0dXJuXHJcblxyXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuZXhwb3J0IERCRyAgOj0gKC4uLmxJdGVtczogdW5rbm93bltdKTogdm9pZCA9PlxyXG5cdG91dHB1dCAnZGVidWcnLCBsSXRlbXNcclxuXHRyZXR1cm5cclxuXHJcbmV4cG9ydCBMT0cgIDo9ICguLi5sSXRlbXM6IHVua25vd25bXSk6IHZvaWQgPT5cclxuXHRvdXRwdXQgJ2luZm8nLCBsSXRlbXNcclxuXHRyZXR1cm5cclxuXHJcbmV4cG9ydCBXQVJOIDo9ICguLi5sSXRlbXM6IHVua25vd25bXSk6IHZvaWQgPT5cclxuXHRvdXRwdXQgJ3dhcm4nLCBsSXRlbXNcclxuXHRyZXR1cm5cclxuXHJcbmV4cG9ydCBFUlIgIDo9ICguLi5sSXRlbXM6IHVua25vd25bXSk6IHZvaWQgPT5cclxuXHRvdXRwdXQgJ2Vycm9yJywgbEl0ZW1zXHJcblx0cmV0dXJuXHJcblxyXG5leHBvcnQgTE9HVkFMVUUgOj0gKGxhYmVsOiBzdHJpbmcsIHZhbHVlOiB1bmtub3duKTogdm9pZCA9PlxyXG5cdGlmIGlzSW5hY3RpdmVMZXZlbCgnaW5mbycpXHJcblx0XHRyZXR1cm5cclxuXHRMT0cgXCIje2xhYmVsfSA9ICN7TUwodmFsdWUpfVwiXHJcblx0cmV0dXJuXHJcblxyXG5leHBvcnQgTE9HTEFCRUxFRCA6PSAobGFiZWw6IHN0cmluZywgdmFsdWU6IHVua25vd24pOiB2b2lkID0+XHJcblx0aWYgaXNJbmFjdGl2ZUxldmVsKCdpbmZvJylcclxuXHRcdHJldHVyblxyXG5cdExPRyBibHVlKGxhYmVsKSArIFwiID0gI3tNTCh2YWx1ZSl9XCJcclxuXHRyZXR1cm5cclxuXHJcbmV4cG9ydCBEQkdWQUxVRSA6PSAobGFiZWw6IHN0cmluZywgdmFsdWU6IHVua25vd24pOiB2b2lkID0+XHJcblx0aWYgaXNJbmFjdGl2ZUxldmVsKCdkZWJ1ZycpXHJcblx0XHRyZXR1cm5cclxuXHREQkcgYmx1ZShsYWJlbCkgKyBcIiA9ICN7TUwodmFsdWUpfVwiXHJcblx0cmV0dXJuXHJcblxyXG5leHBvcnQgREJHTEFCRUxFRCA6PSAobGFiZWw6IHN0cmluZywgdmFsdWU6IHVua25vd24pOiB2b2lkID0+XHJcblx0aWYgaXNJbmFjdGl2ZUxldmVsKCdkZWJ1ZycpXHJcblx0XHRyZXR1cm5cclxuXHREQkcgYmx1ZShsYWJlbCkgKyBcIjogI3tNTCh2YWx1ZSl9XCJcclxuXHRyZXR1cm5cclxuXHJcbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5leHBvcnQgcmVtb3ZlTG9nRmlsZSA6PSAoKTogdm9pZCA9PlxyXG5cclxuXHREZW5vLnJlbW92ZVN5bmMgbG9nRmlsZU5hbWVcclxuXHRyZXR1cm5cclxuXHJcbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5leHBvcnQgdHlwZSBURm9ybWF0dGVyPFQ+ID0gKGRlc2M6IHN0cmluZywgaXRlbTogVD8pID0+IHN0cmluZ1xyXG5cclxuZXhwb3J0IGNsYXNzIFRyZWVMb2dnZXI8VD5cclxuXHJcblx0IyAtLS0gZGF0YSBmaWVsZHNcclxuXHRpbmRlbnRMZXZlbDogbnVtYmVyID0gMFxyXG5cdGxvZ0xldmVsOiBUTG9nTGV2ZWwgPSAnZGVidWcnXHJcblx0Zm9ybWF0dGVyOiBURm9ybWF0dGVyPFQ+XHJcblxyXG5cdCMgLS0tIG1ldGhvZHNcclxuXHRjb25zdHJ1Y3RvcihcclxuXHRcdFx0QGZvcm1hdHRlciA9IChkZXNjOiBzdHJpbmcsIGl0ZW06IFQ/KSA9PiBkZXNjXHJcblx0XHRcdGxvZ0xldmVsOiBzdHJpbmcgPSAnZGVidWcnXHJcblx0XHRcdClcclxuXHRcdGlmIGlzTG9nTGV2ZWwobG9nTGV2ZWwpXHJcblx0XHRcdEBsb2dMZXZlbCA9IGxvZ0xldmVsXHJcblxyXG5cdHN0YXJ0KGRlc2M6IHN0cmluZywgaXRlbTogVD89dW5kZWYpOiB2b2lkXHJcblx0XHRzdHIgOj0gQGZvcm1hdHRlcihkZXNjLCBpdGVtKVxyXG5cdFx0cHJlIDo9IGdldFByZWZpeChAaW5kZW50TGV2ZWwsICdwbGFpbicpXHJcblx0XHRvdXRwdXQgQGxvZ0xldmVsLCBbcHJlICsgc3RyXVxyXG5cdFx0QGluZGVudExldmVsICs9IDFcclxuXHRcdHJldHVyblxyXG5cclxuXHRsb2coZGVzYzogc3RyaW5nLCBpdGVtOiBUPz11bmRlZik6IHZvaWRcclxuXHRcdHN0ciA6PSBAZm9ybWF0dGVyKGRlc2MsIGl0ZW0pXHJcblx0XHRwcmUgOj0gZ2V0UHJlZml4KEBpbmRlbnRMZXZlbCwgJ3BsYWluJylcclxuXHRcdG91dHB1dCBAbG9nTGV2ZWwsICBbcHJlICsgc3RyXVxyXG5cdFx0cmV0dXJuXHJcblxyXG5cdHN1Y2NlZWQoZGVzYzogc3RyaW5nLCBpdGVtOiBUPz11bmRlZik6IHZvaWRcclxuXHRcdHN0ciA6PSBAZm9ybWF0dGVyKGRlc2MsIGl0ZW0pXHJcblx0XHRwcmUgOj0gZ2V0UHJlZml4KEBpbmRlbnRMZXZlbCwgJ3dpdGhBcnJvdycpXHJcblx0XHRvdXRwdXQgQGxvZ0xldmVsLCAgW3ByZSArIHN0cl1cclxuXHRcdEBpbmRlbnRMZXZlbCAtPSAxXHJcblx0XHRyZXR1cm5cclxuXHJcblx0ZmFpbChkZXNjOiBzdHJpbmcsIGl0ZW06IFQ/PXVuZGVmKTogdm9pZFxyXG5cdFx0c3RyIDo9IEBmb3JtYXR0ZXIoZGVzYywgaXRlbSlcclxuXHRcdHByZSA6PSBnZXRQcmVmaXgoQGluZGVudExldmVsLCAnd2l0aEFycm93JylcclxuXHRcdG91dHB1dCBAbG9nTGV2ZWwsICBbcHJlICsgc3RyXVxyXG5cdFx0QGluZGVudExldmVsIC09IDFcclxuXHRcdHJldHVyblxyXG4iXX0=