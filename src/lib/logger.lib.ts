"use strict";
// logger.lib.civet

import {existsSync} from "@std/fs"
import {sprintf} from "@std/fmt/printf"
import {
	ConsoleHandler, FileHandler, setup, getLogger,
	LogRecord,
	} from "@std/log"

import {
	undef, defined, notdefined, assert,
	hash, isString,
	} from './datatypes.lib.ts'
import {
	croak, pass, sinceLoadStr, OL, ML,
	} from './llutils.lib.ts'

/**
 * @module logger - logging utilities
 */

const Deno = globalThis.Deno
const logFileName : string = "./logs/logs.txt"
const sepdash : string = '-'.repeat(32)
const sepeq : string   = '='.repeat(32)

// --- These are not exported
const isSep = (str : string): boolean => {
	return (str === sepdash) || (str === sepeq)
}

const getMainModule = (): string => {
	const path: string = new URL(Deno.mainModule).pathname
	return path.slice(1)
}

let indent : number = 0
const prefix = () => '   '.repeat(indent)

const hFileLabel: hash = {
	DEBUG: 'D ',
	INFO:  'I ',
	WARN:  'W ',
	ERROR: 'ERROR: '
	}

const hConsoleLabel: hash = {
	DEBUG: '',
	INFO:  '',
	WARN:  '',
	ERROR: ''
	}

// ---------------------------------------------------------------------------

const hLoggerConfig: hash = {
	handlers: {

		profile: new ConsoleHandler('DEBUG', {
			formatter: ((rec: LogRecord) => {
				const {datetime, msg, levelName} = rec
				const ts = sinceLoadStr()
				const label = hConsoleLabel[levelName]
				return `[${ts}] ${label}${prefix()}${msg}`
			}
				)
			}),

		pfile: new FileHandler('DEBUG', {
			filename: logFileName,
			mode: 'a',
			formatter: (rec) => {
				const {datetime, msg, levelName} = rec
				const ts = sinceLoadStr()
				const label = hFileLabel[levelName]
				return `[${ts}] ${label}${prefix()}${msg}`
			}
			}),

		console: new ConsoleHandler('DEBUG', {
			formatter: ((rec) => {
				const {levelName, msg} = rec
				assert(isString(msg), `Not a string: ${msg}`)
				if (msg.startsWith('=====  ')) {
					return ''
				}
				const label = hConsoleLabel[levelName]
				assert(defined(label), `No label for ${levelName}`)
				return `${label}${prefix()}${msg}`
			}
				)
			}),

		file: new FileHandler('DEBUG', {
			filename: logFileName,
			mode: 'a',
			formatter: (rec) => {
				const {levelName, msg} = rec
				if (isSep(msg)) {
					return msg
				}
				else if (msg.startsWith('=====  ')) {
					return msg
				}
				else {
					const label = hFileLabel[levelName]
					assert(defined(label), `No label for ${levelName}`)
					return `${label}${prefix()}${msg}`
				}
			}
				}),
	},

	// --- assign handlers to loggers
	//     must include:
	//        'profile', 'debug', 'info', 'warn', 'error', 'file' and 'silent'
	loggers: {
		profile: {
			level: "DEBUG",
			num: 1,
			handlers: ["profile", "pfile"]
			},
		debug: {
			level: "DEBUG",
			num: 2,
			handlers: ["console", "file"]
			},
		info: {
			level: "INFO",
			num: 3,
			handlers: ["console", "file"]
			},
		warn: {
			level: "WARN",
			num: 4,
			handlers: ["console", "file"]
			},
		error: {
			level: "ERROR",
			num: 5,
			handlers: ["console", "file"]
			},
		file: {
			level: "DEBUG",
			num: 6,
			handlers: ["file"]
			},
		silent: {
			level: "ERROR",
			num: 7,
			handlers: []
			}
		}
	}

await setup(hLoggerConfig)

export enum LogCmd {
	INDENT,
	UNDENT,
	CLEAR
	}

// ---------------------------------------------------------------------------
// levels: profile, debug, info, warn, error, file, silent

class LoggerEx {

	defLevel: string       = Deno.env.get('DEFAULT_LOGGER') || 'info'
	lLoggerStack: string[] = [this.defLevel]
	hConfig: hash          = hLoggerConfig
	hLoggers: hash         = this.hConfig.loggers
	silent: boolean        = false
	mainModule: string     = getMainModule()

	constructor() {
		this.check(this.defLevel)
	}

	curLevel(): string {
		const result = this.lLoggerStack.at(-1)
		if (result === undef) {
			throw new Error("empty stack")
		}
		else {
			return result
		}
	}

	levelChanged(): void {
		return
	}

	setLevel(level: string): void {
		this.check(level)
		this.lLoggerStack[this.lLoggerStack.length-1] = level
		this.levelChanged()
		return
	}

	pushLevel(level: string): void {
		this.check(level)
		this.lLoggerStack.push(level)
		this.levelChanged()
		return
	}

	popLevel(): string {
		assert((this.lLoggerStack.length > 0), "Empty logger stack")
		const level = this.lLoggerStack.pop()
		if (level === undef) {
			throw new Error("empty stack")
		}
		this.levelChanged()
		return level
	}

	isActive(level: string): boolean {
		this.check(level)
		const curNum = this.hLoggers[this.curLevel()].num
		const lvlNum = this.hLoggers[level].num
		return (lvlNum >= curNum)
	}

	output(level: string, lItems: any[]): void {
		const main = getMainModule()
		if (main !== this.mainModule) {
			const logger = getLogger('debug')
			logger.debug(`=====  ${main}  =====`)
			this.mainModule = main
		}
		if (this.isActive(level)) {
			for (const item of lItems) {
				switch(item) {
					case LogCmd.INDENT: {
						indent += 1;break;
					}
					case LogCmd.UNDENT: {
						indent = (indent===0) ? 0 : indent-1;break;
					}
					case LogCmd.CLEAR: {
						this.clearLog();break;
					}
					default: {
						const str = (
							isString(item)
								? item
								: ML(item)
							)
						const logger = getLogger(this.curLevel())
						switch(level) {
//							when 'profile'
//								logger.profile str
							case 'debug': {
								logger.debug(str);break;
							}
							case 'info': {
								logger.info(str);break;
							}
							case 'warn': {
								logger.warn(str);break;
							}
							case 'error': {
								logger.error(str);break;
							}
//							when 'file'
//								logger.file str
							case 'silent': {
								pass();break;
							}
							default: {
								logger.debug(str)
							}
						}
					}
				}
			}
		}
		return
	}

	flush(): void {
		this.hConfig.handlers.file.flush()
		this.hConfig.handlers.pfile.flush()
		return
	}

	clearLog(): void {
		this.flush()
		Deno.writeTextFileSync(logFileName, '')
		return
	}

	getFullLog(): string {
		this.flush()
		const text = Deno.readTextFileSync(logFileName)
		return text ? text.trim() : ''
	}

	getLog(): string {
		const text = this.getFullLog()
		const lLines = text ? text.split('\n') : []
		const lNewLines = lLines.filter((x) => !x.match(/^=====\s\s/))
		const resultStr = lNewLines.join('\n')
		return resultStr
	}

	check(level: string): void {
		assert(this.hLoggers[level], `Bad logger level: '${level}'`)
		return
	}
}

const logger: LoggerEx = new LoggerEx()

// ---------------------------------------------------------------------------

export const setLogLevel  = (level: string): void => logger.setLevel(level)
export const pushLogLevel = (level: string): void => logger.pushLevel(level)
export const popLogLevel  = (): string => { return logger.popLevel() }
export const curLogLevel  = (): string => { return logger.curLevel() }

export const DBG  = (...lItems: any[]): void => logger.output('debug', lItems)
export const LOG  = (...lItems: any[]): void => logger.output('info', lItems)
export const WARN = (...lItems: any[]): void => logger.output('warn', lItems)
export const ERR  = (...lItems: any[]): void => logger.output('error', lItems)
export const LOGVALUE = (label: string, value: any): void => {
	LOG(`${label} = ${ML(value)}`)
	return
}
export const DBGVALUE = (label: string, value: any): void => {
	DBG(`${label} = ${ML(value)}`)
}

export const getFullLog   = (): string => { return logger.getFullLog() }
export const getLog       = (): string => { return logger.getLog() }
export const clearLog     = (): void => logger.clearLog()

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3JjL2xpYi9sb2dnZXIubGliLmNpdmV0LnRzeCIsInNvdXJjZXMiOlsic3JjL2xpYi9sb2dnZXIubGliLmNpdmV0Il0sIm1hcHBpbmdzIjoiO0FBQUEsbUJBQWtCO0FBQ2xCLEFBQUE7QUFDQSxBQUFBLE1BQU0sQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTO0FBQ2xDLEFBQUEsQUFBQSxNQUFNLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsaUJBQWlCO0FBQ3ZDLEFBQUEsQUFBQSxNQUFNLENBQUMsQ0FBQztBQUNSLENBQUMsY0FBYyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsU0FBUyxDQUFDO0FBQy9DLENBQUMsU0FBUyxDQUFDO0FBQ1gsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVU7QUFDbEIsQUFBQTtBQUNBLEFBQUEsQUFBQSxNQUFNLENBQUMsQ0FBQztBQUNSLENBQUMsS0FBSyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsTUFBTSxDQUFDO0FBQ3BDLENBQUMsSUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDO0FBQ2hCLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxvQkFBb0I7QUFDNUIsQUFBQSxBQUFBLE1BQU0sQ0FBQyxDQUFDO0FBQ1IsQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUM7QUFDbkMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGtCQUFrQjtBQUMxQixBQUFBO0FBQ0EsQUFBQTtBQUNBO0FBQ0EsR0FBRztBQUNILEFBQUE7QUFDQSxBQUFBLEFBQUksTUFBSixJQUFJLENBQUMsQ0FBRSxDQUFDLFVBQVUsQ0FBQyxJQUFJO0FBQ3ZCLEFBQUEsQUFBb0IsTUFBcEIsV0FBVyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBRSxDQUFDLGlCQUFpQjtBQUN6QyxBQUFBLEFBQWdCLE1BQWhCLE9BQU8sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUUsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQztBQUNsQyxBQUFBLEFBQWdCLE1BQWhCLEtBQUssQ0FBQyxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUUsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQztBQUNsQyxBQUFBO0FBQ0EsQUFBQSw2QkFBNEI7QUFDNUIsQUFBQSxBQUFLLE1BQUwsS0FBSyxDQUFDLENBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFBLENBQUE7QUFDbkMsQUFBQSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFFLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUUsQ0FBQyxLQUFLLEM7QUFBQyxDQUFBO0FBQzFDLEFBQUE7QUFDQSxBQUFBLEFBQWEsTUFBYixhQUFhLENBQUMsQ0FBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQSxDQUFBO0FBQzlCLEFBQUEsQ0FBYSxNQUFaLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFFLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsUUFBUTtBQUNsRCxBQUFBLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDO0FBQUMsQ0FBQTtBQUNyQixBQUFBO0FBQ0EsQUFBQSxBQUFBLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN2QixBQUFBLEFBQU0sTUFBTixNQUFNLENBQUMsQ0FBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQztBQUNwQyxBQUFBO0FBQ0EsQUFBQSxBQUFnQixNQUFoQixVQUFVLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBRSxDQUFDLENBQUM7QUFDckIsQUFBQSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQTtBQUNaLEFBQUEsQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLENBQUE7QUFDWixBQUFBLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxDQUFBO0FBQ1osQUFBQSxDQUFDLEtBQUssQ0FBQyxDQUFDLFNBQVM7QUFDakIsQ0FBQyxDQUFDO0FBQ0YsQUFBQTtBQUNBLEFBQUEsQUFBbUIsTUFBbkIsYUFBYSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUUsQ0FBQyxDQUFDO0FBQ3hCLEFBQUEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUE7QUFDVixBQUFBLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFBO0FBQ1YsQUFBQSxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQTtBQUNWLEFBQUEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFO0FBQ1YsQ0FBQyxDQUFDO0FBQ0YsQUFBQTtBQUNBLEFBQUEsOEVBQTZFO0FBQzdFLEFBQUE7QUFDQSxBQUFBLEFBQW1CLE1BQW5CLGFBQWEsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFFLENBQUMsQ0FBQztBQUN4QixBQUFBLENBQUMsUUFBUSxDQUFDLENBQUEsQ0FBQTtBQUNWLEFBQUE7QUFDQSxBQUFBLEVBQUUsT0FBTyxDQUFDLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO0FBQ3hDLEFBQUEsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFBLENBQUE7QUFDbEMsQUFBQSxJQUE4QixNQUExQixDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUUsQ0FBQyxHQUFHO0FBQ3JDLEFBQUEsSUFBTSxNQUFGLEVBQUUsQ0FBQyxDQUFFLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDeEIsQUFBQSxJQUFTLE1BQUwsS0FBSyxDQUFDLENBQUUsQ0FBQyxhQUFhLENBQUMsU0FBUyxDQUFDO0FBQ3JDLEFBQUEsSUFBSSxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxLQUFLLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLEM7R0FBQyxDQUFBO0FBQzlDLElBQUksQ0FBQztBQUNMLEdBQUcsQ0FBQyxDQUFDLENBQUE7QUFDTCxBQUFBO0FBQ0EsQUFBQSxFQUFFLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztBQUNuQyxBQUFBLEdBQUcsUUFBUSxDQUFDLENBQUMsV0FBVyxDQUFBO0FBQ3hCLEFBQUEsR0FBRyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUE7QUFDWixBQUFBLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUEsQ0FBQTtBQUN0QixBQUFBLElBQThCLE1BQTFCLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBRSxDQUFDLEdBQUc7QUFDckMsQUFBQSxJQUFNLE1BQUYsRUFBRSxDQUFDLENBQUUsQ0FBQyxZQUFZLENBQUMsQ0FBQztBQUN4QixBQUFBLElBQVMsTUFBTCxLQUFLLENBQUMsQ0FBRSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUM7QUFDbEMsQUFBQSxJQUFJLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLEtBQUssQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQztHQUFDLENBQUE7QUFDOUMsR0FBRyxDQUFDLENBQUMsQ0FBQTtBQUNMLEFBQUE7QUFDQSxBQUFBLEVBQUUsT0FBTyxDQUFDLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO0FBQ3hDLEFBQUEsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFBLENBQUE7QUFDdkIsQUFBQSxJQUFvQixNQUFoQixDQUFDLFNBQVMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUUsQ0FBQyxHQUFHO0FBQzNCLEFBQUEsSUFBSSxNQUFNLENBQUEsQUFBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLGNBQWMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFBO0FBQ2hELEFBQUEsSUFBSSxHQUFHLENBQUEsR0FBRyxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsQ0FBQSxDQUFBLENBQUE7QUFDaEMsQUFBQSxLQUFLLE1BQU0sQ0FBQyxFO0lBQUUsQ0FBQTtBQUNkLEFBQUEsSUFBUyxNQUFMLEtBQUssQ0FBQyxDQUFFLENBQUMsYUFBYSxDQUFDLFNBQVMsQ0FBQztBQUNyQyxBQUFBLElBQUksTUFBTSxDQUFBLEFBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxhQUFhLEVBQUUsU0FBUyxDQUFDLENBQUMsQ0FBQTtBQUN0RCxBQUFBLElBQUksTUFBTSxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLEM7R0FBQyxDQUFBO0FBQ3RDLElBQUksQ0FBQztBQUNMLEdBQUcsQ0FBQyxDQUFDLENBQUE7QUFDTCxBQUFBO0FBQ0EsQUFBQSxFQUFFLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztBQUNsQyxBQUFBLEdBQUcsUUFBUSxDQUFDLENBQUMsV0FBVyxDQUFBO0FBQ3hCLEFBQUEsR0FBRyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUE7QUFDWixBQUFBLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUEsQ0FBQTtBQUN0QixBQUFBLElBQW9CLE1BQWhCLENBQUMsU0FBUyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBRSxDQUFDLEdBQUc7QUFDM0IsQUFBQSxJQUFJLEdBQUcsQ0FBQSxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUEsQ0FBQSxDQUFBO0FBQ2pCLEFBQUEsS0FBSyxNQUFNLENBQUMsRztJQUFHLENBQUE7QUFDZixBQUFBLElBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQSxHQUFHLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxDQUFBLENBQUEsQ0FBQTtBQUNyQyxBQUFBLEtBQUssTUFBTSxDQUFDLEc7SUFBRyxDQUFBO0FBQ2YsQUFBQSxJQUFJLElBQUksQ0FBQSxDQUFBO0FBQ1IsQUFBQSxLQUFVLE1BQUwsS0FBSyxDQUFDLENBQUUsQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDO0FBQ25DLEFBQUEsS0FBSyxNQUFNLENBQUEsQUFBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLGFBQWEsRUFBRSxTQUFTLENBQUMsQ0FBQyxDQUFBO0FBQ3ZELEFBQUEsS0FBSyxNQUFNLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQztJQUFDLEM7R0FBQSxDQUFBO0FBQ3ZDLElBQUksQ0FBQyxDQUFDLEM7Q0FBQSxDQUFBLENBQUE7QUFDTixBQUFBO0FBQ0EsQUFBQSxDQUFDLGlDQUFnQztBQUNqQyxBQUFBLENBQUMsb0JBQW1CO0FBQ3BCLEFBQUEsQ0FBQywwRUFBeUU7QUFDMUUsQUFBQSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7QUFDWCxBQUFBLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQztBQUNaLEFBQUEsR0FBRyxLQUFLLENBQUMsQ0FBQyxPQUFPLENBQUE7QUFDakIsQUFBQSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUNULEFBQUEsR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLE9BQU8sQ0FBQztBQUNqQyxHQUFHLENBQUMsQ0FBQTtBQUNKLEFBQUEsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDO0FBQ1YsQUFBQSxHQUFHLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQTtBQUNqQixBQUFBLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQ1QsQUFBQSxHQUFHLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsTUFBTSxDQUFDO0FBQ2hDLEdBQUcsQ0FBQyxDQUFBO0FBQ0osQUFBQSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7QUFDVCxBQUFBLEdBQUcsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFBO0FBQ2hCLEFBQUEsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDVCxBQUFBLEdBQUcsUUFBUSxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxNQUFNLENBQUM7QUFDaEMsR0FBRyxDQUFDLENBQUE7QUFDSixBQUFBLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUNULEFBQUEsR0FBRyxLQUFLLENBQUMsQ0FBQyxNQUFNLENBQUM7QUFDakIsQUFBQSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUNULEFBQUEsR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLE1BQU0sQ0FBQztBQUNoQyxHQUFHLENBQUMsQ0FBQTtBQUNKLEFBQUEsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDO0FBQ1YsQUFBQSxHQUFHLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQTtBQUNqQixBQUFBLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQ1QsQUFBQSxHQUFHLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsTUFBTSxDQUFDO0FBQ2hDLEdBQUcsQ0FBQyxDQUFBO0FBQ0osQUFBQSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7QUFDVCxBQUFBLEdBQUcsS0FBSyxDQUFDLENBQUMsT0FBTyxDQUFDO0FBQ2xCLEFBQUEsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFD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Q0FBQSxBQUFDLFdBQVcsQ0FBQyxDQUFDLEVBQUUsQ0FBQTtBQUN4QyxBQUFBLEVBQUUsTTtDQUFNLENBQUE7QUFDUixBQUFBO0FBQ0EsQUFBQSxDLFVBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUEsQ0FBQTtBQUNyQixBQUFBLEVBQUUsSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ1YsQUFBQSxFQUFNLE1BQUosSUFBSSxDQUFDLENBQUUsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsV0FBVyxDQUFDO0FBQzVDLEFBQUEsRUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRTtDQUFFLENBQUE7QUFDaEMsQUFBQTtBQUNBLEFBQUEsQyxNQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFBLENBQUE7QUFDakIsQUFBQSxFQUFNLE1BQUosSUFBSSxDQUFDLENBQUUsQ0FBQyxJLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDdkIsQUFBQSxFQUFRLE1BQU4sTUFBTSxDQUFDLENBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN4QyxBQUFBLEVBQVcsTUFBVCxTQUFTLENBQUMsQ0FBRSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBSSxDQUFDLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxDQUFDO0FBQzlELEFBQUEsRUFBVyxNQUFULFNBQVMsQ0FBQyxDQUFFLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7QUFDbkMsQUFBQSxFQUFFLE1BQU0sQ0FBQyxTO0NBQVMsQ0FBQTtBQUNsQixBQUFBO0FBQ0EsQUFBQSxDLEtBQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQSxDQUFBO0FBQzNCLEFBQUEsRUFBRSxNQUFNLENBQUEsQUFBQyxJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxtQkFBbUIsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDekQsQUFBQSxFQUFFLE07Q0FBTSxDO0FBQUEsQ0FBQTtBQUNSLEFBQUE7QUFDQSxBQUFBLEFBQWdCLE1BQWhCLE1BQU0sQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFFLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQ2xDLEFBQUE7QUFDQSxBQUFBLDhFQUE2RTtBQUM3RSxBQUFBO0FBQ0EsQUFBQSxBQUFBLE1BQU0sQ0FBYSxNQUFaLFdBQVcsRUFBRSxDQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUM7QUFDdEUsQUFBQSxBQUFBLE1BQU0sQ0FBYSxNQUFaLFlBQVksQ0FBQyxDQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUM7QUFDdkUsQUFBQSxBQUFBLE1BQU0sQ0FBYSxNQUFaLFdBQVcsRUFBRSxDQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFBLENBQUEsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUEsQ0FBQTtBQUM3RCxBQUFBLEFBQUEsTUFBTSxDQUFhLE1BQVosV0FBVyxFQUFFLENBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUEsQ0FBQSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQSxDQUFBO0FBQzdELEFBQUE7QUFDQSxBQUFBLEFBQUEsTUFBTSxDQUFLLE1BQUosR0FBRyxFQUFFLENBQUUsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFBLEFBQUMsT0FBTyxDQUFDLENBQUMsTUFBTSxDQUFBO0FBQ3hFLEFBQUEsQUFBQSxNQUFNLENBQUssTUFBSixHQUFHLEVBQUUsQ0FBRSxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUEsQUFBQyxNQUFNLENBQUMsQ0FBQyxNQUFNLENBQUE7QUFDdkUsQUFBQSxBQUFBLE1BQU0sQ0FBSyxNQUFKLElBQUksQ0FBQyxDQUFFLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQSxBQUFDLE1BQU0sQ0FBQyxDQUFDLE1BQU0sQ0FBQTtBQUN2RSxBQUFBLEFBQUEsTUFBTSxDQUFLLE1BQUosR0FBRyxFQUFFLENBQUUsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFBLEFBQUMsT0FBTyxDQUFDLENBQUMsTUFBTSxDQUFBO0FBQ3hFLEFBQUEsQUFBQSxNQUFNLENBQVMsTUFBUixRQUFRLENBQUMsQ0FBRSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFBLENBQUE7QUFDdkQsQUFBQSxDQUFDLEdBQUcsQ0FBQSxBQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDOUIsQUFBQSxDQUFDLE07QUFBTSxDQUFBO0FBQ1AsQUFBQSxBQUFBLE1BQU0sQ0FBUyxNQUFSLFFBQVEsQ0FBQyxDQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUEsQ0FBQTtBQUN2RCxBQUFBLENBQUMsR0FBRyxDQUFBLEFBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQztBQUFBLENBQUE7QUFDOUIsQUFBQTtBQUNBLEFBQUEsQUFBQSxNQUFNLENBQWEsTUFBWixVQUFVLEdBQUcsQ0FBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQSxDQUFBLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFBLENBQUE7QUFDL0QsQUFBQSxBQUFBLE1BQU0sQ0FBYSxNQUFaLE1BQU0sT0FBTyxDQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFBLENBQUEsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUEsQ0FBQTtBQUMzRCxBQUFBLEFBQUEsTUFBTSxDQUFhLE1BQVosUUFBUSxLQUFLLENBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQ3BEIiwibmFtZXMiOltdLCJzb3VyY2VzQ29udGVudCI6WyIjIGxvZ2dlci5saWIuY2l2ZXRcblxuaW1wb3J0IHtleGlzdHNTeW5jfSBmcm9tIFwiQHN0ZC9mc1wiXG5pbXBvcnQge3NwcmludGZ9IGZyb20gXCJAc3RkL2ZtdC9wcmludGZcIlxuaW1wb3J0IHtcblx0Q29uc29sZUhhbmRsZXIsIEZpbGVIYW5kbGVyLCBzZXR1cCwgZ2V0TG9nZ2VyLFxuXHRMb2dSZWNvcmQsXG5cdH0gZnJvbSBcIkBzdGQvbG9nXCJcblxuaW1wb3J0IHtcblx0dW5kZWYsIGRlZmluZWQsIG5vdGRlZmluZWQsIGFzc2VydCxcblx0aGFzaCwgaXNTdHJpbmcsXG5cdH0gZnJvbSAnLi9kYXRhdHlwZXMubGliLnRzJ1xuaW1wb3J0IHtcblx0Y3JvYWssIHBhc3MsIHNpbmNlTG9hZFN0ciwgT0wsIE1MLFxuXHR9IGZyb20gJy4vbGx1dGlscy5saWIudHMnXG5cbi8qKlxuICogQG1vZHVsZSBsb2dnZXIgLSBsb2dnaW5nIHV0aWxpdGllc1xuICovXG5cbkRlbm8gOj0gZ2xvYmFsVGhpcy5EZW5vXG5sb2dGaWxlTmFtZSA6IHN0cmluZyA6PSBcIi4vbG9ncy9sb2dzLnR4dFwiXG5zZXBkYXNoIDogc3RyaW5nIDo9ICctJy5yZXBlYXQoMzIpXG5zZXBlcSA6IHN0cmluZyAgIDo9ICc9Jy5yZXBlYXQoMzIpXG5cbiMgLS0tIFRoZXNlIGFyZSBub3QgZXhwb3J0ZWRcbmlzU2VwIDo9IChzdHIgOiBzdHJpbmcpOiBib29sZWFuID0+XG5cdHJldHVybiAoc3RyID09IHNlcGRhc2gpIHx8IChzdHIgPT0gc2VwZXEpXG5cbmdldE1haW5Nb2R1bGUgOj0gKCk6IHN0cmluZyA9PlxuXHRwYXRoOiBzdHJpbmcgOj0gbmV3IFVSTChEZW5vLm1haW5Nb2R1bGUpLnBhdGhuYW1lXG5cdHJldHVybiBwYXRoLnNsaWNlKDEpXG5cbmxldCBpbmRlbnQgOiBudW1iZXIgPSAwXG5wcmVmaXggOj0gKCkgPT4gJyAgICcucmVwZWF0KGluZGVudClcblxuaEZpbGVMYWJlbDogaGFzaCA6PSB7XG5cdERFQlVHOiAnRCAnXG5cdElORk86ICAnSSAnXG5cdFdBUk46ICAnVyAnXG5cdEVSUk9SOiAnRVJST1I6ICdcblx0fVxuXG5oQ29uc29sZUxhYmVsOiBoYXNoIDo9IHtcblx0REVCVUc6ICcnXG5cdElORk86ICAnJ1xuXHRXQVJOOiAgJydcblx0RVJST1I6ICcnXG5cdH1cblxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuaExvZ2dlckNvbmZpZzogaGFzaCA6PSB7XG5cdGhhbmRsZXJzOlxuXG5cdFx0cHJvZmlsZTogbmV3IENvbnNvbGVIYW5kbGVyKCdERUJVRycsIHtcblx0XHRcdGZvcm1hdHRlcjogKChyZWM6IExvZ1JlY29yZCkgPT5cblx0XHRcdFx0e2RhdGV0aW1lLCBtc2csIGxldmVsTmFtZX0gOj0gcmVjXG5cdFx0XHRcdHRzIDo9IHNpbmNlTG9hZFN0cigpXG5cdFx0XHRcdGxhYmVsIDo9IGhDb25zb2xlTGFiZWxbbGV2ZWxOYW1lXVxuXHRcdFx0XHRyZXR1cm4gXCJbI3t0c31dICN7bGFiZWx9I3twcmVmaXgoKX0je21zZ31cIlxuXHRcdFx0XHQpXG5cdFx0XHR9KVxuXG5cdFx0cGZpbGU6IG5ldyBGaWxlSGFuZGxlcignREVCVUcnLCB7XG5cdFx0XHRmaWxlbmFtZTogbG9nRmlsZU5hbWVcblx0XHRcdG1vZGU6ICdhJ1xuXHRcdFx0Zm9ybWF0dGVyOiAocmVjKSA9PlxuXHRcdFx0XHR7ZGF0ZXRpbWUsIG1zZywgbGV2ZWxOYW1lfSA6PSByZWNcblx0XHRcdFx0dHMgOj0gc2luY2VMb2FkU3RyKClcblx0XHRcdFx0bGFiZWwgOj0gaEZpbGVMYWJlbFtsZXZlbE5hbWVdXG5cdFx0XHRcdHJldHVybiBcIlsje3RzfV0gI3tsYWJlbH0je3ByZWZpeCgpfSN7bXNnfVwiXG5cdFx0XHR9KVxuXG5cdFx0Y29uc29sZTogbmV3IENvbnNvbGVIYW5kbGVyKCdERUJVRycsIHtcblx0XHRcdGZvcm1hdHRlcjogKChyZWMpID0+XG5cdFx0XHRcdHtsZXZlbE5hbWUsIG1zZ30gOj0gcmVjXG5cdFx0XHRcdGFzc2VydCBpc1N0cmluZyhtc2cpLCBcIk5vdCBhIHN0cmluZzogI3ttc2d9XCJcblx0XHRcdFx0aWYgbXNnLnN0YXJ0c1dpdGgoJz09PT09ICAnKVxuXHRcdFx0XHRcdHJldHVybiAnJ1xuXHRcdFx0XHRsYWJlbCA6PSBoQ29uc29sZUxhYmVsW2xldmVsTmFtZV1cblx0XHRcdFx0YXNzZXJ0IGRlZmluZWQobGFiZWwpLCBcIk5vIGxhYmVsIGZvciAje2xldmVsTmFtZX1cIlxuXHRcdFx0XHRyZXR1cm4gXCIje2xhYmVsfSN7cHJlZml4KCl9I3ttc2d9XCJcblx0XHRcdFx0KVxuXHRcdFx0fSlcblxuXHRcdGZpbGU6IG5ldyBGaWxlSGFuZGxlcignREVCVUcnLCB7XG5cdFx0XHRmaWxlbmFtZTogbG9nRmlsZU5hbWVcblx0XHRcdG1vZGU6ICdhJ1xuXHRcdFx0Zm9ybWF0dGVyOiAocmVjKSA9PlxuXHRcdFx0XHR7bGV2ZWxOYW1lLCBtc2d9IDo9IHJlY1xuXHRcdFx0XHRpZiBpc1NlcChtc2cpXG5cdFx0XHRcdFx0cmV0dXJuIG1zZ1xuXHRcdFx0XHRlbHNlIGlmIG1zZy5zdGFydHNXaXRoKCc9PT09PSAgJylcblx0XHRcdFx0XHRyZXR1cm4gbXNnXG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRsYWJlbCA6PSBoRmlsZUxhYmVsW2xldmVsTmFtZV1cblx0XHRcdFx0XHRhc3NlcnQgZGVmaW5lZChsYWJlbCksIFwiTm8gbGFiZWwgZm9yICN7bGV2ZWxOYW1lfVwiXG5cdFx0XHRcdFx0cmV0dXJuIFwiI3tsYWJlbH0je3ByZWZpeCgpfSN7bXNnfVwiXG5cdFx0XHRcdH0pXG5cblx0IyAtLS0gYXNzaWduIGhhbmRsZXJzIHRvIGxvZ2dlcnNcblx0IyAgICAgbXVzdCBpbmNsdWRlOlxuXHQjICAgICAgICAncHJvZmlsZScsICdkZWJ1ZycsICdpbmZvJywgJ3dhcm4nLCAnZXJyb3InLCAnZmlsZScgYW5kICdzaWxlbnQnXG5cdGxvZ2dlcnM6IHtcblx0XHRwcm9maWxlOiB7XG5cdFx0XHRsZXZlbDogXCJERUJVR1wiXG5cdFx0XHRudW06IDFcblx0XHRcdGhhbmRsZXJzOiBbXCJwcm9maWxlXCIsIFwicGZpbGVcIl1cblx0XHRcdH1cblx0XHRkZWJ1Zzoge1xuXHRcdFx0bGV2ZWw6IFwiREVCVUdcIlxuXHRcdFx0bnVtOiAyXG5cdFx0XHRoYW5kbGVyczogW1wiY29uc29sZVwiLCBcImZpbGVcIl1cblx0XHRcdH1cblx0XHRpbmZvOiB7XG5cdFx0XHRsZXZlbDogXCJJTkZPXCJcblx0XHRcdG51bTogM1xuXHRcdFx0aGFuZGxlcnM6IFtcImNvbnNvbGVcIiwgXCJmaWxlXCJdXG5cdFx0XHR9XG5cdFx0d2Fybjoge1xuXHRcdFx0bGV2ZWw6IFwiV0FSTlwiLFxuXHRcdFx0bnVtOiA0XG5cdFx0XHRoYW5kbGVyczogW1wiY29uc29sZVwiLCBcImZpbGVcIl1cblx0XHRcdH1cblx0XHRlcnJvcjoge1xuXHRcdFx0bGV2ZWw6IFwiRVJST1JcIlxuXHRcdFx0bnVtOiA1XG5cdFx0XHRoYW5kbGVyczogW1wiY29uc29sZVwiLCBcImZpbGVcIl1cblx0XHRcdH1cblx0XHRmaWxlOiB7XG5cdFx0XHRsZXZlbDogXCJERUJVR1wiLFxuXHRcdFx0bnVtOiA2XG5cdFx0XHRoYW5kbGVyczogW1wiZmlsZVwiXVxuXHRcdFx0fVxuXHRcdHNpbGVudDoge1xuXHRcdFx0bGV2ZWw6IFwiRVJST1JcIlxuXHRcdFx0bnVtOiA3XG5cdFx0XHRoYW5kbGVyczogW11cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuYXdhaXQgc2V0dXAoaExvZ2dlckNvbmZpZylcblxuZXhwb3J0IGVudW0gTG9nQ21kIHtcblx0SU5ERU5UXG5cdFVOREVOVFxuXHRDTEVBUlxuXHR9XG5cbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4jIGxldmVsczogcHJvZmlsZSwgZGVidWcsIGluZm8sIHdhcm4sIGVycm9yLCBmaWxlLCBzaWxlbnRcblxuY2xhc3MgTG9nZ2VyRXhcblxuXHRkZWZMZXZlbDogc3RyaW5nICAgICAgID0gRGVuby5lbnYuZ2V0KCdERUZBVUxUX0xPR0dFUicpIHx8ICdpbmZvJ1xuXHRsTG9nZ2VyU3RhY2s6IHN0cmluZ1tdID0gW0BkZWZMZXZlbF1cblx0aENvbmZpZzogaGFzaCAgICAgICAgICA9IGhMb2dnZXJDb25maWdcblx0aExvZ2dlcnM6IGhhc2ggICAgICAgICA9IEBoQ29uZmlnLmxvZ2dlcnNcblx0c2lsZW50OiBib29sZWFuICAgICAgICA9IGZhbHNlXG5cdG1haW5Nb2R1bGU6IHN0cmluZyAgICAgPSBnZXRNYWluTW9kdWxlKClcblxuXHRjb25zdHJ1Y3RvcigpXG5cdFx0QGNoZWNrIEBkZWZMZXZlbFxuXG5cdGN1ckxldmVsKCk6IHN0cmluZ1xuXHRcdHJlc3VsdCA6PSBAbExvZ2dlclN0YWNrLmF0KC0xKVxuXHRcdGlmIChyZXN1bHQgPT0gdW5kZWYpXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJlbXB0eSBzdGFja1wiKVxuXHRcdGVsc2Vcblx0XHRcdHJldHVybiByZXN1bHRcblxuXHRsZXZlbENoYW5nZWQoKTogdm9pZFxuXHRcdHJldHVyblxuXG5cdHNldExldmVsKGxldmVsOiBzdHJpbmcpOiB2b2lkXG5cdFx0QGNoZWNrIGxldmVsXG5cdFx0QGxMb2dnZXJTdGFja1tAbExvZ2dlclN0YWNrLmxlbmd0aC0xXSA9IGxldmVsXG5cdFx0QGxldmVsQ2hhbmdlZCgpXG5cdFx0cmV0dXJuXG5cblx0cHVzaExldmVsKGxldmVsOiBzdHJpbmcpOiB2b2lkXG5cdFx0QGNoZWNrIGxldmVsXG5cdFx0QGxMb2dnZXJTdGFjay5wdXNoIGxldmVsXG5cdFx0QGxldmVsQ2hhbmdlZCgpXG5cdFx0cmV0dXJuXG5cblx0cG9wTGV2ZWwoKTogc3RyaW5nXG5cdFx0YXNzZXJ0IChAbExvZ2dlclN0YWNrLmxlbmd0aCA+IDApLCBcIkVtcHR5IGxvZ2dlciBzdGFja1wiXG5cdFx0bGV2ZWwgOj0gQGxMb2dnZXJTdGFjay5wb3AoKVxuXHRcdGlmIChsZXZlbCA9PSB1bmRlZilcblx0XHRcdHRocm93IG5ldyBFcnJvcihcImVtcHR5IHN0YWNrXCIpXG5cdFx0QGxldmVsQ2hhbmdlZCgpXG5cdFx0cmV0dXJuIGxldmVsXG5cblx0aXNBY3RpdmUobGV2ZWw6IHN0cmluZyk6IGJvb2xlYW5cblx0XHRAY2hlY2sgbGV2ZWxcblx0XHRjdXJOdW0gOj0gQGhMb2dnZXJzW0BjdXJMZXZlbCgpXS5udW1cblx0XHRsdmxOdW0gOj0gQGhMb2dnZXJzW2xldmVsXS5udW1cblx0XHRyZXR1cm4gKGx2bE51bSA+PSBjdXJOdW0pXG5cblx0b3V0cHV0KGxldmVsOiBzdHJpbmcsIGxJdGVtczogYW55W10pOiB2b2lkXG5cdFx0bWFpbiA6PSBnZXRNYWluTW9kdWxlKClcblx0XHRpZiAobWFpbiAhPSBAbWFpbk1vZHVsZSlcblx0XHRcdGxvZ2dlciA6PSBnZXRMb2dnZXIoJ2RlYnVnJylcblx0XHRcdGxvZ2dlci5kZWJ1ZyBcIj09PT09ICAje21haW59ICA9PT09PVwiXG5cdFx0XHRAbWFpbk1vZHVsZSA9IG1haW5cblx0XHRpZiBAaXNBY3RpdmUobGV2ZWwpXG5cdFx0XHRmb3IgaXRlbSBvZiBsSXRlbXNcblx0XHRcdFx0c3dpdGNoIGl0ZW1cblx0XHRcdFx0XHR3aGVuIExvZ0NtZC5JTkRFTlRcblx0XHRcdFx0XHRcdGluZGVudCArPSAxXG5cdFx0XHRcdFx0d2hlbiBMb2dDbWQuVU5ERU5UXG5cdFx0XHRcdFx0XHRpbmRlbnQgPSAoaW5kZW50PT0wKSA/IDAgOiBpbmRlbnQtMVxuXHRcdFx0XHRcdHdoZW4gTG9nQ21kLkNMRUFSXG5cdFx0XHRcdFx0XHRAY2xlYXJMb2coKVxuXHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRcdHN0ciA6PSAoXG5cdFx0XHRcdFx0XHRcdGlzU3RyaW5nKGl0ZW0pXG5cdFx0XHRcdFx0XHRcdFx0PyBpdGVtXG5cdFx0XHRcdFx0XHRcdFx0OiBNTChpdGVtKVxuXHRcdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0XHRsb2dnZXIgOj0gZ2V0TG9nZ2VyKEBjdXJMZXZlbCgpKVxuXHRcdFx0XHRcdFx0c3dpdGNoIGxldmVsXG4jXHRcdFx0XHRcdFx0XHR3aGVuICdwcm9maWxlJ1xuI1x0XHRcdFx0XHRcdFx0XHRsb2dnZXIucHJvZmlsZSBzdHJcblx0XHRcdFx0XHRcdFx0d2hlbiAnZGVidWcnXG5cdFx0XHRcdFx0XHRcdFx0bG9nZ2VyLmRlYnVnIHN0clxuXHRcdFx0XHRcdFx0XHR3aGVuICdpbmZvJ1xuXHRcdFx0XHRcdFx0XHRcdGxvZ2dlci5pbmZvIHN0clxuXHRcdFx0XHRcdFx0XHR3aGVuICd3YXJuJ1xuXHRcdFx0XHRcdFx0XHRcdGxvZ2dlci53YXJuIHN0clxuXHRcdFx0XHRcdFx0XHR3aGVuICdlcnJvcidcblx0XHRcdFx0XHRcdFx0XHRsb2dnZXIuZXJyb3Igc3RyXG4jXHRcdFx0XHRcdFx0XHR3aGVuICdmaWxlJ1xuI1x0XHRcdFx0XHRcdFx0XHRsb2dnZXIuZmlsZSBzdHJcblx0XHRcdFx0XHRcdFx0d2hlbiAnc2lsZW50J1xuXHRcdFx0XHRcdFx0XHRcdHBhc3MoKVxuXHRcdFx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHRcdFx0bG9nZ2VyLmRlYnVnIHN0clxuXHRcdHJldHVyblxuXG5cdGZsdXNoKCk6IHZvaWRcblx0XHRAaENvbmZpZy5oYW5kbGVycy5maWxlLmZsdXNoKClcblx0XHRAaENvbmZpZy5oYW5kbGVycy5wZmlsZS5mbHVzaCgpXG5cdFx0cmV0dXJuXG5cblx0Y2xlYXJMb2coKTogdm9pZFxuXHRcdEBmbHVzaCgpXG5cdFx0RGVuby53cml0ZVRleHRGaWxlU3luYyBsb2dGaWxlTmFtZSwgJydcblx0XHRyZXR1cm5cblxuXHRnZXRGdWxsTG9nKCk6IHN0cmluZ1xuXHRcdEBmbHVzaCgpXG5cdFx0dGV4dCA6PSBEZW5vLnJlYWRUZXh0RmlsZVN5bmMobG9nRmlsZU5hbWUpXG5cdFx0cmV0dXJuIHRleHQgPyB0ZXh0LnRyaW0oKSA6ICcnXG5cblx0Z2V0TG9nKCk6IHN0cmluZ1xuXHRcdHRleHQgOj0gQGdldEZ1bGxMb2coKVxuXHRcdGxMaW5lcyA6PSB0ZXh0ID8gdGV4dC5zcGxpdCgnXFxuJykgOiBbXVxuXHRcdGxOZXdMaW5lcyA6PSBsTGluZXMuZmlsdGVyKCh4KSA9PiBub3QgeC5tYXRjaCgvXj09PT09XFxzXFxzLykpXG5cdFx0cmVzdWx0U3RyIDo9IGxOZXdMaW5lcy5qb2luKCdcXG4nKVxuXHRcdHJldHVybiByZXN1bHRTdHJcblxuXHRjaGVjayhsZXZlbDogc3RyaW5nKTogdm9pZFxuXHRcdGFzc2VydCBAaExvZ2dlcnNbbGV2ZWxdLCBcIkJhZCBsb2dnZXIgbGV2ZWw6ICcje2xldmVsfSdcIlxuXHRcdHJldHVyblxuXG5sb2dnZXI6IExvZ2dlckV4IDo9IG5ldyBMb2dnZXJFeCgpXG5cbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBzZXRMb2dMZXZlbCAgOj0gKGxldmVsOiBzdHJpbmcpOiB2b2lkID0+IGxvZ2dlci5zZXRMZXZlbChsZXZlbClcbmV4cG9ydCBwdXNoTG9nTGV2ZWwgOj0gKGxldmVsOiBzdHJpbmcpOiB2b2lkID0+IGxvZ2dlci5wdXNoTGV2ZWwobGV2ZWwpXG5leHBvcnQgcG9wTG9nTGV2ZWwgIDo9ICgpOiBzdHJpbmcgPT4gcmV0dXJuIGxvZ2dlci5wb3BMZXZlbCgpXG5leHBvcnQgY3VyTG9nTGV2ZWwgIDo9ICgpOiBzdHJpbmcgPT4gcmV0dXJuIGxvZ2dlci5jdXJMZXZlbCgpXG5cbmV4cG9ydCBEQkcgIDo9ICguLi5sSXRlbXM6IGFueVtdKTogdm9pZCA9PiBsb2dnZXIub3V0cHV0ICdkZWJ1ZycsIGxJdGVtc1xuZXhwb3J0IExPRyAgOj0gKC4uLmxJdGVtczogYW55W10pOiB2b2lkID0+IGxvZ2dlci5vdXRwdXQgJ2luZm8nLCBsSXRlbXNcbmV4cG9ydCBXQVJOIDo9ICguLi5sSXRlbXM6IGFueVtdKTogdm9pZCA9PiBsb2dnZXIub3V0cHV0ICd3YXJuJywgbEl0ZW1zXG5leHBvcnQgRVJSICA6PSAoLi4ubEl0ZW1zOiBhbnlbXSk6IHZvaWQgPT4gbG9nZ2VyLm91dHB1dCAnZXJyb3InLCBsSXRlbXNcbmV4cG9ydCBMT0dWQUxVRSA6PSAobGFiZWw6IHN0cmluZywgdmFsdWU6IGFueSk6IHZvaWQgPT5cblx0TE9HIFwiI3tsYWJlbH0gPSAje01MKHZhbHVlKX1cIlxuXHRyZXR1cm5cbmV4cG9ydCBEQkdWQUxVRSA6PSAobGFiZWw6IHN0cmluZywgdmFsdWU6IGFueSk6IHZvaWQgPT5cblx0REJHIFwiI3tsYWJlbH0gPSAje01MKHZhbHVlKX1cIlxuXG5leHBvcnQgZ2V0RnVsbExvZyAgIDo9ICgpOiBzdHJpbmcgPT4gcmV0dXJuIGxvZ2dlci5nZXRGdWxsTG9nKClcbmV4cG9ydCBnZXRMb2cgICAgICAgOj0gKCk6IHN0cmluZyA9PiByZXR1cm4gbG9nZ2VyLmdldExvZygpXG5leHBvcnQgY2xlYXJMb2cgICAgIDo9ICgpOiB2b2lkID0+IGxvZ2dlci5jbGVhckxvZygpXG4iXX0=