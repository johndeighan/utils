"use strict";
// logger.lib.civet

import {existsSync} from "@std/fs"
import {sprintf} from "@std/fmt/printf"
import {
	ConsoleHandler, FileHandler, setup, getLogger,
	LogRecord,
	} from "@std/log"

import {
	undef, defined, notdefined, assert,
	hash, isString,
	} from './datatypes.lib.ts'
import {
	croak, pass, sinceLoadStr, OL, ML,
	} from './llutils.lib.ts'

/**
 * @module logger - logging utilities
 */

const Deno = globalThis.Deno
const logFileName : string = "./logs/logs.txt"
const sepdash : string = '-'.repeat(32)
const sepeq : string   = '='.repeat(32)

// --- These are not exported
const isSep = (str : string): boolean => {
	return (str === sepdash) || (str === sepeq)
}

const getMainModule = (): string => {
	const path: string = new URL(Deno.mainModule).pathname
	return path.slice(1)
}

let indent : number = 0
const prefix = () => '   '.repeat(indent)

const hFileLabel: hash = {
	DEBUG: 'D ',
	INFO:  'I ',
	WARN:  'W ',
	ERROR: 'ERROR: '
	}

const hConsoleLabel: hash = {
	DEBUG: '',
	INFO:  '',
	WARN:  '',
	ERROR: ''
	}

// ---------------------------------------------------------------------------

const hLoggerConfig: hash = {
	handlers: {

		profile: new ConsoleHandler('DEBUG', {
			formatter: ((rec: LogRecord) => {
				const {datetime, msg, levelName} = rec
				const ts = sinceLoadStr()
				const label = hConsoleLabel[levelName]
				return `[${ts}] ${label}${prefix()}${msg}`
			}
				)
			}),

		pfile: new FileHandler('DEBUG', {
			filename: logFileName,
			mode: 'a',
			formatter: (rec) => {
				const {datetime, msg, levelName} = rec
				const ts = sinceLoadStr()
				const label = hFileLabel[levelName]
				return `[${ts}] ${label}${prefix()}${msg}`
			}
			}),

		console: new ConsoleHandler('DEBUG', {
			formatter: ((rec) => {
				const {levelName, msg} = rec
				assert(isString(msg), `Not a string: ${msg}`)
				if (msg.startsWith('=====  ')) {
					return ''
				}
				const label = hConsoleLabel[levelName]
				assert(defined(label), `No label for ${levelName}`)
				return `${label}${prefix()}${msg}`
			}
				)
			}),

		file: new FileHandler('DEBUG', {
			filename: logFileName,
			mode: 'a',
			formatter: (rec) => {
				const {levelName, msg} = rec
				if (isSep(msg)) {
					return msg
				}
				else if (msg.startsWith('=====  ')) {
					return msg
				}
				else {
					const label = hFileLabel[levelName]
					assert(defined(label), `No label for ${levelName}`)
					return `${label}${prefix()}${msg}`
				}
			}
				}),
	},

	// --- assign handlers to loggers
	//     must include:
	//        'profile', 'debug', 'info', 'warn', 'error', 'file' and 'silent'
	loggers: {
		profile: {
			level: "DEBUG",
			num: 1,
			handlers: ["profile", "pfile"]
			},
		debug: {
			level: "DEBUG",
			num: 2,
			handlers: ["console", "file"]
			},
		info: {
			level: "INFO",
			num: 3,
			handlers: ["console", "file"]
			},
		warn: {
			level: "WARN",
			num: 4,
			handlers: ["console", "file"]
			},
		error: {
			level: "ERROR",
			num: 5,
			handlers: ["console", "file"]
			},
		file: {
			level: "DEBUG",
			num: 6,
			handlers: ["file"]
			},
		silent: {
			level: "ERROR",
			num: 7,
			handlers: []
			}
		}
	}

await setup(hLoggerConfig)

export const INDENT = Symbol('indent')
export const UNDENT = Symbol('undent')
export const CLEAR  = Symbol('clear')

// ---------------------------------------------------------------------------
// levels: profile, debug, info, warn, error, file, silent

class LoggerEx {

	defLevel: string       = Deno.env.get('DEFAULT_LOGGER') || 'info'
	lLoggerStack: string[] = [this.defLevel]
	hConfig: hash          = hLoggerConfig
	hLoggers: hash         = this.hConfig.loggers
	silent: boolean        = false
	mainModule: string     = getMainModule()

	constructor() {
		this.check(this.defLevel)
	}

	curLevel(): string {
		const result = this.lLoggerStack.at(-1)
		if (result === undef) {
			throw new Error("empty stack")
		}
		else {
			return result
		}
	}

	levelChanged(): void {
		return
	}

	setLevel(level: string): void {
		this.check(level)
		this.lLoggerStack[this.lLoggerStack.length-1] = level
		this.levelChanged()
		return
	}

	pushLevel(level: string): void {
		this.check(level)
		this.lLoggerStack.push(level)
		this.levelChanged()
		return
	}

	popLevel(): string {
		assert((this.lLoggerStack.length > 0), "Empty logger stack")
		const level = this.lLoggerStack.pop()
		if (level === undef) {
			throw new Error("empty stack")
		}
		this.levelChanged()
		return level
	}

	isActive(level: string): boolean {
		this.check(level)
		const curNum = this.hLoggers[this.curLevel()].num
		const lvlNum = this.hLoggers[level].num
		return (lvlNum >= curNum)
	}

	output(level: string, lItems: any[]): void {
		const main = getMainModule()
		if (main !== this.mainModule) {
			const logger = getLogger('debug')
			logger.debug(`=====  ${main}  =====`)
			this.mainModule = main
		}
		if (this.isActive(level)) {
			for (const item of lItems) {
				switch(item) {
					case INDENT: {
						indent += 1;break;
					}
					case UNDENT: {
						indent = (indent===0) ? 0 : indent-1;break;
					}
					case CLEAR: {
						this.clearLog();break;
					}
					default: {
						const str = (
							isString(item)
								? item
								: ML(item)
							)
						const logger = getLogger(this.curLevel())
						switch(level) {
//							when 'profile'
//								logger.profile str
							case 'debug': {
								logger.debug(str);break;
							}
							case 'info': {
								logger.info(str);break;
							}
							case 'warn': {
								logger.warn(str);break;
							}
							case 'error': {
								logger.error(str);break;
							}
//							when 'file'
//								logger.file str
							case 'silent': {
								pass();break;
							}
							default: {
								logger.debug(str)
							}
						}
					}
				}
			}
		}
		return
	}

	flush(): void {
		this.hConfig.handlers.file.flush()
		this.hConfig.handlers.pfile.flush()
		return
	}

	clearLog(): void {
		this.flush()
		Deno.writeTextFileSync(logFileName, '')
		return
	}

	getFullLog(): string {
		this.flush()
		const text = Deno.readTextFileSync(logFileName)
		return text ? text.trim() : ''
	}

	getLog(): string {
		const text = this.getFullLog()
		const lLines = text ? text.split('\n') : []
		const lNewLines = lLines.filter((x) => !x.match(/^=====\s\s/))
		const resultStr = lNewLines.join('\n')
		return resultStr
	}

	check(level: string): void {
		assert(this.hLoggers[level], `Bad logger level: '${level}'`)
		return
	}
}

const logger: LoggerEx = new LoggerEx()

// ---------------------------------------------------------------------------

export const setLogLevel  = (level: string): void => logger.setLevel(level)
export const pushLogLevel = (level: string): void => logger.pushLevel(level)
export const popLogLevel  = (): string => { return logger.popLevel() }
export const curLogLevel  = (): string => { return logger.curLevel() }

export const DBG  = (...lItems: any[]): void => logger.output('debug', lItems)
export const LOG  = (...lItems: any[]): void => logger.output('info', lItems)
export const WARN = (...lItems: any[]): void => logger.output('warn', lItems)
export const ERR  = (...lItems: any[]): void => logger.output('error', lItems)
export const LOGVALUE = (label: string, value: any): void => {
	LOG(`${label} = ${ML(value)}`)
	return
}
export const DBGVALUE = (label: string, value: any): void => {
	DBG(`${label} = ${ML(value)}`)
}

export const getFullLog   = (): string => { return logger.getFullLog() }
export const getLog       = (): string => { return logger.getLog() }
export const clearLog     = (): void => logger.clearLog()

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3JjL2xpYi9sb2dnZXIubGliLmNpdmV0LnRzeCIsInNvdXJjZXMiOlsic3JjL2xpYi9sb2dnZXIubGliLmNpdmV0Il0sIm1hcHBpbmdzIjoiO0FBQUEsbUJBQWtCO0FBQ2xCLEFBQUE7QUFDQSxBQUFBLE1BQU0sQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTO0FBQ2xDLEFBQUEsQUFBQSxNQUFNLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsaUJBQWlCO0FBQ3ZDLEFBQUEsQUFBQSxNQUFNLENBQUMsQ0FBQztBQUNSLENBQUMsY0FBYyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsU0FBUyxDQUFDO0FBQy9DLENBQUMsU0FBUyxDQUFDO0FBQ1gsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVU7QUFDbEIsQUFBQTtBQUNBLEFBQUEsQUFBQSxNQUFNLENBQUMsQ0FBQztBQUNSLENBQUMsS0FBSyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsTUFBTSxDQUFDO0FBQ3BDLENBQUMsSUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDO0FBQ2hCLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxvQkFBb0I7QUFDNUIsQUFBQSxBQUFBLE1BQU0sQ0FBQyxDQUFDO0FBQ1IsQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUM7QUFDbkMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGtCQUFrQjtBQUMxQixBQUFBO0FBQ0EsQUFBQTtBQUNBO0FBQ0EsR0FBRztBQUNILEFBQUE7QUFDQSxBQUFBLEFBQUksTUFBSixJQUFJLENBQUMsQ0FBRSxDQUFDLFVBQVUsQ0FBQyxJQUFJO0FBQ3ZCLEFBQUEsQUFBb0IsTUFBcEIsV0FBVyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBRSxDQUFDLGlCQUFpQjtBQUN6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QTtBQUNKLEFBQUEsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDO0FBQ1YsQUFBQSxHQUFHLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQTtBQUNqQixBQUFBLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQ1QsQUFBQSxHQUFHLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsTUFBTSxDQUFDO0FBQ2hDLEdBQUcsQ0FBQyxDQUFBO0FBQ0osQUFBQSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7QUFDVCxBQUFBLEdBQUcsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFBO0FBQ2hCLEFBQUEsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDVCxBQUFBLEdBQUcsUUFBUSxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxNQUFNLENBQUM7QUFDaEMsR0FBRyxDQUFDLENBQUE7QUFDSixBQUFBLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUNULEFBQUEsR0FBRyxLQUFLLENBQUMsQ0FBQyxNQUFNLENBQUM7QUFDakIsQUFBQSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUNULEFBQUEsR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLE1BQU0sQ0FBQztBQUNoQyxHQUFHLENBQUMsQ0FBQTtBQUNKLEFBQUEsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDO0FBQ1YsQUFBQSxHQUFHLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQTtBQUNqQixBQUFBLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQ1QsQUFBQSxHQUFHLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsTUFBTSxDQUFDO0FBQ2hDLEdBQUcsQ0FBQyxDQUFBO0FBQ0osQUFBQSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7QUFDVCxBQUFBLEdBQUcsS0FBSyxDQUFDLENBQUMsT0FBTyxDQUFDO0FBQ2xCLEFBQUEsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFD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QUFBO0FBQ0EsQUFBQSxBQUFBLE1BQU0sQ0FBSyxNQUFKLEdBQUcsRUFBRSxDQUFFLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQSxBQUFDLE9BQU8sQ0FBQyxDQUFDLE1BQU0sQ0FBQTtBQUN4RSxBQUFBLEFBQUEsTUFBTSxDQUFLLE1BQUosR0FBRyxFQUFFLENBQUUsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFBLEFBQUMsTUFBTSxDQUFDLENBQUMsTUFBTSxDQUFBO0FBQ3ZFLEFBQUEsQUFBQSxNQUFNLENBQUssTUFBSixJQUFJLENBQUMsQ0FBRSxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUEsQUFBQyxNQUFNLENBQUMsQ0FBQyxNQUFNLENBQUE7QUFDdkUsQUFBQSxBQUFBLE1BQU0sQ0FBSyxNQUFKLEdBQUcsRUFBRSxDQUFFLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQSxBQUFDLE9BQU8sQ0FBQyxDQUFDLE1BQU0sQ0FBQTtBQUN4RSxBQUFBLEFBQUEsTUFBTSxDQUFTLE1BQVIsUUFBUSxDQUFDLENBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQSxDQUFBO0FBQ3ZELEFBQUEsQ0FBQyxHQUFHLENBQUEsQUFBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQzlCLEFBQUEsQ0FBQyxNO0FBQU0sQ0FBQTtBQUNQLEFBQUEsQUFBQSxNQUFNLENBQVMsTUFBUixRQUFRLENBQUMsQ0FBRSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFBLENBQUE7QUFDdkQsQUFBQSxDQUFDLEdBQUcsQ0FBQSxBQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEM7QUFBQSxDQUFBO0FBQzlCLEFBQUE7QUFDQSxBQUFBLEFBQUEsTUFBTSxDQUFhLE1BQVosVUFBVSxHQUFHLENBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUEsQ0FBQSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQSxDQUFBO0FBQy9ELEFBQUEsQUFBQSxNQUFNLENBQWEsTUFBWixNQUFNLE9BQU8sQ0FBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQSxDQUFBLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFBLENBQUE7QUFDM0QsQUFBQSxBQUFBLE1BQU0sQ0FBYSxNQUFaLFFBQVEsS0FBSyxDQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUNwRCIsIm5hbWVzIjpbXSwic291cmNlc0NvbnRlbnQiOlsiIyBsb2dnZXIubGliLmNpdmV0XG5cbmltcG9ydCB7ZXhpc3RzU3luY30gZnJvbSBcIkBzdGQvZnNcIlxuaW1wb3J0IHtzcHJpbnRmfSBmcm9tIFwiQHN0ZC9mbXQvcHJpbnRmXCJcbmltcG9ydCB7XG5cdENvbnNvbGVIYW5kbGVyLCBGaWxlSGFuZGxlciwgc2V0dXAsIGdldExvZ2dlcixcblx0TG9nUmVjb3JkLFxuXHR9IGZyb20gXCJAc3RkL2xvZ1wiXG5cbmltcG9ydCB7XG5cdHVuZGVmLCBkZWZpbmVkLCBub3RkZWZpbmVkLCBhc3NlcnQsXG5cdGhhc2gsIGlzU3RyaW5nLFxuXHR9IGZyb20gJy4vZGF0YXR5cGVzLmxpYi50cydcbmltcG9ydCB7XG5cdGNyb2FrLCBwYXNzLCBzaW5jZUxvYWRTdHIsIE9MLCBNTCxcblx0fSBmcm9tICcuL2xsdXRpbHMubGliLnRzJ1xuXG4vKipcbiAqIEBtb2R1bGUgbG9nZ2VyIC0gbG9nZ2luZyB1dGlsaXRpZXNcbiAqL1xuXG5EZW5vIDo9IGdsb2JhbFRoaXMuRGVub1xubG9nRmlsZU5hbWUgOiBzdHJpbmcgOj0gXCIuL2xvZ3MvbG9ncy50eHRcIlxuc2VwZGFzaCA6IHN0cmluZyA6PSAnLScucmVwZWF0KDMyKVxuc2VwZXEgOiBzdHJpbmcgICA6PSAnPScucmVwZWF0KDMyKVxuXG4jIC0tLSBUaGVzZSBhcmUgbm90IGV4cG9ydGVkXG5pc1NlcCA6PSAoc3RyIDogc3RyaW5nKTogYm9vbGVhbiA9PlxuXHRyZXR1cm4gKHN0ciA9PSBzZXBkYXNoKSB8fCAoc3RyID09IHNlcGVxKVxuXG5nZXRNYWluTW9kdWxlIDo9ICgpOiBzdHJpbmcgPT5cblx0cGF0aDogc3RyaW5nIDo9IG5ldyBVUkwoRGVuby5tYWluTW9kdWxlKS5wYXRobmFtZVxuXHRyZXR1cm4gcGF0aC5zbGljZSgxKVxuXG5sZXQgaW5kZW50IDogbnVtYmVyID0gMFxucHJlZml4IDo9ICgpID0+ICcgICAnLnJlcGVhdChpbmRlbnQpXG5cbmhGaWxlTGFiZWw6IGhhc2ggOj0ge1xuXHRERUJVRzogJ0QgJ1xuXHRJTkZPOiAgJ0kgJ1xuXHRXQVJOOiAgJ1cgJ1xuXHRFUlJPUjogJ0VSUk9SOiAnXG5cdH1cblxuaENvbnNvbGVMYWJlbDogaGFzaCA6PSB7XG5cdERFQlVHOiAnJ1xuXHRJTkZPOiAgJydcblx0V0FSTjogICcnXG5cdEVSUk9SOiAnJ1xuXHR9XG5cbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmhMb2dnZXJDb25maWc6IGhhc2ggOj0ge1xuXHRoYW5kbGVyczpcblxuXHRcdHByb2ZpbGU6IG5ldyBDb25zb2xlSGFuZGxlcignREVCVUcnLCB7XG5cdFx0XHRmb3JtYXR0ZXI6ICgocmVjOiBMb2dSZWNvcmQpID0+XG5cdFx0XHRcdHtkYXRldGltZSwgbXNnLCBsZXZlbE5hbWV9IDo9IHJlY1xuXHRcdFx0XHR0cyA6PSBzaW5jZUxvYWRTdHIoKVxuXHRcdFx0XHRsYWJlbCA6PSBoQ29uc29sZUxhYmVsW2xldmVsTmFtZV1cblx0XHRcdFx0cmV0dXJuIFwiWyN7dHN9XSAje2xhYmVsfSN7cHJlZml4KCl9I3ttc2d9XCJcblx0XHRcdFx0KVxuXHRcdFx0fSlcblxuXHRcdHBmaWxlOiBuZXcgRmlsZUhhbmRsZXIoJ0RFQlVHJywge1xuXHRcdFx0ZmlsZW5hbWU6IGxvZ0ZpbGVOYW1lXG5cdFx0XHRtb2RlOiAnYSdcblx0XHRcdGZvcm1hdHRlcjogKHJlYykgPT5cblx0XHRcdFx0e2RhdGV0aW1lLCBtc2csIGxldmVsTmFtZX0gOj0gcmVjXG5cdFx0XHRcdHRzIDo9IHNpbmNlTG9hZFN0cigpXG5cdFx0XHRcdGxhYmVsIDo9IGhGaWxlTGFiZWxbbGV2ZWxOYW1lXVxuXHRcdFx0XHRyZXR1cm4gXCJbI3t0c31dICN7bGFiZWx9I3twcmVmaXgoKX0je21zZ31cIlxuXHRcdFx0fSlcblxuXHRcdGNvbnNvbGU6IG5ldyBDb25zb2xlSGFuZGxlcignREVCVUcnLCB7XG5cdFx0XHRmb3JtYXR0ZXI6ICgocmVjKSA9PlxuXHRcdFx0XHR7bGV2ZWxOYW1lLCBtc2d9IDo9IHJlY1xuXHRcdFx0XHRhc3NlcnQgaXNTdHJpbmcobXNnKSwgXCJOb3QgYSBzdHJpbmc6ICN7bXNnfVwiXG5cdFx0XHRcdGlmIG1zZy5zdGFydHNXaXRoKCc9PT09PSAgJylcblx0XHRcdFx0XHRyZXR1cm4gJydcblx0XHRcdFx0bGFiZWwgOj0gaENvbnNvbGVMYWJlbFtsZXZlbE5hbWVdXG5cdFx0XHRcdGFzc2VydCBkZWZpbmVkKGxhYmVsKSwgXCJObyBsYWJlbCBmb3IgI3tsZXZlbE5hbWV9XCJcblx0XHRcdFx0cmV0dXJuIFwiI3tsYWJlbH0je3ByZWZpeCgpfSN7bXNnfVwiXG5cdFx0XHRcdClcblx0XHRcdH0pXG5cblx0XHRmaWxlOiBuZXcgRmlsZUhhbmRsZXIoJ0RFQlVHJywge1xuXHRcdFx0ZmlsZW5hbWU6IGxvZ0ZpbGVOYW1lXG5cdFx0XHRtb2RlOiAnYSdcblx0XHRcdGZvcm1hdHRlcjogKHJlYykgPT5cblx0XHRcdFx0e2xldmVsTmFtZSwgbXNnfSA6PSByZWNcblx0XHRcdFx0aWYgaXNTZXAobXNnKVxuXHRcdFx0XHRcdHJldHVybiBtc2dcblx0XHRcdFx0ZWxzZSBpZiBtc2cuc3RhcnRzV2l0aCgnPT09PT0gICcpXG5cdFx0XHRcdFx0cmV0dXJuIG1zZ1xuXHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0bGFiZWwgOj0gaEZpbGVMYWJlbFtsZXZlbE5hbWVdXG5cdFx0XHRcdFx0YXNzZXJ0IGRlZmluZWQobGFiZWwpLCBcIk5vIGxhYmVsIGZvciAje2xldmVsTmFtZX1cIlxuXHRcdFx0XHRcdHJldHVybiBcIiN7bGFiZWx9I3twcmVmaXgoKX0je21zZ31cIlxuXHRcdFx0XHR9KVxuXG5cdCMgLS0tIGFzc2lnbiBoYW5kbGVycyB0byBsb2dnZXJzXG5cdCMgICAgIG11c3QgaW5jbHVkZTpcblx0IyAgICAgICAgJ3Byb2ZpbGUnLCAnZGVidWcnLCAnaW5mbycsICd3YXJuJywgJ2Vycm9yJywgJ2ZpbGUnIGFuZCAnc2lsZW50J1xuXHRsb2dnZXJzOiB7XG5cdFx0cHJvZmlsZToge1xuXHRcdFx0bGV2ZWw6IFwiREVCVUdcIlxuXHRcdFx0bnVtOiAxXG5cdFx0XHRoYW5kbGVyczogW1wicHJvZmlsZVwiLCBcInBmaWxlXCJdXG5cdFx0XHR9XG5cdFx0ZGVidWc6IHtcblx0XHRcdGxldmVsOiBcIkRFQlVHXCJcblx0XHRcdG51bTogMlxuXHRcdFx0aGFuZGxlcnM6IFtcImNvbnNvbGVcIiwgXCJmaWxlXCJdXG5cdFx0XHR9XG5cdFx0aW5mbzoge1xuXHRcdFx0bGV2ZWw6IFwiSU5GT1wiXG5cdFx0XHRudW06IDNcblx0XHRcdGhhbmRsZXJzOiBbXCJjb25zb2xlXCIsIFwiZmlsZVwiXVxuXHRcdFx0fVxuXHRcdHdhcm46IHtcblx0XHRcdGxldmVsOiBcIldBUk5cIixcblx0XHRcdG51bTogNFxuXHRcdFx0aGFuZGxlcnM6IFtcImNvbnNvbGVcIiwgXCJmaWxlXCJdXG5cdFx0XHR9XG5cdFx0ZXJyb3I6IHtcblx0XHRcdGxldmVsOiBcIkVSUk9SXCJcblx0XHRcdG51bTogNVxuXHRcdFx0aGFuZGxlcnM6IFtcImNvbnNvbGVcIiwgXCJmaWxlXCJdXG5cdFx0XHR9XG5cdFx0ZmlsZToge1xuXHRcdFx0bGV2ZWw6IFwiREVCVUdcIixcblx0XHRcdG51bTogNlxuXHRcdFx0aGFuZGxlcnM6IFtcImZpbGVcIl1cblx0XHRcdH1cblx0XHRzaWxlbnQ6IHtcblx0XHRcdGxldmVsOiBcIkVSUk9SXCJcblx0XHRcdG51bTogN1xuXHRcdFx0aGFuZGxlcnM6IFtdXG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cbmF3YWl0IHNldHVwKGhMb2dnZXJDb25maWcpXG5cbmV4cG9ydCBJTkRFTlQgOj0gU3ltYm9sKCdpbmRlbnQnKVxuZXhwb3J0IFVOREVOVCA6PSBTeW1ib2woJ3VuZGVudCcpXG5leHBvcnQgQ0xFQVIgIDo9IFN5bWJvbCgnY2xlYXInKVxuXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuIyBsZXZlbHM6IHByb2ZpbGUsIGRlYnVnLCBpbmZvLCB3YXJuLCBlcnJvciwgZmlsZSwgc2lsZW50XG5cbmNsYXNzIExvZ2dlckV4XG5cblx0ZGVmTGV2ZWw6IHN0cmluZyAgICAgICA9IERlbm8uZW52LmdldCgnREVGQVVMVF9MT0dHRVInKSB8fCAnaW5mbydcblx0bExvZ2dlclN0YWNrOiBzdHJpbmdbXSA9IFtAZGVmTGV2ZWxdXG5cdGhDb25maWc6IGhhc2ggICAgICAgICAgPSBoTG9nZ2VyQ29uZmlnXG5cdGhMb2dnZXJzOiBoYXNoICAgICAgICAgPSBAaENvbmZpZy5sb2dnZXJzXG5cdHNpbGVudDogYm9vbGVhbiAgICAgICAgPSBmYWxzZVxuXHRtYWluTW9kdWxlOiBzdHJpbmcgICAgID0gZ2V0TWFpbk1vZHVsZSgpXG5cblx0Y29uc3RydWN0b3IoKVxuXHRcdEBjaGVjayBAZGVmTGV2ZWxcblxuXHRjdXJMZXZlbCgpOiBzdHJpbmdcblx0XHRyZXN1bHQgOj0gQGxMb2dnZXJTdGFjay5hdCgtMSlcblx0XHRpZiAocmVzdWx0ID09IHVuZGVmKVxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiZW1wdHkgc3RhY2tcIilcblx0XHRlbHNlXG5cdFx0XHRyZXR1cm4gcmVzdWx0XG5cblx0bGV2ZWxDaGFuZ2VkKCk6IHZvaWRcblx0XHRyZXR1cm5cblxuXHRzZXRMZXZlbChsZXZlbDogc3RyaW5nKTogdm9pZFxuXHRcdEBjaGVjayBsZXZlbFxuXHRcdEBsTG9nZ2VyU3RhY2tbQGxMb2dnZXJTdGFjay5sZW5ndGgtMV0gPSBsZXZlbFxuXHRcdEBsZXZlbENoYW5nZWQoKVxuXHRcdHJldHVyblxuXG5cdHB1c2hMZXZlbChsZXZlbDogc3RyaW5nKTogdm9pZFxuXHRcdEBjaGVjayBsZXZlbFxuXHRcdEBsTG9nZ2VyU3RhY2sucHVzaCBsZXZlbFxuXHRcdEBsZXZlbENoYW5nZWQoKVxuXHRcdHJldHVyblxuXG5cdHBvcExldmVsKCk6IHN0cmluZ1xuXHRcdGFzc2VydCAoQGxMb2dnZXJTdGFjay5sZW5ndGggPiAwKSwgXCJFbXB0eSBsb2dnZXIgc3RhY2tcIlxuXHRcdGxldmVsIDo9IEBsTG9nZ2VyU3RhY2sucG9wKClcblx0XHRpZiAobGV2ZWwgPT0gdW5kZWYpXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJlbXB0eSBzdGFja1wiKVxuXHRcdEBsZXZlbENoYW5nZWQoKVxuXHRcdHJldHVybiBsZXZlbFxuXG5cdGlzQWN0aXZlKGxldmVsOiBzdHJpbmcpOiBib29sZWFuXG5cdFx0QGNoZWNrIGxldmVsXG5cdFx0Y3VyTnVtIDo9IEBoTG9nZ2Vyc1tAY3VyTGV2ZWwoKV0ubnVtXG5cdFx0bHZsTnVtIDo9IEBoTG9nZ2Vyc1tsZXZlbF0ubnVtXG5cdFx0cmV0dXJuIChsdmxOdW0gPj0gY3VyTnVtKVxuXG5cdG91dHB1dChsZXZlbDogc3RyaW5nLCBsSXRlbXM6IGFueVtdKTogdm9pZFxuXHRcdG1haW4gOj0gZ2V0TWFpbk1vZHVsZSgpXG5cdFx0aWYgKG1haW4gIT0gQG1haW5Nb2R1bGUpXG5cdFx0XHRsb2dnZXIgOj0gZ2V0TG9nZ2VyKCdkZWJ1ZycpXG5cdFx0XHRsb2dnZXIuZGVidWcgXCI9PT09PSAgI3ttYWlufSAgPT09PT1cIlxuXHRcdFx0QG1haW5Nb2R1bGUgPSBtYWluXG5cdFx0aWYgQGlzQWN0aXZlKGxldmVsKVxuXHRcdFx0Zm9yIGl0ZW0gb2YgbEl0ZW1zXG5cdFx0XHRcdHN3aXRjaCBpdGVtXG5cdFx0XHRcdFx0d2hlbiBJTkRFTlRcblx0XHRcdFx0XHRcdGluZGVudCArPSAxXG5cdFx0XHRcdFx0d2hlbiBVTkRFTlRcblx0XHRcdFx0XHRcdGluZGVudCA9IChpbmRlbnQ9PTApID8gMCA6IGluZGVudC0xXG5cdFx0XHRcdFx0d2hlbiBDTEVBUlxuXHRcdFx0XHRcdFx0QGNsZWFyTG9nKClcblx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHRzdHIgOj0gKFxuXHRcdFx0XHRcdFx0XHRpc1N0cmluZyhpdGVtKVxuXHRcdFx0XHRcdFx0XHRcdD8gaXRlbVxuXHRcdFx0XHRcdFx0XHRcdDogTUwoaXRlbSlcblx0XHRcdFx0XHRcdFx0KVxuXHRcdFx0XHRcdFx0bG9nZ2VyIDo9IGdldExvZ2dlcihAY3VyTGV2ZWwoKSlcblx0XHRcdFx0XHRcdHN3aXRjaCBsZXZlbFxuI1x0XHRcdFx0XHRcdFx0d2hlbiAncHJvZmlsZSdcbiNcdFx0XHRcdFx0XHRcdFx0bG9nZ2VyLnByb2ZpbGUgc3RyXG5cdFx0XHRcdFx0XHRcdHdoZW4gJ2RlYnVnJ1xuXHRcdFx0XHRcdFx0XHRcdGxvZ2dlci5kZWJ1ZyBzdHJcblx0XHRcdFx0XHRcdFx0d2hlbiAnaW5mbydcblx0XHRcdFx0XHRcdFx0XHRsb2dnZXIuaW5mbyBzdHJcblx0XHRcdFx0XHRcdFx0d2hlbiAnd2Fybidcblx0XHRcdFx0XHRcdFx0XHRsb2dnZXIud2FybiBzdHJcblx0XHRcdFx0XHRcdFx0d2hlbiAnZXJyb3InXG5cdFx0XHRcdFx0XHRcdFx0bG9nZ2VyLmVycm9yIHN0clxuI1x0XHRcdFx0XHRcdFx0d2hlbiAnZmlsZSdcbiNcdFx0XHRcdFx0XHRcdFx0bG9nZ2VyLmZpbGUgc3RyXG5cdFx0XHRcdFx0XHRcdHdoZW4gJ3NpbGVudCdcblx0XHRcdFx0XHRcdFx0XHRwYXNzKClcblx0XHRcdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0XHRcdGxvZ2dlci5kZWJ1ZyBzdHJcblx0XHRyZXR1cm5cblxuXHRmbHVzaCgpOiB2b2lkXG5cdFx0QGhDb25maWcuaGFuZGxlcnMuZmlsZS5mbHVzaCgpXG5cdFx0QGhDb25maWcuaGFuZGxlcnMucGZpbGUuZmx1c2goKVxuXHRcdHJldHVyblxuXG5cdGNsZWFyTG9nKCk6IHZvaWRcblx0XHRAZmx1c2goKVxuXHRcdERlbm8ud3JpdGVUZXh0RmlsZVN5bmMgbG9nRmlsZU5hbWUsICcnXG5cdFx0cmV0dXJuXG5cblx0Z2V0RnVsbExvZygpOiBzdHJpbmdcblx0XHRAZmx1c2goKVxuXHRcdHRleHQgOj0gRGVuby5yZWFkVGV4dEZpbGVTeW5jKGxvZ0ZpbGVOYW1lKVxuXHRcdHJldHVybiB0ZXh0ID8gdGV4dC50cmltKCkgOiAnJ1xuXG5cdGdldExvZygpOiBzdHJpbmdcblx0XHR0ZXh0IDo9IEBnZXRGdWxsTG9nKClcblx0XHRsTGluZXMgOj0gdGV4dCA/IHRleHQuc3BsaXQoJ1xcbicpIDogW11cblx0XHRsTmV3TGluZXMgOj0gbExpbmVzLmZpbHRlcigoeCkgPT4gbm90IHgubWF0Y2goL149PT09PVxcc1xccy8pKVxuXHRcdHJlc3VsdFN0ciA6PSBsTmV3TGluZXMuam9pbignXFxuJylcblx0XHRyZXR1cm4gcmVzdWx0U3RyXG5cblx0Y2hlY2sobGV2ZWw6IHN0cmluZyk6IHZvaWRcblx0XHRhc3NlcnQgQGhMb2dnZXJzW2xldmVsXSwgXCJCYWQgbG9nZ2VyIGxldmVsOiAnI3tsZXZlbH0nXCJcblx0XHRyZXR1cm5cblxubG9nZ2VyOiBMb2dnZXJFeCA6PSBuZXcgTG9nZ2VyRXgoKVxuXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgc2V0TG9nTGV2ZWwgIDo9IChsZXZlbDogc3RyaW5nKTogdm9pZCA9PiBsb2dnZXIuc2V0TGV2ZWwobGV2ZWwpXG5leHBvcnQgcHVzaExvZ0xldmVsIDo9IChsZXZlbDogc3RyaW5nKTogdm9pZCA9PiBsb2dnZXIucHVzaExldmVsKGxldmVsKVxuZXhwb3J0IHBvcExvZ0xldmVsICA6PSAoKTogc3RyaW5nID0+IHJldHVybiBsb2dnZXIucG9wTGV2ZWwoKVxuZXhwb3J0IGN1ckxvZ0xldmVsICA6PSAoKTogc3RyaW5nID0+IHJldHVybiBsb2dnZXIuY3VyTGV2ZWwoKVxuXG5leHBvcnQgREJHICA6PSAoLi4ubEl0ZW1zOiBhbnlbXSk6IHZvaWQgPT4gbG9nZ2VyLm91dHB1dCAnZGVidWcnLCBsSXRlbXNcbmV4cG9ydCBMT0cgIDo9ICguLi5sSXRlbXM6IGFueVtdKTogdm9pZCA9PiBsb2dnZXIub3V0cHV0ICdpbmZvJywgbEl0ZW1zXG5leHBvcnQgV0FSTiA6PSAoLi4ubEl0ZW1zOiBhbnlbXSk6IHZvaWQgPT4gbG9nZ2VyLm91dHB1dCAnd2FybicsIGxJdGVtc1xuZXhwb3J0IEVSUiAgOj0gKC4uLmxJdGVtczogYW55W10pOiB2b2lkID0+IGxvZ2dlci5vdXRwdXQgJ2Vycm9yJywgbEl0ZW1zXG5leHBvcnQgTE9HVkFMVUUgOj0gKGxhYmVsOiBzdHJpbmcsIHZhbHVlOiBhbnkpOiB2b2lkID0+XG5cdExPRyBcIiN7bGFiZWx9ID0gI3tNTCh2YWx1ZSl9XCJcblx0cmV0dXJuXG5leHBvcnQgREJHVkFMVUUgOj0gKGxhYmVsOiBzdHJpbmcsIHZhbHVlOiBhbnkpOiB2b2lkID0+XG5cdERCRyBcIiN7bGFiZWx9ID0gI3tNTCh2YWx1ZSl9XCJcblxuZXhwb3J0IGdldEZ1bGxMb2cgICA6PSAoKTogc3RyaW5nID0+IHJldHVybiBsb2dnZXIuZ2V0RnVsbExvZygpXG5leHBvcnQgZ2V0TG9nICAgICAgIDo9ICgpOiBzdHJpbmcgPT4gcmV0dXJuIGxvZ2dlci5nZXRMb2coKVxuZXhwb3J0IGNsZWFyTG9nICAgICA6PSAoKTogdm9pZCA9PiBsb2dnZXIuY2xlYXJMb2coKVxuIl19