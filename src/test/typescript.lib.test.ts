"use strict";
// typescript.lib.test.civet

import {SourceFile} from 'npm:typescript'

import {
	undef, isHash, isEmpty, nonEmpty, normalizeCode,
	} from 'datatypes'
import {pass, o, s, t} from 'llutils'
import {DBG} from 'logger'
import {getCmdArgs} from 'cmd-args'
import {slurp, withExt} from 'fsys'
import {
	typeCheckCode, splitFuncStr, getSymbolsFromType,
	getImportCode, getTsCode, checkType,
	ts2ast, ast2ts, typeCheckFiles, astAsString,
	} from 'typescript'
import {
	equal, like, succeeds, fails, truthy, falsy, isType, setDirTree,
	} from 'unit-test'

getCmdArgs()

// ---------------------------------------------------------------------------

const setup = (): void => {

	DBG("setDirTree()")

	setDirTree('src/test/typescript', `tstest.ts
	const str: string = 'abc'
tstest2.ts
	const func1 = (str: string): boolean =>
		return true`)
}

setup()

// ---------------------------------------------------------------------------

DBG("typeCheckCode(tsCode)")

truthy(isEmpty(typeCheckCode("let s: string = 'abc';")))
truthy(nonEmpty(typeCheckCode("let s: string = 42;")))

DBG("ts2ast(tsCode)", "astAsString(ast)")

const ast = ts2ast(slurp('src/test/typescript/tstest2.ts'))
equal(astAsString(ast), s`kind: 308
kindStr: SourceFile
statements:
	-
		kind: 244
		kindStr: FirstStatement
		declarationList:
			kind: 262
			kindStr: VariableDeclarationList
			declarations:
				-
					kind: 261
					kindStr: VariableDeclaration
					name:
						kind: 80
						kindStr: Identifier
						escapedText: func1
					initializer:
						kind: 220
						kindStr: ArrowFunction
						parameters:
							-
								kind: 170
								kindStr: Parameter
								name:
									kind: 80
									kindStr: Identifier
									escapedText: str
								type:
									kind: 154
									kindStr: StringKeyword
						type:
							kind: 136
							kindStr: BooleanKeyword
						equalsGreaterThanToken:
							kind: 39
							kindStr: EqualsGreaterThanToken
						body:
							kind: 242
							kindStr: Block
							statements:
								-
									kind: 254
									kindStr: ReturnStatement
									expression:
										kind: 112
										kindStr: TrueKeyword
							multiLine: .true.
endOfFileToken:
	kind: 1
	kindStr: EndOfFileToken
text: const˳func1˳=˳(str:˳string):˳boolean˳=>↓→return˳true
fileName: temp.ts
scriptKind: 3
isDeclarationFile: .false.
nodeCount: 16
identifierCount: 3
symbolCount: 0
parseDiagnostics:
	-
		file: .REF /.
		start: 41
		length: 6
		messageText: '{'˳expected.
		category: 1
		code: 1005
	-
		file: .REF /.
		start: 52
		length: 0
		messageText: '}'˳expected.
		category: 1
		code: 1005`)
DBG("getSymbolsFromType(typeStr)")

equal(getSymbolsFromType('integer'), ['integer'])
equal(getSymbolsFromType('hashof<integer>'), ['hashof','integer'])

DBG("getImportCode(typeStr)")

equal(getImportCode('integer'), `import {integer} from 'datatypes';`)
equal(getImportCode('hashof<integer>'), `import {hashof, integer} from 'datatypes';`)

DBG("splitFuncStr(valueStr)")

equal(splitFuncStr("abc"), undef)
equal(splitFuncStr("() => true"), [[], 'true'])
equal(splitFuncStr("(  ) => true"), [[], 'true'])
equal(splitFuncStr("(a,b,c) => false"), [
	['a','b','c'],
	'false'
	])
equal(splitFuncStr("( a , b,c ) => false"), [
	['a','b','c'],
	'false'
	])
equal(splitFuncStr("(a: string, b)=>true"), [
	['a: string', 'b'],
	'true'
	])

DBG("getTsCode(typeStr, valueStr)")

equal(getTsCode('integer', '42'), 'const x: integer = 42')
equal(getTsCode('TFilterFunc', '(x) => true'),
	'const x: TFilterFunc = (x: unknown) => true')

DBG("checkType(x, typeStr)")

equal(checkType(42, 'number'), [])


//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQzpcXFVzZXJzXFxqb2huZFxcdXRpbHNcXHNyY1xcdGVzdFxcdHlwZXNjcmlwdC5saWIudGVzdC5jaXZldC50c3giLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcam9obmRcXHV0aWxzXFxzcmNcXHRlc3RcXHR5cGVzY3JpcHQubGliLnRlc3QuY2l2ZXQiXSwibWFwcGluZ3MiOiI7QUFBQSw0QkFBMkI7QUFDM0IsQUFBQTtBQUNBLEFBQUEsTUFBTSxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsSUFBSSxDQUFDLGdCQUFnQjtBQUN6QyxBQUFBO0FBQ0EsQUFBQSxBQUFBLE1BQU0sQ0FBQyxDQUFDO0FBQ1IsQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxhQUFhLENBQUM7QUFDakQsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFdBQVc7QUFDbkIsQUFBQSxBQUFBLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTO0FBQ3JDLEFBQUEsQUFBQSxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUTtBQUMxQixBQUFBLEFBQUEsTUFBTSxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVU7QUFDbkMsQUFBQSxBQUFBLE1BQU0sQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNO0FBQ25DLEFBQUEsQUFBQSxNQUFNLENBQUMsQ0FBQztBQUNSLENBQUMsYUFBYSxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsa0JBQWtCLENBQUM7QUFDakQsQ0FBQyxhQUFhLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxTQUFTLENBQUM7QUFDckMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxjQUFjLENB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QyxDQUFHLGtDQUVsQyxDQUFHLENBQUE7QUFDSixBQUFBLEFBQUEsS0FBSyxDQUFBLEFBQUMsYUFBYSxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxDQUFHLDBDQUUxQyxDQUFHLENBQUE7QUFDSixBQUFBO0FBQ0EsQUFBQSxBQUFBLEdBQUcsQ0FBQSxBQUFDLHdCQUF3QixDQUFBO0FBQzVCLEFBQUE7QUFDQSxBQUFBLEFBQUEsS0FBSyxDQUFBLEFBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFBO0FBQ2hDLEFBQUEsQUFBQSxLQUFLLENBQUEsQUFBQyxZQUFZLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUE7QUFDOUMsQUFBQSxBQUFBLEtBQUssQ0FBQSxBQUFDLFlBQVksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQTtBQUNoRCxBQUFBLEFBQUEsS0FBSyxDQUFBLEFBQUMsWUFBWSxDQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3pDLEFBQUEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUE7QUFDZCxBQUFBLENBQUMsT0FBTztBQUNSLEFBQUEsQ0FBQyxDQUFDLENBQUE7QUFDRixBQUFBLEFBQUEsS0FBSyxDQUFBLEFBQUMsWUFBWSxDQUFDLHNCQUFzQixDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzdDLEFBQUEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUE7QUFDZCxBQUFBLENBQUMsT0FBTztBQUNSLEFBQUEsQ0FBQyxDQUFDLENBQUE7QUFDRixBQUFBLEFBQUEsS0FBSyxDQUFBLEFBQUMsWUFBWSxDQUFDLHNCQUFzQixDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzdDLEFBQUEsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFBO0FBQ25CLEFBQUEsQ0FBQyxNQUFNO0FBQ1AsQUFBQSxDQUFDLENBQUMsQ0FBQTtBQUNGLEFBQUE7QUFDQSxBQUFBLEFBQUEsR0FBRyxDQUFBLEFBQUMsOEJBQThCLENBQUE7QUFDbEMsQUFBQTtBQUNBLEFBQUEsQUFBQSxLQUFLLENBQUEsQUFBQyxTQUFTLENBQUMsU0FBUyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyx1QkFBdUIsQ0FBQTtBQUN6RCxBQUFBLEFBQUEsS0FBSyxDQUFBLEFBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0FBQzlDLEFBQUEsQ0FBQyw2Q0FBNkMsQ0FBQTtBQUM5QyxBQUFBO0FBQ0EsQUFBQSxBQUFBLEdBQUcsQ0FBQSxBQUFDLHVCQUF1QixDQUFBO0FBQzNCLEFBQUE7QUFDQSxBQUFBLEFBQUEsS0FBSyxDQUFBLEFBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDakM7QUFDQSIsIm5hbWVzIjpbXSwic291cmNlc0NvbnRlbnQiOlsiIyB0eXBlc2NyaXB0LmxpYi50ZXN0LmNpdmV0XHJcblxyXG5pbXBvcnQge1NvdXJjZUZpbGV9IGZyb20gJ25wbTp0eXBlc2NyaXB0J1xyXG5cclxuaW1wb3J0IHtcclxuXHR1bmRlZiwgaXNIYXNoLCBpc0VtcHR5LCBub25FbXB0eSwgbm9ybWFsaXplQ29kZSxcclxuXHR9IGZyb20gJ2RhdGF0eXBlcydcclxuaW1wb3J0IHtwYXNzLCBvLCBzLCB0fSBmcm9tICdsbHV0aWxzJ1xyXG5pbXBvcnQge0RCR30gZnJvbSAnbG9nZ2VyJ1xyXG5pbXBvcnQge2dldENtZEFyZ3N9IGZyb20gJ2NtZC1hcmdzJ1xyXG5pbXBvcnQge3NsdXJwLCB3aXRoRXh0fSBmcm9tICdmc3lzJ1xyXG5pbXBvcnQge1xyXG5cdHR5cGVDaGVja0NvZGUsIHNwbGl0RnVuY1N0ciwgZ2V0U3ltYm9sc0Zyb21UeXBlLFxyXG5cdGdldEltcG9ydENvZGUsIGdldFRzQ29kZSwgY2hlY2tUeXBlLFxyXG5cdHRzMmFzdCwgYXN0MnRzLCB0eXBlQ2hlY2tGaWxlcywgYXN0QXNTdHJpbmcsXHJcblx0fSBmcm9tICd0eXBlc2NyaXB0J1xyXG5pbXBvcnQge1xyXG5cdGVxdWFsLCBsaWtlLCBzdWNjZWVkcywgZmFpbHMsIHRydXRoeSwgZmFsc3ksIGlzVHlwZSwgc2V0RGlyVHJlZSxcclxuXHR9IGZyb20gJ3VuaXQtdGVzdCdcclxuXHJcbmdldENtZEFyZ3MoKVxyXG5cclxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbnNldHVwIDo9ICgpOiB2b2lkID0+XHJcblxyXG5cdERCRyBcInNldERpclRyZWUoKVwiXHJcblxyXG5cdHNldERpclRyZWUgJ3NyYy90ZXN0L3R5cGVzY3JpcHQnLCBcIlwiXCJcclxuXHRcdHRzdGVzdC50c1xyXG5cdFx0XHRjb25zdCBzdHI6IHN0cmluZyA9ICdhYmMnXHJcblx0XHR0c3Rlc3QyLnRzXHJcblx0XHRcdGNvbnN0IGZ1bmMxID0gKHN0cjogc3RyaW5nKTogYm9vbGVhbiA9PlxyXG5cdFx0XHRcdHJldHVybiB0cnVlXHJcblx0XHRcIlwiXCJcclxuXHJcbnNldHVwKClcclxuXHJcbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5EQkcgXCJ0eXBlQ2hlY2tDb2RlKHRzQ29kZSlcIlxyXG5cclxudHJ1dGh5IGlzRW1wdHkodHlwZUNoZWNrQ29kZShcImxldCBzOiBzdHJpbmcgPSAnYWJjJztcIikpXHJcbnRydXRoeSBub25FbXB0eSh0eXBlQ2hlY2tDb2RlKFwibGV0IHM6IHN0cmluZyA9IDQyO1wiKSlcclxuXHJcbkRCRyBcInRzMmFzdCh0c0NvZGUpXCIsIFwiYXN0QXNTdHJpbmcoYXN0KVwiXHJcblxyXG5hc3QgOj0gdHMyYXN0KHNsdXJwKCdzcmMvdGVzdC90eXBlc2NyaXB0L3RzdGVzdDIudHMnKSlcclxuZXF1YWwgYXN0QXNTdHJpbmcoYXN0KSwgc1wiXCJcIlxyXG5cdGtpbmQ6IDMwOFxyXG5cdGtpbmRTdHI6IFNvdXJjZUZpbGVcclxuXHRzdGF0ZW1lbnRzOlxyXG5cdFx0LVxyXG5cdFx0XHRraW5kOiAyNDRcclxuXHRcdFx0a2luZFN0cjogRmlyc3RTdGF0ZW1lbnRcclxuXHRcdFx0ZGVjbGFyYXRpb25MaXN0OlxyXG5cdFx0XHRcdGtpbmQ6IDI2MlxyXG5cdFx0XHRcdGtpbmRTdHI6IFZhcmlhYmxlRGVjbGFyYXRpb25MaXN0XHJcblx0XHRcdFx0ZGVjbGFyYXRpb25zOlxyXG5cdFx0XHRcdFx0LVxyXG5cdFx0XHRcdFx0XHRraW5kOiAyNjFcclxuXHRcdFx0XHRcdFx0a2luZFN0cjogVmFyaWFibGVEZWNsYXJhdGlvblxyXG5cdFx0XHRcdFx0XHRuYW1lOlxyXG5cdFx0XHRcdFx0XHRcdGtpbmQ6IDgwXHJcblx0XHRcdFx0XHRcdFx0a2luZFN0cjogSWRlbnRpZmllclxyXG5cdFx0XHRcdFx0XHRcdGVzY2FwZWRUZXh0OiBmdW5jMVxyXG5cdFx0XHRcdFx0XHRpbml0aWFsaXplcjpcclxuXHRcdFx0XHRcdFx0XHRraW5kOiAyMjBcclxuXHRcdFx0XHRcdFx0XHRraW5kU3RyOiBBcnJvd0Z1bmN0aW9uXHJcblx0XHRcdFx0XHRcdFx0cGFyYW1ldGVyczpcclxuXHRcdFx0XHRcdFx0XHRcdC1cclxuXHRcdFx0XHRcdFx0XHRcdFx0a2luZDogMTcwXHJcblx0XHRcdFx0XHRcdFx0XHRcdGtpbmRTdHI6IFBhcmFtZXRlclxyXG5cdFx0XHRcdFx0XHRcdFx0XHRuYW1lOlxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGtpbmQ6IDgwXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0a2luZFN0cjogSWRlbnRpZmllclxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGVzY2FwZWRUZXh0OiBzdHJcclxuXHRcdFx0XHRcdFx0XHRcdFx0dHlwZTpcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRraW5kOiAxNTRcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRraW5kU3RyOiBTdHJpbmdLZXl3b3JkXHJcblx0XHRcdFx0XHRcdFx0dHlwZTpcclxuXHRcdFx0XHRcdFx0XHRcdGtpbmQ6IDEzNlxyXG5cdFx0XHRcdFx0XHRcdFx0a2luZFN0cjogQm9vbGVhbktleXdvcmRcclxuXHRcdFx0XHRcdFx0XHRlcXVhbHNHcmVhdGVyVGhhblRva2VuOlxyXG5cdFx0XHRcdFx0XHRcdFx0a2luZDogMzlcclxuXHRcdFx0XHRcdFx0XHRcdGtpbmRTdHI6IEVxdWFsc0dyZWF0ZXJUaGFuVG9rZW5cclxuXHRcdFx0XHRcdFx0XHRib2R5OlxyXG5cdFx0XHRcdFx0XHRcdFx0a2luZDogMjQyXHJcblx0XHRcdFx0XHRcdFx0XHRraW5kU3RyOiBCbG9ja1xyXG5cdFx0XHRcdFx0XHRcdFx0c3RhdGVtZW50czpcclxuXHRcdFx0XHRcdFx0XHRcdFx0LVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGtpbmQ6IDI1NFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGtpbmRTdHI6IFJldHVyblN0YXRlbWVudFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGV4cHJlc3Npb246XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRraW5kOiAxMTJcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGtpbmRTdHI6IFRydWVLZXl3b3JkXHJcblx0XHRcdFx0XHRcdFx0XHRtdWx0aUxpbmU6IC50cnVlLlxyXG5cdGVuZE9mRmlsZVRva2VuOlxyXG5cdFx0a2luZDogMVxyXG5cdFx0a2luZFN0cjogRW5kT2ZGaWxlVG9rZW5cclxuXHR0ZXh0OiBjb25zdMuzZnVuYzHLsz3LsyhzdHI6y7NzdHJpbmcpOsuzYm9vbGVhbsuzPT7ihpPihpJyZXR1cm7Ls3RydWVcclxuXHRmaWxlTmFtZTogdGVtcC50c1xyXG5cdHNjcmlwdEtpbmQ6IDNcclxuXHRpc0RlY2xhcmF0aW9uRmlsZTogLmZhbHNlLlxyXG5cdG5vZGVDb3VudDogMTZcclxuXHRpZGVudGlmaWVyQ291bnQ6IDNcclxuXHRzeW1ib2xDb3VudDogMFxyXG5cdHBhcnNlRGlhZ25vc3RpY3M6XHJcblx0XHQtXHJcblx0XHRcdGZpbGU6IC5SRUYgLy5cclxuXHRcdFx0c3RhcnQ6IDQxXHJcblx0XHRcdGxlbmd0aDogNlxyXG5cdFx0XHRtZXNzYWdlVGV4dDogJ3sny7NleHBlY3RlZC5cclxuXHRcdFx0Y2F0ZWdvcnk6IDFcclxuXHRcdFx0Y29kZTogMTAwNVxyXG5cdFx0LVxyXG5cdFx0XHRmaWxlOiAuUkVGIC8uXHJcblx0XHRcdHN0YXJ0OiA1MlxyXG5cdFx0XHRsZW5ndGg6IDBcclxuXHRcdFx0bWVzc2FnZVRleHQ6ICd9J8uzZXhwZWN0ZWQuXHJcblx0XHRcdGNhdGVnb3J5OiAxXHJcblx0XHRcdGNvZGU6IDEwMDVcclxuXHRcIlwiXCJcclxuREJHIFwiZ2V0U3ltYm9sc0Zyb21UeXBlKHR5cGVTdHIpXCJcclxuXHJcbmVxdWFsIGdldFN5bWJvbHNGcm9tVHlwZSgnaW50ZWdlcicpLCBbJ2ludGVnZXInXVxyXG5lcXVhbCBnZXRTeW1ib2xzRnJvbVR5cGUoJ2hhc2hvZjxpbnRlZ2VyPicpLCBbJ2hhc2hvZicsJ2ludGVnZXInXVxyXG5cclxuREJHIFwiZ2V0SW1wb3J0Q29kZSh0eXBlU3RyKVwiXHJcblxyXG5lcXVhbCBnZXRJbXBvcnRDb2RlKCdpbnRlZ2VyJyksIFwiXCJcIlxyXG5cdGltcG9ydCB7aW50ZWdlcn0gZnJvbSAnZGF0YXR5cGVzJztcclxuXHRcIlwiXCJcclxuZXF1YWwgZ2V0SW1wb3J0Q29kZSgnaGFzaG9mPGludGVnZXI+JyksIFwiXCJcIlxyXG5cdGltcG9ydCB7aGFzaG9mLCBpbnRlZ2VyfSBmcm9tICdkYXRhdHlwZXMnO1xyXG5cdFwiXCJcIlxyXG5cclxuREJHIFwic3BsaXRGdW5jU3RyKHZhbHVlU3RyKVwiXHJcblxyXG5lcXVhbCBzcGxpdEZ1bmNTdHIoXCJhYmNcIiksIHVuZGVmXHJcbmVxdWFsIHNwbGl0RnVuY1N0cihcIigpID0+IHRydWVcIiksIFtbXSwgJ3RydWUnXVxyXG5lcXVhbCBzcGxpdEZ1bmNTdHIoXCIoICApID0+IHRydWVcIiksIFtbXSwgJ3RydWUnXVxyXG5lcXVhbCBzcGxpdEZ1bmNTdHIoXCIoYSxiLGMpID0+IGZhbHNlXCIpLCBbXHJcblx0WydhJywnYicsJ2MnXVxyXG5cdCdmYWxzZSdcclxuXHRdXHJcbmVxdWFsIHNwbGl0RnVuY1N0cihcIiggYSAsIGIsYyApID0+IGZhbHNlXCIpLCBbXHJcblx0WydhJywnYicsJ2MnXVxyXG5cdCdmYWxzZSdcclxuXHRdXHJcbmVxdWFsIHNwbGl0RnVuY1N0cihcIihhOiBzdHJpbmcsIGIpPT50cnVlXCIpLCBbXHJcblx0WydhOiBzdHJpbmcnLCAnYiddXHJcblx0J3RydWUnXHJcblx0XVxyXG5cclxuREJHIFwiZ2V0VHNDb2RlKHR5cGVTdHIsIHZhbHVlU3RyKVwiXHJcblxyXG5lcXVhbCBnZXRUc0NvZGUoJ2ludGVnZXInLCAnNDInKSwgJ2NvbnN0IHg6IGludGVnZXIgPSA0MidcclxuZXF1YWwgZ2V0VHNDb2RlKCdURmlsdGVyRnVuYycsICcoeCkgPT4gdHJ1ZScpLFxyXG5cdCdjb25zdCB4OiBURmlsdGVyRnVuYyA9ICh4OiB1bmtub3duKSA9PiB0cnVlJ1xyXG5cclxuREJHIFwiY2hlY2tUeXBlKHgsIHR5cGVTdHIpXCJcclxuXHJcbmVxdWFsIGNoZWNrVHlwZSg0MiwgJ251bWJlcicpLCBbXVxyXG5cclxuIl19