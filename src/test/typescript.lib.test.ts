"use strict";
// typescript.lib.test.civet

import {stripAnsiCode} from "@std/fmt/colors"
import {SourceFile} from 'npm:typescript'

import {
	undef, isHash, isEmpty, nonEmpty, normalizeCode,
	} from 'datatypes'
import {pass, o, s, t} from 'llutils'
import {DBG} from 'logger'
import {getCmdArgs} from 'cmd-args'
import {slurp, withExt} from 'fsys'
import {
	typeCheckCode, splitFuncStr, getSymbolsFromType,
	getImportCode, getTsCode, checkType,
	ts2ast, ast2ts, typeCheckFiles, astAsString,
	} from 'typescript'
import {
	equal, like, succeeds, fails, truthy, falsy, isType, setDirTree,
	} from 'unit-test'

getCmdArgs()

// ---------------------------------------------------------------------------

const setup = (): void => {

	DBG("setDirTree()")

	setDirTree('src/test/typescript', `tstest.ts
	const str: string = 'abc'
tstest2.ts
	const func1 = (str: string): boolean =>
		return true`)
}

setup()

// ---------------------------------------------------------------------------

DBG("typeCheckCode(tsCode)")

truthy(isEmpty(typeCheckCode("let s: string = 'abc';")))
truthy(nonEmpty(typeCheckCode("let s: string = 42;")))

DBG("ts2ast(tsCode)", "astAsString(ast)")

const ast = ts2ast(slurp('src/test/typescript/tstest2.ts'))
equal(stripAnsiCode(astAsString(ast)), s`kind: 308 (SourceFile)
statements:
	-
		kind: 244 (FirstStatement)
		declarationList:
			kind: 262 (VariableDeclarationList)
			declarations:
				-
					kind: 261 (VariableDeclaration)
					name:
						kind: 80 (Identifier)
						escapedText: func1
					initializer:
						kind: 220 (ArrowFunction)
						parameters:
							-
								kind: 170 (Parameter)
								name:
									kind: 80 (Identifier)
									escapedText: str
								type:
									kind: 154 (StringKeyword)
						type:
							kind: 136 (BooleanKeyword)
						equalsGreaterThanToken:
							kind: 39 (EqualsGreaterThanToken)
						body:
							kind: 242 (Block)
							statements:
								-
									kind: 254 (ReturnStatement)
									expression:
										kind: 112 (TrueKeyword)
							multiLine: .true
endOfFileToken:
	kind: 1 (EndOfFileToken)
text: const˳func1˳=˳(str:˳string):˳boolean˳=>↓→return˳true
fileName: temp.ts
scriptKind: 3
isDeclarationFile: .false
nodeCount: 16
identifierCount: 3
symbolCount: 0
parseDiagnostics:
	-
		file: .ref /
		start: 41
		length: 6
		messageText: '{'˳expected.
		category: 1
		code: 1005
	-
		file: .ref /
		start: 52
		length: 0
		messageText: '}'˳expected.
		category: 1
		code: 1005`)
DBG("getSymbolsFromType(typeStr)")

equal(getSymbolsFromType('integer'), ['integer'])
equal(getSymbolsFromType('hashof<integer>'), ['hashof','integer'])

DBG("getImportCode(typeStr)")

equal(getImportCode('integer'), `import {integer} from 'datatypes';`)
equal(getImportCode('hashof<integer>'), `import {hashof, integer} from 'datatypes';`)

DBG("splitFuncStr(valueStr)")

equal(splitFuncStr("abc"), undef)
equal(splitFuncStr("() => true"), [[], 'true'])
equal(splitFuncStr("(  ) => true"), [[], 'true'])
equal(splitFuncStr("(a,b,c) => false"), [
	['a','b','c'],
	'false'
	])
equal(splitFuncStr("( a , b,c ) => false"), [
	['a','b','c'],
	'false'
	])
equal(splitFuncStr("(a: string, b)=>true"), [
	['a: string', 'b'],
	'true'
	])

DBG("getTsCode(typeStr, valueStr)")

equal(getTsCode('integer', '42'), 'const x: integer = 42')
equal(getTsCode('TFilterFunc', '(x) => true'),
	'const x: TFilterFunc = (x: unknown) => true')

DBG("checkType(x, typeStr)")

equal(checkType(42, 'number'), [])


//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQzpcXFVzZXJzXFxqb2huZFxcdXRpbHNcXHNyY1xcdGVzdFxcdHlwZXNjcmlwdC5saWIudGVzdC5jaXZldC50c3giLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcam9obmRcXHV0aWxzXFxzcmNcXHRlc3RcXHR5cGVzY3JpcHQubGliLnRlc3QuY2l2ZXQiXSwibWFwcGluZ3MiOiI7QUFBQSw0QkFBMkI7QUFDM0IsQUFBQTtBQUNBLEFBQUEsTUFBTSxDQUFDLENBQUMsYUFBYSxDQUFDLENBQUMsSUFBSSxDQUFDLGlCQUFpQjtBQUM3QyxBQUFBLEFBQUEsTUFBTSxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsSUFBSSxDQUFDLGdCQUFnQjtBQUN6QyxBQUFBO0FBQ0EsQUFBQSxBQUFBLE1BQU0sQ0FBQyxDQUFDO0FBQ1IsQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxhQUFhLENBQUM7QUFDakQsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFdBQVc7QUFDbkIsQUFBQSxBQUFBLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTO0FBQ3JDLEFBQUEsQUFBQSxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUTtBQUMxQixBQUFBLEFBQUEsTUFBTSxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVU7QUFDbkMsQUFBQSxBQUFBLE1BQU0sQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNO0FBQ25DLEFBQUEsQUFBQSxNQUFNLENBQUMsQ0FBQztBQUNSLENBQUMsYUFBYSxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsa0JBQWtCLENBQUM7QUFDakQsQ0FBQyxhQUFhLENBQUMsQ0FBQyxTQUFTLENBQUMs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Q0FBQyxDQUFHLGtDQUVsQyxDQUFHLENBQUE7QUFDSixBQUFBLEFBQUEsS0FBSyxDQUFBLEFBQUMsYUFBYSxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxDQUFHLDBDQUUxQyxDQUFHLENBQUE7QUFDSixBQUFBO0FBQ0EsQUFBQSxBQUFBLEdBQUcsQ0FBQSxBQUFDLHdCQUF3QixDQUFBO0FBQzVCLEFBQUE7QUFDQSxBQUFBLEFBQUEsS0FBSyxDQUFBLEFBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFBO0FBQ2hDLEFBQUEsQUFBQSxLQUFLLENBQUEsQUFBQyxZQUFZLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUE7QUFDOUMsQUFBQSxBQUFBLEtBQUssQ0FBQSxBQUFDLFlBQVksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQTtBQUNoRCxBQUFBLEFBQUEsS0FBSyxDQUFBLEFBQUMsWUFBWSxDQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3pDLEFBQUEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUE7QUFDZCxBQUFBLENBQUMsT0FBTztBQUNSLEFBQUEsQ0FBQyxDQUFDLENBQUE7QUFDRixBQUFBLEFBQUEsS0FBSyxDQUFBLEFBQUMsWUFBWSxDQUFDLHNCQUFzQixDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzdDLEFBQUEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUE7QUFDZCxBQUFBLENBQUMsT0FBTztBQUNSLEFBQUEsQ0FBQyxDQUFDLENBQUE7QUFDRixBQUFBLEFBQUEsS0FBSyxDQUFBLEFBQUMsWUFBWSxDQUFDLHNCQUFzQixDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzdDLEFBQUEsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFBO0FBQ25CLEFBQUEsQ0FBQyxNQUFNO0FBQ1AsQUFBQSxDQUFDLENBQUMsQ0FBQTtBQUNGLEFBQUE7QUFDQSxBQUFBLEFBQUEsR0FBRyxDQUFBLEFBQUMsOEJBQThCLENBQUE7QUFDbEMsQUFBQTtBQUNBLEFBQUEsQUFBQSxLQUFLLENBQUEsQUFBQyxTQUFTLENBQUMsU0FBUyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyx1QkFBdUIsQ0FBQTtBQUN6RCxBQUFBLEFBQUEsS0FBSyxDQUFBLEFBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0FBQzlDLEFBQUEsQ0FBQyw2Q0FBNkMsQ0FBQTtBQUM5QyxBQUFBO0FBQ0EsQUFBQSxBQUFBLEdBQUcsQ0FBQSxBQUFDLHVCQUF1QixDQUFBO0FBQzNCLEFBQUE7QUFDQSxBQUFBLEFBQUEsS0FBSyxDQUFBLEFBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDakM7QUFDQSIsIm5hbWVzIjpbXSwic291cmNlc0NvbnRlbnQiOlsiIyB0eXBlc2NyaXB0LmxpYi50ZXN0LmNpdmV0XHJcblxyXG5pbXBvcnQge3N0cmlwQW5zaUNvZGV9IGZyb20gXCJAc3RkL2ZtdC9jb2xvcnNcIlxyXG5pbXBvcnQge1NvdXJjZUZpbGV9IGZyb20gJ25wbTp0eXBlc2NyaXB0J1xyXG5cclxuaW1wb3J0IHtcclxuXHR1bmRlZiwgaXNIYXNoLCBpc0VtcHR5LCBub25FbXB0eSwgbm9ybWFsaXplQ29kZSxcclxuXHR9IGZyb20gJ2RhdGF0eXBlcydcclxuaW1wb3J0IHtwYXNzLCBvLCBzLCB0fSBmcm9tICdsbHV0aWxzJ1xyXG5pbXBvcnQge0RCR30gZnJvbSAnbG9nZ2VyJ1xyXG5pbXBvcnQge2dldENtZEFyZ3N9IGZyb20gJ2NtZC1hcmdzJ1xyXG5pbXBvcnQge3NsdXJwLCB3aXRoRXh0fSBmcm9tICdmc3lzJ1xyXG5pbXBvcnQge1xyXG5cdHR5cGVDaGVja0NvZGUsIHNwbGl0RnVuY1N0ciwgZ2V0U3ltYm9sc0Zyb21UeXBlLFxyXG5cdGdldEltcG9ydENvZGUsIGdldFRzQ29kZSwgY2hlY2tUeXBlLFxyXG5cdHRzMmFzdCwgYXN0MnRzLCB0eXBlQ2hlY2tGaWxlcywgYXN0QXNTdHJpbmcsXHJcblx0fSBmcm9tICd0eXBlc2NyaXB0J1xyXG5pbXBvcnQge1xyXG5cdGVxdWFsLCBsaWtlLCBzdWNjZWVkcywgZmFpbHMsIHRydXRoeSwgZmFsc3ksIGlzVHlwZSwgc2V0RGlyVHJlZSxcclxuXHR9IGZyb20gJ3VuaXQtdGVzdCdcclxuXHJcbmdldENtZEFyZ3MoKVxyXG5cclxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbnNldHVwIDo9ICgpOiB2b2lkID0+XHJcblxyXG5cdERCRyBcInNldERpclRyZWUoKVwiXHJcblxyXG5cdHNldERpclRyZWUgJ3NyYy90ZXN0L3R5cGVzY3JpcHQnLCBcIlwiXCJcclxuXHRcdHRzdGVzdC50c1xyXG5cdFx0XHRjb25zdCBzdHI6IHN0cmluZyA9ICdhYmMnXHJcblx0XHR0c3Rlc3QyLnRzXHJcblx0XHRcdGNvbnN0IGZ1bmMxID0gKHN0cjogc3RyaW5nKTogYm9vbGVhbiA9PlxyXG5cdFx0XHRcdHJldHVybiB0cnVlXHJcblx0XHRcIlwiXCJcclxuXHJcbnNldHVwKClcclxuXHJcbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5EQkcgXCJ0eXBlQ2hlY2tDb2RlKHRzQ29kZSlcIlxyXG5cclxudHJ1dGh5IGlzRW1wdHkodHlwZUNoZWNrQ29kZShcImxldCBzOiBzdHJpbmcgPSAnYWJjJztcIikpXHJcbnRydXRoeSBub25FbXB0eSh0eXBlQ2hlY2tDb2RlKFwibGV0IHM6IHN0cmluZyA9IDQyO1wiKSlcclxuXHJcbkRCRyBcInRzMmFzdCh0c0NvZGUpXCIsIFwiYXN0QXNTdHJpbmcoYXN0KVwiXHJcblxyXG5hc3QgOj0gdHMyYXN0KHNsdXJwKCdzcmMvdGVzdC90eXBlc2NyaXB0L3RzdGVzdDIudHMnKSlcclxuZXF1YWwgc3RyaXBBbnNpQ29kZShhc3RBc1N0cmluZyhhc3QpKSwgc1wiXCJcIlxyXG5cdGtpbmQ6IDMwOCAoU291cmNlRmlsZSlcclxuXHRzdGF0ZW1lbnRzOlxyXG5cdFx0LVxyXG5cdFx0XHRraW5kOiAyNDQgKEZpcnN0U3RhdGVtZW50KVxyXG5cdFx0XHRkZWNsYXJhdGlvbkxpc3Q6XHJcblx0XHRcdFx0a2luZDogMjYyIChWYXJpYWJsZURlY2xhcmF0aW9uTGlzdClcclxuXHRcdFx0XHRkZWNsYXJhdGlvbnM6XHJcblx0XHRcdFx0XHQtXHJcblx0XHRcdFx0XHRcdGtpbmQ6IDI2MSAoVmFyaWFibGVEZWNsYXJhdGlvbilcclxuXHRcdFx0XHRcdFx0bmFtZTpcclxuXHRcdFx0XHRcdFx0XHRraW5kOiA4MCAoSWRlbnRpZmllcilcclxuXHRcdFx0XHRcdFx0XHRlc2NhcGVkVGV4dDogZnVuYzFcclxuXHRcdFx0XHRcdFx0aW5pdGlhbGl6ZXI6XHJcblx0XHRcdFx0XHRcdFx0a2luZDogMjIwIChBcnJvd0Z1bmN0aW9uKVxyXG5cdFx0XHRcdFx0XHRcdHBhcmFtZXRlcnM6XHJcblx0XHRcdFx0XHRcdFx0XHQtXHJcblx0XHRcdFx0XHRcdFx0XHRcdGtpbmQ6IDE3MCAoUGFyYW1ldGVyKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRuYW1lOlxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGtpbmQ6IDgwIChJZGVudGlmaWVyKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGVzY2FwZWRUZXh0OiBzdHJcclxuXHRcdFx0XHRcdFx0XHRcdFx0dHlwZTpcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRraW5kOiAxNTQgKFN0cmluZ0tleXdvcmQpXHJcblx0XHRcdFx0XHRcdFx0dHlwZTpcclxuXHRcdFx0XHRcdFx0XHRcdGtpbmQ6IDEzNiAoQm9vbGVhbktleXdvcmQpXHJcblx0XHRcdFx0XHRcdFx0ZXF1YWxzR3JlYXRlclRoYW5Ub2tlbjpcclxuXHRcdFx0XHRcdFx0XHRcdGtpbmQ6IDM5IChFcXVhbHNHcmVhdGVyVGhhblRva2VuKVxyXG5cdFx0XHRcdFx0XHRcdGJvZHk6XHJcblx0XHRcdFx0XHRcdFx0XHRraW5kOiAyNDIgKEJsb2NrKVxyXG5cdFx0XHRcdFx0XHRcdFx0c3RhdGVtZW50czpcclxuXHRcdFx0XHRcdFx0XHRcdFx0LVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGtpbmQ6IDI1NCAoUmV0dXJuU3RhdGVtZW50KVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGV4cHJlc3Npb246XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRraW5kOiAxMTIgKFRydWVLZXl3b3JkKVxyXG5cdFx0XHRcdFx0XHRcdFx0bXVsdGlMaW5lOiAudHJ1ZVxyXG5cdGVuZE9mRmlsZVRva2VuOlxyXG5cdFx0a2luZDogMSAoRW5kT2ZGaWxlVG9rZW4pXHJcblx0dGV4dDogY29uc3TLs2Z1bmMxy7M9y7Moc3RyOsuzc3RyaW5nKTrLs2Jvb2xlYW7Lsz0+4oaT4oaScmV0dXJuy7N0cnVlXHJcblx0ZmlsZU5hbWU6IHRlbXAudHNcclxuXHRzY3JpcHRLaW5kOiAzXHJcblx0aXNEZWNsYXJhdGlvbkZpbGU6IC5mYWxzZVxyXG5cdG5vZGVDb3VudDogMTZcclxuXHRpZGVudGlmaWVyQ291bnQ6IDNcclxuXHRzeW1ib2xDb3VudDogMFxyXG5cdHBhcnNlRGlhZ25vc3RpY3M6XHJcblx0XHQtXHJcblx0XHRcdGZpbGU6IC5yZWYgL1xyXG5cdFx0XHRzdGFydDogNDFcclxuXHRcdFx0bGVuZ3RoOiA2XHJcblx0XHRcdG1lc3NhZ2VUZXh0OiAneyfLs2V4cGVjdGVkLlxyXG5cdFx0XHRjYXRlZ29yeTogMVxyXG5cdFx0XHRjb2RlOiAxMDA1XHJcblx0XHQtXHJcblx0XHRcdGZpbGU6IC5yZWYgL1xyXG5cdFx0XHRzdGFydDogNTJcclxuXHRcdFx0bGVuZ3RoOiAwXHJcblx0XHRcdG1lc3NhZ2VUZXh0OiAnfSfLs2V4cGVjdGVkLlxyXG5cdFx0XHRjYXRlZ29yeTogMVxyXG5cdFx0XHRjb2RlOiAxMDA1XHJcblx0XCJcIlwiXHJcbkRCRyBcImdldFN5bWJvbHNGcm9tVHlwZSh0eXBlU3RyKVwiXHJcblxyXG5lcXVhbCBnZXRTeW1ib2xzRnJvbVR5cGUoJ2ludGVnZXInKSwgWydpbnRlZ2VyJ11cclxuZXF1YWwgZ2V0U3ltYm9sc0Zyb21UeXBlKCdoYXNob2Y8aW50ZWdlcj4nKSwgWydoYXNob2YnLCdpbnRlZ2VyJ11cclxuXHJcbkRCRyBcImdldEltcG9ydENvZGUodHlwZVN0cilcIlxyXG5cclxuZXF1YWwgZ2V0SW1wb3J0Q29kZSgnaW50ZWdlcicpLCBcIlwiXCJcclxuXHRpbXBvcnQge2ludGVnZXJ9IGZyb20gJ2RhdGF0eXBlcyc7XHJcblx0XCJcIlwiXHJcbmVxdWFsIGdldEltcG9ydENvZGUoJ2hhc2hvZjxpbnRlZ2VyPicpLCBcIlwiXCJcclxuXHRpbXBvcnQge2hhc2hvZiwgaW50ZWdlcn0gZnJvbSAnZGF0YXR5cGVzJztcclxuXHRcIlwiXCJcclxuXHJcbkRCRyBcInNwbGl0RnVuY1N0cih2YWx1ZVN0cilcIlxyXG5cclxuZXF1YWwgc3BsaXRGdW5jU3RyKFwiYWJjXCIpLCB1bmRlZlxyXG5lcXVhbCBzcGxpdEZ1bmNTdHIoXCIoKSA9PiB0cnVlXCIpLCBbW10sICd0cnVlJ11cclxuZXF1YWwgc3BsaXRGdW5jU3RyKFwiKCAgKSA9PiB0cnVlXCIpLCBbW10sICd0cnVlJ11cclxuZXF1YWwgc3BsaXRGdW5jU3RyKFwiKGEsYixjKSA9PiBmYWxzZVwiKSwgW1xyXG5cdFsnYScsJ2InLCdjJ11cclxuXHQnZmFsc2UnXHJcblx0XVxyXG5lcXVhbCBzcGxpdEZ1bmNTdHIoXCIoIGEgLCBiLGMgKSA9PiBmYWxzZVwiKSwgW1xyXG5cdFsnYScsJ2InLCdjJ11cclxuXHQnZmFsc2UnXHJcblx0XVxyXG5lcXVhbCBzcGxpdEZ1bmNTdHIoXCIoYTogc3RyaW5nLCBiKT0+dHJ1ZVwiKSwgW1xyXG5cdFsnYTogc3RyaW5nJywgJ2InXVxyXG5cdCd0cnVlJ1xyXG5cdF1cclxuXHJcbkRCRyBcImdldFRzQ29kZSh0eXBlU3RyLCB2YWx1ZVN0cilcIlxyXG5cclxuZXF1YWwgZ2V0VHNDb2RlKCdpbnRlZ2VyJywgJzQyJyksICdjb25zdCB4OiBpbnRlZ2VyID0gNDInXHJcbmVxdWFsIGdldFRzQ29kZSgnVEZpbHRlckZ1bmMnLCAnKHgpID0+IHRydWUnKSxcclxuXHQnY29uc3QgeDogVEZpbHRlckZ1bmMgPSAoeDogdW5rbm93bikgPT4gdHJ1ZSdcclxuXHJcbkRCRyBcImNoZWNrVHlwZSh4LCB0eXBlU3RyKVwiXHJcblxyXG5lcXVhbCBjaGVja1R5cGUoNDIsICdudW1iZXInKSwgW11cclxuXHJcbiJdfQ==