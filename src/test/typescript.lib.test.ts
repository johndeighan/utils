"use strict";
// typescript.lib.test.civet

import {SourceFile} from 'npm:typescript'

import {
	undef, isHash, isEmpty, nonEmpty, normalizeCode,
	} from 'datatypes'
import {pass, o, s, t} from 'llutils'
import {DBG} from 'logger'
import {getCmdArgs} from 'cmd-args'
import {slurp, withExt} from 'fsys'
import {
	typeCheckCode, splitFuncStr, getSymbolsFromType,
	getImportCode, getTsCode, checkType,
	ts2ast, ast2ts, typeCheckFiles, pprintAst,
	} from 'typescript'
import {
	equal, like, succeeds, fails, truthy, falsy, isType, setDirTree,
	} from 'unit-test'

getCmdArgs()

// ---------------------------------------------------------------------------

const setup = (): void => {

	DBG("setDirTree()")

	setDirTree('src/test/typescript', `test.ts
	const str: string = 'abc'
test2.ts
	const func1 = (str: string): boolean =>
		return true`)
}

setup()

// ---------------------------------------------------------------------------

DBG("typeCheckCode(tsCode)")

truthy(isEmpty(typeCheckCode("let s: string = 'abc';")))
truthy(nonEmpty(typeCheckCode("let s: string = 42;")))

DBG("ts2ast(tsCode)", "pprintAst(ast)")

const ast = ts2ast(slurp('src/test/typescript/test2.ts'))
equal(pprintAst(ast), s`kind: SourceFile
statements:
	-
		kind: FirstStatement
		declarationList:
			kind: VariableDeclarationList
			declarations:
				-
					kind: VariableDeclaration
					name:
						kind: Identifier
						escapedText: func1
					initializer:
						kind: ArrowFunction
						parameters:
							-
								kind: Parameter
								name:
									kind: Identifier
									escapedText: str
								type:
									kind: StringKeyword
						type:
							kind: BooleanKeyword
						equalsGreaterThanToken:
							kind: EqualsGreaterThanToken
						body:
							kind: Block
							statements:
								-
									kind: ReturnStatement
									expression:
										kind: TrueKeyword
							multiLine: .true.
endOfFileToken:
	kind: EndOfFileToken
text: const func1 = (str: string): boolean =>\\n\\treturn true
fileName: temp.ts
scriptKind: 3
isDeclarationFile: .false.
nodeCount: 16
identifierCount: 3
symbolCount: 0
parseDiagnostics:
	-
		file: .REF /.
		start: 41
		length: 6
		messageText: '{' expected.
		category: 1
		code: 1005
	-
		file: .REF /.
		start: 52
		length: 0
		messageText: '}' expected.
		category: 1
		code: 1005`)
DBG("getSymbolsFromType(typeStr)")

equal(getSymbolsFromType('integer'), ['integer'])
equal(getSymbolsFromType('hashof<integer>'), ['hashof','integer'])

DBG("getImportCode(typeStr)")

equal(getImportCode('integer'), `import {integer} from 'datatypes';`)
equal(getImportCode('hashof<integer>'), `import {hashof, integer} from 'datatypes';`)

DBG("splitFuncStr(valueStr)")

equal(splitFuncStr("abc"), undef)
equal(splitFuncStr("() => true"), [[], 'true'])
equal(splitFuncStr("(  ) => true"), [[], 'true'])
equal(splitFuncStr("(a,b,c) => false"), [
	['a','b','c'],
	'false'
	])
equal(splitFuncStr("( a , b,c ) => false"), [
	['a','b','c'],
	'false'
	])
equal(splitFuncStr("(a: string, b)=>true"), [
	['a: string', 'b'],
	'true'
	])

DBG("getTsCode(typeStr, valueStr)")

equal(getTsCode('integer', '42'), 'const x: integer = 42')
equal(getTsCode('TFilterFunc', '(x) => true'),
	'const x: TFilterFunc = (x: unknown) => true')

DBG("checkType(x, typeStr)")

equal(checkType(42, 'number'), [])


//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQzpcXFVzZXJzXFxqb2huZFxcdXRpbHNcXHNyY1xcdGVzdFxcdHlwZXNjcmlwdC5saWIudGVzdC5jaXZldC50c3giLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcam9obmRcXHV0aWxzXFxzcmNcXHRlc3RcXHR5cGVzY3JpcHQubGliLnRlc3QuY2l2ZXQiXSwibWFwcGluZ3MiOiI7QUFBQSw0QkFBMkI7QUFDM0IsQUFBQTtBQUNBLEFBQUEsTUFBTSxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsSUFBSSxDQUFDLGdCQUFnQjtBQUN6QyxBQUFBO0FBQ0EsQUFBQSxBQUFBLE1BQU0sQ0FBQyxDQUFDO0FBQ1IsQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxhQUFhLENBQUM7QUFDakQsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFdBQVc7QUFDbkIsQUFBQSxBQUFBLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTO0FBQ3JDLEFBQUEsQUFBQSxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUTtBQUMxQixBQUFBLEFBQUEsTUFBTSxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVU7QUFDbkMsQUFBQSxBQUFBLE1BQU0sQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNO0FBQ25DLEFBQUEsQUFBQSxNQUFNLENBQUMsQ0FBQztBQUNSLENBQUMsYUFBYSxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsa0JBQWtCLENBQUM7QUFDakQsQ0FBQyxhQUFhLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxTQUFTLENBQUM7QUFDckMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxjQUFjLENB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QUFBLEFBQUMsOEJBQThCLENBQUE7QUFDbEMsQUFBQTtBQUNBLEFBQUEsQUFBQSxLQUFLLENBQUEsQUFBQyxTQUFTLENBQUMsU0FBUyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyx1QkFBdUIsQ0FBQTtBQUN6RCxBQUFBLEFBQUEsS0FBSyxDQUFBLEFBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0FBQzlDLEFBQUEsQ0FBQyw2Q0FBNkMsQ0FBQTtBQUM5QyxBQUFBO0FBQ0EsQUFBQSxBQUFBLEdBQUcsQ0FBQSxBQUFDLHVCQUF1QixDQUFBO0FBQzNCLEFBQUE7QUFDQSxBQUFBLEFBQUEsS0FBSyxDQUFBLEFBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDakM7QUFDQSIsIm5hbWVzIjpbXSwic291cmNlc0NvbnRlbnQiOlsiIyB0eXBlc2NyaXB0LmxpYi50ZXN0LmNpdmV0XHJcblxyXG5pbXBvcnQge1NvdXJjZUZpbGV9IGZyb20gJ25wbTp0eXBlc2NyaXB0J1xyXG5cclxuaW1wb3J0IHtcclxuXHR1bmRlZiwgaXNIYXNoLCBpc0VtcHR5LCBub25FbXB0eSwgbm9ybWFsaXplQ29kZSxcclxuXHR9IGZyb20gJ2RhdGF0eXBlcydcclxuaW1wb3J0IHtwYXNzLCBvLCBzLCB0fSBmcm9tICdsbHV0aWxzJ1xyXG5pbXBvcnQge0RCR30gZnJvbSAnbG9nZ2VyJ1xyXG5pbXBvcnQge2dldENtZEFyZ3N9IGZyb20gJ2NtZC1hcmdzJ1xyXG5pbXBvcnQge3NsdXJwLCB3aXRoRXh0fSBmcm9tICdmc3lzJ1xyXG5pbXBvcnQge1xyXG5cdHR5cGVDaGVja0NvZGUsIHNwbGl0RnVuY1N0ciwgZ2V0U3ltYm9sc0Zyb21UeXBlLFxyXG5cdGdldEltcG9ydENvZGUsIGdldFRzQ29kZSwgY2hlY2tUeXBlLFxyXG5cdHRzMmFzdCwgYXN0MnRzLCB0eXBlQ2hlY2tGaWxlcywgcHByaW50QXN0LFxyXG5cdH0gZnJvbSAndHlwZXNjcmlwdCdcclxuaW1wb3J0IHtcclxuXHRlcXVhbCwgbGlrZSwgc3VjY2VlZHMsIGZhaWxzLCB0cnV0aHksIGZhbHN5LCBpc1R5cGUsIHNldERpclRyZWUsXHJcblx0fSBmcm9tICd1bml0LXRlc3QnXHJcblxyXG5nZXRDbWRBcmdzKClcclxuXHJcbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5zZXR1cCA6PSAoKTogdm9pZCA9PlxyXG5cclxuXHREQkcgXCJzZXREaXJUcmVlKClcIlxyXG5cclxuXHRzZXREaXJUcmVlICdzcmMvdGVzdC90eXBlc2NyaXB0JywgXCJcIlwiXHJcblx0XHR0ZXN0LnRzXHJcblx0XHRcdGNvbnN0IHN0cjogc3RyaW5nID0gJ2FiYydcclxuXHRcdHRlc3QyLnRzXHJcblx0XHRcdGNvbnN0IGZ1bmMxID0gKHN0cjogc3RyaW5nKTogYm9vbGVhbiA9PlxyXG5cdFx0XHRcdHJldHVybiB0cnVlXHJcblx0XHRcIlwiXCJcclxuXHJcbnNldHVwKClcclxuXHJcbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5EQkcgXCJ0eXBlQ2hlY2tDb2RlKHRzQ29kZSlcIlxyXG5cclxudHJ1dGh5IGlzRW1wdHkodHlwZUNoZWNrQ29kZShcImxldCBzOiBzdHJpbmcgPSAnYWJjJztcIikpXHJcbnRydXRoeSBub25FbXB0eSh0eXBlQ2hlY2tDb2RlKFwibGV0IHM6IHN0cmluZyA9IDQyO1wiKSlcclxuXHJcbkRCRyBcInRzMmFzdCh0c0NvZGUpXCIsIFwicHByaW50QXN0KGFzdClcIlxyXG5cclxuYXN0IDo9IHRzMmFzdChzbHVycCgnc3JjL3Rlc3QvdHlwZXNjcmlwdC90ZXN0Mi50cycpKVxyXG5lcXVhbCBwcHJpbnRBc3QoYXN0KSwgc1wiXCJcIlxyXG5cdGtpbmQ6IFNvdXJjZUZpbGVcclxuXHRzdGF0ZW1lbnRzOlxyXG5cdFx0LVxyXG5cdFx0XHRraW5kOiBGaXJzdFN0YXRlbWVudFxyXG5cdFx0XHRkZWNsYXJhdGlvbkxpc3Q6XHJcblx0XHRcdFx0a2luZDogVmFyaWFibGVEZWNsYXJhdGlvbkxpc3RcclxuXHRcdFx0XHRkZWNsYXJhdGlvbnM6XHJcblx0XHRcdFx0XHQtXHJcblx0XHRcdFx0XHRcdGtpbmQ6IFZhcmlhYmxlRGVjbGFyYXRpb25cclxuXHRcdFx0XHRcdFx0bmFtZTpcclxuXHRcdFx0XHRcdFx0XHRraW5kOiBJZGVudGlmaWVyXHJcblx0XHRcdFx0XHRcdFx0ZXNjYXBlZFRleHQ6IGZ1bmMxXHJcblx0XHRcdFx0XHRcdGluaXRpYWxpemVyOlxyXG5cdFx0XHRcdFx0XHRcdGtpbmQ6IEFycm93RnVuY3Rpb25cclxuXHRcdFx0XHRcdFx0XHRwYXJhbWV0ZXJzOlxyXG5cdFx0XHRcdFx0XHRcdFx0LVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRraW5kOiBQYXJhbWV0ZXJcclxuXHRcdFx0XHRcdFx0XHRcdFx0bmFtZTpcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRraW5kOiBJZGVudGlmaWVyXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZXNjYXBlZFRleHQ6IHN0clxyXG5cdFx0XHRcdFx0XHRcdFx0XHR0eXBlOlxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGtpbmQ6IFN0cmluZ0tleXdvcmRcclxuXHRcdFx0XHRcdFx0XHR0eXBlOlxyXG5cdFx0XHRcdFx0XHRcdFx0a2luZDogQm9vbGVhbktleXdvcmRcclxuXHRcdFx0XHRcdFx0XHRlcXVhbHNHcmVhdGVyVGhhblRva2VuOlxyXG5cdFx0XHRcdFx0XHRcdFx0a2luZDogRXF1YWxzR3JlYXRlclRoYW5Ub2tlblxyXG5cdFx0XHRcdFx0XHRcdGJvZHk6XHJcblx0XHRcdFx0XHRcdFx0XHRraW5kOiBCbG9ja1xyXG5cdFx0XHRcdFx0XHRcdFx0c3RhdGVtZW50czpcclxuXHRcdFx0XHRcdFx0XHRcdFx0LVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGtpbmQ6IFJldHVyblN0YXRlbWVudFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGV4cHJlc3Npb246XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRraW5kOiBUcnVlS2V5d29yZFxyXG5cdFx0XHRcdFx0XHRcdFx0bXVsdGlMaW5lOiAudHJ1ZS5cclxuXHRlbmRPZkZpbGVUb2tlbjpcclxuXHRcdGtpbmQ6IEVuZE9mRmlsZVRva2VuXHJcblx0dGV4dDogY29uc3QgZnVuYzEgPSAoc3RyOiBzdHJpbmcpOiBib29sZWFuID0+XFxcXG5cXFxcdHJldHVybiB0cnVlXHJcblx0ZmlsZU5hbWU6IHRlbXAudHNcclxuXHRzY3JpcHRLaW5kOiAzXHJcblx0aXNEZWNsYXJhdGlvbkZpbGU6IC5mYWxzZS5cclxuXHRub2RlQ291bnQ6IDE2XHJcblx0aWRlbnRpZmllckNvdW50OiAzXHJcblx0c3ltYm9sQ291bnQ6IDBcclxuXHRwYXJzZURpYWdub3N0aWNzOlxyXG5cdFx0LVxyXG5cdFx0XHRmaWxlOiAuUkVGIC8uXHJcblx0XHRcdHN0YXJ0OiA0MVxyXG5cdFx0XHRsZW5ndGg6IDZcclxuXHRcdFx0bWVzc2FnZVRleHQ6ICd7JyBleHBlY3RlZC5cclxuXHRcdFx0Y2F0ZWdvcnk6IDFcclxuXHRcdFx0Y29kZTogMTAwNVxyXG5cdFx0LVxyXG5cdFx0XHRmaWxlOiAuUkVGIC8uXHJcblx0XHRcdHN0YXJ0OiA1MlxyXG5cdFx0XHRsZW5ndGg6IDBcclxuXHRcdFx0bWVzc2FnZVRleHQ6ICd9JyBleHBlY3RlZC5cclxuXHRcdFx0Y2F0ZWdvcnk6IDFcclxuXHRcdFx0Y29kZTogMTAwNVxyXG5cdFwiXCJcIlxyXG5EQkcgXCJnZXRTeW1ib2xzRnJvbVR5cGUodHlwZVN0cilcIlxyXG5cclxuZXF1YWwgZ2V0U3ltYm9sc0Zyb21UeXBlKCdpbnRlZ2VyJyksIFsnaW50ZWdlciddXHJcbmVxdWFsIGdldFN5bWJvbHNGcm9tVHlwZSgnaGFzaG9mPGludGVnZXI+JyksIFsnaGFzaG9mJywnaW50ZWdlciddXHJcblxyXG5EQkcgXCJnZXRJbXBvcnRDb2RlKHR5cGVTdHIpXCJcclxuXHJcbmVxdWFsIGdldEltcG9ydENvZGUoJ2ludGVnZXInKSwgXCJcIlwiXHJcblx0aW1wb3J0IHtpbnRlZ2VyfSBmcm9tICdkYXRhdHlwZXMnO1xyXG5cdFwiXCJcIlxyXG5lcXVhbCBnZXRJbXBvcnRDb2RlKCdoYXNob2Y8aW50ZWdlcj4nKSwgXCJcIlwiXHJcblx0aW1wb3J0IHtoYXNob2YsIGludGVnZXJ9IGZyb20gJ2RhdGF0eXBlcyc7XHJcblx0XCJcIlwiXHJcblxyXG5EQkcgXCJzcGxpdEZ1bmNTdHIodmFsdWVTdHIpXCJcclxuXHJcbmVxdWFsIHNwbGl0RnVuY1N0cihcImFiY1wiKSwgdW5kZWZcclxuZXF1YWwgc3BsaXRGdW5jU3RyKFwiKCkgPT4gdHJ1ZVwiKSwgW1tdLCAndHJ1ZSddXHJcbmVxdWFsIHNwbGl0RnVuY1N0cihcIiggICkgPT4gdHJ1ZVwiKSwgW1tdLCAndHJ1ZSddXHJcbmVxdWFsIHNwbGl0RnVuY1N0cihcIihhLGIsYykgPT4gZmFsc2VcIiksIFtcclxuXHRbJ2EnLCdiJywnYyddXHJcblx0J2ZhbHNlJ1xyXG5cdF1cclxuZXF1YWwgc3BsaXRGdW5jU3RyKFwiKCBhICwgYixjICkgPT4gZmFsc2VcIiksIFtcclxuXHRbJ2EnLCdiJywnYyddXHJcblx0J2ZhbHNlJ1xyXG5cdF1cclxuZXF1YWwgc3BsaXRGdW5jU3RyKFwiKGE6IHN0cmluZywgYik9PnRydWVcIiksIFtcclxuXHRbJ2E6IHN0cmluZycsICdiJ11cclxuXHQndHJ1ZSdcclxuXHRdXHJcblxyXG5EQkcgXCJnZXRUc0NvZGUodHlwZVN0ciwgdmFsdWVTdHIpXCJcclxuXHJcbmVxdWFsIGdldFRzQ29kZSgnaW50ZWdlcicsICc0MicpLCAnY29uc3QgeDogaW50ZWdlciA9IDQyJ1xyXG5lcXVhbCBnZXRUc0NvZGUoJ1RGaWx0ZXJGdW5jJywgJyh4KSA9PiB0cnVlJyksXHJcblx0J2NvbnN0IHg6IFRGaWx0ZXJGdW5jID0gKHg6IHVua25vd24pID0+IHRydWUnXHJcblxyXG5EQkcgXCJjaGVja1R5cGUoeCwgdHlwZVN0cilcIlxyXG5cclxuZXF1YWwgY2hlY2tUeXBlKDQyLCAnbnVtYmVyJyksIFtdXHJcblxyXG4iXX0=