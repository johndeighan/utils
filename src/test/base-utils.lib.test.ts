"use strict";
// base-utils.lib.test.civet

import {
	assert, TDefined, TNotDefined, undef, defined,
	notdefined, assertIsDefined, assertNotDefined,
	croak, checkSetup, flag, nonOption, replaceInArray,
	fileExt, withExt, normalizePath, relpath,
	TPathInfo, parsePath, TExecResult, TReplaceHash,
	execCmd, cmdSucceeds, newerDestFileExists,
	splitPatterns, allFilesMatching, findFile,
	TProcFunc, TProcResult, procFiles,
	isFile, slurp, rmFile, buildFileName, buildTestFileName,

	civet2tsFile, getStringOption, getBooleanOption,
	tryCmd, doUnitTest, doInstallCmd, doRun,
	sep, centered, lAllLibs,
	} from 'base-utils'
import {
	equal, like, succeeds, fails, truthy, falsy,
	isType, notType, setDirTree,
	} from 'unit-test'

// --- Not Tested yet: (aside from last imports)
//        allFilesMatching
//        findFile
//        procFiles
// ---------------------------------------------------------------------------

setDirTree('src/test/base-utils', `file.txt
	a simple file
file2.txt
	a simple file
sample.lib.civet
	meaning := 42`)

// ---------------------------------------------------------------------------

succeeds(() => assert(2 === 2))
fails(   () => assert(2 === 3 + 5))

succeeds(() => checkSetup())

truthy(flag('c', ['-c']))
truthy(flag('c', ['-cm']))
truthy(flag('x', ['-cx']))
falsy( flag('x', ['-c']))
falsy( flag('c', []))
falsy( flag('c', ['-def']))

equal( nonOption(0, ['-d', 'x', 'y']), 'x')
equal( nonOption(1, ['-d', 'x', 'y']), 'y')

succeeds(() => defined('abc'))
fails(   () => defined(undef))
succeeds(() => notdefined(undef))
fails(   () => notdefined('abc'))

succeeds(() => assertIsDefined('abc'))
fails(   () => assertIsDefined(undef))

fails(   () => assertNotDefined('abc'))
succeeds(() => assertNotDefined(undef))

fails(   () => croak("Bad"))

equal(replaceInArray(['-cm','%PATH'], {'%PATH': '/temp.txt'}),
	['-cm', '/temp.txt'])
equal(replaceInArray(['a','b','c'], {
	b: 'x'
	}), ['a','x','c'])


// ---------------------------------------------------------------------------

truthy(  isFile('src/test/base-utils/file2.txt'))
succeeds(() => rmFile('src/test/base-utils/file2.txt'))
// falsy    isFile('src/test/base-utils/file2.txt')

truthy(isFile('src/test/base-utils/file.txt'))
falsy( isFile('src/test/base-utils/notafile.txt'))

equal(slurp('src/test/base-utils/file.txt'), 'a simple file')

equal(fileExt('temp.txt'), '.txt')
equal(withExt('temp.txt', '.md'), 'temp.md')

equal(normalizePath('c:\\Users\\johnd\\utils\\src\\lib\\fsys.lib.civet'),
	'C:/Users/johnd/utils/src/lib/fsys.lib.civet')

equal(buildFileName('dummy', 'lib', '.civet'), 'dummy.lib.civet')
equal(buildFileName('dummy', '', '.civet'), 'dummy.civet')
equal(buildFileName('dummy', undef, '.civet'), 'dummy.civet')
equal(buildTestFileName('dummy', 'lib', '.civet'), 'dummy.lib.test.civet')

equal(parsePath('c:\\path\\dir\\file.lib.ts'), {
	root: 'C:/',
	dir: 'C:/path/dir',
	fileName: 'file.lib.ts',

	stub: 'file',
	purpose: 'lib',
	ext: '.ts'
	})

truthy(cmdSucceeds('ls'))

await civet2tsFile('sample', 'lib')

truthy(newerDestFileExists('src/test/base-utils/sample.lib.civet', '.ts'));

(async () => {
	const hResult = await execCmd('echo', ['Hello'], {}, true)
	console.dir(hResult)
	truthy(hResult.success)
	equal(hResult.code, 0)
	equal(hResult.stdout, "Hello\n")
	equal(hResult.stderr, "")
}
	)()

truthy(cmdSucceeds('echo', ['Hello']))

equal(splitPatterns([
	'**/temp.txt',
	'!**/temp*',
	'*.test.ts',
	'! **/special.txt'
	]), [
		['**/temp.txt', '*.test.ts'],
		['**/temp*', '**/special.txt'],
		])

equal(sep('label', '.', 15), '...  label  ...')
equal(centered('abcd', 12, '-'), '--  abcd  --')

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQzpcXFVzZXJzXFxqb2huZFxcdXRpbHNcXHNyY1xcdGVzdFxcYmFzZS11dGlscy5saWIudGVzdC5jaXZldC50c3giLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcam9obmRcXHV0aWxzXFxzcmNcXHRlc3RcXGJhc2UtdXRpbHMubGliLnRlc3QuY2l2ZXQiXSwibWFwcGluZ3MiOiI7QUFBQSw0QkFBMkI7QUFDM0IsQUFBQTtBQUNBLEFBQUEsTUFBTSxDQUFDLENBQUM7QUFDUixDQUFDLE1BQU0sQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQztBQUMvQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLGdCQUFnQixDQUFDO0FBQy9DLENBQUMsS0FBSyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsY0FBYyxDQUFDO0FBQ3BELENBQUMsT0FBTyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsYUFBYSxDQUFDLENBQUMsT0FBTyxDQUFDO0FBQzFDLENBQUMsU0FBUyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsWUFBWSxDQUFDO0FBQ2pELENBQUMsT0FBTyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsbUJBQW1CLENBQUM7QUFDM0MsQ0FBQyxhQUFhLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLFFBQVEsQ0FBQTtBQUMxQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLFNBQVMsQ0FBQztBQUNuQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLGFBQWEsQ0FBQyxDQUFDLGlCQUFpQixDQUFDO0FBQ3pEO0FBQ0EsQ0FBQyxZQUFZLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQztBQUNqRCxDQUFDLE1BQU0sQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLEtBQUssQ0FBQztBQUN6QyxDQUFDLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLFFBQVEsQ0FBQztBQUN6QixDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWTtBQUNwQixBQUFBLEFBQUEsTUFBTSxDQUFDLENBQUM7QUFDUixDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEtBQUssQ0FBQztBQUM3QyxDQUFDLE1BQU0sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFVBQVUsQ0FBQztBQUM3QixDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVztBQUNuQixBQUFBO0FBQ0EsQUFBQSxnREFBK0M7QUFDL0MsQUFBQSwwQkFBeUI7QUFDekIsQUFBQSxrQkFBaUI7QUFDakIsQUFBQSxtQkFBa0I7QUFDbEIsQUFBQSw4RUFBNkU7QUFDN0UsQUFBQTtBQUNBLEFBQUEsQUFBQSxVQUFVLENBQUEsQUFBQyxxQkFBcUIsQ0FBQyxDQUFDLENBQUc7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUVDLENBQUcsQ0FBQTtBQUNKLEFBQUE7QUFDQSxBQUFBLDhFQUE2RTtBQUM3RSxBQUFBO0FBQ0EsQUFBQSxBQUFBLFFBQVEsQ0FBQSxBQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUEsQUFBQyxDQUFDLENBQUMsR0FBRSxDQUFDLENBQUMsQ0FBQSxDQUFBO0FBQzVCLEFBQUEsQUFBQSxLQUFLLENBQUEsR0FBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFBLEFBQUMsQ0FBQyxDQUFDLEdBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQSxDQUFBO0FBQ2hDLEFBQUE7QUFDQSxBQUFBLEFBQUEsUUFBUSxDQUFBLEFBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUE7QUFDM0IsQUFBQTtBQUNBLEFBQUEsQUFBQSxNQUFNLENBQUEsQUFBQyxJQUFJLENBQUEsQUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFBLENBQUE7QUFDdkIsQUFBQSxBQUFBLE1BQU0sQ0FBQSxBQUFDLElBQUksQ0FBQSxBQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUEsQ0FBQTtBQUN4QixBQUFBLEFBQUEsTUFBTSxDQUFBLEFBQUMsSUFBSSxDQUFBLEFBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQSxDQUFBO0FBQ3hCLEFBQUEsQUFBQSxLQUFLLENBQUEsQ0FBRSxJQUFJLENBQUEsQUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFBLENBQUE7QUFDdkIsQUFBQSxBQUFBLEtBQUssQ0FBQSxDQUFFLElBQUksQ0FBQSxBQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBLENBQUE7QUFDbkIsQUFBQSxBQUFBLEtBQUssQ0FBQSxDQUFFLElBQUksQ0FBQSxBQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUEsQ0FBQTtBQUN6QixBQUFBO0FBQ0EsQUFBQSxBQUFBLEtBQUssQ0FBQSxDQUFFLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUE7QUFDMUMsQUFBQSxBQUFBLEtBQUssQ0FBQSxDQUFFLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUE7QUFDMUMsQUFBQTtBQUNBLEFBQUEsQUFBQSxRQUFRLENBQUEsQUFBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFBLEFBQUMsS0FBSyxDQUFBLENBQUE7QUFDNUIsQUFBQSxBQUFBLEtBQUssQ0FBQSxHQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUEsQUFBQyxLQUFLLENBQUEsQ0FBQTtBQUM1QixBQUFBLEFBQUEsUUFBUSxDQUFBLEFBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQSxBQUFDLEtBQUssQ0FBQSxDQUFBO0FBQy9CLEFBQUEsQUFBQSxLQUFLLENBQUEsR0FBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFBLEFBQUMsS0FBSyxDQUFBLENBQUE7QUFDL0IsQUFBQTtBQUNBLEFBQUEsQUFBQSxRQUFRLENBQUEsQUFBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxDQUFBO0FBQ3JDLEFBQUEsQUFBQSxLQUFLLENBQUEsR0FBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxDQUFBO0FBQ3JDLEFBQUE7QUFDQSxBQUFBLEFBQUEsS0FBSyxDQUFBLEdBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxDQUFBO0FBQ3RDLEFBQUEsQUFBQSxRQUFRLENBQUEsQUFBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLENBQUE7QUFDdEMsQUFBQTtBQUNBLEFBQUEsQUFBQSxLQUFLLENBQUEsR0FBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFBLEFBQUMsS0FBSyxDQUFBLENBQUE7QUFDMUIsQUFBQTtBQUNBLEFBQUEsQUFBQSxLQUFLLENBQUEsQUFBQyxjQUFjLENBQUMsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUM7QUFDOUQsQUFBQSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUE7QUFDckIsQUFBQSxBQUFBLEtBQUssQ0FBQSxBQUFDLGNBQWMsQ0FBQyxDQUFDLEdB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QUFFLENBQUMsVUFBVSxDQUFDLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztBQUNqQyxBQUFBLEVBQUUsQ0FBQyxDQUFBO0FBQ0gsQUFBQTtBQUNBLEFBQUEsQUFBQSxLQUFLLENBQUEsQUFBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxpQkFBaUIsQ0FBQTtBQUM5QyxBQUFBLEFBQUEsS0FBSyxDQUFBLEFBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsY0FBYyxDQUFBO0FBQy9DIiwibmFtZXMiOltdLCJzb3VyY2VzQ29udGVudCI6WyIjIGJhc2UtdXRpbHMubGliLnRlc3QuY2l2ZXRcclxuXHJcbmltcG9ydCB7XHJcblx0YXNzZXJ0LCBURGVmaW5lZCwgVE5vdERlZmluZWQsIHVuZGVmLCBkZWZpbmVkLFxyXG5cdG5vdGRlZmluZWQsIGFzc2VydElzRGVmaW5lZCwgYXNzZXJ0Tm90RGVmaW5lZCxcclxuXHRjcm9haywgY2hlY2tTZXR1cCwgZmxhZywgbm9uT3B0aW9uLCByZXBsYWNlSW5BcnJheSxcclxuXHRmaWxlRXh0LCB3aXRoRXh0LCBub3JtYWxpemVQYXRoLCByZWxwYXRoLFxyXG5cdFRQYXRoSW5mbywgcGFyc2VQYXRoLCBURXhlY1Jlc3VsdCwgVFJlcGxhY2VIYXNoLFxyXG5cdGV4ZWNDbWQsIGNtZFN1Y2NlZWRzLCBuZXdlckRlc3RGaWxlRXhpc3RzLFxyXG5cdHNwbGl0UGF0dGVybnMsIGFsbEZpbGVzTWF0Y2hpbmcsIGZpbmRGaWxlXHJcblx0VFByb2NGdW5jLCBUUHJvY1Jlc3VsdCwgcHJvY0ZpbGVzLFxyXG5cdGlzRmlsZSwgc2x1cnAsIHJtRmlsZSwgYnVpbGRGaWxlTmFtZSwgYnVpbGRUZXN0RmlsZU5hbWUsXHJcblxyXG5cdGNpdmV0MnRzRmlsZSwgZ2V0U3RyaW5nT3B0aW9uLCBnZXRCb29sZWFuT3B0aW9uLFxyXG5cdHRyeUNtZCwgZG9Vbml0VGVzdCwgZG9JbnN0YWxsQ21kLCBkb1J1bixcclxuXHRzZXAsIGNlbnRlcmVkLCBsQWxsTGlicyxcclxuXHR9IGZyb20gJ2Jhc2UtdXRpbHMnXHJcbmltcG9ydCB7XHJcblx0ZXF1YWwsIGxpa2UsIHN1Y2NlZWRzLCBmYWlscywgdHJ1dGh5LCBmYWxzeSxcclxuXHRpc1R5cGUsIG5vdFR5cGUsIHNldERpclRyZWUsXHJcblx0fSBmcm9tICd1bml0LXRlc3QnXHJcblxyXG4jIC0tLSBOb3QgVGVzdGVkIHlldDogKGFzaWRlIGZyb20gbGFzdCBpbXBvcnRzKVxyXG4jICAgICAgICBhbGxGaWxlc01hdGNoaW5nXHJcbiMgICAgICAgIGZpbmRGaWxlXHJcbiMgICAgICAgIHByb2NGaWxlc1xyXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuc2V0RGlyVHJlZSAnc3JjL3Rlc3QvYmFzZS11dGlscycsIFwiXCJcIlxyXG5cdGZpbGUudHh0XHJcblx0XHRhIHNpbXBsZSBmaWxlXHJcblx0ZmlsZTIudHh0XHJcblx0XHRhIHNpbXBsZSBmaWxlXHJcblx0c2FtcGxlLmxpYi5jaXZldFxyXG5cdFx0bWVhbmluZyA6PSA0MlxyXG5cdFwiXCJcIlxyXG5cclxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbnN1Y2NlZWRzICgpID0+IGFzc2VydCAyID09IDJcclxuZmFpbHMgICAgKCkgPT4gYXNzZXJ0IDIgPT0gMyArIDVcclxuXHJcbnN1Y2NlZWRzICgpID0+IGNoZWNrU2V0dXAoKVxyXG5cclxudHJ1dGh5IGZsYWcgJ2MnLCBbJy1jJ11cclxudHJ1dGh5IGZsYWcgJ2MnLCBbJy1jbSddXHJcbnRydXRoeSBmbGFnICd4JywgWyctY3gnXVxyXG5mYWxzeSAgZmxhZyAneCcsIFsnLWMnXVxyXG5mYWxzeSAgZmxhZyAnYycsIFtdXHJcbmZhbHN5ICBmbGFnICdjJywgWyctZGVmJ11cclxuXHJcbmVxdWFsICBub25PcHRpb24oMCwgWyctZCcsICd4JywgJ3knXSksICd4J1xyXG5lcXVhbCAgbm9uT3B0aW9uKDEsIFsnLWQnLCAneCcsICd5J10pLCAneSdcclxuXHJcbnN1Y2NlZWRzICgpID0+IGRlZmluZWQgJ2FiYydcclxuZmFpbHMgICAgKCkgPT4gZGVmaW5lZCB1bmRlZlxyXG5zdWNjZWVkcyAoKSA9PiBub3RkZWZpbmVkIHVuZGVmXHJcbmZhaWxzICAgICgpID0+IG5vdGRlZmluZWQgJ2FiYydcclxuXHJcbnN1Y2NlZWRzICgpID0+IGFzc2VydElzRGVmaW5lZCgnYWJjJylcclxuZmFpbHMgICAgKCkgPT4gYXNzZXJ0SXNEZWZpbmVkKHVuZGVmKVxyXG5cclxuZmFpbHMgICAgKCkgPT4gYXNzZXJ0Tm90RGVmaW5lZCgnYWJjJylcclxuc3VjY2VlZHMgKCkgPT4gYXNzZXJ0Tm90RGVmaW5lZCh1bmRlZilcclxuXHJcbmZhaWxzICAgICgpID0+IGNyb2FrIFwiQmFkXCJcclxuXHJcbmVxdWFsIHJlcGxhY2VJbkFycmF5KFsnLWNtJywnJVBBVEgnXSwgeyclUEFUSCc6ICcvdGVtcC50eHQnfSksXHJcblx0WyctY20nLCAnL3RlbXAudHh0J11cclxuZXF1YWwgcmVwbGFjZUluQXJyYXkoWydhJywnYicsJ2MnXSwge1xyXG5cdGI6ICd4J1xyXG5cdH0pLCBbJ2EnLCd4JywnYyddXHJcblxyXG5cclxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbnRydXRoeSAgIGlzRmlsZSgnc3JjL3Rlc3QvYmFzZS11dGlscy9maWxlMi50eHQnKVxyXG5zdWNjZWVkcyAoKSA9PiBybUZpbGUoJ3NyYy90ZXN0L2Jhc2UtdXRpbHMvZmlsZTIudHh0JylcclxuIyBmYWxzeSAgICBpc0ZpbGUoJ3NyYy90ZXN0L2Jhc2UtdXRpbHMvZmlsZTIudHh0JylcclxuXHJcbnRydXRoeSBpc0ZpbGUoJ3NyYy90ZXN0L2Jhc2UtdXRpbHMvZmlsZS50eHQnKVxyXG5mYWxzeSAgaXNGaWxlKCdzcmMvdGVzdC9iYXNlLXV0aWxzL25vdGFmaWxlLnR4dCcpXHJcblxyXG5lcXVhbCBzbHVycCgnc3JjL3Rlc3QvYmFzZS11dGlscy9maWxlLnR4dCcpLCAnYSBzaW1wbGUgZmlsZSdcclxuXHJcbmVxdWFsIGZpbGVFeHQoJ3RlbXAudHh0JyksICcudHh0J1xyXG5lcXVhbCB3aXRoRXh0KCd0ZW1wLnR4dCcsICcubWQnKSwgJ3RlbXAubWQnXHJcblxyXG5lcXVhbCBub3JtYWxpemVQYXRoKCdjOlxcXFxVc2Vyc1xcXFxqb2huZFxcXFx1dGlsc1xcXFxzcmNcXFxcbGliXFxcXGZzeXMubGliLmNpdmV0JyksXHJcblx0J0M6L1VzZXJzL2pvaG5kL3V0aWxzL3NyYy9saWIvZnN5cy5saWIuY2l2ZXQnXHJcblxyXG5lcXVhbCBidWlsZEZpbGVOYW1lKCdkdW1teScsICdsaWInLCAnLmNpdmV0JyksICdkdW1teS5saWIuY2l2ZXQnXHJcbmVxdWFsIGJ1aWxkRmlsZU5hbWUoJ2R1bW15JywgJycsICcuY2l2ZXQnKSwgJ2R1bW15LmNpdmV0J1xyXG5lcXVhbCBidWlsZEZpbGVOYW1lKCdkdW1teScsIHVuZGVmLCAnLmNpdmV0JyksICdkdW1teS5jaXZldCdcclxuZXF1YWwgYnVpbGRUZXN0RmlsZU5hbWUoJ2R1bW15JywgJ2xpYicsICcuY2l2ZXQnKSwgJ2R1bW15LmxpYi50ZXN0LmNpdmV0J1xyXG5cclxuZXF1YWwgcGFyc2VQYXRoKCdjOlxcXFxwYXRoXFxcXGRpclxcXFxmaWxlLmxpYi50cycpLCB7XHJcblx0cm9vdDogJ0M6LydcclxuXHRkaXI6ICdDOi9wYXRoL2RpcidcclxuXHRmaWxlTmFtZTogJ2ZpbGUubGliLnRzJ1xyXG5cclxuXHRzdHViOiAnZmlsZSdcclxuXHRwdXJwb3NlOiAnbGliJ1xyXG5cdGV4dDogJy50cydcclxuXHR9XHJcblxyXG50cnV0aHkgY21kU3VjY2VlZHMgJ2xzJ1xyXG5cclxuYXdhaXQgY2l2ZXQydHNGaWxlKCdzYW1wbGUnLCAnbGliJylcclxuXHJcbnRydXRoeSBuZXdlckRlc3RGaWxlRXhpc3RzKCdzcmMvdGVzdC9iYXNlLXV0aWxzL3NhbXBsZS5saWIuY2l2ZXQnLCAnLnRzJylcclxuXHJcbigoKSA9PlxyXG5cdGhSZXN1bHQgOj0gYXdhaXQgZXhlY0NtZCgnZWNobycsIFsnSGVsbG8nXSwge30sIHRydWUpXHJcblx0Y29uc29sZS5kaXIgaFJlc3VsdFxyXG5cdHRydXRoeSBoUmVzdWx0LnN1Y2Nlc3NcclxuXHRlcXVhbCBoUmVzdWx0LmNvZGUsIDBcclxuXHRlcXVhbCBoUmVzdWx0LnN0ZG91dCwgXCJIZWxsb1xcblwiXHJcblx0ZXF1YWwgaFJlc3VsdC5zdGRlcnIsIFwiXCJcclxuXHQpKClcclxuXHJcbnRydXRoeSBjbWRTdWNjZWVkcyAnZWNobycsIFsnSGVsbG8nXVxyXG5cclxuZXF1YWwgc3BsaXRQYXR0ZXJucyhbXHJcblx0JyoqL3RlbXAudHh0J1xyXG5cdCchKiovdGVtcConXHJcblx0JyoudGVzdC50cydcclxuXHQnISAqKi9zcGVjaWFsLnR4dCdcclxuXHRdKSwgW1xyXG5cdFx0WycqKi90ZW1wLnR4dCcsICcqLnRlc3QudHMnXSxcclxuXHRcdFsnKiovdGVtcConLCAnKiovc3BlY2lhbC50eHQnXSxcclxuXHRcdF1cclxuXHJcbmVxdWFsIHNlcCgnbGFiZWwnLCAnLicsIDE1KSwgJy4uLiAgbGFiZWwgIC4uLidcclxuZXF1YWwgY2VudGVyZWQoJ2FiY2QnLCAxMiwgJy0nKSwgJy0tICBhYmNkICAtLSdcclxuIl19