"use strict";
// base-utils.lib.test.civet

import {
	assert, TDefined, TNotDefined, undef, defined,
	notdefined, assertIsDefined, assertNotDefined,
	croak, checkSetup, flag, nonOption, replaceInArray,
	fileExt, withExt, normalizePath, relpath,
	TPathInfo, parsePath, TExecResult, TReplaceHash,
	execCmd, cmdSucceeds, newerDestFileExists,
	splitPatterns, allFilesMatching, findFile,
	TProcFunc, TProcResult, procFiles,
	isFile, slurp, rmFile, buildFileName, buildTestFileName,

	civet2tsFile, getStringOption, getBooleanOption,
	tryCmd, doUnitTest, doInstallCmd, doRun,
	sep, centered, lAllLibs,
	} from 'base-utils'
import {
	equal, like, succeeds, fails, truthy, falsy,
	isType, notType, setDirTree,
	} from 'unit-test'

// --- Not Tested yet: (aside from last imports)
//        allFilesMatching
//        findFile
//        procFiles
// ---------------------------------------------------------------------------

setDirTree('src/test/base-utils', `file.txt
	a simple file
file2.txt
	a simple file
sample.lib.civet
	meaning := 42`)

// ---------------------------------------------------------------------------

succeeds(() => assert(2 === 2))
fails(   () => assert(2 === 3 + 5))

succeeds(() => checkSetup())

truthy(flag('c', ['-c']))
truthy(flag('c', ['-cm']))
truthy(flag('x', ['-cx']))
falsy( flag('x', ['-c']))
falsy( flag('c', []))
falsy( flag('c', ['-def']))

equal( nonOption(0, ['-d', 'x', 'y']), 'x')
equal( nonOption(1, ['-d', 'x', 'y']), 'y')

succeeds(() => defined('abc'))
fails(   () => defined(undef))
succeeds(() => notdefined(undef))
fails(   () => notdefined('abc'))

succeeds(() => assertIsDefined('abc'))
fails(   () => assertIsDefined(undef))

fails(   () => assertNotDefined('abc'))
succeeds(() => assertNotDefined(undef))

fails(   () => croak("Bad"))

equal(replaceInArray(['-cm','%PATH'], {'%PATH': '/temp.txt'}),
	['-cm', '/temp.txt'])
equal(replaceInArray(['a','b','c'], {
	b: 'x'
	}), ['a','x','c'])


// ---------------------------------------------------------------------------

truthy(  isFile('src/test/base-utils/file2.txt'))
succeeds(() => rmFile('src/test/base-utils/file2.txt'))
// falsy    isFile('src/test/base-utils/file2.txt')

truthy(isFile('src/test/base-utils/file.txt'))
falsy( isFile('src/test/base-utils/notafile.txt'))

equal(slurp('src/test/base-utils/file.txt'), 'a simple file')

equal(fileExt('temp.txt'), '.txt')
equal(withExt('temp.txt', '.md'), 'temp.md')

equal(normalizePath('c:\\Users\\johnd\\utils\\src\\lib\\fsys.lib.civet'),
	'C:/Users/johnd/utils/src/lib/fsys.lib.civet')

equal(buildFileName('dummy', 'lib', '.civet'), 'dummy.lib.civet')
equal(buildFileName('dummy', '', '.civet'), 'dummy.civet')
equal(buildFileName('dummy', undef, '.civet'), 'dummy.civet')
equal(buildTestFileName('dummy', 'lib', '.civet'), 'dummy.lib.test.civet')

equal(parsePath('c:\\path\\dir\\file.lib.ts'), {
	root: 'C:/',
	dir: 'C:/path/dir',
	fileName: 'file.lib.ts',

	stub: 'file',
	purpose: 'lib',
	ext: '.ts'
	})

truthy(cmdSucceeds('ls'))

await civet2tsFile('sample', 'lib')

truthy(newerDestFileExists('src/test/base-utils/sample.lib.civet', '.ts'));

(async () => {
	const hResult = await execCmd('echo', ['Hello'], {}, true)
	console.dir(hResult)
	truthy(hResult.success)
	equal(hResult.code, 0)
	equal(hResult.stdout, "Hello\n")
	equal(hResult.stderr, "")
}
	)()

truthy(cmdSucceeds('echo', ['Hello']))

equal(splitPatterns([
	'**/temp.txt',
	'!**/temp*',
	'*.test.ts',
	'! **/special.txt'
	]), [
		['**/temp.txt', '*.test.ts'],
		['**/temp*', '**/special.txt'],
		])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQzpcXFVzZXJzXFxqb2huZFxcdXRpbHNcXHNyY1xcdGVzdFxcYmFzZS11dGlscy5saWIudGVzdC5jaXZldC50c3giLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcam9obmRcXHV0aWxzXFxzcmNcXHRlc3RcXGJhc2UtdXRpbHMubGliLnRlc3QuY2l2ZXQiXSwibWFwcGluZ3MiOiI7QUFBQSw0QkFBMkI7QUFDM0IsQUFBQTtBQUNBLEFBQUEsTUFBTSxDQUFDLENBQUM7QUFDUixDQUFDLE1BQU0sQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQztBQUMvQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLGdCQUFnQixDQUFDO0FBQy9DLENBQUMsS0FBSyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsY0FBYyxDQUFDO0FBQ3BELENBQUMsT0FBTyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsYUFBYSxDQUFDLENBQUMsT0FBTyxDQUFDO0FBQzFDLENBQUMsU0FBUyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsWUFBWSxDQUFDO0FBQ2pELENBQUMsT0FBTyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsbUJBQW1CLENBQUM7QUFDM0MsQ0FBQyxhQUFhLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLFFBQVEsQ0FBQTtBQUMxQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLFNBQVMsQ0FBQztBQUNuQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLGFBQWEsQ0FBQyxDQUFDLGlCQUFpQixDQUFDO0FBQ3pEO0FBQ0EsQ0FBQyxZQUFZLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQztBQUNqRCxDQUFDLE1BQU0sQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLEtBQUssQ0FBQztBQUN6QyxDQUFDLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLFFBQVEsQ0FBQztBQUN6QixDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWTtBQUNwQixBQUFBLEFBQUEsTUFBTSxDQUFDLENBQUM7QUFDUixDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEtBQUssQ0FBQztBQUM3QyxDQUFDLE1BQU0sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFVBQVUsQ0FBQztBQUM3QixDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVztBQUNuQixBQUFBO0FBQ0EsQUFBQSxnREFBK0M7QUFDL0MsQUFBQSwwQkFBeUI7QUFDekIsQUFBQSxrQkFBaUI7QUFDakIsQUFBQSxtQkFBa0I7QUFDbEIsQUFBQSw4RUFBNkU7QUFDN0UsQUFBQTtBQUNBLEFBQUEsQUFBQSxVQUFVLENBQUEsQUFBQyxxQkFBcUIsQ0FBQyxDQUFDLENBQUc7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUVDLENBQUcsQ0FBQTtBQUNKLEFBQUE7QUFDQSxBQUFBLDhFQUE2RTtBQUM3RSxBQUFBO0FBQ0EsQUFBQSxBQUFBLFFBQVEsQ0FBQSxBQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUEsQUFBQyxDQUFDLENBQUMsR0FBRSxDQUFDLENBQUMsQ0FBQSxDQUFBO0FBQzVCLEFBQUEsQUFBQSxLQUFLLENBQUEsR0FBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFBLEFBQUMsQ0FBQyxDQUFDLEdBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQSxDQUFBO0FBQ2hDLEFBQUE7QUFDQSxBQUFBLEFBQUEsUUFBUSxDQUFBLEFBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUE7QUFDM0IsQUFBQTtBQUNBLEFBQUEsQUFBQSxNQUFNLENBQUEsQUFBQyxJQUFJLENBQUEsQUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFBLENBQUE7QUFDdkIsQUFBQSxBQUFBLE1BQU0sQ0FBQSxBQUFDLElBQUksQ0FBQSxBQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUEsQ0FBQTtBQUN4QixBQUFBLEFBQUEsTUFBTSxDQUFBLEFBQUMsSUFBSSxDQUFBLEFBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQSxDQUFBO0FBQ3hCLEFBQUEsQUFBQSxLQUFLLENBQUEsQ0FBRSxJQUFJLENBQUEsQUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFBLENBQUE7QUFDdkIsQUFBQSxBQUFBLEtBQUssQ0FBQSxDQUFFLElBQUksQ0FBQSxBQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBLENBQUE7QUFDbkIsQUFBQSxBQUFBLEtBQUssQ0FBQSxDQUFFLElBQUksQ0FBQSxBQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUEsQ0FBQTtBQUN6QixBQUFBO0FBQ0EsQUFBQSxBQUFBLEtBQUssQ0FBQSxDQUFFLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUE7QUFDMUMsQUFBQSxBQUFBLEtBQUssQ0FBQSxDQUFFLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUE7QUFDMUMsQUFBQTtBQUNBLEFBQUEsQUFBQSxRQUFRLENBQUEsQUFBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFBLEFBQUMsS0FBSyxDQUFBLENBQUE7QUFDNUIsQUFBQSxBQUFBLEtBQUssQ0FBQSxHQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUEsQUFBQyxLQUFLLENBQUEsQ0FBQTtBQUM1QixBQUFBLEFBQUEsUUFBUSxDQUFBLEFBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQSxBQUFDLEtBQUssQ0FBQSxDQUFBO0FBQy9CLEFBQUEsQUFBQSxLQUFLLENBQUEsR0FBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFBLEFBQUMsS0FBSyxDQUFBLENBQUE7QUFDL0IsQUFBQTtBQUNBLEFBQUEsQUFBQSxRQUFRLENBQUEsQUFBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxDQUFBO0FBQ3JDLEFBQUEsQUFBQSxLQUFLLENBQUEsR0FBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxDQUFBO0FBQ3JDLEFBQUE7QUFDQSxBQUFBLEFBQUEsS0FBSyxDQUFBLEdBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxDQUFBO0FBQ3RDLEFBQUEsQUFBQSxRQUFRLENBQUEsQUFBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLENBQUE7QUFDdEMsQUFBQTtBQUNBLEFBQUEsQUFBQSxLQUFLLENBQUEsR0FBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFBLEFBQUMsS0FBSyxDQUFBLENBQUE7QUFDMUIsQUFBQTtBQUNBLEFBQUEsQUFBQSxLQUFLLENBQUEsQUFBQyxjQUFjLENBQUMsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUM7QUFDOUQsQUFBQSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUE7QUFDckIsQUFBQSxBQUFBLEtBQUssQ0FBQSxBQUFDLGNBQWMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3JDLEFBQUEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHO0FBQ1AsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQTtBQUNsQixBQUFBO0FBQ0EsQUFBQTtBQUNBLEFBQUEsOEVBQTZFO0FBQzdFLEFBQUE7QUFDQSxBQUFBLEFBQUEsTUFBTSxDQUFBLEVBQUcsTUFBTSxDQUFDLCtCQUErQixDQUFDLENBQUE7QUFDaEQsQUFBQSxBQUFBLFFBQVEsQ0FBQSxBQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsK0JBQStCLENBQUMsQ0FBQTtBQUN0RCxBQUFBLG1EQUFrRDtBQUNsRCxBQUFBO0FBQ0EsQUFBQSxBQUFBLE1BQU0sQ0FBQSxBQUFDLE1BQU0sQ0FBQyw4QkFBOEIsQ0FBQyxDQUFBO0FBQzdDLEFBQUEsQUFBQSxLQUFLLENBQUEsQ0FBRSxNQUFNLENBQUMsa0NBQWtDLENBQUMsQ0FBQTtBQUNqRCxBQUFBO0FBQ0EsQUFBQSxBQUFBLEtBQUssQ0FBQSxBQUFDLEtBQUssQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDLENBQUMsZUFBZSxDQUFBO0FBQzVELEFBQUE7QUFDQSxBQUFBLEFBQUEsS0FBSyxDQUFBLEFBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFBO0FBQ2pDLEFBQUEsQUFBQSxLQUFLLENBQUEsQUFBQyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUE7QUFDM0MsQUFBQTtBQUNBLEFBQUEsQUFBQSxLQUFLLENBQUEsQUFBQyxhQUFhLENBQUMsbURBQW1ELENBQUMsQ0FBQztBQUN6RSxBQUFBLENBQUMsNkNBQTZDLENBQUE7QUFDOUMsQUFBQTtBQUNBLEFBQUEsQUFBQSxLQUFLLENBQUEsQUFBQyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxpQkFBaUIsQ0FBQTtBQUNoRSxBQUFBLEFBQUEsS0FBSyxDQUFBLEFBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsYUFBYSxDQUFBO0FBQ3pELEFBQUEsQUFBQSxLQUFLLENBQUEsQUFBQyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxhQUFhLENBQUE7QUFDNUQsQUFBQSxBQUFBLEtBQUssQ0FBQSxBQUFDLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsc0JBQXNCLENBQUE7QUFDekUsQUFBQTtBQUNBLEFBQUEsQUFBQSxLQUFLLENBQUEsQUFBQyxTQUFTLENBQUMsNEJBQTRCLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDaEQsQUFBQSxDQUFDLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQTtBQUNaLEFBQUEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxhQUFhLENBQUE7QUFDbkIsQUFBQSxDQUFDLFFBQVEsQ0FBQyxDQUFDLGFBQWEsQ0FBQTtBQUN4QixBQUFBO0FBQ0EsQUFBQSxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQTtBQUNiLEFBQUEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxLQUFLLENBQUE7QUFDZixBQUFBLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSztBQUNYLENBQUMsQ0FBQyxDQUFBO0FBQ0YsQUFBQTtBQUNBLEFBQUEsQUFBQSxNQUFNLENBQUEsQUFBQyxXQUFXLENBQUEsQUFBQyxJQUFJLENBQUEsQ0FBQTtBQUN2QixBQUFBO0FBQ0EsQUFBQSxBQUFBLEtBQUssQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLENBQUMsS0FBSyxDQUFDO0FBQ25DLEFBQUE7QUFDQSxBQUFBLEFBQUEsTUFBTSxDQUFBLEFBQUMsbUJBQW1CLENBQUMsc0NBQXNDLENBQUMsQ0FBQyxLQUFLLENBQUMsQyxDQUFBO0FBQ3pFLEFBQUE7QUFDQSxBQUFBLEFBQUEsQyxNQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQSxDQUFBO0FBQ04sQUFBQSxDQUFRLE1BQVAsT0FBTyxDQUFDLENBQUUsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztBQUN0RCxBQUFBLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQSxBQUFDLE9BQU8sQ0FBQTtBQUNwQixBQUFBLENBQUMsTUFBTSxDQUFBLEFBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQTtBQUN2QixBQUFBLENBQUMsS0FBSyxDQUFBLEFBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUN0QixBQUFBLENBQUMsS0FBSyxDQUFBLEFBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLFNBQVMsQ0FBQTtBQUNoQyxBQUFBLENBQUMsS0FBSyxDQUFBLEFBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQztBQUFBLENBQUE7QUFDekIsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNKLEFBQUE7QUFDQSxBQUFBLEFBQUEsTUFBTSxDQUFBLEFBQUMsV0FBVyxDQUFBLEFBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQSxDQUFBO0FBQ3BDLEFBQUE7QUFDQSxBQUFBLEFBQUEsS0FBSyxDQUFBLEFBQUMsYUFBYSxDQUFDLENBQUM7QUFDckIsQUFBQSxDQUFDLGFBQWEsQ0FBQTtBQUNkLEFBQUEsQ0FBQyxXQUFXLENBQUE7QUFDWixBQUFBLENBQUMsV0FBVyxDQUFBO0FBQ1osQUFBQSxDQUFDLGtCQUFrQjtBQUNuQixBQUFBLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ04sQUFBQSxFQUFFLENBQUMsYUFBYSxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDL0IsQUFBQSxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztBQUNqQyxBQUFBLEVBQUUsQ0FDRiIsIm5hbWVzIjpbXSwic291cmNlc0NvbnRlbnQiOlsiIyBiYXNlLXV0aWxzLmxpYi50ZXN0LmNpdmV0XHJcblxyXG5pbXBvcnQge1xyXG5cdGFzc2VydCwgVERlZmluZWQsIFROb3REZWZpbmVkLCB1bmRlZiwgZGVmaW5lZCxcclxuXHRub3RkZWZpbmVkLCBhc3NlcnRJc0RlZmluZWQsIGFzc2VydE5vdERlZmluZWQsXHJcblx0Y3JvYWssIGNoZWNrU2V0dXAsIGZsYWcsIG5vbk9wdGlvbiwgcmVwbGFjZUluQXJyYXksXHJcblx0ZmlsZUV4dCwgd2l0aEV4dCwgbm9ybWFsaXplUGF0aCwgcmVscGF0aCxcclxuXHRUUGF0aEluZm8sIHBhcnNlUGF0aCwgVEV4ZWNSZXN1bHQsIFRSZXBsYWNlSGFzaCxcclxuXHRleGVjQ21kLCBjbWRTdWNjZWVkcywgbmV3ZXJEZXN0RmlsZUV4aXN0cyxcclxuXHRzcGxpdFBhdHRlcm5zLCBhbGxGaWxlc01hdGNoaW5nLCBmaW5kRmlsZVxyXG5cdFRQcm9jRnVuYywgVFByb2NSZXN1bHQsIHByb2NGaWxlcyxcclxuXHRpc0ZpbGUsIHNsdXJwLCBybUZpbGUsIGJ1aWxkRmlsZU5hbWUsIGJ1aWxkVGVzdEZpbGVOYW1lLFxyXG5cclxuXHRjaXZldDJ0c0ZpbGUsIGdldFN0cmluZ09wdGlvbiwgZ2V0Qm9vbGVhbk9wdGlvbixcclxuXHR0cnlDbWQsIGRvVW5pdFRlc3QsIGRvSW5zdGFsbENtZCwgZG9SdW4sXHJcblx0c2VwLCBjZW50ZXJlZCwgbEFsbExpYnMsXHJcblx0fSBmcm9tICdiYXNlLXV0aWxzJ1xyXG5pbXBvcnQge1xyXG5cdGVxdWFsLCBsaWtlLCBzdWNjZWVkcywgZmFpbHMsIHRydXRoeSwgZmFsc3ksXHJcblx0aXNUeXBlLCBub3RUeXBlLCBzZXREaXJUcmVlLFxyXG5cdH0gZnJvbSAndW5pdC10ZXN0J1xyXG5cclxuIyAtLS0gTm90IFRlc3RlZCB5ZXQ6IChhc2lkZSBmcm9tIGxhc3QgaW1wb3J0cylcclxuIyAgICAgICAgYWxsRmlsZXNNYXRjaGluZ1xyXG4jICAgICAgICBmaW5kRmlsZVxyXG4jICAgICAgICBwcm9jRmlsZXNcclxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbnNldERpclRyZWUgJ3NyYy90ZXN0L2Jhc2UtdXRpbHMnLCBcIlwiXCJcclxuXHRmaWxlLnR4dFxyXG5cdFx0YSBzaW1wbGUgZmlsZVxyXG5cdGZpbGUyLnR4dFxyXG5cdFx0YSBzaW1wbGUgZmlsZVxyXG5cdHNhbXBsZS5saWIuY2l2ZXRcclxuXHRcdG1lYW5pbmcgOj0gNDJcclxuXHRcIlwiXCJcclxuXHJcbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5zdWNjZWVkcyAoKSA9PiBhc3NlcnQgMiA9PSAyXHJcbmZhaWxzICAgICgpID0+IGFzc2VydCAyID09IDMgKyA1XHJcblxyXG5zdWNjZWVkcyAoKSA9PiBjaGVja1NldHVwKClcclxuXHJcbnRydXRoeSBmbGFnICdjJywgWyctYyddXHJcbnRydXRoeSBmbGFnICdjJywgWyctY20nXVxyXG50cnV0aHkgZmxhZyAneCcsIFsnLWN4J11cclxuZmFsc3kgIGZsYWcgJ3gnLCBbJy1jJ11cclxuZmFsc3kgIGZsYWcgJ2MnLCBbXVxyXG5mYWxzeSAgZmxhZyAnYycsIFsnLWRlZiddXHJcblxyXG5lcXVhbCAgbm9uT3B0aW9uKDAsIFsnLWQnLCAneCcsICd5J10pLCAneCdcclxuZXF1YWwgIG5vbk9wdGlvbigxLCBbJy1kJywgJ3gnLCAneSddKSwgJ3knXHJcblxyXG5zdWNjZWVkcyAoKSA9PiBkZWZpbmVkICdhYmMnXHJcbmZhaWxzICAgICgpID0+IGRlZmluZWQgdW5kZWZcclxuc3VjY2VlZHMgKCkgPT4gbm90ZGVmaW5lZCB1bmRlZlxyXG5mYWlscyAgICAoKSA9PiBub3RkZWZpbmVkICdhYmMnXHJcblxyXG5zdWNjZWVkcyAoKSA9PiBhc3NlcnRJc0RlZmluZWQoJ2FiYycpXHJcbmZhaWxzICAgICgpID0+IGFzc2VydElzRGVmaW5lZCh1bmRlZilcclxuXHJcbmZhaWxzICAgICgpID0+IGFzc2VydE5vdERlZmluZWQoJ2FiYycpXHJcbnN1Y2NlZWRzICgpID0+IGFzc2VydE5vdERlZmluZWQodW5kZWYpXHJcblxyXG5mYWlscyAgICAoKSA9PiBjcm9hayBcIkJhZFwiXHJcblxyXG5lcXVhbCByZXBsYWNlSW5BcnJheShbJy1jbScsJyVQQVRIJ10sIHsnJVBBVEgnOiAnL3RlbXAudHh0J30pLFxyXG5cdFsnLWNtJywgJy90ZW1wLnR4dCddXHJcbmVxdWFsIHJlcGxhY2VJbkFycmF5KFsnYScsJ2InLCdjJ10sIHtcclxuXHRiOiAneCdcclxuXHR9KSwgWydhJywneCcsJ2MnXVxyXG5cclxuXHJcbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG50cnV0aHkgICBpc0ZpbGUoJ3NyYy90ZXN0L2Jhc2UtdXRpbHMvZmlsZTIudHh0Jylcclxuc3VjY2VlZHMgKCkgPT4gcm1GaWxlKCdzcmMvdGVzdC9iYXNlLXV0aWxzL2ZpbGUyLnR4dCcpXHJcbiMgZmFsc3kgICAgaXNGaWxlKCdzcmMvdGVzdC9iYXNlLXV0aWxzL2ZpbGUyLnR4dCcpXHJcblxyXG50cnV0aHkgaXNGaWxlKCdzcmMvdGVzdC9iYXNlLXV0aWxzL2ZpbGUudHh0JylcclxuZmFsc3kgIGlzRmlsZSgnc3JjL3Rlc3QvYmFzZS11dGlscy9ub3RhZmlsZS50eHQnKVxyXG5cclxuZXF1YWwgc2x1cnAoJ3NyYy90ZXN0L2Jhc2UtdXRpbHMvZmlsZS50eHQnKSwgJ2Egc2ltcGxlIGZpbGUnXHJcblxyXG5lcXVhbCBmaWxlRXh0KCd0ZW1wLnR4dCcpLCAnLnR4dCdcclxuZXF1YWwgd2l0aEV4dCgndGVtcC50eHQnLCAnLm1kJyksICd0ZW1wLm1kJ1xyXG5cclxuZXF1YWwgbm9ybWFsaXplUGF0aCgnYzpcXFxcVXNlcnNcXFxcam9obmRcXFxcdXRpbHNcXFxcc3JjXFxcXGxpYlxcXFxmc3lzLmxpYi5jaXZldCcpLFxyXG5cdCdDOi9Vc2Vycy9qb2huZC91dGlscy9zcmMvbGliL2ZzeXMubGliLmNpdmV0J1xyXG5cclxuZXF1YWwgYnVpbGRGaWxlTmFtZSgnZHVtbXknLCAnbGliJywgJy5jaXZldCcpLCAnZHVtbXkubGliLmNpdmV0J1xyXG5lcXVhbCBidWlsZEZpbGVOYW1lKCdkdW1teScsICcnLCAnLmNpdmV0JyksICdkdW1teS5jaXZldCdcclxuZXF1YWwgYnVpbGRGaWxlTmFtZSgnZHVtbXknLCB1bmRlZiwgJy5jaXZldCcpLCAnZHVtbXkuY2l2ZXQnXHJcbmVxdWFsIGJ1aWxkVGVzdEZpbGVOYW1lKCdkdW1teScsICdsaWInLCAnLmNpdmV0JyksICdkdW1teS5saWIudGVzdC5jaXZldCdcclxuXHJcbmVxdWFsIHBhcnNlUGF0aCgnYzpcXFxccGF0aFxcXFxkaXJcXFxcZmlsZS5saWIudHMnKSwge1xyXG5cdHJvb3Q6ICdDOi8nXHJcblx0ZGlyOiAnQzovcGF0aC9kaXInXHJcblx0ZmlsZU5hbWU6ICdmaWxlLmxpYi50cydcclxuXHJcblx0c3R1YjogJ2ZpbGUnXHJcblx0cHVycG9zZTogJ2xpYidcclxuXHRleHQ6ICcudHMnXHJcblx0fVxyXG5cclxudHJ1dGh5IGNtZFN1Y2NlZWRzICdscydcclxuXHJcbmF3YWl0IGNpdmV0MnRzRmlsZSgnc2FtcGxlJywgJ2xpYicpXHJcblxyXG50cnV0aHkgbmV3ZXJEZXN0RmlsZUV4aXN0cygnc3JjL3Rlc3QvYmFzZS11dGlscy9zYW1wbGUubGliLmNpdmV0JywgJy50cycpXHJcblxyXG4oKCkgPT5cclxuXHRoUmVzdWx0IDo9IGF3YWl0IGV4ZWNDbWQoJ2VjaG8nLCBbJ0hlbGxvJ10sIHt9LCB0cnVlKVxyXG5cdGNvbnNvbGUuZGlyIGhSZXN1bHRcclxuXHR0cnV0aHkgaFJlc3VsdC5zdWNjZXNzXHJcblx0ZXF1YWwgaFJlc3VsdC5jb2RlLCAwXHJcblx0ZXF1YWwgaFJlc3VsdC5zdGRvdXQsIFwiSGVsbG9cXG5cIlxyXG5cdGVxdWFsIGhSZXN1bHQuc3RkZXJyLCBcIlwiXHJcblx0KSgpXHJcblxyXG50cnV0aHkgY21kU3VjY2VlZHMgJ2VjaG8nLCBbJ0hlbGxvJ11cclxuXHJcbmVxdWFsIHNwbGl0UGF0dGVybnMoW1xyXG5cdCcqKi90ZW1wLnR4dCdcclxuXHQnISoqL3RlbXAqJ1xyXG5cdCcqLnRlc3QudHMnXHJcblx0JyEgKiovc3BlY2lhbC50eHQnXHJcblx0XSksIFtcclxuXHRcdFsnKiovdGVtcC50eHQnLCAnKi50ZXN0LnRzJ10sXHJcblx0XHRbJyoqL3RlbXAqJywgJyoqL3NwZWNpYWwudHh0J10sXHJcblx0XHRdIl19