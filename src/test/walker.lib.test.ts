"use strict";
// walker.lib.test.civet

import {undef, hash, isArray, isHash} from 'datatypes'
import {hasKeys} from 'llutils'
import {DBG, setLogLevel} from 'logger'
import {getCmdArgs} from 'cmd-args'
import {
	TNodeInfo, Walker,
	} from 'walker'
import {
	equal, truthy, falsy, isType, notType,
	} from 'unit-test'

getCmdArgs()
setLogLevel('debug')

// ---------------------------------------------------------------------------

DBG("type TNodeInfo")

isType( 'TNodeInfo<number>', {node: 42, level: 1,   parent: undef})
notType('TNodeInfo<number>', {node: 42, level: 'a', parent: undef})

// ---------------------------------------------------------------------------

DBG("class Walker");

(() => {
	// --- Try a very basic hash type
	//     A node is a hash with keys 'name' and 'gender'

	type TPerson = {
		name: string
		gender: 'male' | 'female'
		}

	const walker = new Walker<TPerson>()
	walker.useNode = (x: unknown): boolean => {
			return hasKeys(x, 'name', 'gender')
	}

	// --- Walk a single node
	const results=[];for (const item of walker.walk({
			name: 'John',
			gender: 'male'
			})) {const h: TNodeInfo<TPerson> = item;
		results.push(`${h.node.name} is ${h.node.gender}`)
	};const lStrings =results
	equal(lStrings, ['John is male'])

	// --- Walk an array
	const results1=[];for (const item1 of walker.walk([
			{
				name: 'John',
				gender: 'male'
				},
			{
				name: 'Julie',
				gender: 'female'
				}
			])) {const h: TNodeInfo<TPerson> = item1;
		results1.push(`${h.node.name} is ${h.node.gender}`)
	};const lStrings2 =results1
	equal(lStrings2, ['John is male', 'Julie is female'])

	// --- Walk an object
	const results2=[];for (const item2 of walker.walk({
			first: {
				name: 'John',
				gender: 'male'
				},
			second: {
				name: 'Julie',
				gender: 'female'
				}
			})) {const h: TNodeInfo<TPerson> = item2;
		results2.push(`${h.index}: ${h.node.name} is ${h.node.gender}`)
	};const lStrings3 =results2
	equal(lStrings3, [
		'first: John is male',
		'second: Julie is female'
		])

	const h = {
		friends: [
			{name: 'John Bowling', gender: 'male'},
			{name: 'Julie Booker', gender: 'female'}
			],
		name: 'John Deighan',
		gender: 'male',
		address: {
			street: '1749 Main St.',
			city: 'Blacksburg',
			state: 'VA'
			}
		} as const

	const results3=[];for (const item3 of walker.walk(h)) {const h: TNodeInfo<TPerson> = item3;
		results3.push(h.node.name)
	};const lNames =results3
	equal(lNames, ['John Deighan', 'John Bowling', 'Julie Booker'])

	// --- put it in an array
	const h2 = [{
		friends: [
			{name: 'John Bowling', gender: 'male'},
			{name: 'Julie Booker', gender: 'female'}
			],
		name: 'John Deighan',
		gender: 'male',
		address: {
			street: '1749 Main St.',
			city: 'Blacksburg',
			state: 'VA'
			}
		}] as const

	const results4=[];for (const item4 of walker.walk(h)) {const h: TNodeInfo<TPerson> = item4;
		results4.push(h.node.name)
	};const lNames2 =results4
	equal(lNames2, ['John Deighan', 'John Bowling', 'Julie Booker'])

	// --- put it in a hash
	const h3 = { stuff: {
		friends: [
			{name: 'John Bowling', gender: 'male'},
			{name: 'Julie Booker', gender: 'female'}
			],
		name: 'John Deighan',
		gender: 'male',
		address: {
			street: '1749 Main St.',
			city: 'Blacksburg',
			state: 'VA'
			}
		}} as const

	const results5=[];for (const item5 of walker.walk(h)) {const h: TNodeInfo<TPerson> = item5;
		results5.push(h.node.name)
	};const lNames3 =results5
	equal(lNames3, ['John Deighan', 'John Bowling', 'Julie Booker'])
}
	)()

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQzpcXFVzZXJzXFxqb2huZFxcdXRpbHNcXHNyY1xcdGVzdFxcd2Fsa2VyLmxpYi50ZXN0LmNpdmV0LnRzeCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxqb2huZFxcdXRpbHNcXHNyY1xcdGVzdFxcd2Fsa2VyLmxpYi50ZXN0LmNpdmV0Il0sIm1hcHBpbmdzIjoiO0FBQUEsd0JBQXVCO0FBQ3ZCLEFBQUE7QUFDQSxBQUFBLE1BQU0sQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXO0FBQ3RELEFBQUEsQUFBQSxNQUFNLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUztBQUMvQixBQUFBLEFBQUEsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVE7QUFDdkMsQUFBQSxBQUFBLE1BQU0sQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVO0FBQ25DLEFBQUEsQUFBQSxNQUFNLENBQUMsQ0FBQztBQUNSLENBQUMsU0FBUyxDQUFDLENBQUMsTUFBTSxDQUFDO0FBQ25CLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRO0FBQ2hCLEFBQUEsQUFBQSxNQUFNLENBQUMsQ0FBQztBQUNSLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsT0FBTyxDQUFDO0FBQ3ZDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXO0FBQ25CLEFBQUE7QUFDQSxBQUFBLEFBQUEsVUFBVSxDQUFDLENBQUM7QUFDWixBQUFBLEFBQUEsV0FBVyxDQUFBLEFBQUMsT0FBTyxDQUFBO0FBQ25CLEFBQUE7QUFDQSxBQUFBLDhFQUE2RTtBQUM3RSxBQUFBO0FBQ0EsQUFBQSxBQUFBLEdBQUcsQ0FBQSxBQUFDLGdCQUFnQixDQUFB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UyxDQUFDLE9BQU8sQyxHLEssQ0FBbUI7QUFDdkQsQUFBQSxFLFEsTUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEksQztDQUFJLEMsQ0FETCxNQUFQLE9BQU8sQ0FBQyxDLFFBQ0k7QUFDYixBQUFBLENBQUMsS0FBSyxDQUFBLEFBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxjQUFjLENBQUMsQztBQUFBLENBQUE7QUFDaEUsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNKIiwibmFtZXMiOltdLCJzb3VyY2VzQ29udGVudCI6WyIjIHdhbGtlci5saWIudGVzdC5jaXZldFxyXG5cclxuaW1wb3J0IHt1bmRlZiwgaGFzaCwgaXNBcnJheSwgaXNIYXNofSBmcm9tICdkYXRhdHlwZXMnXHJcbmltcG9ydCB7aGFzS2V5c30gZnJvbSAnbGx1dGlscydcclxuaW1wb3J0IHtEQkcsIHNldExvZ0xldmVsfSBmcm9tICdsb2dnZXInXHJcbmltcG9ydCB7Z2V0Q21kQXJnc30gZnJvbSAnY21kLWFyZ3MnXHJcbmltcG9ydCB7XHJcblx0VE5vZGVJbmZvLCBXYWxrZXIsXHJcblx0fSBmcm9tICd3YWxrZXInXHJcbmltcG9ydCB7XHJcblx0ZXF1YWwsIHRydXRoeSwgZmFsc3ksIGlzVHlwZSwgbm90VHlwZSxcclxuXHR9IGZyb20gJ3VuaXQtdGVzdCdcclxuXHJcbmdldENtZEFyZ3MoKVxyXG5zZXRMb2dMZXZlbCAnZGVidWcnXHJcblxyXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuREJHIFwidHlwZSBUTm9kZUluZm9cIlxyXG5cclxuaXNUeXBlICAnVE5vZGVJbmZvPG51bWJlcj4nLCB7bm9kZTogNDIsIGxldmVsOiAxLCAgIHBhcmVudDogdW5kZWZ9XHJcbm5vdFR5cGUgJ1ROb2RlSW5mbzxudW1iZXI+Jywge25vZGU6IDQyLCBsZXZlbDogJ2EnLCBwYXJlbnQ6IHVuZGVmfVxyXG5cclxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbkRCRyBcImNsYXNzIFdhbGtlclwiXHJcblxyXG4oKCkgPT5cclxuXHQjIC0tLSBUcnkgYSB2ZXJ5IGJhc2ljIGhhc2ggdHlwZVxyXG5cdCMgICAgIEEgbm9kZSBpcyBhIGhhc2ggd2l0aCBrZXlzICduYW1lJyBhbmQgJ2dlbmRlcidcclxuXHJcblx0dHlwZSBUUGVyc29uID0ge1xyXG5cdFx0bmFtZTogc3RyaW5nXHJcblx0XHRnZW5kZXI6ICdtYWxlJyB8ICdmZW1hbGUnXHJcblx0XHR9XHJcblxyXG5cdHdhbGtlciA6PSBuZXcgV2Fsa2VyPFRQZXJzb24+KClcclxuXHR3YWxrZXIudXNlTm9kZSA9ICh4OiB1bmtub3duKTogYm9vbGVhbiA9PlxyXG5cdFx0XHRyZXR1cm4gaGFzS2V5cyh4LCAnbmFtZScsICdnZW5kZXInKVxyXG5cclxuXHQjIC0tLSBXYWxrIGEgc2luZ2xlIG5vZGVcclxuXHRsU3RyaW5ncyA6PSBmb3IgaDogVE5vZGVJbmZvPFRQZXJzb24+IG9mIHdhbGtlci53YWxrKHtcclxuXHRcdFx0bmFtZTogJ0pvaG4nXHJcblx0XHRcdGdlbmRlcjogJ21hbGUnXHJcblx0XHRcdH0pXHJcblx0XHRcIiN7aC5ub2RlLm5hbWV9IGlzICN7aC5ub2RlLmdlbmRlcn1cIlxyXG5cdGVxdWFsIGxTdHJpbmdzLCBbJ0pvaG4gaXMgbWFsZSddXHJcblxyXG5cdCMgLS0tIFdhbGsgYW4gYXJyYXlcclxuXHRsU3RyaW5nczIgOj0gZm9yIGg6IFROb2RlSW5mbzxUUGVyc29uPiBvZiB3YWxrZXIud2FsayhbXHJcblx0XHRcdHtcclxuXHRcdFx0XHRuYW1lOiAnSm9obidcclxuXHRcdFx0XHRnZW5kZXI6ICdtYWxlJ1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0e1xyXG5cdFx0XHRcdG5hbWU6ICdKdWxpZSdcclxuXHRcdFx0XHRnZW5kZXI6ICdmZW1hbGUnXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRdKVxyXG5cdFx0XCIje2gubm9kZS5uYW1lfSBpcyAje2gubm9kZS5nZW5kZXJ9XCJcclxuXHRlcXVhbCBsU3RyaW5nczIsIFsnSm9obiBpcyBtYWxlJywgJ0p1bGllIGlzIGZlbWFsZSddXHJcblxyXG5cdCMgLS0tIFdhbGsgYW4gb2JqZWN0XHJcblx0bFN0cmluZ3MzIDo9IGZvciBoOiBUTm9kZUluZm88VFBlcnNvbj4gb2Ygd2Fsa2VyLndhbGsoe1xyXG5cdFx0XHRmaXJzdDoge1xyXG5cdFx0XHRcdG5hbWU6ICdKb2huJ1xyXG5cdFx0XHRcdGdlbmRlcjogJ21hbGUnXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRzZWNvbmQ6IHtcclxuXHRcdFx0XHRuYW1lOiAnSnVsaWUnXHJcblx0XHRcdFx0Z2VuZGVyOiAnZmVtYWxlJ1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSlcclxuXHRcdFwiI3toLmluZGV4fTogI3toLm5vZGUubmFtZX0gaXMgI3toLm5vZGUuZ2VuZGVyfVwiXHJcblx0ZXF1YWwgbFN0cmluZ3MzLCBbXHJcblx0XHQnZmlyc3Q6IEpvaG4gaXMgbWFsZScsXHJcblx0XHQnc2Vjb25kOiBKdWxpZSBpcyBmZW1hbGUnXHJcblx0XHRdXHJcblxyXG5cdGggOj0ge1xyXG5cdFx0ZnJpZW5kczogW1xyXG5cdFx0XHR7bmFtZTogJ0pvaG4gQm93bGluZycsIGdlbmRlcjogJ21hbGUnfVxyXG5cdFx0XHR7bmFtZTogJ0p1bGllIEJvb2tlcicsIGdlbmRlcjogJ2ZlbWFsZSd9XHJcblx0XHRcdF1cclxuXHRcdG5hbWU6ICdKb2huIERlaWdoYW4nXHJcblx0XHRnZW5kZXI6ICdtYWxlJ1xyXG5cdFx0YWRkcmVzczoge1xyXG5cdFx0XHRzdHJlZXQ6ICcxNzQ5IE1haW4gU3QuJ1xyXG5cdFx0XHRjaXR5OiAnQmxhY2tzYnVyZydcclxuXHRcdFx0c3RhdGU6ICdWQSdcclxuXHRcdFx0fVxyXG5cdFx0fSBhcyBjb25zdFxyXG5cclxuXHRsTmFtZXMgOj0gZm9yIGg6IFROb2RlSW5mbzxUUGVyc29uPiBvZiB3YWxrZXIud2FsayhoKVxyXG5cdFx0aC5ub2RlLm5hbWVcclxuXHRlcXVhbCBsTmFtZXMsIFsnSm9obiBEZWlnaGFuJywgJ0pvaG4gQm93bGluZycsICdKdWxpZSBCb29rZXInXVxyXG5cclxuXHQjIC0tLSBwdXQgaXQgaW4gYW4gYXJyYXlcclxuXHRoMiA6PSBbe1xyXG5cdFx0ZnJpZW5kczogW1xyXG5cdFx0XHR7bmFtZTogJ0pvaG4gQm93bGluZycsIGdlbmRlcjogJ21hbGUnfVxyXG5cdFx0XHR7bmFtZTogJ0p1bGllIEJvb2tlcicsIGdlbmRlcjogJ2ZlbWFsZSd9XHJcblx0XHRcdF1cclxuXHRcdG5hbWU6ICdKb2huIERlaWdoYW4nXHJcblx0XHRnZW5kZXI6ICdtYWxlJ1xyXG5cdFx0YWRkcmVzczoge1xyXG5cdFx0XHRzdHJlZXQ6ICcxNzQ5IE1haW4gU3QuJ1xyXG5cdFx0XHRjaXR5OiAnQmxhY2tzYnVyZydcclxuXHRcdFx0c3RhdGU6ICdWQSdcclxuXHRcdFx0fVxyXG5cdFx0fV0gYXMgY29uc3RcclxuXHJcblx0bE5hbWVzMiA6PSBmb3IgaDogVE5vZGVJbmZvPFRQZXJzb24+IG9mIHdhbGtlci53YWxrKGgpXHJcblx0XHRoLm5vZGUubmFtZVxyXG5cdGVxdWFsIGxOYW1lczIsIFsnSm9obiBEZWlnaGFuJywgJ0pvaG4gQm93bGluZycsICdKdWxpZSBCb29rZXInXVxyXG5cclxuXHQjIC0tLSBwdXQgaXQgaW4gYSBoYXNoXHJcblx0aDMgOj0geyBzdHVmZjoge1xyXG5cdFx0ZnJpZW5kczogW1xyXG5cdFx0XHR7bmFtZTogJ0pvaG4gQm93bGluZycsIGdlbmRlcjogJ21hbGUnfVxyXG5cdFx0XHR7bmFtZTogJ0p1bGllIEJvb2tlcicsIGdlbmRlcjogJ2ZlbWFsZSd9XHJcblx0XHRcdF1cclxuXHRcdG5hbWU6ICdKb2huIERlaWdoYW4nXHJcblx0XHRnZW5kZXI6ICdtYWxlJ1xyXG5cdFx0YWRkcmVzczoge1xyXG5cdFx0XHRzdHJlZXQ6ICcxNzQ5IE1haW4gU3QuJ1xyXG5cdFx0XHRjaXR5OiAnQmxhY2tzYnVyZydcclxuXHRcdFx0c3RhdGU6ICdWQSdcclxuXHRcdFx0fVxyXG5cdFx0fX0gYXMgY29uc3RcclxuXHJcblx0bE5hbWVzMyA6PSBmb3IgaDogVE5vZGVJbmZvPFRQZXJzb24+IG9mIHdhbGtlci53YWxrKGgpXHJcblx0XHRoLm5vZGUubmFtZVxyXG5cdGVxdWFsIGxOYW1lczMsIFsnSm9obiBEZWlnaGFuJywgJ0pvaG4gQm93bGluZycsICdKdWxpZSBCb29rZXInXVxyXG5cdCkoKVxyXG4iXX0=