"use strict";
// temp.civet

import {
	undef, defined, notdefined, LOG, FAIL, SUCCEED, findFile,
	} from 'base-utils'
import {o} from 'llutils'
import {withExt} from 'fsys'
import {getCmdArgs} from 'cmd-args'
import {getSourceMap, mapSourcePos} from 'source-map'
import {setDirTree} from 'unit-test'

getCmdArgs()

// ---------------------------------------------------------------------------

const fileName = 'source-map-test.civet'

setDirTree('src/test/temporary', `${fileName}
	import {undef} from 'datatypes'

	export sum := (x: number, y: number) =>

		return x + y`, o`clear compile`)

const path = findFile(withExt(fileName, '.ts'))
if (defined(path)) {
	const smap = getSourceMap(path)
	if (notdefined(smap)) {
		FAIL("Source Map NOT FOUND")
	}

	const newPos = mapSourcePos({
		path,
		line: 6,
		column: 2
		})
	console.log(newPos)
}
else {
	FAIL(`File ${fileName} not found`)
}

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQzpcXFVzZXJzXFxqb2huZFxcdXRpbHNcXHNyY1xcdGVzdFxcdGVtcC5jaXZldC50c3giLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcam9obmRcXHV0aWxzXFxzcmNcXHRlc3RcXHRlbXAuY2l2ZXQiXSwibWFwcGluZ3MiOiI7QUFBQSxhQUFZO0FBQ1osQUFBQTtBQUNBLEFBQUEsTUFBTSxDQUFDLENBQUM7QUFDUixDQUFDLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFFBQVEsQ0FBQztBQUMxRCxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWTtBQUNwQixBQUFBLEFBQUEsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVM7QUFDekIsQUFBQSxBQUFBLE1BQU0sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNO0FBQzVCLEFBQUEsQUFBQSxNQUFNLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVTtBQUNuQyxBQUFBLEFBQUEsTUFBTSxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsSUFBSSxDQUFDLFlBQVk7QUFDckQsQUFBQSxBQUFBLE1BQU0sQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXO0FBQ3BDLEFBQUE7QUFDQSxBQUFBLEFBQUEsVUFBVSxDQUFDLENBQUM7QUFDWixBQUFBO0FBQ0EsQUFBQSw4RUFBNkU7QUFDN0UsQUFBQTtBQUNBLEFBQUEsQUFBUSxNQUFSLFFBQVEsQ0FBQyxDQUFFLENBQUMsdUJBQXVCO0FBQ25DLEFBQUE7QUFDQSxBQUFBLEFBQUEsVUFBVSxDQUFBLEFBQUMsb0JBQW9CLENBQUMsQ0FBQyxDQUFHLEFBQ25DLEVBQUUsUUFBUSxDQUFDO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUNDLENBQUcsQ0FBQyxDQUFDLEMsZUFBZ0IsQ0FBQTtBQUN0QixBQUFBO0FBQ0EsQUFBQSxBQUFJLE1BQUosSUFBSSxDQUFDLENBQUUsQ0FBQyxRQUFRLENBQUEsQUFBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUE7QUFDekMsQUFBQSxBQUFBLEdBQUcsQ0FBQSxPQUFPLENBQUEsQUFBQyxJQUFJLENBQUEsQ0FBQSxDQUFBLENBQUE7QUFDZixBQUFBLENBQUssTUFBSixJQUFJLENBQUMsQ0FBRSxDQUFDLFlBQVksQ0FBQSxBQUFDLElBQUksQ0FBQTtBQUMxQixBQUFBLENBQUMsR0FBRyxDQUFBLFVBQVUsQ0FBQSxBQUFDLElBQUksQ0FBQSxDQUFBLENBQUEsQ0FBQTtBQUNuQixBQUFBLEVBQUUsSUFBSSxDQUFBLEFBQUMsc0JBQXNCLEM7Q0FBQSxDQUFBO0FBQzdCLEFBQUE7QUFDQSxBQUFBLENBQU8sTUFBTixNQUFNLENBQUMsQ0FBRSxDQUFDLFlBQVksQ0FBQSxBQUFDLENBQUM7QUFDekIsQUFBQSxFQUFFLElBQUksQ0FBQTtBQUNOLEFBQUEsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDVCxBQUFBLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQztBQUNYLEVBQUUsQ0FBQyxDQUFBO0FBQ0gsQUFBQSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUEsQUFBQyxNQUFNLEM7QUFBQSxDQUFBO0FBQ25CLEFBQUEsQUFBQSxJQUFJLENBQUEsQ0FBQTtBQUNKLEFBQUEsQ0FBQyxJQUFJLENBQUEsQUFBQyxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsVUFBVSxDQUFDLEM7QUFBQSxDQUFBO0FBQ2xDIiwibmFtZXMiOltdLCJzb3VyY2VzQ29udGVudCI6WyIjIHRlbXAuY2l2ZXRcblxuaW1wb3J0IHtcblx0dW5kZWYsIGRlZmluZWQsIG5vdGRlZmluZWQsIExPRywgRkFJTCwgU1VDQ0VFRCwgZmluZEZpbGUsXG5cdH0gZnJvbSAnYmFzZS11dGlscydcbmltcG9ydCB7b30gZnJvbSAnbGx1dGlscydcbmltcG9ydCB7d2l0aEV4dH0gZnJvbSAnZnN5cydcbmltcG9ydCB7Z2V0Q21kQXJnc30gZnJvbSAnY21kLWFyZ3MnXG5pbXBvcnQge2dldFNvdXJjZU1hcCwgbWFwU291cmNlUG9zfSBmcm9tICdzb3VyY2UtbWFwJ1xuaW1wb3J0IHtzZXREaXJUcmVlfSBmcm9tICd1bml0LXRlc3QnXG5cbmdldENtZEFyZ3MoKVxuXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5maWxlTmFtZSA6PSAnc291cmNlLW1hcC10ZXN0LmNpdmV0J1xuXG5zZXREaXJUcmVlICdzcmMvdGVzdC90ZW1wb3JhcnknLCBcIlwiXCJcblx0I3tmaWxlTmFtZX1cblx0XHRpbXBvcnQge3VuZGVmfSBmcm9tICdkYXRhdHlwZXMnXG5cblx0XHRleHBvcnQgc3VtIDo9ICh4OiBudW1iZXIsIHk6IG51bWJlcikgPT5cblxuXHRcdFx0cmV0dXJuIHggKyB5XG5cdFwiXCJcIiwgbydjbGVhciBjb21waWxlJ1xuXG5wYXRoIDo9IGZpbmRGaWxlIHdpdGhFeHQoZmlsZU5hbWUsICcudHMnKVxuaWYgZGVmaW5lZCBwYXRoXG5cdHNtYXAgOj0gZ2V0U291cmNlTWFwIHBhdGhcblx0aWYgbm90ZGVmaW5lZCBzbWFwXG5cdFx0RkFJTCBcIlNvdXJjZSBNYXAgTk9UIEZPVU5EXCJcblxuXHRuZXdQb3MgOj0gbWFwU291cmNlUG9zIHtcblx0XHRwYXRoXG5cdFx0bGluZTogNlxuXHRcdGNvbHVtbjogMlxuXHRcdH1cblx0Y29uc29sZS5sb2cgbmV3UG9zXG5lbHNlXG5cdEZBSUwgXCJGaWxlICN7ZmlsZU5hbWV9IG5vdCBmb3VuZFwiXG4iXX0=