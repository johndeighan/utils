"use strict";
// typescript.lib.test.civet

import {SourceFile} from 'typescript'
import {
	addFunctionNames, removeFunctionNames,
	} from '../src/lib/typescript.lib.ts'
import {
	getCmdArgs, DBG, isHash, setDirTree, pass,
	slurp, withExt, o, s, t,

	ts2ast, ts2js, ast2ts, ast2js, typeCheckFiles, pprintAST,
	getCode, normalizeCode, truncStr,
	} from '../src/lib/utils.lib.ts'
import {
	equal, like, succeeds, fails, truthy, falsy, isType,
	} from '../src/lib/unit-test.lib.ts'

const hArgs = getCmdArgs()

// ---------------------------------------------------------------------------

const setup = (): void => {

	DBG("setDirTree()")

	setDirTree('test/typescript', `test.ts
	const str: string = 'abc'
test2.ts
	const func1 = (str: string): boolean =>
		return true`)
}

setup()

// ---------------------------------------------------------------------------

DBG("getCode(str)")

equal(getCode('let x = 42;'), 'let x = 42;')
equal(getCode('test/typescript/test.ts'), `const str: string = 'abc'`)

DBG("addFunctionNames(code)");

(() => {
	const str1 = `function*(line) {
	yield {
		kind: 'line',
		str: line
		};
	return;
}`

	const str2 = `function(line) {
  return 42;
}`
	const str3 = `${str1}\n${str2}`

	equal(addFunctionNames(str1), `function* __dummy99(line) {
	yield {
		kind: 'line',
		str: line
		};
	return;
}`)
	equal(addFunctionNames(str2), `function __dummy99(line) {
  return 42;
}`)
	equal(addFunctionNames(str3), `function* __dummy99(line) {
	yield {
		kind: 'line',
		str: line
		};
	return;
}
function __dummy100(line) {
  return 42;
}`)
}
	)()

DBG("removeFunctionNames(code)")

equal(removeFunctionNames("function __dummy9999("),
	"function (")
equal(removeFunctionNames("function* __dummy9999("),
	"function* (")

DBG("normalizeCode(code)")

equal(normalizeCode('  let x  =  42;'), 'let x=42;')
equal(normalizeCode('a  b  c', '.txt'), 'a b c');

(() => {
	const func = (str: string): boolean => {
		// --- just return a true value
		const s: string = 'abcde'
		return true
	}

	equal(normalizeCode(func.toString()),
		"str=>{const s=\"abcde\";return true};")
}
	)()

DBG("truncStr(str, len)")

equal(truncStr('abc', 12), 'abc')
equal(truncStr('abcdefg', 5), 'ab...')

// ---------------------------------------------------------------------------

DBG("ts2js(tsCode)")

equal(ts2js('const s: string = "abc";'),
		'var s = "abc";')

DBG("ts2ast(tsCode)", "pprintAST(ast)")

equal(pprintAST(ts2ast('test/typescript/test2.ts')), s`SourceFile - 'const func1 = (str: string): ...'
	FirstStatement - 'const func1 = (str: string): ...'
		VariableDeclarationList - 'const func1 = (str: string): ...'
			VariableDeclaration - 'func1 = (str: string): boolea...'
				Identifier - 'func1'
				ArrowFunction - '(str: string): boolean =>\\n\tr...'
					Parameter - 'str: string'
						Identifier - 'str'
						StringKeyword - 'string'
					BooleanKeyword - 'boolean'
					EqualsGreaterThanToken - '=>'
					Block - 'return true'
						ReturnStatement - 'return true'
							TrueKeyword - 'true'
	EndOfFileToken - ''`)


//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGVzdC90eXBlc2NyaXB0LmxpYi50ZXN0LmNpdmV0LnRzeCIsInNvdXJjZXMiOlsidGVzdC90eXBlc2NyaXB0LmxpYi50ZXN0LmNpdmV0Il0sIm1hcHBpbmdzIjoiO0FBQUEsNEJBQTJCO0FBQzNCLEFBQUE7QUFDQSxBQUFBLE1BQU0sQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLElBQUksQ0FBQyxZQUFZO0FBQ3JDLEFBQUEsQUFBQSxNQUFNLENBQUMsQ0FBQztBQUNSLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxtQkFBbUIsQ0FBQztBQUN2QyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsOEJBQThCO0FBQ3RDLEFBQUEsQUFBQSxNQUFNLENBQUMsQ0FBQztBQUNSLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsSUFBSSxDQUFDO0FBQzNDLENBQUMsS0FBSyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQ3hCO0FBQ0EsQ0FBQyxNQUFNLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxTQUFTLENBQUM7QUFDMUQsQ0FBQyxPQUFPLENBQUMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxRQUFRLENBQUM7QUFDbEMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLHlCQUF5QjtBQUNqQyxBQUFBLEFBQUEsTUFBTSxDQUFDLENBQUM7QUFDUixDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLE1BQU0sQ0FBQztBQUNyRCxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsNkJBQTZCO0FBQ3JDLEFBQUE7QUFDQSxBQUFBLEFBQUssTUFBTCxLQUFLLENB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QUFBO0FBQ3RDLEFBQUE7QUFDQSxBQUFBLEFBQUEsS0FBSyxDQUFBLEFBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQywwQkFBMEIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUc7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFFQyxDQUFHLENBQUE7QUFDSjtBQUNBIiwibmFtZXMiOltdLCJzb3VyY2VzQ29udGVudCI6WyIjIHR5cGVzY3JpcHQubGliLnRlc3QuY2l2ZXRcblxuaW1wb3J0IHtTb3VyY2VGaWxlfSBmcm9tICd0eXBlc2NyaXB0J1xuaW1wb3J0IHtcblx0YWRkRnVuY3Rpb25OYW1lcywgcmVtb3ZlRnVuY3Rpb25OYW1lcyxcblx0fSBmcm9tICcuLi9zcmMvbGliL3R5cGVzY3JpcHQubGliLnRzJ1xuaW1wb3J0IHtcblx0Z2V0Q21kQXJncywgREJHLCBpc0hhc2gsIHNldERpclRyZWUsIHBhc3MsXG5cdHNsdXJwLCB3aXRoRXh0LCBvLCBzLCB0XG5cblx0dHMyYXN0LCB0czJqcywgYXN0MnRzLCBhc3QyanMsIHR5cGVDaGVja0ZpbGVzLCBwcHJpbnRBU1QsXG5cdGdldENvZGUsIG5vcm1hbGl6ZUNvZGUsIHRydW5jU3RyLFxuXHR9IGZyb20gJy4uL3NyYy9saWIvdXRpbHMubGliLnRzJ1xuaW1wb3J0IHtcblx0ZXF1YWwsIGxpa2UsIHN1Y2NlZWRzLCBmYWlscywgdHJ1dGh5LCBmYWxzeSwgaXNUeXBlLFxuXHR9IGZyb20gJy4uL3NyYy9saWIvdW5pdC10ZXN0LmxpYi50cydcblxuaEFyZ3MgOj0gZ2V0Q21kQXJncygpXG5cbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbnNldHVwIDo9ICgpOiB2b2lkID0+XG5cblx0REJHIFwic2V0RGlyVHJlZSgpXCJcblxuXHRzZXREaXJUcmVlICd0ZXN0L3R5cGVzY3JpcHQnLCBcIlwiXCJcblx0XHR0ZXN0LnRzXG5cdFx0XHRjb25zdCBzdHI6IHN0cmluZyA9ICdhYmMnXG5cdFx0dGVzdDIudHNcblx0XHRcdGNvbnN0IGZ1bmMxID0gKHN0cjogc3RyaW5nKTogYm9vbGVhbiA9PlxuXHRcdFx0XHRyZXR1cm4gdHJ1ZVxuXHRcdFwiXCJcIlxuXG5zZXR1cCgpXG5cbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbkRCRyBcImdldENvZGUoc3RyKVwiXG5cbmVxdWFsIGdldENvZGUoJ2xldCB4ID0gNDI7JyksICdsZXQgeCA9IDQyOydcbmVxdWFsIGdldENvZGUoJ3Rlc3QvdHlwZXNjcmlwdC90ZXN0LnRzJyksIFwiXCJcIlxuXHRjb25zdCBzdHI6IHN0cmluZyA9ICdhYmMnXG5cdFwiXCJcIlxuXG5EQkcgXCJhZGRGdW5jdGlvbk5hbWVzKGNvZGUpXCJcblxuKCgpID0+XG5cdHN0cjEgOj0gXCJcIlwiXG5cdFx0ZnVuY3Rpb24qKGxpbmUpIHtcblx0XHRcdHlpZWxkIHtcblx0XHRcdFx0a2luZDogJ2xpbmUnLFxuXHRcdFx0XHRzdHI6IGxpbmVcblx0XHRcdFx0fTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0XCJcIlwiXG5cblx0c3RyMiA6PSBcIlwiXCJcblx0XHRmdW5jdGlvbihsaW5lKSB7XG5cdFx0ICByZXR1cm4gNDI7XG5cdFx0fVxuXHRcdFwiXCJcIlxuXHRzdHIzIDo9IFwiI3tzdHIxfVxcbiN7c3RyMn1cIlxuXG5cdGVxdWFsIGFkZEZ1bmN0aW9uTmFtZXMoc3RyMSksIFwiXCJcIlxuXHRcdGZ1bmN0aW9uKiBfX2R1bW15OTkobGluZSkge1xuXHRcdFx0eWllbGQge1xuXHRcdFx0XHRraW5kOiAnbGluZScsXG5cdFx0XHRcdHN0cjogbGluZVxuXHRcdFx0XHR9O1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRcIlwiXCJcblx0ZXF1YWwgYWRkRnVuY3Rpb25OYW1lcyhzdHIyKSwgXCJcIlwiXG5cdFx0ZnVuY3Rpb24gX19kdW1teTk5KGxpbmUpIHtcblx0XHQgIHJldHVybiA0Mjtcblx0XHR9XG5cdFx0XCJcIlwiXG5cdGVxdWFsIGFkZEZ1bmN0aW9uTmFtZXMoc3RyMyksIFwiXCJcIlxuXHRcdGZ1bmN0aW9uKiBfX2R1bW15OTkobGluZSkge1xuXHRcdFx0eWllbGQge1xuXHRcdFx0XHRraW5kOiAnbGluZScsXG5cdFx0XHRcdHN0cjogbGluZVxuXHRcdFx0XHR9O1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRmdW5jdGlvbiBfX2R1bW15MTAwKGxpbmUpIHtcblx0XHQgIHJldHVybiA0Mjtcblx0XHR9XG5cdFx0XCJcIlwiXG5cdCkoKVxuXG5EQkcgXCJyZW1vdmVGdW5jdGlvbk5hbWVzKGNvZGUpXCJcblxuZXF1YWwgcmVtb3ZlRnVuY3Rpb25OYW1lcyhcImZ1bmN0aW9uIF9fZHVtbXk5OTk5KFwiKSxcblx0XCJmdW5jdGlvbiAoXCJcbmVxdWFsIHJlbW92ZUZ1bmN0aW9uTmFtZXMoXCJmdW5jdGlvbiogX19kdW1teTk5OTkoXCIpLFxuXHRcImZ1bmN0aW9uKiAoXCJcblxuREJHIFwibm9ybWFsaXplQ29kZShjb2RlKVwiXG5cbmVxdWFsIG5vcm1hbGl6ZUNvZGUoJyAgbGV0IHggID0gIDQyOycpLCAnbGV0IHg9NDI7J1xuZXF1YWwgbm9ybWFsaXplQ29kZSgnYSAgYiAgYycsICcudHh0JyksICdhIGIgYydcblxuKCgpID0+XG5cdGZ1bmMgOj0gKHN0cjogc3RyaW5nKTogYm9vbGVhbiA9PlxuXHRcdC8vIC0tLSBqdXN0IHJldHVybiBhIHRydWUgdmFsdWVcblx0XHRjb25zdCBzOiBzdHJpbmcgPSAnYWJjZGUnXG5cdFx0cmV0dXJuIHRydWVcblxuXHRlcXVhbCBub3JtYWxpemVDb2RlKGZ1bmMudG9TdHJpbmcoKSksXG5cdFx0XCJzdHI9Pntjb25zdCBzPVxcXCJhYmNkZVxcXCI7cmV0dXJuIHRydWV9O1wiXG5cdCkoKVxuXG5EQkcgXCJ0cnVuY1N0cihzdHIsIGxlbilcIlxuXG5lcXVhbCB0cnVuY1N0cignYWJjJywgMTIpLCAnYWJjJ1xuZXF1YWwgdHJ1bmNTdHIoJ2FiY2RlZmcnLCA1KSwgJ2FiLi4uJ1xuXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5EQkcgXCJ0czJqcyh0c0NvZGUpXCJcblxuZXF1YWwgdHMyanMoJ2NvbnN0IHM6IHN0cmluZyA9IFwiYWJjXCI7JyksXG5cdFx0J3ZhciBzID0gXCJhYmNcIjsnXG5cbkRCRyBcInRzMmFzdCh0c0NvZGUpXCIsIFwicHByaW50QVNUKGFzdClcIlxuXG5lcXVhbCBwcHJpbnRBU1QodHMyYXN0KCd0ZXN0L3R5cGVzY3JpcHQvdGVzdDIudHMnKSksIHNcIlwiXCJcblx0U291cmNlRmlsZSAtICdjb25zdCBmdW5jMSA9IChzdHI6IHN0cmluZyk6IC4uLidcblx0XHRGaXJzdFN0YXRlbWVudCAtICdjb25zdCBmdW5jMSA9IChzdHI6IHN0cmluZyk6IC4uLidcblx0XHRcdFZhcmlhYmxlRGVjbGFyYXRpb25MaXN0IC0gJ2NvbnN0IGZ1bmMxID0gKHN0cjogc3RyaW5nKTogLi4uJ1xuXHRcdFx0XHRWYXJpYWJsZURlY2xhcmF0aW9uIC0gJ2Z1bmMxID0gKHN0cjogc3RyaW5nKTogYm9vbGVhLi4uJ1xuXHRcdFx0XHRcdElkZW50aWZpZXIgLSAnZnVuYzEnXG5cdFx0XHRcdFx0QXJyb3dGdW5jdGlvbiAtICcoc3RyOiBzdHJpbmcpOiBib29sZWFuID0+XFxcXG5cXHRyLi4uJ1xuXHRcdFx0XHRcdFx0UGFyYW1ldGVyIC0gJ3N0cjogc3RyaW5nJ1xuXHRcdFx0XHRcdFx0XHRJZGVudGlmaWVyIC0gJ3N0cidcblx0XHRcdFx0XHRcdFx0U3RyaW5nS2V5d29yZCAtICdzdHJpbmcnXG5cdFx0XHRcdFx0XHRCb29sZWFuS2V5d29yZCAtICdib29sZWFuJ1xuXHRcdFx0XHRcdFx0RXF1YWxzR3JlYXRlclRoYW5Ub2tlbiAtICc9Pidcblx0XHRcdFx0XHRcdEJsb2NrIC0gJ3JldHVybiB0cnVlJ1xuXHRcdFx0XHRcdFx0XHRSZXR1cm5TdGF0ZW1lbnQgLSAncmV0dXJuIHRydWUnXG5cdFx0XHRcdFx0XHRcdFx0VHJ1ZUtleXdvcmQgLSAndHJ1ZSdcblx0XHRFbmRPZkZpbGVUb2tlbiAtICcnXG5cdFwiXCJcIlxuXG4iXX0=