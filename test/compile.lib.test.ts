"use strict";
// compile.lib.test.civet

import {
	undef, defined, notdefined, o, LOG, DBG,
	isArray, isFunction, relpath, getCmdArgs,
	removeFilesExcept, execCmd,
	setDirTree, isFile, pathInfo, withExt,
	postProcessor, compilerInfo, compilerConfigHash,
	isPostProcessor, isCompilerInfo, isCompilerFunc,
	testerFunc, compilerFunc,
	isConfigHash, hDefaultConfig,
	userConfigPath, hCompilerConfig, loadCompilerConfig,
	installCmd, uninstallCmd, getPostProcessor,
	compileStatus, compileResult, compileFile,
	getCompilerGlobPattern, allCompilableFiles,
	runUnitTestsFor, runAllUnitTests, getCompilerInfo,
	execCmdSync, cmdSucceeds, rmFile,
	} from '../src/lib/utils.lib.ts'
import {
	equal, like, succeeds, fails, truthy, falsy,
	matches, isType, notType, listLike,
	} from '../src/lib/unit-test.lib.ts'

const hArgs = getCmdArgs()

// ---------------------------------------------------------------------------

const setup = (): void => {

	setDirTree('test/compile', `test1.cielo
	# test1.cielo

	LOG := (str) => console.log str
	LOG "Hello, World!"

test2.civet
	# test2.civet

	LOG := (str) => console.log str
	LOG "Hello, World!"

test3.coffee
	# test3.coffee

	LOG = (str) => console.log str
	LOG "Hello, World!"

graph.dot
	EE -> EO | OE | OO
	EO -> EE
	OE -> EE
	OO -> EE
hello.ts
	console.log("Hello, World!");
comp.config.ts
	import {withExt} from '../../src/lib/utils.lib.ts';
	export default {
		hCompilers: {
			'.test': {
				getOutPath: (path: string) => withExt(path, '.out'),
				tester: () => true,
				compiler: (path: string) => undefined
				}
			},
		hPostProcessors: {}
		}`, o`clear`)
	return
}

setup()

// ---------------------------------------------------------------------------

DBG("type testerFunc")

isType('testerFunc', () => {
	console.log("Hello, World!")
	return true
})

DBG("type compilerFunc")

isType('compilerFunc', (path: string) => {
	console.log(path)
	return
})

DBG("isCompilerFunc(func)")

truthy(isCompilerFunc((path: string) => undef))

DBG("type postProcessor");

(() => {
	const logit = (hInfo: pathInfo) => {
		console.log("done")
		return
	}
	isType('postProcessor', logit)
}
	)()

DBG("isPostProcessor(func)")

truthy(isPostProcessor((hInfo: pathInfo) => undef))

DBG("type compilerInfo")

isType('compilerInfo', {
	tester: () => true,
	compiler: (path: string) => { return },
	getOutPath: (path: string) => { return 'temp.ts' }
	})

DBG("isCompilerInfo(h)")

truthy(isCompilerInfo({
	tester: () => true,
	compiler: (path: string) => { return },
	getOutPath: (path: string) => { return 'temp.ts' }
	}))

DBG("type compilerConfigHash")

isType('compilerConfigHash', {
	hCompilers: {},
	hPostProcessors: {}
	})

DBG("isConfigHash()")

truthy(isConfigHash({
	hCompilers: {
		'.dot': {
			getOutPath: (path: string) => withExt(path, '.js'),
			tester: () => true,
			compiler: () => 'result'
			},
		'.cielo': {
			getOutPath: (path: string) => withExt(path, '.js'),
			tester: () => true,
			compiler: () => 'result'
			},
		'.civet': {
			getOutPath: (path: string) => withExt(path, '.js'),
			tester: () => true,
			compiler: () => 'result'
			}
		},
	hPostProcessors: {
		'test': (path: string) => undef,
		'lib': (path: string) => undef,
		'cmd': (path: string) => undef
		}
	}))

DBG("const hDefaultConfig")

truthy(isConfigHash(hDefaultConfig))

DBG("const hCompilerConfig")

equal(hCompilerConfig, hDefaultConfig)
truthy(isConfigHash(hCompilerConfig))

DBG("loadCompilerConfig(path)")

truthy(isConfigHash(await loadCompilerConfig('test/compile/comp.config.ts')))

DBG("installCmd()", "uninstallCmd()")

await installCmd('test/compile/hello.ts', 'hello')
const hResult = await execCmd('hello', [], o`collect`)
const str = hResult.stdout
equal(str, "Hello, World!\n")
await uninstallCmd('hello')

DBG("getCompilerInfo()")

truthy(isCompilerInfo(getCompilerInfo('.dot')))

DBG("getPostProcessor()");

(() => {
	const pp = getPostProcessor('test')
	truthy(defined(pp))
	truthy(isFunction(pp))
}
	)();

(() => {
	const pp = getPostProcessor('lib')
	truthy(defined(pp))
	truthy(isFunction(pp))
}
	)();

(() => {
	const pp = getPostProcessor('cmd')
	truthy(defined(pp))
	truthy(isFunction(pp))
}
	)()

DBG("type compileStatus")

isType('compileStatus', 'temp')
isType('compileStatus', 'exists')
isType('compileStatus', 'compiled')
notType('compileStatus', 'dummy')

DBG("type compileResult")

isType('compileResult', {
	status: 'compiled',
	path: 'test/temp.ts'

	})

DBG("compileFile()");

(() => {
	const hResult = compileFile('test/compile/test1.cielo', o`nopp`)
}
	// truthy isFile('test/compile/test1.civet')
	)()

DBG("getCompilerGlobPattern()")

equal(getCompilerGlobPattern(), "**/*{.svelte,.dot,.cielo,.civet}")

DBG("const userConfigPath");

(() => {
	matches(userConfigPath, /compiler\.config\.ts/)
	const dir = Deno.cwd().replaceAll('\\','/')
	equal(userConfigPath, `${dir}/compiler.config.ts`)
}
	)()

DBG("allCompilableFiles()");

(() => {
	const lInfo = Array.from(allCompilableFiles(o`root=test/compile`))
	const lFiles = lInfo.map((h) => h.fileName)
	equal(lFiles, [
		'graph.dot',
		'test1.cielo',
		'test2.civet'
		])
}
	)()

DBG("runUnitTestsFor(stub)");

(() => {
	const lResults = Array.from(runUnitTestsFor('llutils.lib'))
	listLike(lResults, [
		{stub: 'llutils.lib', success: true}
		])
}
	)()

DBG("runAllUnitTests()")

succeeds(() => {
	runAllUnitTests()
	return
})

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGVzdC9jb21waWxlLmxpYi50ZXN0LmNpdmV0LnRzeCIsInNvdXJjZXMiOlsidGVzdC9jb21waWxlLmxpYi50ZXN0LmNpdmV0Il0sIm1hcHBpbmdzIjoiO0FBQUEseUJBQXdCO0FBQ3hCLEFBQUE7QUFDQSxBQUFBLE1BQU0sQ0FBQyxDQUFDO0FBQ1IsQ0FBQyxLQUFLLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUM7QUFDekMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxVQUFVLENBQUM7QUFDMUMsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLE9BQU8sQ0FBQztBQUM1QixDQUFDLFVBQVUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLE9BQU8sQ0FBQztBQUN2QyxDQUFDLGFBQWEsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLGtCQUFrQixDQUFDO0FBQ2pELENBQUMsZUFBZSxDQUFDLENBQUMsY0FBYyxDQUFDLENBQUMsY0FBYyxDQUFDO0FBQ2pELENBQUMsVUFBVSxDQUFDLENBQUMsWUFBWSxDQUFDO0FBQzFCLENBQUMsWUFBWSxDQUFDLENBQUMsY0FBYyxDQUFDO0FBQzlCLENBQUMsY0FBYyxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsa0JBQWtCLENBQUM7QUFDckQsQ0FBQyxVQUFVLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQztBQUM1QyxDQUFDLGFBQWEsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxDQUFDLFdBQVcsQ0FBQztBQUMzQyxDQUFDLHNCQUFzQixDQUFDLENBQUMsa0JBQWtCLENBQUM7QUFDNUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxlQUFlLENBQUM7QUFDbkQsQ0FBQyxXQUFXLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxNQUFNLENBQUM7QUFD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QyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUE7QUFDckQsQUFBQSxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUE7QUFDckIsQUFBQSxHQUFHLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxRQUFRO0FBQzNCLEdBQUcsQ0FBQyxDQUFBO0FBQ0osQUFBQSxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUM7QUFDYixBQUFBLEdBQUcsVUFBVSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFBO0FBQ3JELEFBQUEsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFBO0FBQ3JCLEFBQUEsR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsUUFBUTtBQUMzQixHQUFHLENBQUM7QUFDSixFQUFFLENBQUMsQ0FBQTtBQUNILEFBQUEsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDO0FBQ25CLEFBQUEsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUE7QUFDakMsQUFBQSxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQTtBQUNoQyxBQUFBLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsS0FBSztBQUNoQyxFQUFFLENBQUM7QUFDSCxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQ0gsQUFBQTtBQUNBLEFBQUEsQUFBQSxHQUFHLENBQUEsQUFBQyxzQkFBc0IsQ0FBQTtBQUMxQixBQUFBO0FBQ0Es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dUIsQyxDQUFBO0FBQzNCLEFBQUE7QUFDQSxBQUFBLEFBQUEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUEsQ0FBQTtBQUNOLEFBQUEsQ0FBUyxNQUFSLFFBQVEsQ0FBQyxDQUFFLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsYUFBYSxDQUFDLENBQUM7QUFDdkQsQUFBQSxDQUFDLFFBQVEsQ0FBQSxBQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7QUFDckIsQUFBQSxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsYUFBYSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDO0FBQ3RDLEFBQUEsRUFBRSxDQUFDLEM7QUFBQSxDQUFBO0FBQ0gsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNKLEFBQUE7QUFDQSxBQUFBLEFBQUEsR0FBRyxDQUFBLEFBQUMsbUJBQW1CLENBQUE7QUFDdkIsQUFBQTtBQUNBLEFBQUEsQUFBQSxRQUFRLENBQUEsQUFBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUEsQ0FBQTtBQUNkLEFBQUEsQ0FBQyxlQUFlLENBQUMsQ0FBQztBQUNsQixBQUFBLENBQUMsTTtBQUFNLENBQUEsQ0FBQTtBQUNQIiwibmFtZXMiOltdLCJzb3VyY2VzQ29udGVudCI6WyIjIGNvbXBpbGUubGliLnRlc3QuY2l2ZXRcblxuaW1wb3J0IHtcblx0dW5kZWYsIGRlZmluZWQsIG5vdGRlZmluZWQsIG8sIExPRywgREJHLFxuXHRpc0FycmF5LCBpc0Z1bmN0aW9uLCByZWxwYXRoLCBnZXRDbWRBcmdzLFxuXHRyZW1vdmVGaWxlc0V4Y2VwdCwgZXhlY0NtZCxcblx0c2V0RGlyVHJlZSwgaXNGaWxlLCBwYXRoSW5mbywgd2l0aEV4dCxcblx0cG9zdFByb2Nlc3NvciwgY29tcGlsZXJJbmZvLCBjb21waWxlckNvbmZpZ0hhc2gsXG5cdGlzUG9zdFByb2Nlc3NvciwgaXNDb21waWxlckluZm8sIGlzQ29tcGlsZXJGdW5jLFxuXHR0ZXN0ZXJGdW5jLCBjb21waWxlckZ1bmMsXG5cdGlzQ29uZmlnSGFzaCwgaERlZmF1bHRDb25maWcsXG5cdHVzZXJDb25maWdQYXRoLCBoQ29tcGlsZXJDb25maWcsIGxvYWRDb21waWxlckNvbmZpZyxcblx0aW5zdGFsbENtZCwgdW5pbnN0YWxsQ21kLCBnZXRQb3N0UHJvY2Vzc29yLFxuXHRjb21waWxlU3RhdHVzLCBjb21waWxlUmVzdWx0LCBjb21waWxlRmlsZSxcblx0Z2V0Q29tcGlsZXJHbG9iUGF0dGVybiwgYWxsQ29tcGlsYWJsZUZpbGVzLFxuXHRydW5Vbml0VGVzdHNGb3IsIHJ1bkFsbFVuaXRUZXN0cywgZ2V0Q29tcGlsZXJJbmZvLFxuXHRleGVjQ21kU3luYywgY21kU3VjY2VlZHMsIHJtRmlsZSxcblx0fSBmcm9tICcuLi9zcmMvbGliL3V0aWxzLmxpYi50cydcbmltcG9ydCB7XG5cdGVxdWFsLCBsaWtlLCBzdWNjZWVkcywgZmFpbHMsIHRydXRoeSwgZmFsc3ksXG5cdG1hdGNoZXMsIGlzVHlwZSwgbm90VHlwZSwgbGlzdExpa2UsXG5cdH0gZnJvbSAnLi4vc3JjL2xpYi91bml0LXRlc3QubGliLnRzJ1xuXG5oQXJncyA6PSBnZXRDbWRBcmdzKClcblxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuc2V0dXAgOj0gKCk6IHZvaWQgPT5cblxuXHRzZXREaXJUcmVlKCd0ZXN0L2NvbXBpbGUnLCBcIlwiXCJcblx0XHR0ZXN0MS5jaWVsb1xuXHRcdFx0IyB0ZXN0MS5jaWVsb1xuXG5cdFx0XHRMT0cgOj0gKHN0cikgPT4gY29uc29sZS5sb2cgc3RyXG5cdFx0XHRMT0cgXCJIZWxsbywgV29ybGQhXCJcblxuXHRcdHRlc3QyLmNpdmV0XG5cdFx0XHQjIHRlc3QyLmNpdmV0XG5cblx0XHRcdExPRyA6PSAoc3RyKSA9PiBjb25zb2xlLmxvZyBzdHJcblx0XHRcdExPRyBcIkhlbGxvLCBXb3JsZCFcIlxuXG5cdFx0dGVzdDMuY29mZmVlXG5cdFx0XHQjIHRlc3QzLmNvZmZlZVxuXG5cdFx0XHRMT0cgPSAoc3RyKSA9PiBjb25zb2xlLmxvZyBzdHJcblx0XHRcdExPRyBcIkhlbGxvLCBXb3JsZCFcIlxuXG5cdFx0Z3JhcGguZG90XG5cdFx0XHRFRSAtPiBFTyB8IE9FIHwgT09cblx0XHRcdEVPIC0+IEVFXG5cdFx0XHRPRSAtPiBFRVxuXHRcdFx0T08gLT4gRUVcblx0XHRoZWxsby50c1xuXHRcdFx0Y29uc29sZS5sb2coXCJIZWxsbywgV29ybGQhXCIpO1xuXHRcdGNvbXAuY29uZmlnLnRzXG5cdFx0XHRpbXBvcnQge3dpdGhFeHR9IGZyb20gJy4uLy4uL3NyYy9saWIvdXRpbHMubGliLnRzJztcblx0XHRcdGV4cG9ydCBkZWZhdWx0IHtcblx0XHRcdFx0aENvbXBpbGVyczoge1xuXHRcdFx0XHRcdCcudGVzdCc6IHtcblx0XHRcdFx0XHRcdGdldE91dFBhdGg6IChwYXRoOiBzdHJpbmcpID0+IHdpdGhFeHQocGF0aCwgJy5vdXQnKSxcblx0XHRcdFx0XHRcdHRlc3RlcjogKCkgPT4gdHJ1ZSxcblx0XHRcdFx0XHRcdGNvbXBpbGVyOiAocGF0aDogc3RyaW5nKSA9PiB1bmRlZmluZWRcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRoUG9zdFByb2Nlc3NvcnM6IHt9XG5cdFx0XHRcdH1cblx0XHRcIlwiXCIsIG8nY2xlYXInKVxuXHRyZXR1cm5cblxuc2V0dXAoKVxuXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5EQkcgXCJ0eXBlIHRlc3RlckZ1bmNcIlxuXG5pc1R5cGUgJ3Rlc3RlckZ1bmMnLCAoKSA9PlxuXHRjb25zb2xlLmxvZyBcIkhlbGxvLCBXb3JsZCFcIlxuXHRyZXR1cm4gdHJ1ZVxuXG5EQkcgXCJ0eXBlIGNvbXBpbGVyRnVuY1wiXG5cbmlzVHlwZSAnY29tcGlsZXJGdW5jJywgKHBhdGg6IHN0cmluZykgPT5cblx0Y29uc29sZS5sb2cgcGF0aFxuXHRyZXR1cm5cblxuREJHIFwiaXNDb21waWxlckZ1bmMoZnVuYylcIlxuXG50cnV0aHkgaXNDb21waWxlckZ1bmMoKHBhdGg6IHN0cmluZykgPT4gdW5kZWYpXG5cbkRCRyBcInR5cGUgcG9zdFByb2Nlc3NvclwiXG5cbigoKSA9PlxuXHRsb2dpdCA6PSAoaEluZm86IHBhdGhJbmZvKSA9PlxuXHRcdGNvbnNvbGUubG9nIFwiZG9uZVwiXG5cdFx0cmV0dXJuXG5cdGlzVHlwZSAncG9zdFByb2Nlc3NvcicsIGxvZ2l0XG5cdCkoKVxuXG5EQkcgXCJpc1Bvc3RQcm9jZXNzb3IoZnVuYylcIlxuXG50cnV0aHkgaXNQb3N0UHJvY2Vzc29yKChoSW5mbzogcGF0aEluZm8pID0+IHVuZGVmKVxuXG5EQkcgXCJ0eXBlIGNvbXBpbGVySW5mb1wiXG5cbmlzVHlwZSAnY29tcGlsZXJJbmZvJywge1xuXHR0ZXN0ZXI6ICgpID0+IHRydWUsXG5cdGNvbXBpbGVyOiAocGF0aDogc3RyaW5nKSA9PiByZXR1cm4sXG5cdGdldE91dFBhdGg6IChwYXRoOiBzdHJpbmcpID0+IHJldHVybiAndGVtcC50cydcblx0fVxuXG5EQkcgXCJpc0NvbXBpbGVySW5mbyhoKVwiXG5cbnRydXRoeSBpc0NvbXBpbGVySW5mbyh7XG5cdHRlc3RlcjogKCkgPT4gdHJ1ZSxcblx0Y29tcGlsZXI6IChwYXRoOiBzdHJpbmcpID0+IHJldHVybixcblx0Z2V0T3V0UGF0aDogKHBhdGg6IHN0cmluZykgPT4gcmV0dXJuICd0ZW1wLnRzJ1xuXHR9KVxuXG5EQkcgXCJ0eXBlIGNvbXBpbGVyQ29uZmlnSGFzaFwiXG5cbmlzVHlwZSAnY29tcGlsZXJDb25maWdIYXNoJywge1xuXHRoQ29tcGlsZXJzOiB7fVxuXHRoUG9zdFByb2Nlc3NvcnM6IHt9XG5cdH1cblxuREJHIFwiaXNDb25maWdIYXNoKClcIlxuXG50cnV0aHkgaXNDb25maWdIYXNoKHtcblx0aENvbXBpbGVyczoge1xuXHRcdCcuZG90Jzoge1xuXHRcdFx0Z2V0T3V0UGF0aDogKHBhdGg6IHN0cmluZykgPT4gd2l0aEV4dChwYXRoLCAnLmpzJylcblx0XHRcdHRlc3RlcjogKCkgPT4gdHJ1ZVxuXHRcdFx0Y29tcGlsZXI6ICgpID0+ICdyZXN1bHQnXG5cdFx0XHR9XG5cdFx0Jy5jaWVsbyc6IHtcblx0XHRcdGdldE91dFBhdGg6IChwYXRoOiBzdHJpbmcpID0+IHdpdGhFeHQocGF0aCwgJy5qcycpXG5cdFx0XHR0ZXN0ZXI6ICgpID0+IHRydWVcblx0XHRcdGNvbXBpbGVyOiAoKSA9PiAncmVzdWx0J1xuXHRcdFx0fVxuXHRcdCcuY2l2ZXQnOiB7XG5cdFx0XHRnZXRPdXRQYXRoOiAocGF0aDogc3RyaW5nKSA9PiB3aXRoRXh0KHBhdGgsICcuanMnKVxuXHRcdFx0dGVzdGVyOiAoKSA9PiB0cnVlXG5cdFx0XHRjb21waWxlcjogKCkgPT4gJ3Jlc3VsdCdcblx0XHRcdH1cblx0XHR9XG5cdGhQb3N0UHJvY2Vzc29yczoge1xuXHRcdCd0ZXN0JzogKHBhdGg6IHN0cmluZykgPT4gdW5kZWZcblx0XHQnbGliJzogKHBhdGg6IHN0cmluZykgPT4gdW5kZWZcblx0XHQnY21kJzogKHBhdGg6IHN0cmluZykgPT4gdW5kZWZcblx0XHR9XG5cdH0pXG5cbkRCRyBcImNvbnN0IGhEZWZhdWx0Q29uZmlnXCJcblxudHJ1dGh5IGlzQ29uZmlnSGFzaChoRGVmYXVsdENvbmZpZylcblxuREJHIFwiY29uc3QgaENvbXBpbGVyQ29uZmlnXCJcblxuZXF1YWwgaENvbXBpbGVyQ29uZmlnLCBoRGVmYXVsdENvbmZpZ1xudHJ1dGh5IGlzQ29uZmlnSGFzaChoQ29tcGlsZXJDb25maWcpXG5cbkRCRyBcImxvYWRDb21waWxlckNvbmZpZyhwYXRoKVwiXG5cbnRydXRoeSBpc0NvbmZpZ0hhc2goYXdhaXQgbG9hZENvbXBpbGVyQ29uZmlnKCd0ZXN0L2NvbXBpbGUvY29tcC5jb25maWcudHMnKSlcblxuREJHIFwiaW5zdGFsbENtZCgpXCIsIFwidW5pbnN0YWxsQ21kKClcIlxuXG5hd2FpdCBpbnN0YWxsQ21kICd0ZXN0L2NvbXBpbGUvaGVsbG8udHMnLCAnaGVsbG8nXG5oUmVzdWx0IDo9IGF3YWl0IGV4ZWNDbWQgJ2hlbGxvJywgW10sIG8nY29sbGVjdCdcbnN0ciA6PSBoUmVzdWx0LnN0ZG91dFxuZXF1YWwgc3RyLCBcIkhlbGxvLCBXb3JsZCFcXG5cIlxuYXdhaXQgdW5pbnN0YWxsQ21kICdoZWxsbydcblxuREJHIFwiZ2V0Q29tcGlsZXJJbmZvKClcIlxuXG50cnV0aHkgaXNDb21waWxlckluZm8oZ2V0Q29tcGlsZXJJbmZvKCcuZG90JykpXG5cbkRCRyBcImdldFBvc3RQcm9jZXNzb3IoKVwiXG5cbigoKSA9PlxuXHRwcCA6PSBnZXRQb3N0UHJvY2Vzc29yKCd0ZXN0Jylcblx0dHJ1dGh5IGRlZmluZWQocHApXG5cdHRydXRoeSBpc0Z1bmN0aW9uKHBwKVxuXHQpKClcblxuKCgpID0+XG5cdHBwIDo9IGdldFBvc3RQcm9jZXNzb3IoJ2xpYicpXG5cdHRydXRoeSBkZWZpbmVkKHBwKVxuXHR0cnV0aHkgaXNGdW5jdGlvbihwcClcblx0KSgpXG5cbigoKSA9PlxuXHRwcCA6PSBnZXRQb3N0UHJvY2Vzc29yKCdjbWQnKVxuXHR0cnV0aHkgZGVmaW5lZChwcClcblx0dHJ1dGh5IGlzRnVuY3Rpb24ocHApXG5cdCkoKVxuXG5EQkcgXCJ0eXBlIGNvbXBpbGVTdGF0dXNcIlxuXG5pc1R5cGUgJ2NvbXBpbGVTdGF0dXMnLCAndGVtcCdcbmlzVHlwZSAnY29tcGlsZVN0YXR1cycsICdleGlzdHMnXG5pc1R5cGUgJ2NvbXBpbGVTdGF0dXMnLCAnY29tcGlsZWQnXG5ub3RUeXBlICdjb21waWxlU3RhdHVzJywgJ2R1bW15J1xuXG5EQkcgXCJ0eXBlIGNvbXBpbGVSZXN1bHRcIlxuXG5pc1R5cGUgJ2NvbXBpbGVSZXN1bHQnLCB7XG5cdHN0YXR1czogJ2NvbXBpbGVkJ1xuXHRwYXRoOiAndGVzdC90ZW1wLnRzJ1xuXG5cdH1cblxuREJHIFwiY29tcGlsZUZpbGUoKVwiXG5cbigoKSA9PlxuXHRoUmVzdWx0IDo9IGNvbXBpbGVGaWxlKCd0ZXN0L2NvbXBpbGUvdGVzdDEuY2llbG8nLCBvJ25vcHAnKVxuXHQjIHRydXRoeSBpc0ZpbGUoJ3Rlc3QvY29tcGlsZS90ZXN0MS5jaXZldCcpXG5cdCkoKVxuXG5EQkcgXCJnZXRDb21waWxlckdsb2JQYXR0ZXJuKClcIlxuXG5lcXVhbCBnZXRDb21waWxlckdsb2JQYXR0ZXJuKCksIFwiKiovKnsuc3ZlbHRlLC5kb3QsLmNpZWxvLC5jaXZldH1cIlxuXG5EQkcgXCJjb25zdCB1c2VyQ29uZmlnUGF0aFwiXG5cbigoKSA9PlxuXHRtYXRjaGVzIHVzZXJDb25maWdQYXRoLCAvY29tcGlsZXJcXC5jb25maWdcXC50cy9cblx0ZGlyIDo9IERlbm8uY3dkKCkucmVwbGFjZUFsbCgnXFxcXCcsJy8nKVxuXHRlcXVhbCB1c2VyQ29uZmlnUGF0aCwgXCIje2Rpcn0vY29tcGlsZXIuY29uZmlnLnRzXCJcblx0KSgpXG5cbkRCRyBcImFsbENvbXBpbGFibGVGaWxlcygpXCJcblxuKCgpID0+XG5cdGxJbmZvIDo9IEFycmF5LmZyb20oYWxsQ29tcGlsYWJsZUZpbGVzKG8ncm9vdD10ZXN0L2NvbXBpbGUnKSlcblx0bEZpbGVzIDo9IGxJbmZvLm1hcCgoaCkgPT4gaC5maWxlTmFtZSlcblx0ZXF1YWwgbEZpbGVzLCBbXG5cdFx0J2dyYXBoLmRvdCdcblx0XHQndGVzdDEuY2llbG8nXG5cdFx0J3Rlc3QyLmNpdmV0J1xuXHRcdF1cblx0KSgpXG5cbkRCRyBcInJ1blVuaXRUZXN0c0ZvcihzdHViKVwiXG5cbigoKSA9PlxuXHRsUmVzdWx0cyA6PSBBcnJheS5mcm9tKHJ1blVuaXRUZXN0c0ZvcignbGx1dGlscy5saWInKSlcblx0bGlzdExpa2UgbFJlc3VsdHMsIFtcblx0XHR7c3R1YjogJ2xsdXRpbHMubGliJywgc3VjY2VzczogdHJ1ZX1cblx0XHRdXG5cdCkoKVxuXG5EQkcgXCJydW5BbGxVbml0VGVzdHMoKVwiXG5cbnN1Y2NlZWRzICgpID0+XG5cdHJ1bkFsbFVuaXRUZXN0cygpXG5cdHJldHVyblxuIl19