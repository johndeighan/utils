// v8-module.coffee

import * as lib from '../../src/lib/v8-stack.js'
Object.assign(globalThis, lib)

// ---------------------------------------------------------------------------

export const getBoth = function() {

	return secondFunc('both')
}

// ---------------------------------------------------------------------------

export const getDirect = function() {

	return secondFunc('direct')
}

// ---------------------------------------------------------------------------

export const getOutside = function() {

	return secondFunc('outside')
}

// ---------------------------------------------------------------------------

const secondFunc = function(type) {

	return thirdFunc(type)
}

// ---------------------------------------------------------------------------

const thirdFunc = function(type) {

	// --- direct caller should be 'secondFunc'
	//     outside caller should be the function that called getCaller()
	switch(type) {
		case 'both': {
			return [getMyCaller(), getMyCaller()]
		}
		case 'direct': {
			return getMyCaller()
		}
		case 'outside': {
			return getMyCaller()
		}
		default: {
			croak(`Unknown type: ${type}`)
		}
	}
}

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGVzdC92OC1zdGFjay92OC1tb2R1bGUuY2l2ZXQudHN4Iiwic291cmNlcyI6WyJ0ZXN0L3Y4LXN0YWNrL3Y4LW1vZHVsZS5jaXZldCJdLCJtYXBwaW5ncyI6IkFBQUEsbUJBQWtCO0FBQ2xCLEFBQUE7QUFDQSxBQUFBLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsMkJBQTJCO0FBQ2hELEFBQUEsQUFBQSxNQUFNLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsQ0FBQztBQUM5QixBQUFBO0FBQ0EsQUFBQSw4RUFBNkU7QUFDN0UsQUFBQTtBQUNBLEFBQUEsQUFBQSxNQUFNLENBQVEsTUFBUCxPQUFPLENBQUMsQ0FBRSxDQUFJLFFBQUgsQ0FBQyxDQUFJLENBQUEsQ0FBQTtBQUN2QixBQUFBO0FBQ0EsQUFBQSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsTUFBTSxDO0FBQUMsQ0FBQTtBQUMxQixBQUFBO0FBQ0EsQUFBQSw4RUFBNkU7QUFDN0UsQUFBQTtBQUNBLEFBQUEsQUFBQSxNQUFNLENBQVUsTUFBVCxTQUFTLENBQUMsQ0FBRSxDQUFJLFFBQUgsQ0FBQyxDQUFJLENBQUEsQ0FBQTtBQUN6QixBQUFBO0FBQ0EsQUFBQSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsUUFBUSxDO0FBQUMsQ0FBQTtBQUM1QixBQUFBO0FBQ0EsQUFBQSw4RUFBNkU7QUFDN0UsQUFBQTtBQUNBLEFBQUEsQUFBQSxNQUFNLENBQVcsTUFBVixVQUFVLENBQUMsQ0FBRSxDQUFJLFFBQUgsQ0FBQyxDQUFJLENBQUEsQ0FBQTtBQUMxQixBQUFBO0FBQ0EsQUFBQSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsU0FBUyxDO0FBQUMsQ0FBQTtBQUM3QixBQUFBO0FBQ0EsQUFBQSw4RUFBNkU7QUFDN0UsQUFBQTtBQUNBLEFBQUEsQUFBVSxNQUFWLFVBQVUsQ0FBQyxDQUFFLENBQVEsUUFBUCxDQUFDLElBQUksQ0FBSSxDQUFBLENBQUE7QUFDdkIsQUFBQTtBQUNBLEFBQUEsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLElBQUksQztBQUFDLENBQUE7QUFDdkIsQUFBQTtBQUNBLEFBQUEsOEVBQTZFO0FBQzdFLEFBQUE7QUFDQSxBQUFBLEFBQVMsTUFBVCxTQUFTLENBQUMsQ0FBRSxDQUFRLFFBQVAsQ0FBQyxJQUFJLENBQUksQ0FBQSxDQUFBO0FBQ3RCLEFBQUE7QUFDQSxBQUFBLENBQUMsMkNBQTBDO0FBQzNDLEFBQUEsQ0FBQyxvRUFBbUU7QUFDcEUsQUFBQSxDQUFDLE1BQU0sQ0FBQSxBQUFDLElBQUksQ0FBQSxDQUFBLENBQUE7QUFDWixBQUFBLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQSxDQUFBLENBQUE7QUFDYixBQUFBLEdBQUcsTUFBTSxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEM7RUFBQyxDQUFBO0FBQ3hDLEFBQUEsRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFBLENBQUEsQ0FBQTtBQUNmLEFBQUEsR0FBRyxNQUFNLENBQUMsV0FBVyxDQUFDLEM7RUFBQyxDQUFBO0FBQ3ZCLEFBQUEsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFBLENBQUEsQ0FBQTtBQUNoQixBQUFBLEdBQUcsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDO0VBQUMsQ0FBQTtBQUN2QixBQUFBLEVBQUUsT0FBSSxDQUFBLENBQUEsQ0FBQTtBQUNOLEFBQUEsR0FBRyxLQUFLLENBQUEsQUFBQyxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDO0VBQUEsQztDQUFBLEM7QUFBQSxDQUFBO0FBQ2hDIiwibmFtZXMiOltdLCJzb3VyY2VzQ29udGVudCI6WyIjIHY4LW1vZHVsZS5jb2ZmZWVcclxuXHJcbmltcG9ydCAqIGFzIGxpYiBmcm9tICcuLi8uLi9zcmMvbGliL3Y4LXN0YWNrLmpzJ1xyXG5PYmplY3QuYXNzaWduKGdsb2JhbFRoaXMsIGxpYilcclxuXHJcbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5leHBvcnQgZ2V0Qm90aCA6PSAoKSAtPlxyXG5cclxuXHRyZXR1cm4gc2Vjb25kRnVuYygnYm90aCcpXHJcblxyXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuZXhwb3J0IGdldERpcmVjdCA6PSAoKSAtPlxyXG5cclxuXHRyZXR1cm4gc2Vjb25kRnVuYygnZGlyZWN0JylcclxuXHJcbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5leHBvcnQgZ2V0T3V0c2lkZSA6PSAoKSAtPlxyXG5cclxuXHRyZXR1cm4gc2Vjb25kRnVuYygnb3V0c2lkZScpXHJcblxyXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuc2Vjb25kRnVuYyA6PSAodHlwZSkgLT5cclxuXHJcblx0cmV0dXJuIHRoaXJkRnVuYyh0eXBlKVxyXG5cclxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbnRoaXJkRnVuYyA6PSAodHlwZSkgLT5cclxuXHJcblx0IyAtLS0gZGlyZWN0IGNhbGxlciBzaG91bGQgYmUgJ3NlY29uZEZ1bmMnXHJcblx0IyAgICAgb3V0c2lkZSBjYWxsZXIgc2hvdWxkIGJlIHRoZSBmdW5jdGlvbiB0aGF0IGNhbGxlZCBnZXRDYWxsZXIoKVxyXG5cdHN3aXRjaCB0eXBlXHJcblx0XHR3aGVuICdib3RoJ1xyXG5cdFx0XHRyZXR1cm4gW2dldE15Q2FsbGVyKCksIGdldE15Q2FsbGVyKCldXHJcblx0XHR3aGVuICdkaXJlY3QnXHJcblx0XHRcdHJldHVybiBnZXRNeUNhbGxlcigpXHJcblx0XHR3aGVuICdvdXRzaWRlJ1xyXG5cdFx0XHRyZXR1cm4gZ2V0TXlDYWxsZXIoKVxyXG5cdFx0ZWxzZVxyXG5cdFx0XHRjcm9hayBcIlVua25vd24gdHlwZTogI3t0eXBlfVwiXHJcbiJdfQ==